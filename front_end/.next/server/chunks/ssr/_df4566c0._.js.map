{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/gugu-gaga-/front_end/utils/api.ts"],"sourcesContent":["export const API_BASE =\r\n  process.env.NEXT_PUBLIC_API_BASE || \"http://localhost:8000\";\r\nexport const TENANT_HEADER =\r\n  process.env.NEXT_PUBLIC_TENANT_HEADER || \"X-Tenant-ID\";\r\n\r\nconst API_BASE_NORMALIZED = API_BASE.replace(/\\/+$/, \"\");\r\nlet API_BASE_PATH = \"\";\r\ntry {\r\n  const parsed = new URL(API_BASE_NORMALIZED);\r\n  API_BASE_PATH = parsed.pathname.replace(/^\\/+/, \"\").replace(/\\/+$/, \"\");\r\n} catch {\r\n  API_BASE_PATH = \"\";\r\n}\r\n\r\nfunction buildHeaders(\r\n  initHeaders?: HeadersInit,\r\n  tenantId?: string\r\n): HeadersInit {\r\n  const headers: Record<string, string> = {\r\n    ...(initHeaders as Record<string, string>),\r\n  };\r\n  if (tenantId) headers[TENANT_HEADER] = tenantId;\r\n  return headers;\r\n}\r\n\r\nfunction resolveApiUrl(path: string): string {\r\n  if (/^https?:\\/\\//i.test(path)) {\r\n    return path;\r\n  }\r\n\r\n  if (path.startsWith(\"?\") || path.startsWith(\"#\")) {\r\n    return `${API_BASE_NORMALIZED}${path}`;\r\n  }\r\n\r\n  const normalizedPath = path.replace(/^\\/+/, \"\");\r\n  let relativePath = normalizedPath;\r\n\r\n  if (API_BASE_PATH) {\r\n    const prefix = `${API_BASE_PATH}/`;\r\n    if (relativePath.startsWith(prefix)) {\r\n      relativePath = relativePath.slice(prefix.length);\r\n    } else if (relativePath === API_BASE_PATH) {\r\n      relativePath = \"\";\r\n    }\r\n  }\r\n\r\n  if (!relativePath) {\r\n    return API_BASE_NORMALIZED;\r\n  }\r\n\r\n  return `${API_BASE_NORMALIZED}/${relativePath}`;\r\n}\r\n\r\nexport async function postForm<T = any>(\r\n  path: string,\r\n  data: Record<string, string>,\r\n  tenantId?: string\r\n): Promise<T> {\r\n  const body = new URLSearchParams(data);\r\n  const res = await fetch(resolveApiUrl(path), {\r\n    method: \"POST\",\r\n    headers: buildHeaders(\r\n      { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n      tenantId\r\n    ),\r\n    body,\r\n  });\r\n\r\n  if (!res.ok) {\r\n    let parsed: any = null;\r\n    try {\r\n      parsed = await res.json();\r\n    } catch {\r\n      parsed = await res.text().catch(() => null);\r\n    }\r\n\r\n    let msg = \"\";\r\n    if (!parsed) msg = `Request failed with ${res.status}`;\r\n    else if (typeof parsed === \"string\") msg = parsed;\r\n    else if (Array.isArray(parsed)) msg = parsed.join(\", \");\r\n    else if (parsed?.detail) msg = parsed.detail;\r\n    else if (parsed?.message) msg = parsed.message;\r\n    else if (parsed?.error) msg = parsed.error;\r\n    else if (parsed?.errors) {\r\n      msg = Object.keys(parsed.errors)\r\n        .map(\r\n          (k) =>\r\n            `${k}: ${\r\n              Array.isArray(parsed.errors[k])\r\n                ? parsed.errors[k].join(\", \")\r\n                : parsed.errors[k]\r\n            }`\r\n        )\r\n        .join(\" | \");\r\n    } else msg = JSON.stringify(parsed);\r\n\r\n    const err: any = new Error(msg || `Request failed with ${res.status}`);\r\n    err.status = res.status;\r\n    err.body = parsed;\r\n    console.error(\"[postForm] failed\", { path, status: res.status, parsed });\r\n    throw err;\r\n  }\r\n\r\n  return (await res.json()) as T;\r\n}\r\n\r\nexport async function postJSON<T = any>(\r\n  path: string,\r\n  body: any,\r\n  tenantId?: string\r\n): Promise<T> {\r\n  const res = await fetch(resolveApiUrl(path), {\r\n    method: \"POST\",\r\n    headers: buildHeaders({ \"Content-Type\": \"application/json\" }, tenantId),\r\n    body: JSON.stringify(body),\r\n  });\r\n\r\n  if (!res.ok) {\r\n    try {\r\n      const data = await res.json();\r\n      const msg = data?.error || data?.detail || JSON.stringify(data);\r\n      throw new Error(msg || `Request failed with ${res.status}`);\r\n    } catch {\r\n      const text = await res.text().catch(() => \"\");\r\n      throw new Error(text || `Request failed with ${res.status}`);\r\n    }\r\n  }\r\n\r\n  return (await res.json()) as T;\r\n}\r\n\r\nexport async function putAuthJSON<T = any>(\r\n  path: string,\r\n  bodyData: any,\r\n  tenantId?: string\r\n): Promise<T> {\r\n  const res = await fetch(resolveApiUrl(path), {\r\n    method: \"PUT\",\r\n    headers: buildHeaders({ \"Content-Type\": \"application/json\" }, tenantId),\r\n    body: JSON.stringify(bodyData),\r\n  });\r\n\r\n  if (!res.ok) {\r\n    try {\r\n      const data = await res.json();\r\n      const msg = data?.error || data?.detail || JSON.stringify(data);\r\n      throw new Error(msg || `Request failed with ${res.status}`);\r\n    } catch {\r\n      const text = await res.text().catch(() => \"\");\r\n      throw new Error(text || `Request failed with ${res.status}`);\r\n    }\r\n  }\r\n  return (await res.json()) as T;\r\n}\r\n\r\nexport async function postMultipart<T = any>(\r\n  path: string,\r\n  formData: FormData,\r\n  tenantId?: string\r\n): Promise<T> {\r\n  const res = await fetch(resolveApiUrl(path), {\r\n    method: \"POST\",\r\n    headers: buildHeaders(undefined, tenantId),\r\n    body: formData,\r\n  });\r\n\r\n  if (!res.ok) {\r\n    try {\r\n      const data = await res.json();\r\n      const msg = data?.error || data?.detail || JSON.stringify(data);\r\n      throw new Error(msg || `Request failed with ${res.status}`);\r\n    } catch {\r\n      throw new Error(`Request failed with ${res.status}`);\r\n    }\r\n  }\r\n\r\n  return (await res.json()) as T;\r\n}\r\n\r\nexport function getAccessToken(): string | null {\r\n  if (typeof window === \"undefined\") return null;\r\n  return localStorage.getItem(\"access_token\");\r\n}\r\n\r\nfunction getTenantId(): string | null {\r\n  if (typeof window === \"undefined\") return null;\r\n  return localStorage.getItem(\"tenant_id\");\r\n}\r\n\r\nfunction getRefreshToken(): string | null {\r\n  if (typeof window === \"undefined\") return null;\r\n  return localStorage.getItem(\"refresh_token\");\r\n}\r\n\r\nasync function refreshTokens(): Promise<boolean> {\r\n  const rt = getRefreshToken();\r\n  if (!rt) return false;\r\n  const BASE = \"http://localhost:8000\";\r\n  const url = `${BASE}/api/v1/auth/refresh?refresh_token=${encodeURIComponent(\r\n    rt\r\n  )}`;\r\n  const res = await fetch(url, { method: \"POST\" });\r\n  if (!res.ok) return false;\r\n  try {\r\n    const data = (await res.json()) as {\r\n      access_token: string;\r\n      refresh_token: string;\r\n    };\r\n    if (typeof window !== \"undefined\") {\r\n      localStorage.setItem(\"access_token\", data.access_token);\r\n      localStorage.setItem(\"refresh_token\", data.refresh_token);\r\n    }\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nasync function authFetch(\r\n  path: string,\r\n  init?: RequestInit,\r\n  retry = true,\r\n  tenantId?: string\r\n): Promise<Response> {\r\n  const token = getAccessToken();\r\n  const activeTenantId = tenantId ?? getTenantId() ?? undefined;\r\n  const headers: HeadersInit = buildHeaders(\r\n    {\r\n      ...(init?.headers || {}),\r\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n    },\r\n    activeTenantId\r\n  );\r\n  let res = await fetch(resolveApiUrl(path), { ...(init || {}), headers });\r\n\r\n  if (res.status === 401 && retry) {\r\n    const ok = await refreshTokens();\r\n    if (ok) {\r\n      const newToken = getAccessToken();\r\n      const retryTenantId = tenantId ?? getTenantId() ?? undefined;\r\n      const retryHeaders: HeadersInit = buildHeaders(\r\n        {\r\n          ...(init?.headers || {}),\r\n          ...(newToken ? { Authorization: `Bearer ${newToken}` } : {}),\r\n        },\r\n        retryTenantId\r\n      );\r\n      res = await fetch(resolveApiUrl(path), {\r\n        ...(init || {}),\r\n        headers: retryHeaders,\r\n      });\r\n    }\r\n  }\r\n\r\n  return res;\r\n}\r\n\r\nexport async function getAuthJSON<T = any>(\r\n  path: string,\r\n  tenantId?: string\r\n): Promise<T> {\r\n  const res = await authFetch(path, undefined, true, tenantId);\r\n  if (!res.ok) {\r\n    const data = await res.text().catch(() => \"\");\r\n    throw new Error(data || `Request failed with ${res.status}`);\r\n  }\r\n  return (await res.json()) as T;\r\n}\r\n\r\nexport async function postAuthJSON<T = any>(\r\n  path: string,\r\n  bodyData: any,\r\n  tenantId?: string\r\n): Promise<T> {\r\n  const res = await authFetch(\r\n    path,\r\n    {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(bodyData),\r\n    },\r\n    true,\r\n    tenantId\r\n  );\r\n\r\n  if (!res.ok) {\r\n    const data = await res.text().catch(() => \"\");\r\n    throw new Error(data || `Request failed with ${res.status}`);\r\n  }\r\n\r\n  return (await res.json()) as T;\r\n}\r\n\r\n// ----------------- AuthAPI -----------------\r\nexport const AuthAPI = {\r\n  registerAffiliate: (body: any) => postJSON(\"/api/v1/auth/register/affiliate\", body),\r\n  registerPharmacy: (body: any) => postJSON(\"/api/v1/auth/register/pharmacy\", body),\r\n\r\n  registerVerify: async (email: string, code: string) => {\r\n    try {\r\n      return await postForm(\"/api/v1/auth/register/verify\", { email, code });\r\n    } catch (err: any) {\r\n      if (err?.status === 422) {\r\n        console.warn(\"[AuthAPI.registerVerify] 422, retrying with JSON\", {\r\n          body: err.body,\r\n        });\r\n        try {\r\n          return await postJSON(\"/api/v1/auth/register/verify\", { email, code });\r\n        } catch (err2: any) {\r\n          const e: any = new Error(\r\n            err2?.message || err?.message || \"Verification failed\"\r\n          );\r\n          e.original = err;\r\n          e.retry = err2;\r\n          throw e;\r\n        }\r\n      }\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  verifyRegistration: (email: string, code: string) =>\r\n    postForm(\"/api/v1/auth/register/verify\", { email, code }),\r\n  login: (email: string, password: string, tenantId?: string) =>\r\n    postForm(\"/api/v1/auth/login\", { username: email, password }, tenantId),\r\n  loginRequestCode: (email: string, password: string, tenantId?: string) =>\r\n    postForm(\r\n      \"/api/v1/auth/login/request-code\",\r\n      { username: email, password },\r\n      tenantId\r\n    ),\r\n  loginVerify: (email: string, code: string, tenantId?: string) =>\r\n    postJSON(\"/api/v1/auth/login/verify\", { email, code }, tenantId),\r\n  me: () => getAuthJSON(\"/api/v1/auth/me\"),\r\n};\r\n\r\n// ----------------- AffiliateAPI -----------------\r\nexport const AffiliateAPI = {\r\n  getLinks: () => getAuthJSON(\"/api/v1/affiliate/register-link\"),\r\n  createLink: () => getAuthJSON(\"/api/v1/affiliate/register-link?create_new=true\"),\r\n  deactivate: (token: string) =>\r\n    postAuthJSON(\r\n      `/api/v1/affiliate/links/${encodeURIComponent(token)}/deactivate`,\r\n      {}\r\n    ),\r\n  rotate: (token: string) =>\r\n    postAuthJSON(`/api/v1/affiliate/links/${encodeURIComponent(token)}/rotate`, {}),\r\n  dashboard: () => getAuthJSON(\"/api/v1/affiliate/dashboard\"),\r\n  payouts: (status?: string) =>\r\n    getAuthJSON(\r\n      `/api/v1/affiliate/payouts${\r\n        status ? `?status_filter=${encodeURIComponent(status)}` : \"\"\r\n      }`\r\n    ),\r\n  requestPayout: (month?: string, percent = 5) =>\r\n    postAuthJSON(\"/api/v1/affiliate/payouts/request\", { month, percent }),\r\n  updateProfile: (body: any) => postAuthJSON(\"/api/v1/affiliate/profile\", body),\r\n};\r\n\r\n// ----------------- AdminAPI -----------------\r\nexport const AdminAPI = {\r\n  pharmacies: (page = 1, pageSize = 20, q?: string) =>\r\n    getAuthJSON(\r\n      `/api/v1/admin/pharmacies?page=${page}&page_size=${pageSize}${\r\n        q ? `&q=${encodeURIComponent(q)}` : \"\"\r\n      }`\r\n    ),\r\n  affiliates: (page = 1, pageSize = 20, q?: string) =>\r\n    getAuthJSON(\r\n      `/api/v1/admin/affiliates?page=${page}&page_size=${pageSize}${\r\n        q ? `&q=${encodeURIComponent(q)}` : \"\"\r\n      }`\r\n    ),\r\n  approvePharmacy: (tenantId: string, applicationId: number, body?: any) =>\r\n    postAuthJSON(\r\n      `/api/v1/admin/pharmacies/${applicationId}/approve`,\r\n      body || {},\r\n      tenantId\r\n    ),\r\n  rejectPharmacy: (tenantId: string, applicationId: number) =>\r\n    postAuthJSON(`/api/v1/admin/pharmacies/${applicationId}/reject`, {}, tenantId),\r\n  verifyPayment: (tenantId: string, code?: string | null) =>\r\n    postAuthJSON(`/api/v1/admin/payments/verify`, { code: code || null }, tenantId),\r\n  rejectPayment: (tenantId: string, code?: string | null) =>\r\n    postAuthJSON(`/api/v1/admin/payments/reject`, { code: code || null }, tenantId),\r\n  analyticsOverview: (days = 30) =>\r\n    getAuthJSON(`/api/v1/admin/analytics/overview?days=${days}`),\r\n  approveAffiliate: (userId: number) =>\r\n    postAuthJSON(`/api/v1/admin/affiliates/${userId}/approve`, {}),\r\n  rejectAffiliate: (userId: number) =>\r\n    postAuthJSON(`/api/v1/admin/affiliates/${userId}/reject`, {}),\r\n};\r\n\r\n// ----------------- StaffAPI -----------------\r\nexport const StaffAPI = {\r\n  createCashier: (tenantId: string, body: any) =>\r\n    postAuthJSON(\"/api/v1/staff\", body, tenantId),\r\n  list: (tenantId: string) => getAuthJSON(\"/api/v1/staff\", tenantId),\r\n  update: (tenantId: string, userId: number, body: { is_active?: boolean }) =>\r\n    authFetch(\r\n      `/api/v1/staff/${userId}`,\r\n      {\r\n        method: \"PATCH\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(body),\r\n      },\r\n      true,\r\n      tenantId\r\n    ).then(async (res) => {\r\n      if (!res.ok) throw new Error(await res.text());\r\n      return res.json();\r\n    }),\r\n  remove: (tenantId: string, userId: number) =>\r\n    authFetch(`/api/v1/staff/${userId}`, { method: \"DELETE\" }, true, tenantId).then(\r\n      async (res) => {\r\n        if (!res.ok) throw new Error(await res.text());\r\n        return res.json();\r\n      }\r\n    ),\r\n};\r\n\r\n// ----------------- BillingAPI -----------------\r\nexport const BillingAPI = {\r\n  submitPaymentCode: (tenantId: string, code: string) =>\r\n    postAuthJSON(\"/api/v1/owner/billing/payment-code\", { code }, tenantId),\r\n};\r\n\r\n// ----------------- UploadAPI -----------------\r\nexport const UploadAPI = {\r\n  uploadKyc: async (file: File) => {\r\n    const fd = new FormData();\r\n    fd.append(\"file\", file);\r\n    return postMultipart(\"/uploads/kyc\", fd);\r\n  },\r\n};\r\n\r\n// ----------------- KYCAPI -----------------\r\nexport const KYCAPI = {\r\n  status: (tenantId: string) => getAuthJSON(\"/api/v1/owner/kyc/status\", tenantId),\r\n  update: (tenantId: string, body: any) =>\r\n    putAuthJSON(\"/api/v1/owner/kyc/status\", body, tenantId),\r\n};\r\n\r\n// ----------------- PharmaciesAPI -----------------\r\nexport const PharmaciesAPI = {\r\n  list: (page = 1, pageSize = 20, q?: string) =>\r\n    getAuthJSON(\r\n      `/api/v1/pharmacies?page=${page}&page_size=${pageSize}${\r\n        q ? `&q=${encodeURIComponent(q)}` : \"\"\r\n      }`\r\n    ),\r\n  get: (id: number) => getAuthJSON(`/api/v1/pharmacies/${id}`),\r\n  update: (id: number, body: { name?: string; address?: string }) =>\r\n    authFetch(`/api/v1/pharmacies/${id}`, {\r\n      method: \"PATCH\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(body),\r\n    }).then(async (res) => {\r\n      if (!res.ok) throw new Error(await res.text());\r\n      return res.json();\r\n    }),\r\n};\r\n\r\n// ----------------- ChatAPI -----------------\r\nexport const ChatAPI = {\r\n  listThreads: (tenantId: string) => getAuthJSON(`/api/v1/chat/threads`, tenantId),\r\n  createThread: (tenantId: string, title: string) =>\r\n    postAuthJSON(`/api/v1/chat/threads`, { title }, tenantId),\r\n  listMessages: (tenantId: string, threadId: number) =>\r\n    getAuthJSON(`/api/v1/chat/threads/${threadId}/messages`, tenantId),\r\n  sendMessage: (tenantId: string, threadId: number, prompt: string) =>\r\n    postAuthJSON(`/api/v1/chat/threads/${threadId}/messages`, { prompt }, tenantId),\r\n  usage: (tenantId: string, days = 30) =>\r\n    getAuthJSON(`/api/v1/chat/usage?days=${days}`, tenantId),\r\n};\r\n\r\nexport type OwnerAnalyticsResponse = {\r\n  totals: {\r\n    total_revenue: number;\r\n    average_ticket: number;\r\n    units_sold: number;\r\n    sale_count: number;\r\n    active_cashiers: number;\r\n  };\r\n  deltas: {\r\n    revenue_vs_last_period: number;\r\n    avg_ticket_vs_last_period: number;\r\n    units_vs_last_period: number;\r\n  };\r\n  revenue_trend: { period: string; revenue: number }[];\r\n  top_products: { name: string; revenue: number; quantity: number }[];\r\n  inventory_health: { label: string; count: number }[];\r\n  recent_payments: {\r\n    id: number;\r\n    status: string;\r\n    status_label: string;\r\n    code?: string | null;\r\n    created_at: string;\r\n    created_at_formatted: string;\r\n  }[];\r\n};\r\n\r\nexport const OwnerAnalyticsAPI = {\r\n  overview: (tenantId: string) =>\r\n    getAuthJSON<OwnerAnalyticsResponse>(\"/api/v1/owner/analytics/overview\", tenantId),\r\n};\r\n\r\n// Other API objects (AffiliateAPI, AdminAPI, etc.) remain unchanged\r\n\r\n// export const API_BASE =\r\n//   process.env.NEXT_PUBLIC_API_BASE || \"http://localhost:8000/api/v1\";\r\n// export const TENANT_HEADER =\r\n//   process.env.NEXT_PUBLIC_TENANT_HEADER || \"X-Tenant-ID\";\r\n\r\n// function buildHeaders(\r\n//   initHeaders?: HeadersInit,\r\n//   tenantId?: string\r\n// ): HeadersInit {\r\n//   const headers: Record<string, string> = {\r\n//     ...(initHeaders as Record<string, string>),\r\n//   };\r\n//   if (tenantId) headers[TENANT_HEADER] = tenantId;\r\n//   return headers;\r\n// }\r\n\r\n// export async function putAuthJSON<T = any>(\r\n//   path: string,\r\n//   bodyData: any,\r\n//   tenantId?: string\r\n// ): Promise<T> {\r\n//   const res = await authFetch(\r\n//     path,\r\n//     {\r\n//       method: \"PUT\",\r\n//       headers: { \"Content-Type\": \"application/json\" },\r\n//       body: JSON.stringify(bodyData),\r\n//     },\r\n//     true,\r\n//     tenantId\r\n//   );\r\n//   if (!res.ok) {\r\n//     try {\r\n//       const data = await res.json();\r\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\r\n//       throw new Error(msg || `Request failed with ${res.status}`);\r\n//     } catch {\r\n//       const text = await res.text().catch(() => \"\");\r\n//       throw new Error(text || `Request failed with ${res.status}`);\r\n//     }\r\n//   }\r\n//   return (await res.json()) as T;\r\n// }\r\n\r\n// export async function postForm<T = any>(\r\n//   path: string,\r\n//   data: Record<string, string>,\r\n//   tenantId?: string\r\n// ): Promise<T> {\r\n//   const body = new URLSearchParams(data);\r\n//   const res = await fetch(`${API_BASE}${path}`, {\r\n//     method: \"POST\",\r\n//     headers: buildHeaders(\r\n//       {\r\n//         \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n//       },\r\n//       tenantId\r\n//     ),\r\n//     body,\r\n//   });\r\n//   if (!res.ok) {\r\n//     try {\r\n//       const data = await res.json();\r\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\r\n//       throw new Error(msg || `Request failed with ${res.status}`);\r\n//     } catch {\r\n//       const text = await res.text().catch(() => \"\");\r\n//       throw new Error(text || `Request failed with ${res.status}`);\r\n//     }\r\n//   }\r\n//   return (await res.json()) as T;\r\n// }\r\n\r\n// export async function postJSON<T = any>(\r\n//   path: string,\r\n//   body: any,\r\n//   tenantId?: string\r\n// ): Promise<T> {\r\n//   const res = await fetch(`${API_BASE}${path}`, {\r\n//     method: \"POST\",\r\n//     headers: buildHeaders({ \"Content-Type\": \"application/json\" }, tenantId),\r\n//     body: JSON.stringify(body),\r\n//   });\r\n//   if (!res.ok) {\r\n//     try {\r\n//       const data = await res.json();\r\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\r\n//       throw new Error(msg || `Request failed with ${res.status}`);\r\n//     } catch {\r\n//       const text = await res.text().catch(() => \"\");\r\n//       throw new Error(text || `Request failed with ${res.status}`);\r\n//     }\r\n//   }\r\n//   return (await res.json()) as T;\r\n// }\r\n\r\n// export async function postMultipart<T = any>(\r\n//   path: string,\r\n//   formData: FormData,\r\n//   tenantId?: string\r\n// ): Promise<T> {\r\n//   const res = await fetch(`${API_BASE}${path}`, {\r\n//     method: \"POST\",\r\n//     headers: buildHeaders(undefined, tenantId),\r\n//     body: formData,\r\n//   });\r\n//   if (!res.ok) {\r\n//     try {\r\n//       const data = await res.json();\r\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\r\n//       throw new Error(msg || `Request failed with ${res.status}`);\r\n//     } catch {\r\n//       let message = `Request failed with ${res.status}`;\r\n//       throw new Error(message);\r\n//     }\r\n//   }\r\n//   return (await res.json()) as T;\r\n// }\r\n\r\n// export function getAccessToken(): string | null {\r\n//   if (typeof window === \"undefined\") return null;\r\n//   return localStorage.getItem(\"access_token\");\r\n// }\r\n\r\n// function getRefreshToken(): string | null {\r\n//   if (typeof window === \"undefined\") return null;\r\n//   return localStorage.getItem(\"refresh_token\");\r\n// }\r\n\r\n// async function refreshTokens(): Promise<boolean> {\r\n//   const rt = getRefreshToken();\r\n//   if (!rt) return false;\r\n//   const url = `${API_BASE}/api/v1/auth/refresh?refresh_token=${encodeURIComponent(\r\n//     rt\r\n//   )}`;\r\n//   const res = await fetch(url, { method: \"POST\" });\r\n//   if (!res.ok) return false;\r\n//   try {\r\n//     const data = (await res.json()) as {\r\n//       access_token: string;\r\n//       refresh_token: string;\r\n//       token_type: string;\r\n//       expires_in: number;\r\n//     };\r\n//     if (typeof window !== \"undefined\") {\r\n//       localStorage.setItem(\"access_token\", data.access_token);\r\n//       localStorage.setItem(\"refresh_token\", data.refresh_token);\r\n//     }\r\n//     return true;\r\n//   } catch {\r\n//     return false;\r\n//   }\r\n// }\r\n\r\n// async function authFetch(\r\n//   path: string,\r\n//   init?: RequestInit,\r\n//   retry = true,\r\n//   tenantId?: string\r\n// ): Promise<Response> {\r\n//   const token = getAccessToken();\r\n//   const headers: HeadersInit = buildHeaders(\r\n//     {\r\n//       ...(init?.headers || {}),\r\n//       ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n//     },\r\n//     tenantId\r\n//   );\r\n//   const res = await fetch(`${API_BASE}${path}`, { ...(init || {}), headers });\r\n//   if (res.status === 401 && retry) {\r\n//     const ok = await refreshTokens();\r\n//     if (ok) {\r\n//       const newToken = getAccessToken();\r\n//       const retryHeaders: HeadersInit = buildHeaders(\r\n//         {\r\n//           ...(init?.headers || {}),\r\n//           ...(newToken ? { Authorization: `Bearer ${newToken}` } : {}),\r\n//         },\r\n//         tenantId\r\n//       );\r\n//       return fetch(`${API_BASE}${path}`, {\r\n//         ...(init || {}),\r\n//         headers: retryHeaders,\r\n//       });\r\n//     }\r\n//   }\r\n//   return res;\r\n// }\r\n\r\n// export async function getAuthJSON<T = any>(\r\n//   path: string,\r\n//   tenantId?: string\r\n// ): Promise<T> {\r\n//   const res = await authFetch(path, undefined, true, tenantId);\r\n//   if (!res.ok) {\r\n//     try {\r\n//       const data = await res.json();\r\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\r\n//       throw new Error(msg || `Request failed with ${res.status}`);\r\n//     } catch {\r\n//       const text = await res.text().catch(() => \"\");\r\n//       throw new Error(text || `Request failed with ${res.status}`);\r\n//     }\r\n//   }\r\n//   return (await res.json()) as T;\r\n// }\r\n\r\n// export async function postAuthJSON<T = any>(\r\n//   path: string,\r\n//   bodyData: any,\r\n//   tenantId?: string\r\n// ): Promise<T> {\r\n//   const res = await authFetch(\r\n//     path,\r\n//     {\r\n//       method: \"POST\",\r\n//       headers: { \"Content-Type\": \"application/json\" },\r\n//       body: JSON.stringify(bodyData),\r\n//     },\r\n//     true,\r\n//     tenantId\r\n//   );\r\n//   if (!res.ok) {\r\n//     try {\r\n//       const data = await res.json();\r\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\r\n//       throw new Error(msg || `Request failed with ${res.status}`);\r\n//     } catch {\r\n//       const text = await res.text().catch(() => \"\");\r\n//       throw new Error(text || `Request failed with ${res.status}`);\r\n//     }\r\n//   }\r\n//   return (await res.json()) as T;\r\n// }\r\n\r\n// // Convenience wrappers for key flows\r\n// export const AuthAPI = {\r\n//   registerAffiliate: (body: any) => postJSON(\"/auth/register/affiliate\", body),\r\n//   registerPharmacy: (body: any) => postJSON(\"/auth/register/pharmacy\", body),\r\n//   registerVerify: (email: string, code: string) =>\r\n//     postForm(\"/auth/register/verify\", { email, code }),\r\n//   verifyRegistration: (email: string, code: string) =>\r\n//     postForm(\"/auth/register/verify\", { email, code }),\r\n//   login: (email: string, password: string, tenantId?: string) =>\r\n//     postForm(\"/auth/login\", { username: email, password }, tenantId),\r\n//   loginRequestCode: (email: string, password: string, tenantId?: string) =>\r\n//     postForm(\r\n//       \"/auth/login/request-code\",\r\n//       { username: email, password },\r\n//       tenantId\r\n//     ),\r\n//   loginVerify: (email: string, code: string, tenantId?: string) =>\r\n//     postJSON(\"/auth/login/verify\", { email, code }, tenantId),\r\n//   me: () => getAuthJSON(\"/auth/me\"),\r\n// };\r\n\r\n// export const AffiliateAPI = {\r\n//   getLinks: () => getAuthJSON(\"/affiliate/register-link\"),\r\n//   createLink: () => getAuthJSON(\"/affiliate/register-link?create_new=true\"),\r\n//   deactivate: (token: string) =>\r\n//     postAuthJSON(\r\n//       `/affiliate/links/${encodeURIComponent(token)}/deactivate`,\r\n//       {}\r\n//     ),\r\n//   rotate: (token: string) =>\r\n//     postAuthJSON(`/affiliate/links/${encodeURIComponent(token)}/rotate`, {}),\r\n//   dashboard: () => getAuthJSON(\"/affiliate/dashboard\"),\r\n//   payouts: (status?: string) =>\r\n//     getAuthJSON(\r\n//       `/affiliate/payouts${\r\n//         status ? `?status_filter=${encodeURIComponent(status)}` : \"\"\r\n//       }`\r\n//     ),\r\n//   requestPayout: (month?: string, percent = 5) =>\r\n//     postAuthJSON(\"/affiliate/payouts/request\", { month, percent }),\r\n//   updateProfile: (body: any) => postAuthJSON(\"/affiliate/profile\", body),\r\n// };\r\n\r\n// export const AdminAPI = {\r\n//   pharmacies: (page = 1, pageSize = 20, q?: string) =>\r\n//     getAuthJSON(\r\n//       `/admin/pharmacies?page=${page}&page_size=${pageSize}${\r\n//         q ? `&q=${encodeURIComponent(q)}` : \"\"\r\n//       }`\r\n//     ),\r\n//   affiliates: (page = 1, pageSize = 20, q?: string) =>\r\n//     getAuthJSON(\r\n//       `/admin/affiliates?page=${page}&page_size=${pageSize}${\r\n//         q ? `&q=${encodeURIComponent(q)}` : \"\"\r\n//       }`\r\n//     ),\r\n//   approvePharmacy: (\r\n//     tenantId: string,\r\n//     applicationId: number,\r\n//     body?: { issue_temp_password?: boolean; temp_password?: string }\r\n//   ) =>\r\n//     postAuthJSON(\r\n//       `/admin/pharmacies/${applicationId}/approve`,\r\n//       body || {},\r\n//       tenantId\r\n//     ),\r\n//   rejectPharmacy: (tenantId: string, applicationId: number) =>\r\n//     postAuthJSON(`/admin/pharmacies/${applicationId}/reject`, {}, tenantId),\r\n//   verifyPayment: (tenantId: string, code?: string | null) =>\r\n//     postAuthJSON(`/admin/payments/verify`, { code: code || null }, tenantId),\r\n//   rejectPayment: (tenantId: string, code?: string | null) =>\r\n//     postAuthJSON(`/admin/payments/reject`, { code: code || null }, tenantId),\r\n//   analyticsOverview: (days = 30) =>\r\n//     getAuthJSON(`/admin/analytics/overview?days=${days}`),\r\n//   downloadPharmacyLicense: async (applicationId: number) => {\r\n//     const res = await authFetch(\r\n//       `/admin/pharmacies/${applicationId}/license`,\r\n//       { method: \"GET\" },\r\n//       true\r\n//     );\r\n//     if (!res.ok) {\r\n//       const text = await res.text().catch(() => \"\");\r\n//       throw new Error(text || `HTTP ${res.status}`);\r\n//     }\r\n//     const blob = await res.blob();\r\n//     let filename = `license-${applicationId}`;\r\n//     const disposition = res.headers.get(\"Content-Disposition\") || \"\";\r\n//     const match = disposition.match(\r\n//       /filename\\*=UTF-8''([^;]+)|filename=\"?([^\";]+)\"?/i\r\n//     );\r\n//     const extracted = match?.[1] || match?.[2];\r\n//     if (extracted) {\r\n//       try {\r\n//         filename = decodeURIComponent(extracted);\r\n//       } catch {\r\n//         filename = extracted;\r\n//       }\r\n//     }\r\n//     const url = window.URL.createObjectURL(blob);\r\n//     const link = document.createElement(\"a\");\r\n//     link.href = url;\r\n//     link.download = filename;\r\n//     document.body.appendChild(link);\r\n//     link.click();\r\n//     document.body.removeChild(link);\r\n//     window.URL.revokeObjectURL(url);\r\n//   },\r\n//   approveAffiliate: (userId: number) =>\r\n//     postAuthJSON(`/admin/affiliates/${userId}/approve`, {}),\r\n//   rejectAffiliate: (userId: number) =>\r\n//     postAuthJSON(`/admin/affiliates/${userId}/reject`, {}),\r\n//   listAffiliatePayouts: (status?: string) =>\r\n//     getAuthJSON(\r\n//       `/admin/affiliate/payouts${\r\n//         status ? `?status=${encodeURIComponent(status)}` : \"\"\r\n//       }`\r\n//     ),\r\n//   markPayoutPaid: (payoutId: number) =>\r\n//     postAuthJSON(`/admin/affiliate/payouts/${payoutId}/mark-paid`, {}),\r\n//   approvePayout: (payoutId: number) =>\r\n//     postAuthJSON(`/admin/affiliate/payouts/${payoutId}/approve`, {}),\r\n//   usage: (days = 30) => getAuthJSON(`/admin/usage?days=${days}`),\r\n//   audit: (params?: { tenant_id?: string; action?: string; limit?: number }) =>\r\n//     getAuthJSON(\r\n//       `/admin/audit${(() => {\r\n//         const qs = new URLSearchParams();\r\n//         if (params?.tenant_id) qs.set(\"tenant_id\", params.tenant_id);\r\n//         if (params?.action) qs.set(\"action\", params.action);\r\n//         if (params?.limit) qs.set(\"limit\", String(params.limit));\r\n//         const s = qs.toString();\r\n//         return s ? `?${s}` : \"\";\r\n//       })()}`\r\n//     ),\r\n// };\r\n\r\n// export const StaffAPI = {\r\n//   createCashier: (tenantId: string, body: any) =>\r\n//     postAuthJSON(\"/staff\", body, tenantId),\r\n//   list: (tenantId: string) => getAuthJSON(\"/staff\", tenantId),\r\n//   update: (tenantId: string, userId: number, body: { is_active?: boolean }) =>\r\n//     authFetch(\r\n//       `/staff/${userId}`,\r\n//       {\r\n//         method: \"PATCH\",\r\n//         headers: { \"Content-Type\": \"application/json\" },\r\n//         body: JSON.stringify(body),\r\n//       },\r\n//       true,\r\n//       tenantId\r\n//     ).then(async (res) => {\r\n//       if (!res.ok) {\r\n//         const t = await res.text();\r\n//         throw new Error(t || `HTTP ${res.status}`);\r\n//       }\r\n//       return res.json();\r\n//     }),\r\n//   remove: (tenantId: string, userId: number) =>\r\n//     authFetch(`/staff/${userId}`, { method: \"DELETE\" }, true, tenantId).then(\r\n//       async (res) => {\r\n//         if (!res.ok) {\r\n//           const t = await res.text();\r\n//           throw new Error(t || `HTTP ${res.status}`);\r\n//         }\r\n//         return res.json();\r\n//       }\r\n//     ),\r\n// };\r\n\r\n// export const BillingAPI = {\r\n//   submitPaymentCode: (tenantId: string, code: string) =>\r\n//     postAuthJSON(\"/billing/payment-code\", { code }, tenantId),\r\n// };\r\n\r\n// export const UploadAPI = {\r\n//   uploadKyc: async (\r\n//     file: File\r\n//   ): Promise<{ path: string; size: number; filename: string }> => {\r\n//     const fd = new FormData();\r\n//     fd.append(\"file\", file);\r\n//     return await postMultipart(`/uploads/kyc`, fd);\r\n//   },\r\n// };\r\n\r\n// export const KYCAPI = {\r\n//   status: (tenantId: string) => getAuthJSON(`/owner/kyc/status`, tenantId),\r\n//   update: (tenantId: string, body: any) =>\r\n//     putAuthJSON(`/owner/kyc/status`, body, tenantId),\r\n// };\r\n\r\n// export const PharmaciesAPI = {\r\n//   list: (page = 1, pageSize = 20, q?: string) =>\r\n//     getAuthJSON(\r\n//       `/pharmacies?page=${page}&page_size=${pageSize}${\r\n//         q ? `&q=${encodeURIComponent(q)}` : \"\"\r\n//       }`\r\n//     ),\r\n//   get: (id: number) => getAuthJSON(`/pharmacies/${id}`),\r\n//   update: (id: number, body: { name?: string; address?: string }) =>\r\n//     authFetch(`/pharmacies/${id}`, {\r\n//       method: \"PATCH\",\r\n//       headers: { \"Content-Type\": \"application/json\" },\r\n//       body: JSON.stringify(body),\r\n//     }).then(async (res) => {\r\n//       if (!res.ok) {\r\n//         const t = await res.text();\r\n//         throw new Error(t || `HTTP ${res.status}`);\r\n//       }\r\n//       return res.json();\r\n//     }),\r\n// };\r\n\r\n// export const ChatAPI = {\r\n//   listThreads: (tenantId: string) => getAuthJSON(`/chat/threads`, tenantId),\r\n//   createThread: (tenantId: string, title: string) =>\r\n//     postAuthJSON(`/chat/threads`, { title }, tenantId),\r\n//   listMessages: (tenantId: string, threadId: number) =>\r\n//     getAuthJSON(`/chat/threads/${threadId}/messages`, tenantId),\r\n//   sendMessage: (tenantId: string, threadId: number, prompt: string) =>\r\n//     postAuthJSON(`/chat/threads/${threadId}/messages`, { prompt }, tenantId),\r\n//   usage: (tenantId: string, days = 30) =>\r\n//     getAuthJSON(`/chat/usage?days=${days}`, tenantId),\r\n//   sendStream: async (\r\n//     tenantId: string,\r\n//     threadId: number,\r\n//     prompt: string,\r\n//     onEvent: (evt: { event: string; data?: any }) => void\r\n//   ): Promise<void> => {\r\n//     const res = await authFetch(\r\n//       `/chat/threads/${threadId}/messages/stream`,\r\n//       {\r\n//         method: \"POST\",\r\n//         headers: { \"Content-Type\": \"application/json\" },\r\n//         body: JSON.stringify({ prompt }),\r\n//       },\r\n//       true,\r\n//       tenantId\r\n//     );\r\n//     if (!res.ok || !res.body) {\r\n//       const t = await res.text().catch(() => \"\");\r\n//       throw new Error(t || `HTTP ${res.status}`);\r\n//     }\r\n//     const reader = res.body.getReader();\r\n//     const decoder = new TextDecoder();\r\n//     let buf = \"\";\r\n//     while (true) {\r\n//       const { done, value } = await reader.read();\r\n//       if (done) break;\r\n//       buf += decoder.decode(value, { stream: true });\r\n//       let idx;\r\n//       while ((idx = buf.indexOf(\"\\n\\n\")) !== -1) {\r\n//         const chunk = buf.slice(0, idx).trim();\r\n//         buf = buf.slice(idx + 2);\r\n//         if (chunk.startsWith(\"data:\")) {\r\n//           try {\r\n//             const jsonStr = chunk.slice(5).trim();\r\n//             const obj = JSON.parse(jsonStr);\r\n//             onEvent(obj);\r\n//           } catch {}\r\n//         }\r\n//       }\r\n//     }\r\n//   },\r\n// };\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 886, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/gugu-gaga-/front_end/components/ui/input.tsx"],"sourcesContent":["\"use client\";\r\nimport * as React from \"react\";\r\n\r\nexport interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {}\r\n\r\nexport const Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className = \"\", ...props }, ref) => {\r\n    return (\r\n      <input\r\n        ref={ref}\r\n        className={\r\n          \"w-full border rounded px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-emerald-200 focus:border-emerald-400 \" +\r\n          className\r\n        }\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\nInput.displayName = \"Input\";\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAKO,MAAM,sBAAQ,mNAAgB,CACnC,CAAC,EAAE,YAAY,EAAE,EAAE,GAAG,OAAO,EAAE;IAC7B,qBACE,8OAAC;QACC,KAAK;QACL,WACE,uHACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 911, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/gugu-gaga-/front_end/app/%28auth%29/auth/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { postForm } from \"@/utils/api\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { useToast } from \"@/components/ui/toast\";\r\n\r\nexport default function AuthPage() {\r\n  const router = useRouter();\r\n  const search = useSearchParams();\r\n  const next = search?.get(\"next\") || \"/dashboard\";\r\n  const { show } = useToast();\r\n  const [tab, setTab] = useState<\"signin\" | \"signup\">(\"signin\");\r\n\r\n  // Sign in state\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  async function onLogin(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    setError(null);\r\n    setLoading(true);\r\n    try {\r\n      const data = await postForm<{\r\n        access_token: string;\r\n        refresh_token: string;\r\n        token_type: string;\r\n        expires_in: number;\r\n      }>(\"/api/v1/auth/login\", { username, password });\r\n      localStorage.setItem(\"access_token\", data.access_token);\r\n      localStorage.setItem(\"refresh_token\", data.refresh_token);\r\n      show({ variant: \"success\", title: \"Welcome\", description: \"Login successful\" });\r\n      router.replace(next);\r\n    } catch (err: any) {\r\n      setError(err.message || \"Login failed\");\r\n      show({ variant: \"destructive\", title: \"Login failed\", description: err.message || \"Please try again\" });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center p-6\">\r\n      <div className=\"w-full max-w-2xl border rounded bg-white\">\r\n        <div className=\"p-3 border-b flex items-center gap-3 text-sm\">\r\n          <button className={`px-3 py-1 rounded ${tab===\"signin\"?\"bg-emerald-600 text-white\":\"hover:bg-gray-50\"}`} onClick={()=>setTab(\"signin\")}>Sign In</button>\r\n          <button className={`px-3 py-1 rounded ${tab===\"signup\"?\"bg-emerald-600 text-white\":\"hover:bg-gray-50\"}`} onClick={()=>setTab(\"signup\")}>Sign Up</button>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {tab === \"signin\" ? (\r\n            <form onSubmit={onLogin} className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <h1 className=\"text-xl font-semibold\">Sign in to Zemen Pharma</h1>\r\n                  {error && <p className=\"text-red-600 text-sm mt-2\">{error}</p>}\r\n                </div>\r\n                <div>\r\n                  <label className=\"text-sm\">Username</label>\r\n                  <Input value={username} onChange={(e)=>setUsername(e.target.value)} required autoComplete=\"username\" />\r\n                </div>\r\n                <div>\r\n                  <label className=\"text-sm\">Password</label>\r\n                  <Input type=\"password\" value={password} onChange={(e)=>setPassword(e.target.value)} required autoComplete=\"current-password\" />\r\n                </div>\r\n                <Button type=\"submit\" disabled={loading} className=\"w-full md:w-auto\">{loading?\"Signing in...\":\"Sign In\"}</Button>\r\n              </div>\r\n              <div className=\"space-y-3 text-sm text-gray-600\">\r\n                <div className=\"font-medium\">Want to register as an Affiliate?</div>\r\n                <p>\r\n                  Sign in (or create an account) and then open <span className=\"font-medium\">Dashboard  Affiliate  Register</span> to enroll as a marketing partner and get your referral link.\r\n                </p>\r\n                <div className=\"font-medium mt-4\">New pharmacy owner?</div>\r\n                <p>\r\n                  If you are a pharmacy owner, use the Sign Up tab to access the full registration with KYC.\r\n                </p>\r\n              </div>\r\n            </form>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              <h1 className=\"text-xl font-semibold\">Create an Account</h1>\r\n              <p className=\"text-gray-600 text-sm\">Choose your path below:</p>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"border rounded p-4\">\r\n                  <div className=\"font-medium\">Pharmacy Owner Registration</div>\r\n                  <p className=\"text-sm text-gray-600 mt-1\">Register your pharmacy, complete KYC, and set up your tenant.</p>\r\n                  <Button asChild className=\"mt-3\"><a href=\"/register\">Go to Owner Registration</a></Button>\r\n                </div>\r\n                <div className=\"border rounded p-4\">\r\n                  <div className=\"font-medium\">Become an Affiliate</div>\r\n                  <p className=\"text-sm text-gray-600 mt-1\">Create an account by signing in, then enroll in Affiliate from your dashboard. No pharmacy required.</p>\r\n                  <Button variant=\"outline\" className=\"mt-3\" onClick={()=>setTab(\"signin\")}>Sign In to Continue</Button>\r\n                </div>\r\n              </div>\r\n              <div className=\"text-xs text-gray-500\">Note: Duplicate emails are prevented by the backend. If you already registered, please sign in.</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}