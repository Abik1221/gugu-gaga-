{"version":3,"sources":["turbopack:///[project]/components/ui/card.tsx","turbopack:///[project]/app/(dashboard)/dashboard/owner/integrations/page.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"rounded-2xl border border-white/20 bg-white/70 p-6 shadow-[0_20px_70px_-40px_rgba(16,185,129,0.65)] backdrop-blur-md\", className)}\n    {...props}\n  />\n));\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"mb-3 flex items-center justify-between gap-4\", className)} {...props} />\n));\nCardHeader.displayName = \"CardHeader\";\n\nconst CardTitle = React.forwardRef<\n  HTMLHeadingElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h4\n    ref={ref}\n    className={cn(\"text-lg font-semibold leading-tight text-emerald-900\", className)}\n    {...props}\n  />\n));\nCardTitle.displayName = \"CardTitle\";\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"text-sm leading-relaxed text-slate-700\", className)} {...props} />\n));\nCardContent.displayName = \"CardContent\";\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"mt-4 flex flex-wrap items-center justify-between gap-3\", className)}\n    {...props}\n  />\n));\nCardFooter.displayName = \"CardFooter\";\n\nexport { Card, CardHeader, CardTitle, CardContent, CardFooter };\n","\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport Link from \"next/link\";\n\nimport { IntegrationsAPI, type IntegrationConnectionOut, type IntegrationProviderOut } from \"@/utils/api\";\nimport { AuthAPI } from \"@/utils/api\";\nimport { useToast } from \"@/components/ui/toast\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Sheet, SheetContent, SheetDescription, SheetFooter, SheetHeader, SheetTitle } from \"@/components/ui/sheet\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\n\ntype ConnectState = {\n  provider: IntegrationProviderOut;\n  selectedResources: Set<string>;\n};\n\nexport default function OwnerIntegrationsPage() {\n  const { show } = useToast();\n\n  const [tenantId, setTenantId] = useState<string | null>(null);\n  const [loadingProfile, setLoadingProfile] = useState(true);\n\n  const [providers, setProviders] = useState<IntegrationProviderOut[]>([]);\n  const [providersLoading, setProvidersLoading] = useState(true);\n\n  const [connections, setConnections] = useState<IntegrationConnectionOut[]>([]);\n  const [connectionsLoading, setConnectionsLoading] = useState(true);\n\n  const [connectSheet, setConnectSheet] = useState<ConnectState | null>(null);\n  const [startingOAuth, setStartingOAuth] = useState(false);\n  const [syncingKey, setSyncingKey] = useState<string | null>(null);\n  const [disconnectingId, setDisconnectingId] = useState<number | null>(null);\n\n  useEffect(() => {\n    let active = true;\n    (async () => {\n      try {\n        const profile = await AuthAPI.me();\n        if (!active) return;\n        const tid = profile?.tenant_id || null;\n        setTenantId(tid);\n      } catch (error: any) {\n        if (!active) return;\n        setTenantId(null);\n        show({ variant: \"destructive\", title: \"Access denied\", description: error?.message || \"You are not authorised to manage integrations.\" });\n      } finally {\n        if (active) setLoadingProfile(false);\n      }\n    })();\n    return () => {\n      active = false;\n    };\n  }, [show]);\n\n  useEffect(() => {\n    let active = true;\n    (async () => {\n      setProvidersLoading(true);\n      try {\n        const items = await IntegrationsAPI.listProviders();\n        if (!active) return;\n        setProviders(items);\n      } catch (error: any) {\n        if (!active) return;\n        show({ variant: \"destructive\", title: \"Unable to load tools\", description: error?.message || \"Could not fetch available integrations.\" });\n      } finally {\n        if (active) setProvidersLoading(false);\n      }\n    })();\n    return () => {\n      active = false;\n    };\n  }, [show]);\n\n  useEffect(() => {\n    if (!tenantId) {\n      setConnections([]);\n      setConnectionsLoading(false);\n      return;\n    }\n    let active = true;\n    (async () => {\n      setConnectionsLoading(true);\n      try {\n        const items = await IntegrationsAPI.listConnections(tenantId);\n        if (!active) return;\n        setConnections(items);\n      } catch (error: any) {\n        if (!active) return;\n        show({ variant: \"destructive\", title: \"Unable to load connections\", description: error?.message || \"Could not fetch your linked tools.\" });\n      } finally {\n        if (active) setConnectionsLoading(false);\n      }\n    })();\n    return () => {\n      active = false;\n    };\n  }, [tenantId, show]);\n\n  const providerMap = useMemo(() => {\n    const map = new Map<string, IntegrationProviderOut>();\n    providers.forEach((provider) => {\n      map.set(provider.key, provider);\n    });\n    return map;\n  }, [providers]);\n\n  const openConnectSheet = (provider: IntegrationProviderOut) => {\n    const defaults = new Set(provider.capability.resources);\n    setConnectSheet({ provider, selectedResources: defaults });\n  };\n\n  const toggleResourceSelection = (resource: string, checked: boolean) => {\n    setConnectSheet((prev) => {\n      if (!prev) return prev;\n      const next = new Set(prev.selectedResources);\n      if (checked) next.add(resource);\n      else next.delete(resource);\n      return { ...prev, selectedResources: next };\n    });\n  };\n\n  const startOAuth = async () => {\n    if (!connectSheet || !tenantId) return;\n    setStartingOAuth(true);\n    try {\n      const resources = Array.from(connectSheet.selectedResources);\n      const response = await IntegrationsAPI.startOAuth(\n        tenantId,\n        connectSheet.provider.key,\n        resources.length > 0 ? resources : undefined,\n      );\n      if (typeof window !== 'undefined') {\n        window.location.href = response.authorization_url;\n      }\n      show({ variant: \"success\", title: \"Continue in new tab\", description: \"Complete the provider connection flow and you will be redirected back.\" });\n    } catch (error: any) {\n      show({ variant: \"destructive\", title: \"Unable to start connection\", description: error?.message || \"Check your credentials and try again.\" });\n    } finally {\n      setStartingOAuth(false);\n    }\n  };\n\n  const refreshConnections = async () => {\n    if (!tenantId) return;\n    setConnectionsLoading(true);\n    try {\n      const items = await IntegrationsAPI.listConnections(tenantId);\n      setConnections(items);\n    } catch (error: any) {\n      show({ variant: \"destructive\", title: \"Refresh failed\", description: error?.message || \"Could not update connection list.\" });\n    } finally {\n      setConnectionsLoading(false);\n    }\n  };\n\n  const handleDisconnect = async (connectionId: number) => {\n    if (!tenantId) return;\n    setDisconnectingId(connectionId);\n    try {\n      await IntegrationsAPI.disconnect(tenantId, connectionId);\n      show({ variant: \"success\", title: \"Connection removed\", description: \"This tool no longer syncs with your dashboard.\" });\n      await refreshConnections();\n    } catch (error: any) {\n      show({ variant: \"destructive\", title: \"Unable to disconnect\", description: error?.message || \"Please try again.\" });\n    } finally {\n      setDisconnectingId(null);\n    }\n  };\n\n  const handleSync = async (connection: IntegrationConnectionOut, resource: string, direction: \"incoming\" | \"outgoing\") => {\n    if (!tenantId) return;\n    const key = `${connection.id}-${resource}-${direction}`;\n    setSyncingKey(key);\n    try {\n      await IntegrationsAPI.triggerSync(tenantId, connection.id, resource, direction);\n      const verb = direction === \"incoming\" ? \"Import\" : \"Sync\";\n      show({ variant: \"success\", title: `${verb} scheduled`, description: `${verb} for ${resource} has been queued.` });\n      await refreshConnections();\n    } catch (error: any) {\n      show({ variant: \"destructive\", title: \"Sync failed\", description: error?.message || \"Could not queue the sync job.\" });\n    } finally {\n      setSyncingKey(null);\n    }\n  };\n\n  const loading = loadingProfile || providersLoading;\n\n  return (\n    <div className=\"space-y-8\">\n      <header className=\"flex flex-col gap-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-md lg:flex-row lg:items-center lg:justify-between\">\n        <div className=\"space-y-2\">\n          <h1 className=\"text-3xl font-semibold text-slate-900\">Tool integrations</h1>\n          <p className=\"max-w-2xl text-sm leading-relaxed text-slate-600\">\n            Connect your favourite tools to keep inventory, sales, and supplier data perfectly in sync. You stay in controlâ€”connect, import, and disconnect with a single click.\n          </p>\n        </div>\n        <div className=\"flex flex-wrap items-center gap-2\">\n          <Button variant=\"outline\" onClick={refreshConnections} disabled={connectionsLoading || !tenantId}>\n            Refresh connections\n          </Button>\n          <Link href=\"/dashboard/owner\">\n            <Button variant=\"ghost\">Back to owner dashboard</Button>\n          </Link>\n        </div>\n      </header>\n\n      <section className=\"space-y-4\">\n        <div className=\"flex items-center justify-between\">\n          <h2 className=\"text-lg font-semibold text-slate-900\">Available tools</h2>\n        </div>\n        {loading ? (\n          <div className=\"grid gap-4 md:grid-cols-2 xl:grid-cols-3\">\n            {Array.from({ length: 6 }).map((_, index) => (\n              <Skeleton key={index} className=\"h-36 rounded-2xl\" />\n            ))}\n          </div>\n        ) : providers.length === 0 ? (\n          <div className=\"rounded-lg border border-slate-200 bg-slate-50 p-6 text-sm text-slate-600\">\n            No integrations are available yet. Check back soon!\n          </div>\n        ) : (\n          <div className=\"grid gap-4 md:grid-cols-2 xl:grid-cols-3\">\n            {providers.map((provider) => {\n              const description = provider.capability.supports_delta_sync\n                ? \"Two-way sync available\"\n                : \"Manual import & export\";\n              return (\n                <Card key={provider.key} className=\"border border-slate-200 bg-white shadow-md\">\n                  <CardHeader>\n                    <CardTitle className=\"text-xl text-slate-900\">{provider.name}</CardTitle>\n                    <p className=\"text-sm text-slate-600 capitalize\">{provider.category}</p>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div className=\"text-xs uppercase tracking-wider text-slate-700 font-semibold\">Resources</div>\n                    <ul className=\"space-y-1 text-sm text-slate-700\">\n                      {provider.capability.resources.map((resource) => (\n                        <li key={resource}>{resource}</li>\n                      ))}\n                    </ul>\n                    <p className=\"text-xs text-slate-600\">{description}</p>\n                    <Button className=\"w-full bg-gray-400 hover:bg-gray-500 text-white\" disabled>\n                      Coming Soon\n                    </Button>\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n        )}\n      </section>\n\n      <section className=\"space-y-4\">\n        <div className=\"flex items-center justify-between\">\n          <h2 className=\"text-lg font-semibold text-slate-900\">Connected tools</h2>\n        </div>\n        {connectionsLoading ? (\n          <div className=\"space-y-3\">\n            {Array.from({ length: 3 }).map((_, index) => (\n              <Skeleton key={index} className=\"h-32 rounded-2xl\" />\n            ))}\n          </div>\n        ) : connections.length === 0 ? (\n          <div className=\"rounded-lg border border-slate-200 bg-slate-50 p-6 text-sm text-slate-600\">\n            You have not connected any tools yet. Pick one above to get started.\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {connections.map((connection) => {\n              const provider = providerMap.get(connection.provider_key);\n              const resources = provider?.capability.resources || [];\n              return (\n                <Card key={connection.id} className=\"border border-slate-200 bg-white shadow-md\">\n                  <CardHeader className=\"flex flex-col gap-2 md:flex-row md:items-center md:justify-between\">\n                    <div>\n                      <CardTitle className=\"text-slate-900\">{connection.provider_name}</CardTitle>\n                      <p className=\"text-sm text-slate-600\">Connected as {connection.display_name}</p>\n                    </div>\n                    <div className=\"flex flex-wrap items-center gap-2 text-xs text-slate-600\">\n                      <span>Status: <strong className=\"text-emerald-700\">{connection.status}</strong></span>\n                      {connection.updated_at && <span>Updated {new Date(connection.updated_at).toLocaleString()}</span>}\n                    </div>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    {resources.length === 0 ? (\n                      <div className=\"rounded-lg border border-slate-200 bg-slate-50 p-3 text-sm text-slate-600\">\n                        This provider is connected but no data resources are available yet.\n                      </div>\n                    ) : (\n                      <div className=\"space-y-3\">\n                        <div className=\"text-xs uppercase tracking-wider text-slate-700 font-semibold\">Sync actions</div>\n                        {resources.map((resource) => {\n                          const incomingKey = `${connection.id}-${resource}-incoming`;\n                          const outgoingKey = `${connection.id}-${resource}-outgoing`;\n                          return (\n                            <div key={resource} className=\"flex flex-wrap items-center justify-between gap-3 rounded-lg border border-slate-200 bg-slate-50 p-3\">\n                              <div>\n                                <div className=\"text-sm font-semibold text-slate-900\">{resource}</div>\n                                <p className=\"text-xs text-slate-600\">Import data into Zemen or push updates back to {connection.provider_name}.</p>\n                              </div>\n                              <div className=\"flex flex-wrap items-center gap-2\">\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"outline\"\n                                  onClick={() => handleSync(connection, resource, \"incoming\")}\n                                  disabled={syncingKey === incomingKey}\n                                >\n                                  {syncingKey === incomingKey ? \"Importing...\" : \"Import\"}\n                                </Button>\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"ghost\"\n                                  onClick={() => handleSync(connection, resource, \"outgoing\")}\n                                  disabled={syncingKey === outgoingKey}\n                                >\n                                  {syncingKey === outgoingKey ? \"Syncing...\" : \"Push updates\"}\n                                </Button>\n                              </div>\n                            </div>\n                          );\n                        })}\n                      </div>\n                    )}\n                    <div className=\"flex justify-end\">\n                      <Button\n                        variant=\"destructive\"\n                        onClick={() => handleDisconnect(connection.id)}\n                        disabled={disconnectingId === connection.id}\n                      >\n                        {disconnectingId === connection.id ? \"Disconnecting...\" : \"Disconnect\"}\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n        )}\n      </section>\n\n      <Sheet open={!!connectSheet} onOpenChange={(open) => !open && setConnectSheet(null)}>\n        <SheetContent className=\"space-y-6\">\n          <SheetHeader>\n            <SheetTitle>Connect {connectSheet?.provider.name}</SheetTitle>\n            <SheetDescription>\n              Choose the data you want to sync into your dashboard. You can always change this later.\n            </SheetDescription>\n          </SheetHeader>\n          {connectSheet && (\n            <div className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                {connectSheet.provider.capability.resources.map((resource) => {\n                  const checked = connectSheet.selectedResources.has(resource);\n                  return (\n                    <label key={resource} className=\"flex items-center gap-3 rounded-lg border border-slate-200 bg-white p-3 text-sm text-slate-900\">\n                      <input\n                        type=\"checkbox\"\n                        className=\"h-4 w-4 rounded border-white/40 bg-transparent\"\n                        checked={checked}\n                        onChange={(event) => toggleResourceSelection(resource, event.target.checked)}\n                      />\n                      <span>{resource}</span>\n                    </label>\n                  );\n                })}\n              </div>\n              {!connectSheet.provider.requires_oauth && (\n                <div className=\"rounded-xl border border-white/10 bg-amber-500/10 p-3 text-sm text-amber-100\">\n                  This provider allows manual API tokens. OAuth is optional.\n                </div>\n              )}\n            </div>\n          )}\n          <SheetFooter className=\"flex flex-col gap-2 sm:flex-row sm:justify-end\">\n            <Button variant=\"ghost\" onClick={() => setConnectSheet(null)} disabled={startingOAuth}>\n              Cancel\n            </Button>\n            <Button onClick={startOAuth} disabled={startingOAuth || !tenantId}>\n              {startingOAuth ? \"Redirecting...\" : \"Continue to provider\"}\n            </Button>\n          </SheetFooter>\n        </SheetContent>\n      </Sheet>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}