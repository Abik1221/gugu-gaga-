module.exports=[29987,a=>{"use strict";a.s(["default",()=>j]);var b=a.i(90944),c=a.i(72131),d=a.i(38246),e=a.i(5522),f=a.i(40695),g=a.i(50463),h=a.i(64037),i=a.i(75320);function j(){let{show:a}=(0,h.useToast)(),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(null);async function v(b){k(!0);try{let a=await i.ChatAPI.listThreads(b);q(a||[]),u(null)}catch(b){u(b.message||"Failed to load threads"),a({variant:"destructive",title:"Error",description:b.message||"Failed"})}finally{k(!1)}}async function w(){if(l)try{let a=r.trim()||"New chat";await i.ChatAPI.createThread(l,a),s(""),await v(l)}catch(b){a({variant:"destructive",title:"Create failed",description:b.message})}}return(0,c.useEffect)(()=>{(async()=>{try{let a=await i.AuthAPI.me(),b=await i.PharmaciesAPI.list(1,100),c=b?.items||[];o(c);let d=a?.tenant_id||(c[0]?.tenant_id??null);d?(m(d),await v(d)):(u("No tenant context"),k(!1))}catch(a){u(a.message||"Failed"),k(!1)}})()},[]),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:(0,b.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsx)("h1",{className:"text-lg font-semibold text-slate-900",children:"Chat Threads"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,b.jsx)(e.Input,{placeholder:"Ask about your business data...",value:r,onChange:a=>s(a.target.value),className:"w-64 border-slate-300 focus:border-emerald-500"}),(0,b.jsx)(f.Button,{onClick:w,disabled:!l,size:"sm",className:"bg-emerald-700 hover:bg-emerald-800 text-white",children:"Start Chat"})]})]})}),j?(0,b.jsx)(g.Skeleton,{className:"h-32 rounded-lg"}):t?(0,b.jsx)("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-800",children:t}):(0,b.jsxs)("div",{className:"grid gap-2",children:[p.map(a=>(0,b.jsxs)(d.default,{href:`/dashboard/owner/chat/${a.id}`,className:"block rounded-lg border border-slate-200 bg-white p-3 transition hover:border-emerald-200 hover:bg-emerald-50",children:[(0,b.jsx)("div",{className:"font-medium text-slate-900",children:a.title}),(0,b.jsxs)("div",{className:"text-xs text-slate-600",children:["Thread #",a.id]})]},a.id)),0===p.length&&(0,b.jsx)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-4 text-center text-sm text-slate-600",children:"No threads yet. Create your first chat thread."})]})]})}}];

//# sourceMappingURL=app_%28dashboard%29_dashboard_owner_chat_page_tsx_bd43a022._.js.map