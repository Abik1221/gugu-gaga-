{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/gugu-gaga-/front_end/components/ui/skeleton.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\n\r\nexport function Skeleton({ className = \"\" }: { className?: string }) {\r\n  return <div className={`animate-pulse bg-gray-200 rounded ${className}`} />;\r\n}\r\n\r\nexport function TableSkeletonRows({ rows = 6, cols = 6 }: { rows?: number; cols?: number }) {\r\n  return (\r\n    <tbody>\r\n      {Array.from({ length: rows }).map((_, r) => (\r\n        <tr key={r} className=\"border-t\">\r\n          {Array.from({ length: cols }).map((__, c) => (\r\n            <td key={c} className=\"px-3 py-2\">\r\n              <Skeleton className=\"h-4 w-full\" />\r\n            </td>\r\n          ))}\r\n        </tr>\r\n      ))}\r\n    </tbody>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;;AAGO,SAAS,SAAS,EAAE,YAAY,EAAE,EAA0B;IACjE,qBAAO,8OAAC;QAAI,WAAW,CAAC,kCAAkC,EAAE,WAAW;;;;;;AACzE;AAEO,SAAS,kBAAkB,EAAE,OAAO,CAAC,EAAE,OAAO,CAAC,EAAoC;IACxF,qBACE,8OAAC;kBACE,MAAM,IAAI,CAAC;YAAE,QAAQ;QAAK,GAAG,GAAG,CAAC,CAAC,GAAG,kBACpC,8OAAC;gBAAW,WAAU;0BACnB,MAAM,IAAI,CAAC;oBAAE,QAAQ;gBAAK,GAAG,GAAG,CAAC,CAAC,IAAI,kBACrC,8OAAC;wBAAW,WAAU;kCACpB,cAAA,8OAAC;4BAAS,WAAU;;;;;;uBADb;;;;;eAFJ;;;;;;;;;;AAUjB","debugId":null}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/gugu-gaga-/front_end/app/%28dashboard%29/dashboard/admin/page.tsx"],"sourcesContent":["\"use client\";\nimport React, { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport { AdminAPI } from \"@/utils/api\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/components/ui/toast\";\n\ninterface PharmaciesResponse {\n  total: number;\n  items: Array<{ tenant_id: string; name: string; kyc_status?: string | null; subscription?: { blocked?: boolean | null } }>;\n}\n\ninterface AffiliatesResponse {\n  total: number;\n  items: Array<{ user_id: number; email: string; referrals: number; payouts?: { pending_total?: number; paid_total?: number } }>;\n}\n\ninterface PayoutRow {\n  id: number;\n  status: string;\n  amount: number;\n  month: string;\n}\n\nexport default function AdminOverviewPage() {\n  const { show } = useToast();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [pharmacies, setPharmacies] = useState<PharmaciesResponse | null>(null);\n  const [affiliates, setAffiliates] = useState<AffiliatesResponse | null>(null);\n  const [payouts, setPayouts] = useState<PayoutRow[]>([]);\n\n  useEffect(() => {\n    let active = true;\n    async function load() {\n      setLoading(true);\n      try {\n        const [ph, af, pay] = await Promise.all([\n          AdminAPI.pharmacies(1, 5),\n          AdminAPI.affiliates(1, 5),\n          AdminAPI.listAffiliatePayouts(\"pending\"),\n        ]);\n        if (!active) return;\n        setPharmacies(ph as PharmaciesResponse);\n        setAffiliates(af as AffiliatesResponse);\n        setPayouts(Array.isArray(pay) ? (pay as PayoutRow[]) : []);\n        setError(null);\n      } catch (e: any) {\n        if (!active) return;\n        const msg = e?.message || \"Failed to load admin overview\";\n        setError(msg);\n        show({ variant: \"destructive\", title: \"Error\", description: msg });\n      } finally {\n        if (active) setLoading(false);\n      }\n    }\n    load();\n    return () => {\n      active = false;\n    };\n  }, [show]);\n\n  const metrics = {\n    pharmacies: pharmacies?.total ?? 0,\n    affiliates: affiliates?.total ?? 0,\n    payoutQueue: payouts.filter((p) => p.status === \"pending\").length,\n    blockedTenants: (pharmacies?.items || []).filter((p) => p.subscription?.blocked).length,\n  };\n\n  if (loading) {\n    return (\n      <div className=\"space-y-4\">\n        <Skeleton className=\"h-8 w-48\" />\n        <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4\">\n          {Array.from({ length: 4 }).map((_, idx) => (\n            <Skeleton key={idx} className=\"h-24\" />\n          ))}\n        </div>\n        <Skeleton className=\"h-64\" />\n      </div>\n    );\n  }\n\n  if (error) {\n    return <div className=\"text-sm text-red-600\">{error}</div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-xl font-semibold\">Admin Overview</h1>\n          <p className=\"text-sm text-gray-500\">At-a-glance snapshot of tenants, affiliates, and payouts.</p>\n        </div>\n        <Button variant=\"outline\" onClick={() => location.reload()}>Refresh</Button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4\">\n        <SummaryCard title=\"Total Pharmacies\" value={metrics.pharmacies} href=\"/dashboard/admin/pharmacies\" />\n        <SummaryCard title=\"Total Affiliates\" value={metrics.affiliates} href=\"/dashboard/admin/affiliates\" />\n        <SummaryCard title=\"Pending Payouts\" value={metrics.payoutQueue} href=\"/dashboard/admin/payouts\" />\n        <SummaryCard title=\"Blocked Tenants\" value={metrics.blockedTenants} href=\"/dashboard/admin/pharmacies\" />\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n        <section className=\"border rounded bg-white\">\n          <header className=\"p-3 border-b flex items-center justify-between\">\n            <div className=\"font-medium\">Recently Registered Pharmacies</div>\n            <Link href=\"/dashboard/admin/pharmacies\" className=\"text-xs text-emerald-600 underline\">View all</Link>\n          </header>\n          <div className=\"divide-y\">\n            {(pharmacies?.items || []).length === 0 ? (\n              <div className=\"p-4 text-sm text-gray-500\">No pharmacies yet.</div>\n            ) : (\n              pharmacies!.items.map((p) => (\n                <div key={p.tenant_id} className=\"p-3\">\n                  <div className=\"font-medium text-sm\">{p.name}</div>\n                  <div className=\"text-xs text-gray-500 flex gap-3 mt-1\">\n                    <span>KYC: {p.kyc_status ?? \"pending\"}</span>\n                    <span>Status: {p.subscription?.blocked ? \"Blocked\" : \"Active\"}</span>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </section>\n\n        <section className=\"border rounded bg-white\">\n          <header className=\"p-3 border-b flex items-center justify-between\">\n            <div className=\"font-medium\">Active Affiliates</div>\n            <Link href=\"/dashboard/admin/affiliates\" className=\"text-xs text-emerald-600 underline\">Manage</Link>\n          </header>\n          <div className=\"divide-y\">\n            {(affiliates?.items || []).length === 0 ? (\n              <div className=\"p-4 text-sm text-gray-500\">No affiliates yet.</div>\n            ) : (\n              affiliates!.items.map((a) => (\n                <div key={a.user_id} className=\"p-3\">\n                  <div className=\"font-medium text-sm\">{a.email}</div>\n                  <div className=\"text-xs text-gray-500 flex gap-3 mt-1\">\n                    <span>Referrals: {a.referrals}</span>\n                    <span>Pending ${a.payouts?.pending_total?.toFixed?.(2) ?? \"0.00\"}</span>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </section>\n      </div>\n    </div>\n  );\n}\n\nfunction SummaryCard({ title, value, href }: { title: string; value: number; href: string }) {\n  return (\n    <Link href={href} className=\"border rounded bg-white p-4 block hover:shadow-sm transition\">\n      <div className=\"text-xs uppercase tracking-wide text-gray-500\">{title}</div>\n      <div className=\"text-3xl font-semibold mt-2\">{value}</div>\n    </Link>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}