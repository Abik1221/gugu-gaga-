{"version":3,"sources":["turbopack:///[project]/components/ui/card.tsx","turbopack:///[project]/components/ui/badge.tsx","turbopack:///[project]/app/(dashboard)/dashboard/owner/branches/page.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"rounded-2xl border border-white/20 bg-white/70 p-6 shadow-[0_20px_70px_-40px_rgba(16,185,129,0.65)] backdrop-blur-md\", className)}\n    {...props}\n  />\n));\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"mb-3 flex items-center justify-between gap-4\", className)} {...props} />\n));\nCardHeader.displayName = \"CardHeader\";\n\nconst CardTitle = React.forwardRef<\n  HTMLHeadingElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h4\n    ref={ref}\n    className={cn(\"text-lg font-semibold leading-tight text-emerald-900\", className)}\n    {...props}\n  />\n));\nCardTitle.displayName = \"CardTitle\";\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"text-sm leading-relaxed text-slate-700\", className)} {...props} />\n));\nCardContent.displayName = \"CardContent\";\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"mt-4 flex flex-wrap items-center justify-between gap-3\", className)}\n    {...props}\n  />\n));\nCardFooter.displayName = \"CardFooter\";\n\nexport { Card, CardHeader, CardTitle, CardContent, CardFooter };\n","import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center border rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default: \"border-transparent bg-primary text-primary-foreground shadow\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive: \"border-transparent bg-destructive text-destructive-foreground shadow\",\n        outline: \"border-border bg-background text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","\"use client\";\n\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\n\nimport { AuthAPI, BranchAPI, PharmaciesAPI } from \"@/utils/api\";\nimport { useToast } from \"@/components/ui/toast\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport {\n  Card,\n  CardContent,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetFooter,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\";\n\nimport type { PharmaciesListResponse } from \"@/utils/api\";\n\ntype BranchRecord = {\n  id: number;\n  pharmacy_id: number;\n  tenant_id: string;\n  name: string;\n  address?: string | null;\n  phone?: string | null;\n};\n\ntype PharmacySummary = PharmaciesListResponse[\"items\"][number];\n\nexport default function BranchManagementPage() {\n  const { show } = useToast();\n\n  const [tenantId, setTenantId] = useState<string | null>(null);\n  const [profileLoaded, setProfileLoaded] = useState(false);\n\n  const [branches, setBranches] = useState<BranchRecord[]>([]);\n  const [branchesLoading, setBranchesLoading] = useState(true);\n  const [branchesRefreshing, setBranchesRefreshing] = useState(false);\n  const [branchesError, setBranchesError] = useState<string | null>(null);\n\n  const [pharmacies, setPharmacies] = useState<PharmacySummary[]>([]);\n  const [pharmacyLoading, setPharmacyLoading] = useState(true);\n  const [pharmacyError, setPharmacyError] = useState<string | null>(null);\n\n  const [search, setSearch] = useState(\"\");\n  const [mutatingId, setMutatingId] = useState<number | null>(null);\n\n  const [createOpen, setCreateOpen] = useState(false);\n\n  const filteredBranches = useMemo(() => {\n    const query = search.trim().toLowerCase();\n    if (!query) return branches;\n    return branches.filter((branch) => {\n      return (\n        branch.name.toLowerCase().includes(query) ||\n        (branch.address ?? \"\").toLowerCase().includes(query) ||\n        (branch.phone ?? \"\").toLowerCase().includes(query)\n      );\n    });\n  }, [branches, search]);\n\n  const primaryPharmacy = useMemo(() => pharmacies[0] || null, [pharmacies]);\n\n  const loadBranches = useCallback(\n    async (tid: string, opts?: { silent?: boolean }) => {\n      if (opts?.silent) {\n        setBranchesRefreshing(true);\n      } else {\n        setBranchesLoading(true);\n      }\n      setBranchesError(null);\n      try {\n        const list = await BranchAPI.list(tid, { page_size: 200 });\n        setBranches(list?.items ?? []);\n      } catch (error: any) {\n        const message = error?.message || \"Unable to load branches\";\n        setBranchesError(message);\n        show({\n          variant: \"destructive\",\n          title: \"Failed to load branches\",\n          description: message,\n        });\n      } finally {\n        setBranchesLoading(false);\n        setBranchesRefreshing(false);\n      }\n    },\n    [show]\n  );\n\n  const loadPharmacies = useCallback(\n    async (tid: string) => {\n      setPharmacyLoading(true);\n      setPharmacyError(null);\n      try {\n        const response = await PharmaciesAPI.list(tid, { page_size: 20 });\n        setPharmacies(response?.items ?? []);\n      } catch (error: any) {\n        const message = error?.message || \"Unable to load pharmacies\";\n        setPharmacyError(message);\n        show({\n          variant: \"destructive\",\n          title: \"Unable to load pharmacies\",\n          description: message,\n        });\n      } finally {\n        setPharmacyLoading(false);\n      }\n    },\n    [show]\n  );\n\n  useEffect(() => {\n    let cancelled = false;\n\n    async function bootstrap() {\n      try {\n        const profile = await AuthAPI.me();\n        if (cancelled) return;\n        const tid = profile?.tenant_id ?? null;\n        setTenantId(tid);\n        if (tid) {\n          await Promise.all([loadBranches(tid), loadPharmacies(tid)]);\n        }\n      } catch (error: any) {\n        if (cancelled) return;\n        show({\n          variant: \"destructive\",\n          title: \"Unable to load owner profile\",\n          description: error?.message || \"Please sign in again.\",\n        });\n      } finally {\n        if (!cancelled) setProfileLoaded(true);\n      }\n    }\n\n    bootstrap();\n    return () => {\n      cancelled = true;\n    };\n  }, [loadBranches, loadPharmacies, show]);\n\n  const handleDelete = async (branch: BranchRecord) => {\n    if (!tenantId) return;\n    const confirmed = typeof window !== 'undefined' && window.confirm(\n      `Remove branch \"${branch.name}\"? Associated sales will remain attributed to this branch.`\n    );\n    if (!confirmed) return;\n    setMutatingId(branch.id);\n    try {\n      await BranchAPI.remove(tenantId, branch.id);\n      show({\n        variant: \"success\",\n        title: \"Branch removed\",\n        description: branch.name,\n      });\n      await loadBranches(tenantId, { silent: true });\n    } catch (error: any) {\n      show({\n        variant: \"destructive\",\n        title: \"Failed to remove branch\",\n        description: error?.message || \"Please try again.\",\n      });\n    } finally {\n      setMutatingId(null);\n    }\n  };\n\n  const stats = useMemo(\n    () => ({\n      total: branches.length,\n      withPhone: branches.filter((b) => (b.phone ?? \"\").trim().length > 0)\n        .length,\n    }),\n    [branches]\n  );\n\n  const isBusy = branchesLoading && !branchesRefreshing;\n\n  return (\n    <div className=\"space-y-8\">\n      <header className=\"flex flex-col gap-4 rounded-2xl border border-slate-200 bg-white p-6 shadow-md lg:flex-row lg:items-center lg:justify-between\">\n        <div className=\"space-y-1\">\n          <h1 className=\"text-2xl font-semibold text-slate-900\">\n            Branch management\n          </h1>\n          <p className=\"text-sm text-slate-600\">\n            Organise your pharmacy locations, keep contact information up to\n            date, and control where sales are attributed.\n          </p>\n        </div>\n        <div className=\"flex flex-wrap items-center gap-2\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => tenantId && loadBranches(tenantId, { silent: true })}\n            disabled={!tenantId || branchesRefreshing}\n          >\n            {branchesRefreshing ? \"Refreshing...\" : \"Refresh\"}\n          </Button>\n          <Button\n            size=\"sm\"\n            onClick={() => setCreateOpen(true)}\n            disabled={!tenantId || pharmacyLoading}\n            className=\"bg-emerald-700 hover:bg-emerald-800 text-white\"\n          >\n            New branch\n          </Button>\n        </div>\n      </header>\n\n      <section className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n        <Card className=\"border border-slate-200 bg-white shadow-md\">\n          <CardHeader className=\"space-y-1\">\n            <CardTitle className=\"text-xs uppercase tracking-wider text-slate-600\">\n              Total branches\n            </CardTitle>\n            {isBusy ? (\n              <Skeleton className=\"h-7 w-12\" />\n            ) : (\n              <div className=\"text-2xl font-semibold text-slate-900\">\n                {stats.total}\n              </div>\n            )}\n          </CardHeader>\n        </Card>\n        <Card className=\"border border-slate-200 bg-white shadow-md\">\n          <CardHeader className=\"space-y-1\">\n            <CardTitle className=\"text-xs uppercase tracking-wider text-slate-600\">\n              Contact-ready\n            </CardTitle>\n            {isBusy ? (\n              <Skeleton className=\"h-7 w-12\" />\n            ) : (\n              <div className=\"text-2xl font-semibold text-slate-900\">\n                {stats.withPhone}\n              </div>\n            )}\n          </CardHeader>\n          <CardFooter className=\"pt-0 text-xs text-slate-500\">\n            Branches with a phone number recorded\n          </CardFooter>\n        </Card>\n      </section>\n\n      <section>\n        <Card className=\"border border-slate-200 bg-white shadow-md\">\n          <CardHeader className=\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\">\n            <CardTitle className=\"text-slate-900\">Branch directory</CardTitle>\n            <div className=\"flex flex-wrap items-center gap-2\">\n              <Input\n                placeholder=\"Search branch name, address, phone\"\n                value={search}\n                onChange={(event) => setSearch(event.target.value)}\n                className=\"w-64 border border-slate-300 bg-white text-sm text-slate-900 placeholder:text-slate-500\"\n              />\n            </div>\n          </CardHeader>\n          <CardContent className=\"p-0\">\n            {isBusy ? (\n              <Skeleton className=\"h-64 w-full\" />\n            ) : branchesError ? (\n              <div className=\"p-6 text-sm text-red-600\">{branchesError}</div>\n            ) : filteredBranches.length === 0 ? (\n              <div className=\"space-y-2 p-6 text-sm text-slate-600\">\n                <p>\n                  No branches yet. Create a branch to start allocating sales\n                  across locations.\n                </p>\n                {pharmacies.length === 0 && !pharmacyLoading && (\n                  <div className=\"rounded-lg border border-amber-300 bg-amber-50 p-3 text-xs text-amber-800\">\n                    We couldn't find a pharmacy record for this tenant. Please\n                    complete your pharmacy profile (Settings → Pharmacy) before\n                    adding branches.\n                  </div>\n                )}\n              </div>\n            ) : (\n              <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full divide-y divide-slate-200 text-sm text-slate-800\">\n                  <thead className=\"bg-slate-50\">\n                    <tr>\n                      <th className=\"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wider text-slate-900\">\n                        Name\n                      </th>\n                      <th className=\"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wider text-slate-900\">\n                        Address\n                      </th>\n                      <th className=\"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wider text-slate-900\">\n                        Phone\n                      </th>\n                      <th className=\"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wider text-slate-900\">\n                        Pharmacy\n                      </th>\n                      <th className=\"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wider text-slate-900\">\n                        Actions\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-slate-100 bg-white\">\n                    {filteredBranches.map((branch) => {\n                      const pharmacy = pharmacies.find(\n                        (p) => p.id === branch.pharmacy_id\n                      );\n                      return (\n                        <tr key={branch.id}>\n                          <td className=\"px-3 py-2 font-semibold text-slate-900\">\n                            {branch.name}\n                          </td>\n                          <td className=\"px-3 py-2 text-slate-600\">\n                            {branch.address || \"—\"}\n                          </td>\n                          <td className=\"px-3 py-2 text-slate-600\">\n                            {branch.phone || \"—\"}\n                          </td>\n                          <td className=\"px-3 py-2\">\n                            <Badge\n                              variant=\"outline\"\n                              className=\"border-emerald-300 bg-emerald-50 text-emerald-800\"\n                            >\n                              {pharmacy?.name ?? `#${branch.pharmacy_id}`}\n                            </Badge>\n                          </td>\n                          <td className=\"px-3 py-2\">\n                            <div className=\"flex flex-wrap items-center gap-2\">\n                              <Button\n                                variant=\"destructive\"\n                                size=\"sm\"\n                                onClick={() => handleDelete(branch)}\n                                disabled={mutatingId === branch.id}\n                              >\n                                Delete\n                              </Button>\n                            </div>\n                          </td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </CardContent>\n          <CardFooter className=\"justify-between text-xs text-slate-500\">\n            <div>\n              Showing {filteredBranches.length} of {branches.length} branches\n            </div>\n            <div>Tenant: {tenantId ?? \"—\"}</div>\n          </CardFooter>\n        </Card>\n      </section>\n\n      <CreateBranchSheet\n        open={createOpen}\n        onOpenChange={(open) => {\n          if (!open) setCreateOpen(false);\n          else setCreateOpen(true);\n        }}\n        tenantId={tenantId ?? undefined}\n        pharmacies={pharmacies}\n        loadingPharmacies={pharmacyLoading}\n        disabled={!tenantId || pharmacyLoading || pharmacies.length === 0}\n        onCreated={async () =>\n          tenantId && loadBranches(tenantId, { silent: true })\n        }\n      />\n    </div>\n  );\n}\n\ntype CreateBranchSheetProps = {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  tenantId?: string;\n  pharmacies: PharmacySummary[];\n  loadingPharmacies: boolean;\n  disabled?: boolean;\n  onCreated: () => void;\n};\n\nfunction CreateBranchSheet({\n  open,\n  onOpenChange,\n  tenantId,\n  pharmacies,\n  loadingPharmacies,\n  disabled,\n  onCreated,\n}: CreateBranchSheetProps) {\n  const { show } = useToast();\n\n  const [pharmacyId, setPharmacyId] = useState<number | null>(null);\n  const [name, setName] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [submitting, setSubmitting] = useState(false);\n\n  useEffect(() => {\n    if (!open) return;\n    if (loadingPharmacies) return;\n    if (pharmacies.length === 0) {\n      setPharmacyId(null);\n    } else {\n      setPharmacyId((prev) => prev ?? pharmacies[0]?.id ?? null);\n    }\n  }, [open, pharmacies, loadingPharmacies]);\n\n  const resetForm = () => {\n    setName(\"\");\n    setAddress(\"\");\n    setPhone(\"\");\n  };\n\n  const handleSubmit: React.FormEventHandler<HTMLFormElement> = async (\n    event\n  ) => {\n    event.preventDefault();\n    if (!tenantId) {\n      show({\n        variant: \"destructive\",\n        title: \"No tenant context\",\n        description: \"Reload and try again.\",\n      });\n      return;\n    }\n    if (!pharmacyId) {\n      show({\n        variant: \"destructive\",\n        title: \"Select a pharmacy\",\n        description: \"A primary pharmacy record is required.\",\n      });\n      return;\n    }\n    if (!name.trim()) {\n      show({\n        variant: \"destructive\",\n        title: \"Branch name required\",\n        description: \"Please provide a branch name.\",\n      });\n      return;\n    }\n\n    setSubmitting(true);\n    try {\n      await BranchAPI.create(tenantId, {\n        pharmacy_id: pharmacyId,\n        name: name.trim(),\n        address: address.trim() || undefined,\n        phone: phone.trim() || undefined,\n      });\n      show({\n        variant: \"success\",\n        title: \"Branch created\",\n        description: name.trim(),\n      });\n      resetForm();\n      onOpenChange(false);\n      onCreated();\n    } catch (error: any) {\n      show({\n        variant: \"destructive\",\n        title: \"Failed to create branch\",\n        description: error?.message || \"Please try again.\",\n      });\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <Sheet\n      open={open}\n      onOpenChange={(next) => {\n        if (!next) resetForm();\n        onOpenChange(next);\n      }}\n    >\n      <SheetContent side=\"right\" className=\"max-w-md space-y-4 overflow-y-auto\">\n        <SheetHeader>\n          <SheetTitle>Create branch</SheetTitle>\n          <SheetDescription>\n            Add a new pharmacy location. Branch names appear in POS sales\n            reports and analytics.\n          </SheetDescription>\n        </SheetHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-1\">\n            <label className=\"text-xs font-medium text-gray-600\">\n              Pharmacy\n            </label>\n            <select\n              value={pharmacyId ?? \"\"}\n              onChange={(event) =>\n                setPharmacyId(Number(event.target.value) || null)\n              }\n              disabled={loadingPharmacies || pharmacies.length === 0}\n              className=\"w-full rounded border border-gray-200 bg-white px-3 py-2 text-sm text-gray-700 shadow-sm focus:outline-none focus:ring\"\n            >\n              {pharmacies.length === 0 ? (\n                <option value=\"\">No pharmacy found</option>\n              ) : (\n                pharmacies.map((pharmacy) => (\n                  <option key={pharmacy.id} value={pharmacy.id}>\n                    {pharmacy.name}\n                  </option>\n                ))\n              )}\n            </select>\n          </div>\n          <div className=\"space-y-1\">\n            <label className=\"text-xs font-medium text-gray-600\">\n              Branch name\n            </label>\n            <Input\n              value={name}\n              onChange={(event) => setName(event.target.value)}\n              required\n              placeholder=\"e.g. Bole Branch\"\n            />\n          </div>\n          <div className=\"space-y-1\">\n            <label className=\"text-xs font-medium text-gray-600\">\n              Address (optional)\n            </label>\n            <Input\n              value={address}\n              onChange={(event) => setAddress(event.target.value)}\n              placeholder=\"Street, city\"\n            />\n          </div>\n          <div className=\"space-y-1\">\n            <label className=\"text-xs font-medium text-gray-600\">\n              Phone (optional)\n            </label>\n            <Input\n              value={phone}\n              onChange={(event) => setPhone(event.target.value)}\n              placeholder=\"e.g. +251-911-000000\"\n            />\n          </div>\n          <SheetFooter>\n            <div className=\"flex w-full flex-col gap-2 sm:flex-row sm:justify-between\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => {\n                  resetForm();\n                  onOpenChange(false);\n                }}\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={submitting || disabled}>\n                {submitting ? \"Creating...\" : \"Create branch\"}\n              </Button>\n            </div>\n          </SheetFooter>\n        </form>\n      </SheetContent>\n    </Sheet>\n  );\n}\n"],"names":[],"mappings":"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"}