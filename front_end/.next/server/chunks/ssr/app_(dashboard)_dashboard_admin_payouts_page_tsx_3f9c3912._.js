module.exports=[5433,a=>{"use strict";a.s(["default",()=>i]);var b=a.i(90944),c=a.i(72131),d=a.i(5522),e=a.i(40695),f=a.i(50463),g=a.i(64037),h=a.i(75320);function i(){let{show:a}=(0,g.useToast)(),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)("");async function u(){n(!0);try{let a=await h.AdminAPI.listAffiliatePayouts(s||void 0);p(Array.isArray(a)?a:[])}catch(b){a({variant:"destructive",title:"Failed to load payouts",description:b.message})}finally{n(!1)}}(0,c.useEffect)(()=>{let a=!0;return!async function(){try{let b=await h.AuthAPI.me();a&&l(b)}finally{a&&j(!1)}}(),()=>{a=!1}},[]),(0,c.useEffect)(()=>{u()},[s]);let v=(0,c.useMemo)(()=>{let a=q.trim().toLowerCase();return a?o.filter(b=>String(b.id).toLowerCase().includes(a)||String(b.affiliate_user_id).toLowerCase().includes(a)||(b.tenant_id||"").toLowerCase().includes(a)||(b.month||"").toLowerCase().includes(a)||(b.status||"").toLowerCase().includes(a)):o},[o,q]);async function w(b){try{await h.AdminAPI.markPayoutPaid(b),a({variant:"success",title:"Payout marked paid"}),await u()}catch(b){a({variant:"destructive",title:"Mark paid failed",description:b.message})}}async function x(b){try{await h.AdminAPI.approvePayout(b),a({variant:"success",title:"Payout approved"}),await u()}catch(b){a({variant:"destructive",title:"Approve failed",description:b.message})}}return i||m?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(f.Skeleton,{className:"h-8 w-64"}),(0,b.jsx)(f.Skeleton,{className:"h-10 w-full"}),(0,b.jsx)("div",{className:"space-y-2",children:Array.from({length:8}).map((a,c)=>(0,b.jsx)(f.Skeleton,{className:"h-14"},c))})]}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,b.jsxs)("div",{className:"mx-auto max-w-7xl space-y-8",children:[(0,b.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Affiliate Payouts"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("select",{className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-slate-700 focus:border-emerald-500 focus:ring-emerald-500",value:s,onChange:a=>t(a.target.value),children:[(0,b.jsx)("option",{value:"",children:"All Status"}),(0,b.jsx)("option",{value:"pending",children:"Pending"}),(0,b.jsx)("option",{value:"approved",children:"Approved"}),(0,b.jsx)("option",{value:"paid",children:"Paid"})]}),(0,b.jsx)(d.Input,{placeholder:"Search payouts...",value:q,onChange:a=>r(a.target.value),className:"w-80 rounded-lg border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus:border-emerald-500 focus:ring-emerald-500"})]})]})}),(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[(0,b.jsx)("div",{className:"border-b border-slate-200 p-6",children:(0,b.jsxs)("h2",{className:"text-lg font-semibold text-slate-900",children:["All Payouts (",v.length,")"]})}),(0,b.jsxs)("div",{className:"overflow-hidden",children:[(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-4 border-b border-slate-100 bg-slate-50 p-4 text-sm font-medium text-slate-600",children:[(0,b.jsx)("div",{className:"col-span-2",children:"Payout ID"}),(0,b.jsx)("div",{className:"col-span-2",children:"Affiliate User"}),(0,b.jsx)("div",{className:"col-span-2",children:"Amount"}),(0,b.jsx)("div",{className:"col-span-1",children:"Percent"}),(0,b.jsx)("div",{className:"col-span-2",children:"Month"}),(0,b.jsx)("div",{className:"col-span-1",children:"Status"}),(0,b.jsx)("div",{className:"col-span-2 text-right",children:"Actions"})]}),0===v.length?(0,b.jsxs)("div",{className:"p-12 text-center",children:[(0,b.jsx)("div",{className:"text-slate-400",children:(0,b.jsx)("svg",{className:"mx-auto h-12 w-12 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,b.jsx)("h3",{className:"text-lg font-medium text-slate-900 mb-1",children:"No payouts found"}),(0,b.jsx)("p",{className:"text-slate-500",children:"No affiliate payouts match your current filters."})]}):(0,b.jsx)("div",{className:"divide-y divide-slate-100",children:v.map(a=>(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-4 items-center hover:bg-slate-50 transition-colors",children:[(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsxs)("div",{className:"font-mono text-sm text-slate-900",children:["#",a.id]})}),(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsxs)("div",{className:"text-slate-700",children:["User #",a.affiliate_user_id]})}),(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsxs)("div",{className:"text-lg font-semibold text-slate-900",children:["$",a.amount?.toFixed?.(2)??a.amount]})}),(0,b.jsx)("div",{className:"col-span-1",children:(0,b.jsx)("div",{className:"text-slate-700",children:a.percent?`${a.percent}%`:"-"})}),(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsx)("div",{className:"text-slate-700",children:a.month||"-"})}),(0,b.jsx)("div",{className:"col-span-1",children:(0,b.jsx)("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${"pending"===a.status?"bg-amber-100 text-amber-800 border border-amber-200":"approved"===a.status?"bg-emerald-100 text-emerald-800 border border-emerald-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:a.status})}),(0,b.jsxs)("div",{className:"col-span-2 flex justify-end gap-2",children:["pending"===a.status&&(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>x(a.id),className:"rounded-lg border-slate-300 bg-white text-slate-700 hover:bg-slate-50",children:"Approve"}),"paid"!==a.status&&(0,b.jsx)(e.Button,{size:"sm",onClick:()=>w(a.id),className:"rounded-lg bg-emerald-600 text-white hover:bg-emerald-700",children:"Mark Paid"})]})]},a.id))})]})]})]})})}}];

//# sourceMappingURL=app_%28dashboard%29_dashboard_admin_payouts_page_tsx_3f9c3912._.js.map