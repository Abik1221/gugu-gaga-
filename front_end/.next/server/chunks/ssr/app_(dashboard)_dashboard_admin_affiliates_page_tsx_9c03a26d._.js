module.exports=[33500,a=>{"use strict";a.s(["default",()=>h]);var b=a.i(90944),c=a.i(72131),d=a.i(75320),e=a.i(5522),f=a.i(40695),g=a.i(64037);function h(){let{show:a}=(0,g.useToast)(),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(0),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)([]);async function t(b=1){i(!0);try{let a=await d.AdminAPI.affiliates(b,20,p);m(a.items||[]),o(a.total||0),k(null)}catch(b){k(b.message||"Failed to load affiliates"),a({variant:"destructive",title:"Error",description:b.message||"Failed to load"})}finally{i(!1)}}return(0,c.useEffect)(()=>{t(1)},[]),(0,c.useEffect)(()=>{(async()=>{try{let a=await d.AdminAPI.usage(14);s(Array.isArray(a)?a:[])}catch{}})()},[]),(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-6",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-white text-lg",children:"ðŸ‘¥"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Affiliate Management"}),(0,b.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"Manage affiliate partners and performance"})]})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-3 bg-gray-50 p-3 rounded-lg",children:[(0,b.jsx)(e.Input,{placeholder:"Search by email",value:p,onChange:a=>q(a.target.value),className:"w-48 text-gray-900 bg-white border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-200 rounded-md"}),(0,b.jsx)(f.Button,{onClick:()=>t(1),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md font-medium",children:"Search"})]})]})}),r.length>0&&(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-blue-600",children:"ðŸ“Š"}),(0,b.jsx)("div",{className:"font-semibold text-gray-900",children:"AI Usage (Last 14 days)"})]}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:"tokens"})]}),(0,b.jsx)("div",{className:"flex items-end gap-1 h-20 bg-gray-50 p-3 rounded-lg",children:r.map(a=>{let c=Math.max(...r.map(a=>a.tokens||0))||1,d=Math.max(2,Math.round(a.tokens/c*60));return(0,b.jsxs)("div",{className:"flex flex-col items-center",title:`${a.day}: ${a.tokens} tokens`,children:[(0,b.jsx)("div",{className:"bg-blue-500 w-3 rounded-t",style:{height:`${d}px`}}),(0,b.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:a.day.slice(5)})]},a.day)})})]}),h?(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12",children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-3",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-gray-200 border-t-blue-600"}),(0,b.jsx)("div",{className:"text-gray-600",children:"Loading affiliates..."})]})}):j?(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-red-200 p-8",children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-red-600",children:"âš ï¸"})}),(0,b.jsx)("div",{className:"text-red-600 font-medium",children:"Error Loading Data"}),(0,b.jsx)("div",{className:"text-red-500 text-center text-sm",children:j}),(0,b.jsx)(f.Button,{onClick:()=>t(1),className:"bg-red-600 hover:bg-red-700 text-white",children:"Try Again"})]})}):(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"User"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Full Name"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Bank Details"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Referrals"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Payouts"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Actions"})]})}),(0,b.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[l.map((c,e)=>(0,b.jsxs)("tr",{className:`hover:bg-gray-50 ${e%2==0?"bg-white":"bg-gray-50/50"}`,children:[(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("div",{className:"text-sm text-gray-900",children:c.email})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("div",{className:"text-sm text-gray-900",children:c.full_name||(0,b.jsx)("span",{className:"text-gray-400",children:"-"})})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-900",children:c.bank_name||(0,b.jsx)("span",{className:"text-gray-400",children:"-"})}),(c.bank_account_name||c.bank_account_number)&&(0,b.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[c.bank_account_name&&(0,b.jsx)("div",{children:c.bank_account_name}),c.bank_account_number&&(0,b.jsx)("div",{children:c.bank_account_number})]})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm font-medium",children:c.referrals||0})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsxs)("div",{className:"text-gray-600",children:["Pending: $",c.payouts?.pending_total?.toFixed?.(2)||"0.00"]}),(0,b.jsxs)("div",{className:"text-gray-600",children:["Paid: $",c.payouts?.paid_total?.toFixed?.(2)||"0.00"]})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:async()=>{try{await d.AdminAPI.approveAffiliate(c.user_id),a({variant:"success",title:"Approved",description:c.email}),t()}catch(b){a({variant:"destructive",title:"Failed",description:b.message})}},children:"Approve"}),(0,b.jsx)(f.Button,{size:"sm",variant:"outline",className:"border-red-300 text-red-700 hover:bg-red-50",onClick:async()=>{try{await d.AdminAPI.rejectAffiliate(c.user_id),a({variant:"success",title:"Rejected",description:c.email}),t()}catch(b){a({variant:"destructive",title:"Failed",description:b.message})}},children:"Reject"})]})})]},c.user_id)),0===l.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{className:"px-4 py-12 text-center",colSpan:6,children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-2xl",children:"ðŸ‘¥"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-lg font-medium text-gray-700",children:"No affiliates found"}),(0,b.jsx)("div",{className:"text-gray-500 text-sm",children:"Try adjusting your search"})]}),(0,b.jsx)(f.Button,{onClick:()=>t(1),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Refresh"})]})})})]})]})}),l.length>0&&(0,b.jsx)("div",{className:"bg-gray-50 px-4 py-3 border-t border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",(0,b.jsx)("span",{className:"font-medium text-blue-600",children:l.length})," affiliates"]}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Total: ",n]})]})})]})]})})}}];

//# sourceMappingURL=app_%28dashboard%29_dashboard_admin_affiliates_page_tsx_9c03a26d._.js.map