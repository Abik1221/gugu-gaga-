module.exports=[5522,a=>{"use strict";a.s(["Input",()=>c]);var b=a.i(90944);let c=a.i(72131).forwardRef(({className:a="",...c},d)=>(0,b.jsx)("input",{ref:d,className:"w-full border rounded px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-emerald-200 focus:border-emerald-400 "+a,...c}));c.displayName="Input"},50944,(a,b,c)=>{b.exports=a.r(74137)},41710,a=>{"use strict";a.s(["Clock",()=>b],41710);let b=(0,a.i(70106).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},73570,a=>{"use strict";a.s(["AlertTriangle",()=>b],73570);let b=(0,a.i(70106).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2158,a=>{"use strict";a.s(["SimpleLoading",()=>c]);var b=a.i(90944);function c(){return(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}},567,a=>{"use strict";a.s(["useEmailVerificationToast",()=>g]);var b=a.i(90944),c=a.i(92258),d=a.i(41710),e=a.i(73570),f=a.i(64037);function g(){let{show:a}=(0,f.useToast)();return{showEmailSentNotification:(f,g="register")=>{a({title:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(c.Mail,{className:"h-4 w-4 text-blue-600"}),(0,b.jsx)("span",{children:"Check Your Email"})]}),description:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("p",{children:["We've sent a verification code to ",(0,b.jsx)("strong",{children:f})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-amber-600 bg-amber-50 p-2 rounded text-xs",children:[(0,b.jsx)(e.AlertTriangle,{className:"h-3 w-3"}),(0,b.jsxs)("span",{children:[(0,b.jsx)("strong",{children:"Check your spam folder"})," if you don't see the email"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 text-xs",children:[(0,b.jsx)(d.Clock,{className:"h-3 w-3"}),(0,b.jsxs)("span",{children:["Code expires in ","password_reset"===g?"30":"10"," minutes"]})]})]}),variant:"success",duration:8e3})},showResendCooldown:b=>{a({title:"Please Wait",description:`You can request a new code in ${b} seconds`,variant:"default",duration:3e3})}}}},8406,a=>{"use strict";a.s(["Sparkles",()=>b],8406);let b=(0,a.i(70106).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]])},67453,a=>{"use strict";a.s(["CheckCircle2",()=>b],67453);let b=(0,a.i(70106).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},54837,a=>{"use strict";a.s(["default",()=>t],54837);var b=a.i(90944),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(46271),g=a.i(67453),h=a.i(70106);let i=(0,h.default)("mail-check",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]),j=(0,h.default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var k=a.i(8406),l=a.i(40695),m=a.i(5522),n=a.i(64037),o=a.i(567),p=a.i(75320),q=a.i(2158);let r=[{icon:(0,b.jsx)(j,{className:"h-4 w-4"}),title:"Two-step security",copy:"Every affiliate login is protected with verification codes for peace of mind."},{icon:(0,b.jsx)(i,{className:"h-4 w-4"}),title:"Fast email delivery",copy:"Codes arrive within seconds. Having trouble? Resend or reach partner support."},{icon:(0,b.jsx)(k.Sparkles,{className:"h-4 w-4"}),title:"Access partner perks",copy:"Once verified you can generate referral links and track commissions instantly."}];function s(){(0,e.useRouter)();let a=(0,e.useSearchParams)(),{show:h}=(0,n.useToast)(),{showEmailSentNotification:i,showResendCooldown:j}=(0,o.useEmailVerificationToast)(),[k,q]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(0);async function E(){if(k&&!(C>0)){B(!0);try{let b=a.get("purpose")||"register",c=await fetch("/api/v1/auth/resend-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:k,purpose:b})});if(429===c.status){let a=await c.json(),b=a.detail?.match(/(\d+) seconds/),d=b?parseInt(b[1]):120;D(d),j(d);return}if(!c.ok)throw Error("Failed to resend code");i(k,b),D(120)}catch(a){h({variant:"destructive",title:"Resend Failed",description:a.message||"Failed to resend verification code"})}finally{B(!1)}}}async function F(a){a.preventDefault(),x(null),v(!0);try{if(!k||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k))throw Error("Please enter a valid email address");if(!s||s.length<4)throw Error("Please enter the verification code");let a=await p.AuthAPI.registerVerify(k,s),b=a?.access_token,c=a?.refresh_token;b&&(localStorage.setItem("access_token",b),localStorage.setItem("token",b)),c?localStorage.setItem("refresh_token",c):localStorage.removeItem("refresh_token");try{await p.AuthAPI.me()}catch(a){}if(!b)throw Error("Verification succeeded but no access token was returned");z(!0),h({variant:"success",title:"Verification Successful",description:"Your account has been verified. Redirecting to your dashboard."}),setTimeout(()=>{let b=a?.user?.role;"affiliate"===b?window.location.href="/dashboard/affiliate":"pharmacy_owner"===b?window.location.href="/dashboard/owner":"supplier"===b?window.location.href="/dashboard/supplier":window.location.href="/dashboard"},1e3)}catch(a){x(a.message||"Verification failed"),h({variant:"destructive",title:"Verification Failed",description:a.message||"Please check your code and try again"})}finally{v(!1)}}return((0,c.useEffect)(()=>{let b=a.get("email");b&&q(b)},[a]),(0,c.useEffect)(()=>{if(C>0){let a=setTimeout(()=>D(C-1),1e3);return()=>clearTimeout(a)}},[C]),y)?(0,b.jsxs)("div",{className:"relative flex min-h-screen items-center justify-center overflow-hidden bg-gradient-to-br from-emerald-50 via-white to-blue-50 p-6 text-slate-900",children:[(0,b.jsxs)("div",{className:"absolute inset-0 -z-10",children:[(0,b.jsx)("div",{className:"absolute top-4 left-1/3 h-72 w-72 -translate-x-1/2 rounded-full bg-emerald-200/40 blur-3xl"}),(0,b.jsx)("div",{className:"absolute bottom-6 right-1/3 h-72 w-72 translate-x-1/2 rounded-full bg-blue-200/35 blur-3xl"})]}),(0,b.jsxs)(f.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},className:"w-full max-w-md rounded-3xl border border-emerald-100/80 bg-white/95 p-10 text-center shadow-[0_35px_100px_-55px_rgba(15,118,110,0.45)] backdrop-blur",children:[(0,b.jsx)("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-emerald-500/15",children:(0,b.jsx)(g.CheckCircle2,{className:"h-10 w-10 text-emerald-500"})}),(0,b.jsx)("h1",{className:"mt-6 text-3xl font-semibold text-slate-900",children:"Account verified!"}),(0,b.jsx)("p",{className:"mt-3 text-sm text-slate-600",children:"Your account has been activated. We'll send you to the affiliate dashboard in a moment."}),(0,b.jsx)(l.Button,{onClick:()=>{let a=localStorage.getItem("user_role")||"affiliate";"affiliate"===a?window.location.href="/dashboard/affiliate":"pharmacy_owner"===a?window.location.href="/dashboard/owner":"supplier"===a?window.location.href="/dashboard/supplier":window.location.href="/dashboard"},className:"mt-8 w-full rounded-2xl bg-gradient-to-r from-emerald-600 to-blue-600 text-sm font-semibold text-white shadow-[0_25px_70px_-50px_rgba(15,118,110,0.45)] hover:translate-y-[-1px]",children:"Go now"})]})]}):(0,b.jsxs)("div",{className:"relative flex min-h-screen bg-gradient-to-br from-emerald-50 via-white to-blue-50 text-slate-900",children:[(0,b.jsxs)("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute top-[-6rem] left-[-4rem] h-72 w-72 rounded-full bg-emerald-200/40 blur-3xl"}),(0,b.jsx)("div",{className:"absolute bottom-[-5rem] right-[-3rem] h-[26rem] w-[26rem] rounded-full bg-blue-200/40 blur-3xl"}),(0,b.jsx)("div",{className:"absolute inset-x-0 top-[40%] h-24 bg-gradient-to-r from-emerald-100/40 via-transparent to-blue-100/40 blur-2xl"})]}),(0,b.jsxs)("div",{className:"relative hidden w-0 flex-1 flex-col justify-between overflow-hidden rounded-r-[48px] border border-emerald-100 bg-white/80 p-12 shadow-[0_60px_160px_-90px_rgba(14,116,144,0.45)] backdrop-blur lg:flex",children:[(0,b.jsxs)(f.motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"max-w-lg space-y-5",children:[(0,b.jsx)("div",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-200 bg-emerald-50 px-4 py-1 text-xs font-semibold uppercase tracking-[0.3em] text-emerald-700",children:"Secure verification"}),(0,b.jsx)("h1",{className:"text-4xl font-bold leading-tight text-slate-900",children:"Confirm your email and unlock the partner dashboard"}),(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"Enter the one-time code sent to your inbox. Once it matches, we’ll activate your affiliate portal and load your referral toolkit."}),(0,b.jsx)("div",{className:"mt-8 grid gap-4 text-sm text-slate-600",children:r.map(a=>(0,b.jsxs)("div",{className:"flex items-start gap-3 rounded-2xl border border-emerald-100 bg-white/90 p-4 shadow-sm",children:[(0,b.jsx)("span",{className:"mt-1 inline-flex h-9 w-9 items-center justify-center rounded-xl bg-emerald-500/15 text-emerald-600",children:a.icon}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:a.title}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:a.copy})]})]},a.title))}),(0,b.jsx)("div",{className:"space-y-3 text-xs text-slate-500",children:(0,b.jsxs)("p",{children:["Need help? "," ",(0,b.jsx)(d.default,{href:"/contact",className:"text-emerald-600 hover:underline",children:"Partner support is a message away"})]})})]}),(0,b.jsxs)(f.motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1,ease:"easeOut"},className:"text-xs text-slate-500",children:[(0,b.jsx)("p",{children:"Verification keeps your earnings protected."}),(0,b.jsxs)("p",{className:"mt-1",children:["© ",new Date().getFullYear()," Mesob Partners."]})]})]}),(0,b.jsx)("div",{className:"relative flex w-full flex-col justify-center px-4 py-16 sm:px-10 lg:w-[520px] lg:px-12",children:(0,b.jsxs)(f.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"mx-auto w-full max-w-md rounded-3xl border border-emerald-100/80 bg-white/95 p-8 shadow-[0_35px_90px_-55px_rgba(15,118,110,0.45)] backdrop-blur",children:[(0,b.jsxs)("div",{className:"mb-8 text-center",children:[(0,b.jsx)("h2",{className:"text-3xl font-bold text-slate-900",children:"Verify your account"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-slate-500",children:"Enter the six-digit code we just emailed to finish activating your partner access."})]}),w&&(0,b.jsx)("div",{className:"mb-4 rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-600",children:w}),(0,b.jsxs)("form",{onSubmit:F,className:"space-y-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-emerald-700",children:"Email address"}),(0,b.jsx)(m.Input,{type:"email",value:k,onChange:a=>q(a.target.value),placeholder:"Enter your email",required:!0,autoComplete:"email",className:"mt-2 border border-emerald-100 bg-white text-slate-900 placeholder:text-slate-400 focus:border-emerald-500 focus:ring-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-emerald-700",children:"Verification code"}),(0,b.jsx)(m.Input,{type:"text",value:s,onChange:a=>t(a.target.value.replace(/\D/g,"")),placeholder:"Enter 6-digit code",required:!0,autoComplete:"one-time-code",maxLength:6,className:"mt-2 border border-emerald-100 bg-white text-slate-900 placeholder:text-slate-400 focus:border-emerald-500 focus:ring-emerald-500"})]}),(0,b.jsx)(l.Button,{type:"submit",disabled:u,className:"group relative inline-flex w-full items-center justify-center overflow-hidden rounded-2xl bg-gradient-to-r from-emerald-600 to-blue-600 px-6 py-3 font-semibold text-white shadow-[0_25px_70px_-50px_rgba(15,118,110,0.45)] transition duration-300 hover:translate-y-[-1px] disabled:cursor-not-allowed disabled:opacity-60",children:u?"Verifying...":"Verify account"})]}),(0,b.jsxs)("div",{className:"mt-8 space-y-3 text-center text-xs text-slate-500",children:[(0,b.jsxs)("p",{children:["Didn't get the code? ",(0,b.jsx)("strong",{children:"Check your spam folder"})," or"," ",(0,b.jsx)("button",{onClick:E,disabled:A||C>0||!k,className:"text-emerald-600 hover:underline disabled:text-gray-400 disabled:no-underline",children:A?"Sending...":C>0?`resend in ${C}s`:"resend code"})]}),(0,b.jsx)("p",{children:"Your verification code expires after 10 minutes for security."})]})]})})]})}function t(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(q.SimpleLoading,{}),children:(0,b.jsx)(s,{})})}}];

//# sourceMappingURL=_d2a28dd2._.js.map