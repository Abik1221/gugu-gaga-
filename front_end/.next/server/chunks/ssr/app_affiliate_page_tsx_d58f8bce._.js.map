{"version":3,"sources":["turbopack:///[project]/app/affiliate/page.tsx","turbopack:///[project]/app/affiliate/_components/cards.tsx"],"sourcesContent":["\"use client\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { motion } from \"framer-motion\";\nimport type { LucideIcon } from \"lucide-react\";\nimport { Coins, Copy, DollarSign, Link as LinkIcon, Pointer, RefreshCw, Target, Users } from \"lucide-react\";\nimport { AffiliateAPI } from \"@/utils/api\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useToast } from \"@/components/ui/toast\";\nimport { StatCard, SectionCard, MiniStat } from \"./_components/cards\";\n\ntype Dashboard = {\n    referrals_count: number;\n    amount: number;\n    percent: number;\n    year: number;\n    month: number;\n    tenants: string[];\n    payouts: { pending_total: number; paid_total: number };\n};\n\ntype LinkItem = { token: string; url: string; active: boolean };\n\nfunction formatCurrency(amount: number) {\n    return new Intl.NumberFormat(\"en-US\", { style: \"currency\", currency: \"USD\" }).format(amount || 0);\n}\n\nexport default function AffiliateOverviewPage() {\n    const { show } = useToast();\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n    const [dash, setDash] = useState<Dashboard | null>(null);\n    const [links, setLinks] = useState<LinkItem[]>([]);\n    const [canCreateMore, setCanCreateMore] = useState(true);\n    const [payoutMonth, setPayoutMonth] = useState(\"\");\n    const [payoutPercent, setPayoutPercent] = useState<number>(5);\n    const [requestingPayout, setRequestingPayout] = useState(false);\n\n    async function refreshAll() {\n        setLoading(true);\n        try {\n            const [d, l] = await Promise.all([\n                AffiliateAPI.dashboard(),\n                AffiliateAPI.getLinks(),\n            ]);\n            const dashData = d as Dashboard;\n            setDash(dashData);\n            if (dashData?.year && dashData?.month) {\n                const monthStr = `${dashData.year}-${String(dashData.month).padStart(2, \"0\")}`;\n                setPayoutMonth(monthStr);\n            }\n            if (dashData?.percent) {\n                setPayoutPercent(dashData.percent);\n            }\n            setLinks((l as any).links || []);\n            setCanCreateMore(Boolean((l as any).can_create_more));\n            setError(null);\n        } catch (e: any) {\n            setError(e.message || \"Failed to load affiliate data\");\n            show({ variant: \"destructive\", title: \"Error\", description: e.message || \"Failed to load\" });\n        } finally {\n            setLoading(false);\n        }\n    }\n\n    useEffect(() => {\n        refreshAll();\n    }, []);\n\n    const stats = useMemo(() => ({\n        referrals: dash?.referrals_count || 0,\n        currentCommission: dash?.amount || 0,\n        pendingPayout: dash?.payouts?.pending_total || 0,\n        paidPayout: dash?.payouts?.paid_total || 0,\n    }), [dash]);\n\n    const statCards = useMemo(\n        () => [\n            {\n                title: \"Active referrals\",\n                value: stats.referrals.toLocaleString(),\n                description: \"Pharmacies you’ve successfully onboarded\",\n                icon: Users as LucideIcon,\n            },\n            {\n                title: \"Current commission\",\n                value: formatCurrency(stats.currentCommission),\n                description: \"Projected payout for this period\",\n                icon: Coins as LucideIcon,\n            },\n            {\n                title: \"Pending payouts\",\n                value: formatCurrency(stats.pendingPayout),\n                description: \"Awaiting review & processing\",\n                icon: DollarSign as LucideIcon,\n            },\n            {\n                title: \"Paid to date\",\n                value: formatCurrency(stats.paidPayout),\n                description: \"Total earnings transferred to you\",\n                icon: Target as LucideIcon,\n            },\n        ],\n        [stats]\n    );\n\n    const currentPeriodLabel = useMemo(() => {\n        if (!dash?.month || !dash?.year) return \"current period\";\n        try {\n            return new Date(dash.year, dash.month - 1).toLocaleDateString(\"en-US\", {\n                month: \"long\",\n                year: \"numeric\",\n            });\n        } catch {\n            return `${dash.year}-${String(dash.month).padStart(2, \"0\")}`;\n        }\n    }, [dash?.month, dash?.year]);\n\n    const createLinkLabel = canCreateMore ? \"Generate referral link\" : \"Link limit reached\";\n    const tenantsCount = dash?.tenants?.length ?? 0;\n    const canRequestPayout = (dash?.amount ?? 0) > 0;\n    const payoutGuardMessage = \"You haven't earned any commission yet. Share your referral link to start earning before requesting a payout.\";\n\n    async function onCreateLink() {\n        try {\n            await AffiliateAPI.createLink();\n            await refreshAll();\n            show({ variant: \"success\", title: \"Link created\" });\n        } catch (e: any) {\n            show({ variant: \"destructive\", title: \"Failed to create link\", description: e.message });\n        }\n    }\n\n    async function onDeactivate(token: string) {\n        try {\n            await AffiliateAPI.deactivate(token);\n            await refreshAll();\n            show({ variant: \"success\", title: \"Link deactivated\" });\n        } catch (e: any) {\n            show({ variant: \"destructive\", title: \"Failed to deactivate\", description: e.message });\n        }\n    }\n\n    async function onRotate(token: string) {\n        try {\n            await AffiliateAPI.rotate(token);\n            await refreshAll();\n            show({ variant: \"success\", title: \"Link rotated\" });\n        } catch (e: any) {\n            show({ variant: \"destructive\", title: \"Failed to rotate\", description: e.message });\n        }\n    }\n\n    async function copyLink(url: string) {\n        try {\n            if (typeof navigator !== \"undefined\" && navigator.clipboard?.writeText) {\n                await navigator.clipboard.writeText(url);\n                show({ variant: \"success\", title: \"Link copied\", description: \"Referral link copied to clipboard.\" });\n            } else {\n                throw new Error(\"Clipboard not available\");\n            }\n        } catch (e: any) {\n            show({\n                variant: \"destructive\",\n                title: \"Copy failed\",\n                description: e?.message || \"Unable to copy link on this device\",\n            });\n        }\n    }\n\n    async function onRequestPayout() {\n        if (!payoutMonth) {\n            show({ variant: \"destructive\", title: \"Missing month\", description: \"Select a month to request payment for.\" });\n            return;\n        }\n        if (!canRequestPayout) {\n            show({ variant: \"default\", title: \"No earnings yet\", description: payoutGuardMessage });\n            return;\n        }\n        setRequestingPayout(true);\n        try {\n            await AffiliateAPI.requestPayout(payoutMonth, payoutPercent || 5);\n            show({ variant: \"success\", title: \"Payout requested\", description: \"We will review and notify you once processed.\" });\n            await refreshAll();\n        } catch (e: any) {\n            show({ variant: \"destructive\", title: \"Failed to request payout\", description: e.message || \"Try again later\" });\n        } finally {\n            setRequestingPayout(false);\n        }\n    }\n\n    if (loading) {\n        return (\n            <div className=\"space-y-4\">\n                <Skeleton className=\"h-8 w-64\" />\n                <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                    {Array.from({ length: 4 }).map((_, i) => (<Skeleton key={i} className=\"h-24\" />))}\n                </div>\n                <Skeleton className=\"h-8 w-40\" />\n                <Skeleton className=\"h-64\" />\n            </div>\n        );\n    }\n\n    if (error) {\n        return <div className=\"text-sm text-red-600\">{error}</div>;\n    }\n\n    return (\n        <div className=\"space-y-10 p-12\">\n            <motion.div\n                initial={{ opacity: 0, y: -12 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.45, ease: \"easeOut\" }}\n                className=\"relative overflow-hidden rounded-3xl border border-emerald-100/40  p-8 text-white shadow-[0_25px_80px_-40px_rgba(255,255,255,0.55)]\"\n            >\n                <div className=\"absolute inset-0\">\n                    <div className=\"absolute -top-16 right-10 h-40 w-40 rounded-full bg-emerald-400/30 blur-3xl\" />\n                    <div className=\"absolute bottom-0 left-0 h-48 w-48 -translate-x-1/2 translate-y-1/2 rounded-full bg-blue-500/20 blur-3xl\" />\n                </div>\n                <div className=\"relative flex flex-col gap-8 lg:flex-row lg:items-center lg:justify-between\">\n                    <div className=\"max-w-xl space-y-4\">\n                        <p className=\"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-4 py-1 text-xs font-semibold uppercase tracking-[0.25em] text-emerald-100/80\">\n                            Affiliate control hub\n                        </p>\n                        <h1 className=\"text-3xl font-bold leading-tight sm:text-4xl\">\n                            Welcome back, partner. Let’s grow your pharmacy network.\n                        </h1>\n                        <p className=\"text-sm text-emerald-100/80 sm:text-base\">\n                            Monitor conversions, unlock commissions, and manage referral links in one streamlined experience designed to match the new Zemen aesthetic.\n                        </p>\n                        <div className=\"flex flex-col gap-3 pt-2 sm:flex-row sm:items-center\">\n                            <Button\n                                onClick={onCreateLink}\n                                disabled={!canCreateMore}\n                                className=\"group h-12 cursor-pointer rounded-3xl bg-gradient-to-r from-emerald-500 via-emerald-400 to-blue-500 px-7 text-sm font-semibold text-white shadow-[0_18px_55px_-30px_rgba(16,185,129,0.7)] transition duration-200 hover:-translate-y-0.5 hover:shadow-[0_24px_70px_-35px_rgba(16,185,129,0.75)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950 disabled:cursor-not-allowed disabled:opacity-60\"\n                            >\n                                <span className=\"mr-2 inline-flex h-8 w-8 items-center justify-center rounded-2xl bg-white/15 text-white transition group-hover:scale-105\">\n                                    <Pointer className=\"h-4 w-4\" />\n                                </span>\n                                <LinkIcon className=\"mr-2 h-4 w-4 transition-transform group-hover:-rotate-6\" />\n                                {createLinkLabel}\n                            </Button>\n                            <Button\n                                onClick={refreshAll}\n                                variant=\"outline\"\n                                className=\"h-11 cursor-pointer rounded-2xl border-white/30 bg-white/5 px-5 text-sm font-semibold text-emerald-100 transition hover:-translate-y-0.5 hover:border-emerald-300/60 hover:bg-white/15\"\n                            >\n                                <RefreshCw className=\"mr-2 h-4 w-4\" /> Refresh data\n                            </Button>\n                        </div>\n                        <p className=\"text-xs text-emerald-100/70\">\n                            {links.length} of 2 active links in use · {canCreateMore ? \"Generate a new link to start sharing\" : \"Deactivate one to free a slot\"}\n                        </p>\n                        <div className=\"mt-5 space-y-3\">\n                            {links.length === 0 ? (\n                                <div className=\"flex flex-col items-center justify-center gap-3 rounded-2xl border border-dashed border-white/20 bg-white/5 p-6 text-center text-sm text-emerald-100/70\">\n                                    <LinkIcon className=\"h-8 w-8 text-emerald-300\" />\n                                    <p>No referral links yet. Generate one to start sharing.</p>\n                                </div>\n                            ) : (\n                                links.map((l) => {\n                                    const statusClass = l.active\n                                        ? \"bg-emerald-500/15 text-emerald-300\"\n                                        : \"bg-slate-200/30 text-slate-200\";\n                                    return (\n                                        <div\n                                            key={l.token}\n                                            className=\"flex flex-col gap-4 rounded-2xl border border-white/10 bg-black/40 p-4 shadow-sm backdrop-blur sm:flex-row sm:items-center sm:justify-between\"\n                                        >\n                                            <div className=\"space-y-2\">\n                                                <p className=\"flex items-center gap-2 text-sm font-semibold text-white\">\n                                                    <LinkIcon className=\"h-4 w-4\" /> Referral link\n                                                    <span\n                                                        className={`inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-semibold uppercase tracking-widest ${statusClass}`}\n                                                    >\n                                                        {l.active ? \"Active\" : \"Inactive\"}\n                                                    </span>\n                                                </p>\n                                                <p className=\"font-mono text-xs text-emerald-100/80 break-all\">{l.url}</p>\n                                            </div>\n                                            <div className=\"flex flex-wrap items-center gap-2\">\n                                                <Button\n                                                    size=\"sm\"\n                                                    variant=\"outline\"\n                                                    onClick={() => copyLink(l.url)}\n                                                    className=\"cursor-pointer rounded-xl border-emerald-300/30 bg-emerald-500/10 text-emerald-100 transition hover:-translate-y-0.5 hover:border-emerald-200 hover:bg-emerald-500/20\"\n                                                >\n                                                    <Copy className=\"mr-1.5 h-4 w-4\" /> Copy\n                                                </Button>\n                                                <Button\n                                                    size=\"sm\"\n                                                    variant=\"outline\"\n                                                    onClick={() => onDeactivate(l.token)}\n                                                    disabled={!l.active}\n                                                    className=\"cursor-pointer rounded-xl border-rose-300/30 bg-rose-500/10 text-rose-100 transition hover:-translate-y-0.5 hover:border-rose-300 hover:bg-rose-500/20 disabled:cursor-not-allowed disabled:opacity-50\"\n                                                >\n                                                    Deactivate\n                                                </Button>\n                                                <Button\n                                                    size=\"sm\"\n                                                    variant=\"outline\"\n                                                    onClick={() => onRotate(l.token)}\n                                                    className=\"cursor-pointer rounded-xl border-cyan-300/30 bg-cyan-500/10 text-cyan-100 transition hover:-translate-y-0.5 hover:border-cyan-200 hover:bg-cyan-500/20\"\n                                                >\n                                                    <RefreshCw className=\"mr-1.5 h-4 w-4\" /> Rotate\n                                                </Button>\n                                            </div>\n                                        </div>\n                                    );\n                                })\n                            )}\n                        </div>\n                    </div>\n                    <div className=\"grid w-full max-w-sm gap-3 rounded-3xl border border-white/10 bg-black/30 p-4 backdrop-blur lg:max-w-xs\">\n                        <MiniStat label=\"Verified pharmacies\" value={tenantsCount.toString()} />\n                        <MiniStat label=\"Current commission\" value={formatCurrency(stats.currentCommission)} />\n                    </div>\n                </div>\n            </motion.div>\n\n            <motion.div\n                initial={{ opacity: 0, y: 16 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.45, delay: 0.05, ease: \"easeOut\" }}\n                className=\"grid gap-4 sm:grid-cols-2 xl:grid-cols-4\"\n            >\n                {statCards.map(({ title, value, description, icon: Icon }, index) => (\n                    <motion.div\n                        key={title}\n                        initial={{ opacity: 0, y: 18 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        transition={{ duration: 0.4, delay: 0.08 * index }}\n                    >\n                        <StatCard\n                            title={title}\n                            value={value}\n                            description={description}\n                            icon={<Icon className=\"h-5 w-5\" />}\n                        />\n                    </motion.div>\n                ))}\n            </motion.div>\n\n            <div className=\"grid gap-6 lg:grid-cols-2\">\n                <motion.div\n                    initial={{ opacity: 0, y: 22 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ duration: 0.45, delay: 0.12, ease: \"easeOut\" }}\n                >\n                    <SectionCard\n                        title=\"This period at a glance\"\n                        description={`Commission summary for ${currentPeriodLabel}.`}\n                    >\n                        <div className=\"grid gap-3 sm:grid-cols-3\">\n                            <MiniStat label=\"Percent\" value={`${dash?.percent ?? 5}%`} />\n                            <MiniStat label=\"Commission\" value={formatCurrency(dash?.amount || 0)} />\n                            <MiniStat label=\"Referred Pharmacies\" value={tenantsCount.toString()} />\n                        </div>\n                        <div className=\"mt-6 rounded-2xl border border-emerald-100/30 bg-emerald-500/5 p-4\">\n                            <p className=\"text-[11px] font-semibold uppercase tracking-widest text-emerald-600/80\">\n                                Tenant IDs credited\n                            </p>\n                            <div className=\"mt-3 max-h-40 overflow-auto rounded-xl border border-white/10 p-3 text-white text-xs font-mono shadow-inner\">\n                                {(dash?.tenants || []).length === 0 ? (\n                                    <p>No pharmacies referred yet this month. Share your link to get started.</p>\n                                ) : (\n                                    <ul className=\"space-y-2\">\n                                        {dash?.tenants?.map((tenant) => (\n                                            <li key={tenant} className=\"flex items-center justify-between\">\n                                                <span>{tenant}</span>\n                                                <span className=\"rounded-full bg-emerald-500/15 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-widest text-emerald-600\">Credited</span>\n                                            </li>\n                                        ))}\n                                    </ul>\n                                )}\n                            </div>\n                        </div>\n                    </SectionCard>\n                </motion.div>\n\n                <motion.div\n                    initial={{ opacity: 0, y: 22 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ duration: 0.45, delay: 0.16, ease: \"easeOut\" }}\n                >\n                    <SectionCard\n                        title=\"Request payout\"\n                        description=\"Submit a commission payout request for a specific month.\"\n                    >\n                        <div className=\"space-y-4\">\n                            <div className=\"space-y-2\">\n                                <label className=\"text-[11px] font-semibold uppercase tracking-widest text-white\">\n                                    Month (YYYY-MM)\n                                </label>\n                                <Input\n                                    value={payoutMonth}\n                                    onChange={(e) => setPayoutMonth(e.target.value)}\n                                    placeholder=\"2025-10\"\n                                    className=\"rounded-2xl border border-emerald-100/40 bg-white/80 text-emerald-900 placeholder:text-emerald-300 focus:border-emerald-400 focus:ring-emerald-400\"\n                                />\n                            </div>\n                            <div className=\"space-y-2\">\n                                <label className=\"text-[11px] font-semibold uppercase tracking-widest text-white\">\n                                    Commission percent\n                                </label>\n                                <Input\n                                    type=\"number\"\n                                    min={1}\n                                    max={20}\n                                    step={0.5}\n                                    value={payoutPercent}\n                                    onChange={(e) => setPayoutPercent(Number(e.target.value))}\n                                    className=\"rounded-2xl border border-emerald-100/40 bg-white/80 text-emerald-900 focus:border-emerald-400 focus:ring-emerald-400\"\n                                />\n                            </div>\n                        </div>\n                        <Button\n                            onClick={onRequestPayout}\n                            disabled={requestingPayout || !canRequestPayout}\n                            className=\"mt-6 h-11 w-full rounded-2xl bg-gradient-to-r from-emerald-500 to-blue-500 text-sm font-semibold text-white shadow-[0_15px_45px_-25px_rgba(16,185,129,0.65)] transition-transform hover:scale-[1.01] disabled:cursor-not-allowed disabled:opacity-60\"\n                        >\n                            {requestingPayout ? \"Submitting...\" : \"Submit payout request\"}\n                        </Button>\n                        {!canRequestPayout && (\n                            <p className=\"mt-3 text-xs font-medium text-white\">\n                                {payoutGuardMessage}\n                            </p>\n                        )}\n                    </SectionCard>\n                </motion.div>\n            </div>\n\n            <div className=\"pb-4\" />\n        </div>\n    );\n}\n","\"use client\";\n\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { cn } from \"@/lib/utils\";\nimport React from \"react\";\n\nexport function StatCard({\n  title,\n  value,\n  description,\n  icon,\n  className,\n}: {\n  title: string;\n  value: React.ReactNode;\n  description?: string;\n  icon?: React.ReactNode;\n  className?: string;\n}) {\n  return (\n    <Card\n      className={cn(\n        \"border border-white/10 bg-gradient-to-br from-emerald-500/10 via-slate-950/70 to-blue-600/10 text-white shadow-[0_18px_55px_-35px_rgba(255,255,255,0.55)] transition hover:-translate-y-1 hover:shadow-[0_28px_85px_-40px_rgba(255,255,255,0.55)] backdrop-blur-xl\",\n        className\n      )}\n    >\n      <CardContent className=\"flex items-start justify-between gap-3 p-5\">\n        <div>\n          <p className=\"text-[11px] font-semibold uppercase tracking-[0.35em] text-emerald-200\">{title}</p>\n          <p className=\"mt-3 text-2xl font-semibold text-white\">{value}</p>\n          {description && <p className=\"mt-3 text-xs text-emerald-100/70\">{description}</p>}\n        </div>\n        {icon && (\n          <span className=\"inline-flex h-10 w-10 items-center justify-center rounded-xl bg-white/15 text-emerald-200 shadow-inner shadow-emerald-500/10\">\n            {icon}\n          </span>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\nexport function MiniStat({ label, value }: { label: string; value: React.ReactNode }) {\n  return (\n    <Card className=\"border border-white/10 bg-gradient-to-br from-slate-900/70 via-emerald-600/10 to-blue-600/10 text-white shadow-[0_12px_45px_-30px_rgba(59,130,246,0.45)]\">\n      <CardContent className=\"space-y-2 p-4\">\n        <p className=\"text-[10px] font-semibold uppercase tracking-[0.32em] text-emerald-200/80\">{label}</p>\n        <div className=\"text-xl font-semibold leading-tight text-white break-words\">{value}</div>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport function HighlightPill({\n  label,\n  value,\n  tone = \"default\",\n}: {\n  label: string;\n  value: React.ReactNode;\n  tone?: \"default\" | \"warning\";\n}) {\n  const classes =\n    tone === \"warning\"\n      ? \"border-amber-300/40 bg-amber-500/10 text-amber-100\"\n      : \"border-emerald-300/30 bg-emerald-500/10 text-emerald-100\";\n  return (\n    <div className={`rounded-2xl border px-4 py-3 shadow-[0_14px_40px_-30px_rgba(16,185,129,0.7)] ${classes}`}>\n      <p className=\"text-[10px] uppercase tracking-[0.35em] text-white/70\">{label}</p>\n      <p className=\"mt-2 text-lg font-semibold text-white\">{value}</p>\n    </div>\n  );\n}\n\nexport function SectionCard({\n  title,\n  description,\n  children,\n}: {\n  title: string;\n  description?: string;\n  children: React.ReactNode;\n}) {\n  return (\n    <Card className=\"border border-black/40 bg-gradient-to-br from-black via-slate-950 to-slate-900 text-white shadow-[0_20px_60px_-35px_rgba(255,255,255,0.6)] backdrop-blur-xl\">\n      <CardHeader className=\"mb-0 space-y-1 pb-0\">\n        <CardTitle className=\"text-lg text-white\">{title}</CardTitle>\n        {description && <p className=\"text-xs text-emerald-100/70\">{description}</p>}\n      </CardHeader>\n      <CardContent className=\"pt-5\">{children}</CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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"}