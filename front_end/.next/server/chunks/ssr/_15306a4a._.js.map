{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/gugu-gaga-/front_end/components/ui/skeleton.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\n\r\nexport function Skeleton({ className = \"\" }: { className?: string }) {\r\n  return <div className={`animate-pulse bg-gray-200 rounded ${className}`} />;\r\n}\r\n\r\nexport function TableSkeletonRows({ rows = 6, cols = 6 }: { rows?: number; cols?: number }) {\r\n  return (\r\n    <tbody>\r\n      {Array.from({ length: rows }).map((_, r) => (\r\n        <tr key={r} className=\"border-t\">\r\n          {Array.from({ length: cols }).map((__, c) => (\r\n            <td key={c} className=\"px-3 py-2\">\r\n              <Skeleton className=\"h-4 w-full\" />\r\n            </td>\r\n          ))}\r\n        </tr>\r\n      ))}\r\n    </tbody>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;;AAGO,SAAS,SAAS,EAAE,YAAY,EAAE,EAA0B;IACjE,qBAAO,8OAAC;QAAI,WAAW,CAAC,kCAAkC,EAAE,WAAW;;;;;;AACzE;AAEO,SAAS,kBAAkB,EAAE,OAAO,CAAC,EAAE,OAAO,CAAC,EAAoC;IACxF,qBACE,8OAAC;kBACE,MAAM,IAAI,CAAC;YAAE,QAAQ;QAAK,GAAG,GAAG,CAAC,CAAC,GAAG,kBACpC,8OAAC;gBAAW,WAAU;0BACnB,MAAM,IAAI,CAAC;oBAAE,QAAQ;gBAAK,GAAG,GAAG,CAAC,CAAC,IAAI,kBACrC,8OAAC;wBAAW,WAAU;kCACpB,cAAA,8OAAC;4BAAS,WAAU;;;;;;uBADb;;;;;eAFJ;;;;;;;;;;AAUjB","debugId":null}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/gugu-gaga-/front_end/components/ui/input.tsx"],"sourcesContent":["\"use client\";\r\nimport * as React from \"react\";\r\n\r\nexport interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {}\r\n\r\nexport const Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className = \"\", ...props }, ref) => {\r\n    return (\r\n      <input\r\n        ref={ref}\r\n        className={\r\n          \"w-full border rounded px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-emerald-200 focus:border-emerald-400 \" +\r\n          className\r\n        }\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\nInput.displayName = \"Input\";\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAKO,MAAM,sBAAQ,mNAAgB,CACnC,CAAC,EAAE,YAAY,EAAE,EAAE,GAAG,OAAO,EAAE;IAC7B,qBACE,8OAAC;QACC,KAAK;QACL,WACE,uHACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/gugu-gaga-/front_end/app/%28dashboard%29/dashboard/admin/users/%5Bid%5D/roles/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport { API_BASE, getAccessToken, getAuthJSON } from \"@/utils/api\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { useToast } from \"@/components/ui/toast\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function UserRolesPage() {\r\n  const { show } = useToast();\r\n  const params = useParams();\r\n  const userId = (params?.id as string) || \"\";\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [user, setUser] = useState<any | null>(null);\r\n  const [roles, setRoles] = useState<any[]>([]);\r\n  const [filter, setFilter] = useState(\"\");\r\n  const [assigning, setAssigning] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    let active = true;\r\n    async function load() {\r\n      try {\r\n        await getAuthJSON(\"/auth/me\");\r\n        const token = getAccessToken();\r\n        const [uRes, rRes] = await Promise.all([\r\n          fetch(`${API_BASE}/admin/users/${encodeURIComponent(userId)}`, { headers: token ? { Authorization: `Bearer ${token}` } : {} }),\r\n          fetch(`${API_BASE}/admin/roles`, { headers: token ? { Authorization: `Bearer ${token}` } : {} }),\r\n        ]);\r\n        if (!uRes.ok) throw new Error(await uRes.text().catch(() => \"Failed to load user\"));\r\n        if (!rRes.ok) throw new Error(await rRes.text().catch(() => \"Failed to load roles\"));\r\n        const u = await uRes.json();\r\n        const r = await rRes.json();\r\n        if (!active) return;\r\n        setUser(u);\r\n        setRoles(Array.isArray(r) ? r : []);\r\n      } catch (e: any) {\r\n        if (!active) return;\r\n        show({ variant: \"destructive\", title: \"Failed to load\", description: e.message || \"\" });\r\n      } finally {\r\n        if (active) setLoading(false);\r\n      }\r\n    }\r\n    if (userId) load();\r\n    return () => { active = false };\r\n  }, [show, userId]);\r\n\r\n  const assignedIds = new Set<string>((user?.roles || []).map((ur: any) => String(ur.role?.id || ur.id)));\r\n  const filtered = useMemo(() => {\r\n    const q = filter.trim().toLowerCase();\r\n    let list = roles as any[];\r\n    if (q) list = list.filter((r)=> String(r.name||\"\").toLowerCase().includes(q));\r\n    return list;\r\n  }, [roles, filter]);\r\n\r\n  async function assign(roleId: string) {\r\n    setAssigning(roleId);\r\n    try {\r\n      const token = getAccessToken();\r\n      const res = await fetch(`${API_BASE}/admin/users/${encodeURIComponent(userId)}/assign-role`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n        },\r\n        body: JSON.stringify({ role: roleId }),\r\n      });\r\n      if (!res.ok) throw new Error(await res.text().catch(()=>\"Failed to assign\"));\r\n      // Refresh user\r\n      const uRes = await fetch(`${API_BASE}/admin/users/${encodeURIComponent(userId)}`, { headers: token ? { Authorization: `Bearer ${token}` } : {} });\r\n      const u = await uRes.json();\r\n      setUser(u);\r\n      show({ variant: \"success\", title: \"Role assigned\" });\r\n    } catch (e: any) {\r\n      show({ variant: \"destructive\", title: \"Assign failed\", description: e.message || \"\" });\r\n    } finally {\r\n      setAssigning(null);\r\n    }\r\n  }\r\n\r\n  async function remove(roleId: string) {\r\n    setAssigning(roleId);\r\n    try {\r\n      const token = getAccessToken();\r\n      const res = await fetch(`${API_BASE}/admin/users/${encodeURIComponent(userId)}/remove-role`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n        },\r\n        body: JSON.stringify({ role: roleId }),\r\n      });\r\n      if (!res.ok) throw new Error(await res.text().catch(()=>\"Failed to remove\"));\r\n      // Refresh user\r\n      const uRes = await fetch(`${API_BASE}/admin/users/${encodeURIComponent(userId)}`, { headers: token ? { Authorization: `Bearer ${token}` } : {} });\r\n      const u = await uRes.json();\r\n      setUser(u);\r\n      show({ variant: \"success\", title: \"Role removed\" });\r\n    } catch (e: any) {\r\n      show({ variant: \"destructive\", title: \"Remove failed\", description: e.message || \"\" });\r\n    } finally {\r\n      setAssigning(null);\r\n    }\r\n  }\r\n\r\n  if (loading) return <div className=\"space-y-4\"><Skeleton className=\"h-8 w-64\" /><div className=\"space-y-2\">{Array.from({ length: 6 }).map((_,i)=>(<Skeleton key={i} className=\"h-14\"/>))}</div></div>;\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-xl font-semibold\">User Roles</h1>\r\n        <Link href=\"/dashboard/admin/users\" className=\"text-sm border rounded px-2 py-1 hover:bg-gray-50\">Back</Link>\r\n      </div>\r\n\r\n      <div className=\"border rounded bg-white p-4\">\r\n        <div className=\"text-sm\"><span className=\"font-medium\">User:</span> {user?.username || \"-\"} ({user?.email || \"-\"})</div>\r\n        <div className=\"text-xs text-gray-600\">ID: {user?.id}</div>\r\n      </div>\r\n\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"font-medium\">Available Roles</div>\r\n        <Input placeholder=\"Filter roles\" value={filter} onChange={(e)=>setFilter(e.target.value)} className=\"w-64\" />\r\n      </div>\r\n\r\n      <div className=\"border rounded bg-white divide-y\">\r\n        <div className=\"grid grid-cols-12 p-3 text-xs text-gray-600\">\r\n          <div className=\"col-span-4\">Role Name</div>\r\n          <div className=\"col-span-6\">ID</div>\r\n          <div className=\"col-span-2 text-right\">Action</div>\r\n        </div>\r\n        {filtered.map((r) => {\r\n          const rid = String(r.id);\r\n          const has = assignedIds.has(rid);\r\n          return (\r\n            <div key={rid} className=\"grid grid-cols-12 p-3 items-center\">\r\n              <div className=\"col-span-4\">{r.name}</div>\r\n              <div className=\"col-span-6 text-xs text-gray-600 truncate\">{rid}</div>\r\n              <div className=\"col-span-2 text-right\">\r\n                {has ? (\r\n                  <Button variant=\"outline\" disabled={assigning===rid} onClick={()=>remove(rid)}>\r\n                    {assigning===rid?\"Removing...\":\"Remove\"}\r\n                  </Button>\r\n                ) : (\r\n                  <Button disabled={assigning===rid} onClick={()=>assign(rid)}>\r\n                    {assigning===rid?\"Assigning...\":\"Assign\"}\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n        {filtered.length===0 && <div className=\"p-6 text-gray-500\">No roles.</div>}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}