module.exports=[80157,a=>{"use strict";a.s(["default",()=>h]);var b=a.i(90944),c=a.i(72131),d=a.i(40695),e=a.i(5522),f=a.i(64037),g=a.i(75320);function h(){let{show:a}=(0,f.useToast)(),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(1),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(async()=>{try{let a=await g.AuthAPI.me();i(a)}catch(a){}})()},[]);let t=(a,b)=>{b<=0||k(j.map((c,d)=>d===a?{...c,quantity:b,total:b*c.unit_price}:c))},u=()=>j.reduce((a,b)=>a+b.total,0),v=async()=>{if(0===j.length)return void a({variant:"destructive",title:"Empty cart",description:"Add items to cart before processing sale"});s(!0);try{await new Promise(a=>setTimeout(a,1e3)),a({variant:"success",title:"Sale completed",description:`Transaction processed successfully. Total: $${u().toFixed(2)}`}),k([])}catch(b){a({variant:"destructive",title:"Sale failed",description:b?.message||"Failed to process sale"})}finally{s(!1)}};return(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Point of Sale"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Process customer transactions"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Add Items"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medicine Name/SKU"}),(0,b.jsx)(e.Input,{value:l,onChange:a=>m(a.target.value),placeholder:"Search medicine by name or SKU",className:"text-black"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity"}),(0,b.jsx)(e.Input,{type:"number",value:n,onChange:a=>o(parseInt(a.target.value)||1),min:"1",className:"text-black"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Price ($)"}),(0,b.jsx)(e.Input,{type:"number",step:"0.01",value:p,onChange:a=>q(a.target.value),placeholder:"0.00",className:"text-black"})]})]}),(0,b.jsx)(d.Button,{onClick:()=>{if(!l.trim()||!p||n<=0)return void a({variant:"destructive",title:"Invalid input",description:"Please fill all fields correctly"});let b=parseFloat(p);if(isNaN(b)||b<=0)return void a({variant:"destructive",title:"Invalid price",description:"Please enter a valid price"});k([...j,{medicine_id:Date.now(),name:l,sku:l,quantity:n,unit_price:b,total:n*b}]),m(""),o(1),q("")},className:"w-full bg-blue-600 hover:bg-blue-700",children:"Add to Cart"})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Cart (",j.length," items)"]}),0===j.length?(0,b.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,b.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5-6m0 0h15.5M7 13h10m0 0v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6z"})}),"Cart is empty"]}):(0,b.jsx)("div",{className:"space-y-3",children:j.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["$",a.unit_price.toFixed(2)," each"]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(d.Button,{size:"sm",variant:"outline",onClick:()=>t(c,a.quantity-1),children:"-"}),(0,b.jsx)("span",{className:"w-8 text-center",children:a.quantity}),(0,b.jsx)(d.Button,{size:"sm",variant:"outline",onClick:()=>t(c,a.quantity+1),children:"+"}),(0,b.jsxs)("span",{className:"w-16 text-right font-medium",children:["$",a.total.toFixed(2)]}),(0,b.jsx)(d.Button,{size:"sm",variant:"outline",onClick:()=>{k(j.filter((a,b)=>b!==c))},className:"text-red-600 hover:text-red-700",children:"Ã—"})]})]},c))}),j.length>0&&(0,b.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"Total:"}),(0,b.jsxs)("span",{className:"text-2xl font-bold text-green-600",children:["$",u().toFixed(2)]})]}),(0,b.jsx)(d.Button,{onClick:v,disabled:r,className:"w-full bg-green-600 hover:bg-green-700 text-lg py-3",children:r?"Processing...":"Complete Sale"})]})]})]})]})}}];

//# sourceMappingURL=app_%28dashboard%29_dashboard_staff_pos_page_tsx_77efa4a7._.js.map