{"version":3,"sources":["turbopack:///[project]/app/(dashboard)/dashboard/admin/pharmacies/page.tsx"],"sourcesContent":["\"use client\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { AdminAPI } from \"@/utils/api\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/components/ui/toast\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { cn } from \"@/lib/utils\";\n\ntype AdminPharmacy = {\n  id: number;\n  tenant_id: string;\n  name: string;\n  address?: string | null;\n  owner_email?: string | null;\n  owner_phone?: string | null;\n  owner_approved?: boolean | null;\n  kyc_id?: number | null;\n  kyc_status?: string | null;\n  subscription?: { blocked?: boolean | null; next_due_date?: string | null; status?: string | null } | null;\n  created_at?: string | null;\n  pending_payment_code?: string | null;\n  pending_payment_submitted_at?: string | null;\n  latest_payment_code?: string | null;\n  latest_payment_status?: string | null;\n  latest_payment_submitted_at?: string | null;\n  latest_payment_verified_at?: string | null;\n  status_category: \"pending_kyc\" | \"awaiting_payment\" | \"pending_verification\" | \"active\" | \"blocked\" | string;\n  status_label: string;\n  status_priority: number;\n  pending_payment?: {\n    code?: string | null;\n    status?: string | null;\n    submitted_at?: string | null;\n    submitted_by_user_id?: number | null;\n  } | null;\n  latest_payment?: {\n    code?: string | null;\n    status?: string | null;\n    submitted_at?: string | null;\n    verified_at?: string | null;\n  } | null;\n  kyc?: {\n    application_id?: number | null;\n    status?: string | null;\n    applicant_user_id?: number | null;\n    id_number?: string | null;\n    pharmacy_license_number?: string | null;\n    license_document_name?: string | null;\n    license_document_mime?: string | null;\n    license_document_available: boolean;\n    notes?: string | null;\n    submitted_at?: string | null;\n    pharmacy_name?: string | null;\n    pharmacy_address?: string | null;\n    owner_email?: string | null;\n    owner_phone?: string | null;\n  } | null;\n  owner_password_hash?: string | null;\n};\n\ntype PendingActionState = {\n  type: \"approve\" | \"reject\" | \"verify\" | \"rejectPayment\";\n  tenantId: string;\n  name: string;\n  kycId?: number | null;\n  pendingPayment?: AdminPharmacy[\"pending_payment\"];\n};\n\ntype ConfirmOptions = {\n  issueTempPassword: boolean;\n  tempPassword: string;\n};\n\nconst STATUS_SECTIONS: { key: AdminPharmacy[\"status_category\"]; title: string }[] = [\n  { key: \"pending_kyc\", title: \"Pending KYC\" },\n  { key: \"awaiting_payment\", title: \"Awaiting Payment\" },\n  { key: \"pending_verification\", title: \"Awaiting Verification\" },\n  { key: \"active\", title: \"Active Pharmacies\" },\n  { key: \"blocked\", title: \"Blocked / Rejected\" },\n];\n\nconst STATUS_TONE: Record<string, \"primary\" | \"muted\" | \"outline\" | \"danger\"> = {\n  pending_kyc: \"primary\",\n  awaiting_payment: \"outline\",\n  pending_verification: \"primary\",\n  active: \"muted\",\n  blocked: \"danger\",\n};\n\nfunction generatePassword(length = 12): string {\n  const alphabet = \"ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz23456789\";\n  let result = \"\";\n  for (let i = 0; i < length; i++) {\n    result += alphabet.charAt(Math.floor(Math.random() * alphabet.length));\n  }\n  return result;\n}\n\nfunction sortPharmacies(list: AdminPharmacy[]): AdminPharmacy[] {\n  return [...list].sort((a, b) => {\n    if (a.status_priority !== b.status_priority) {\n      return a.status_priority - b.status_priority;\n    }\n    const timeA = a.created_at ? new Date(a.created_at).getTime() : 0;\n    const timeB = b.created_at ? new Date(b.created_at).getTime() : 0;\n    return timeB - timeA;\n  });\n}\n\nfunction formatDateTime(value?: string | null, options: Intl.DateTimeFormatOptions = {}) {\n  if (!value) return \"-\";\n  try {\n    return new Date(value).toLocaleString(undefined, { dateStyle: \"medium\", timeStyle: \"short\", ...options });\n  } catch (e) {\n    return value;\n  }\n}\n\nexport default function AdminPharmaciesPage() {\n  const { show } = useToast();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [items, setItems] = useState<AdminPharmacy[]>([]);\n  const [total, setTotal] = useState(0);\n  const [q, setQ] = useState(\"\");\n  const [selectedTenant, setSelectedTenant] = useState<string | null>(null);\n  const [pendingAction, setPendingAction] = useState<PendingActionState | null>(null);\n  const [processing, setProcessing] = useState(false);\n  const [recentCredentials, setRecentCredentials] = useState<{ tenantId: string; name: string; tempPassword: string } | null>(null);\n  const [confirmOptions, setConfirmOptions] = useState<ConfirmOptions>({ issueTempPassword: false, tempPassword: \"\" });\n\n  const handleDialogCancel = () => {\n    setPendingAction(null);\n    setConfirmOptions({ issueTempPassword: false, tempPassword: \"\" });\n  };\n\n  function openAction(action: PendingActionState) {\n    setPendingAction(action);\n    setConfirmOptions({ issueTempPassword: false, tempPassword: \"\" });\n  }\n\n  async function handleCopyPassword(password: string) {\n    try {\n      await navigator.clipboard.writeText(password);\n      show({ variant: \"success\", title: \"Copied\", description: \"Temporary password copied to clipboard\" });\n    } catch (err: any) {\n      show({ variant: \"destructive\", title: \"Copy failed\", description: err?.message || \"Unable to copy password\" });\n    }\n  }\n\n  async function refresh(page = 1) {\n    setLoading(true);\n    try {\n      const data = (await AdminAPI.pharmacies(page, 20, q)) as { items?: AdminPharmacy[]; total?: number };\n      const sorted = sortPharmacies(data.items || []);\n      setItems(sorted);\n      setTotal(data.total || sorted.length);\n      setError(null);\n    } catch (e: any) {\n      setError(e.message || \"Failed to load pharmacies\");\n      show({ variant: \"destructive\", title: \"Error\", description: e.message || \"Failed to load\" });\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => { refresh(1); }, []);\n\n  const grouped = useMemo(() => {\n    const map = new Map<string, AdminPharmacy[]>();\n    STATUS_SECTIONS.forEach((section) => map.set(section.key, []));\n    items.forEach((item) => {\n      const bucket = map.get(item.status_category) ?? map.get(\"blocked\") ?? [];\n      bucket.push(item);\n      map.set(item.status_category, bucket);\n    });\n    return map;\n  }, [items]);\n\n  function updateTenant(tenantId: string, updater: (prev: AdminPharmacy) => AdminPharmacy) {\n    setItems((prev) => {\n      const updated = prev.map((item) => (item.tenant_id === tenantId ? updater(item) : item));\n      return sortPharmacies(updated);\n    });\n  }\n\n  return (\n    <>\n      {recentCredentials && (\n        <div className=\"mb-6 rounded-xl border-2 border-emerald-200 bg-gradient-to-r from-emerald-50 to-green-50 p-4 shadow-sm\">\n          <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\n            <div className=\"space-y-1\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-2 h-2 bg-emerald-500 rounded-full animate-pulse\"></div>\n                <div className=\"font-semibold text-emerald-800 text-base\">Temporary Credentials Issued</div>\n              </div>\n              <div className=\"text-sm text-emerald-700 ml-4\">\n                {recentCredentials.name} <span className=\"text-emerald-600\">(tenant {recentCredentials.tenantId})</span>\n              </div>\n              <div className=\"text-xs text-emerald-600 ml-4\">Share the password securely with the owner</div>\n            </div>\n            <div className=\"flex items-center gap-3 bg-white/70 rounded-lg p-3 border border-emerald-200\">\n              <span className=\"font-mono text-emerald-900 font-semibold text-base tracking-wider\">{recentCredentials.tempPassword}</span>\n              <Button size=\"sm\" variant=\"outline\" className=\"border-emerald-300 text-emerald-700 hover:bg-emerald-100\" onClick={() => handleCopyPassword(recentCredentials.tempPassword)}>Copy</Button>\n            </div>\n          </div>\n        </div>\n      )}\n      <div className=\"space-y-6\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 pb-4 border-b border-gray-200\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">Pharmacy Management</h1>\n            <p className=\"text-sm text-gray-600 mt-1\">Manage pharmacy applications and payments</p>\n          </div>\n          <div className=\"flex gap-3\">\n            <div className=\"relative\">\n              <Input \n                placeholder=\"Search pharmacies...\" \n                value={q} \n                onChange={(e)=>setQ(e.target.value)}\n                className=\"pl-10 w-64 border-gray-300 focus:border-blue-500 focus:ring-blue-500\"\n              />\n              <div className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\">\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n                </svg>\n              </div>\n            </div>\n            <Button onClick={()=>refresh(1)} className=\"bg-blue-600 hover:bg-blue-700 text-white px-6\">Search</Button>\n          </div>\n        </div>\n        {loading ? (\n          <div className=\"flex items-center justify-center py-16\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n          </div>\n        ) : error ? (\n          <div className=\"bg-red-50 border border-red-200 rounded-xl p-6 text-center\">\n            <div className=\"text-red-600 font-medium\">{error}</div>\n          </div>\n        ) : items.length === 0 ? (\n          <div className=\"bg-gray-50 border border-gray-200 rounded-xl p-12 text-center\">\n            <div className=\"text-gray-500 text-lg font-medium\">No pharmacies found</div>\n            <div className=\"text-gray-400 text-sm mt-2\">Try adjusting your search criteria</div>\n          </div>\n        ) : (\n          <div className=\"space-y-8\">\n            {STATUS_SECTIONS.map((section) => {\n              const sectionItems = grouped.get(section.key) || [];\n              if (sectionItems.length === 0) return null;\n              return (\n                <div key={section.key} className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between bg-gray-50 rounded-lg p-4 border-l-4 border-blue-500\">\n                    <h2 className=\"text-xl font-bold text-gray-900\">{section.title}</h2>\n                    <div className=\"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold\">\n                      {sectionItems.length} {sectionItems.length === 1 ? \"pharmacy\" : \"pharmacies\"}\n                    </div>\n                  </div>\n                  <div className=\"grid gap-6 md:grid-cols-2 xl:grid-cols-3\">\n                    {sectionItems.map((ph) => {\n                      const isSelected = selectedTenant === ph.tenant_id;\n                      const statusTone = STATUS_TONE[ph.status_category] || \"muted\";\n                      const canApprove = ph.status_category === \"pending_kyc\" && !!ph.kyc_id;\n                      const canReject = ph.status_category === \"pending_kyc\" && !!ph.kyc_id;\n                      const pendingCode = ph.pending_payment?.code || ph.pending_payment_code;\n                      const canVerify = ph.status_category === \"pending_verification\" && !!pendingCode;\n                      const canRejectPayment = ph.status_category === \"pending_verification\" && !!pendingCode;\n                      const kyc = ph.kyc;\n\n                      return (\n                        <Card\n                          key={ph.id}\n                          className={cn(\n                            \"transition-all duration-200 hover:shadow-xl cursor-pointer border-0 shadow-md bg-white\",\n                            isSelected && \"ring-2 ring-blue-500 shadow-xl transform scale-[1.02]\"\n                          )}\n                          onClick={() => setSelectedTenant(ph.tenant_id)}\n                        >\n                          <CardHeader className=\"pb-3\">\n                            <div className=\"flex items-start justify-between gap-4\">\n                              <div className=\"space-y-2\">\n                                <CardTitle className=\"text-xl font-bold text-gray-900\">{ph.name}</CardTitle>\n                                <div className=\"flex items-center gap-2\">\n                                  <div className=\"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded font-mono\">{ph.tenant_id}</div>\n                                </div>\n                              </div>\n                              <div className=\"flex flex-col gap-2\">\n                                <StatusPill tone={statusTone}>{ph.status_label}</StatusPill>\n                                {ph.owner_approved && <StatusPill tone=\"outline\">Owner approved</StatusPill>}\n                              </div>\n                            </div>\n                          </CardHeader>\n                          <CardContent className=\"space-y-5\">\n                            <div className=\"grid gap-3\">\n                              <InfoRow label=\"Owner\" value={ph.owner_email || \"-\"} description={ph.owner_phone} />\n                              <InfoRow label=\"Created\" value={formatDateTime(ph.created_at)} />\n                              <InfoRow label=\"Address\" value={ph.address || \"-\"} />\n                              <InfoRow\n                                label=\"Subscription\"\n                                value={ph.subscription?.status ? ph.subscription.status.replace(\"_\", \" \").toUpperCase() : \"-\"}\n                                description={ph.subscription?.next_due_date ? `Next due: ${formatDateTime(ph.subscription.next_due_date, { dateStyle: \"medium\" })}` : undefined}\n                              />\n                              {pendingCode && (\n                                <div className=\"rounded-lg border border-orange-200 p-4 space-y-3 bg-orange-50/50\">\n                                  <div className=\"flex items-center gap-2\">\n                                    <div className=\"w-2 h-2 bg-orange-500 rounded-full animate-pulse\"></div>\n                                    <div className=\"text-sm font-bold text-orange-900\">Pending Payment</div>\n                                  </div>\n                                  <div className=\"space-y-2\">\n                                    <div className=\"flex justify-between items-center\">\n                                      <span className=\"text-xs font-semibold uppercase tracking-wide text-orange-700\">Code</span>\n                                      <span className=\"font-mono bg-white px-2 py-1 rounded border text-orange-900 font-semibold\">{pendingCode}</span>\n                                    </div>\n                                    {ph.pending_payment?.submitted_at && (\n                                      <div className=\"flex justify-between items-center\">\n                                        <span className=\"text-xs font-semibold uppercase tracking-wide text-orange-700\">Submitted</span>\n                                        <span className=\"text-sm text-orange-800\">{formatDateTime(ph.pending_payment.submitted_at)}</span>\n                                      </div>\n                                    )}\n                                  </div>\n                                </div>\n                              )}\n                              <InfoRow\n                                label=\"Latest payment\"\n                                value={ph.latest_payment?.code || ph.latest_payment_code || \"â€”\"}\n                                description={ph.latest_payment?.status ? `${ph.latest_payment?.status?.toUpperCase?.()}${ph.latest_payment?.submitted_at ? ` Â· ${formatDateTime(ph.latest_payment?.submitted_at)}` : \"\"}` : undefined}\n                              />\n                              {kyc && (\n                                <div className=\"rounded-lg border border-blue-200 p-4 space-y-3 bg-blue-50/50\">\n                                  <div className=\"flex items-center gap-2\">\n                                    <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\n                                    <div className=\"text-sm font-bold text-blue-900\">KYC Details</div>\n                                  </div>\n                                  <div className=\"grid gap-3 md:grid-cols-2\">\n                                    <InfoRow label=\"KYC Status\" value={kyc.status?.toUpperCase() || \"-\"} />\n                                    <InfoRow label=\"Submitted\" value={formatDateTime(kyc.submitted_at)} />\n                                    <InfoRow label=\"ID Number\" value={kyc.id_number || \"-\"} />\n                                    <InfoRow label=\"License Number\" value={kyc.pharmacy_license_number || \"-\"} />\n                                    {kyc.pharmacy_name && <InfoRow label=\"Registered Pharmacy Name\" value={kyc.pharmacy_name} />}\n                                    {kyc.pharmacy_address && <InfoRow label=\"Registered Address\" value={kyc.pharmacy_address} />}\n                                    {kyc.owner_email && <InfoRow label=\"Owner Email (submitted)\" value={kyc.owner_email} />}\n                                    {kyc.owner_phone && <InfoRow label=\"Owner Phone (submitted)\" value={kyc.owner_phone} />}\n                                  </div>\n                                  {kyc.notes && <div className=\"text-xs text-blue-700 bg-blue-100 p-2 rounded\">Notes: {kyc.notes}</div>}\n                                  {kyc.license_document_available && kyc.application_id && (\n                                    <Button\n                                      variant=\"outline\"\n                                      size=\"sm\"\n                                      className=\"border-blue-300 text-blue-700 hover:bg-blue-100\"\n                                      onClick={(e) => {\n                                        e.stopPropagation();\n                                        const appId = kyc.application_id;\n                                        if (typeof appId !== \"number\") return;\n                                        AdminAPI.downloadPharmacyLicense(appId).catch((err) =>\n                                          show({ variant: \"destructive\", title: \"Download failed\", description: err.message || \"Unable to download license\" }),\n                                        );\n                                      }}\n                                    >\n                                      Download License\n                                    </Button>\n                                  )}\n                                </div>\n                              )}\n                              {ph.owner_password_hash && (\n                                <InfoRow label=\"Owner Password Hash\" value={ph.owner_password_hash} masked />\n                              )}\n                            </div>\n\n                            <div className=\"border-t border-gray-200 pt-4 mt-4\">\n                              <div className=\"grid grid-cols-2 gap-2\">\n                                <Button\n                                  disabled={!canApprove}\n                                  className=\"bg-green-600 hover:bg-green-700 text-white disabled:bg-gray-300 disabled:text-gray-500\"\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    openAction({ type: \"approve\", tenantId: ph.tenant_id, kycId: ph.kyc_id, name: ph.name });\n                                  }}\n                                >âœ“ Approve</Button>\n                                <Button\n                                  variant=\"outline\"\n                                  disabled={!canReject}\n                                  className=\"border-red-300 text-red-700 hover:bg-red-50 disabled:border-gray-300 disabled:text-gray-500\"\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    openAction({ type: \"reject\", tenantId: ph.tenant_id, kycId: ph.kyc_id, name: ph.name });\n                                  }}\n                                >âœ— Reject</Button>\n                                <Button\n                                  disabled={!canVerify}\n                                  className=\"bg-blue-600 hover:bg-blue-700 text-white disabled:bg-gray-300 disabled:text-gray-500\"\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    openAction({ type: \"verify\", tenantId: ph.tenant_id, name: ph.name, pendingPayment: ph.pending_payment });\n                                  }}\n                                >ðŸ’³ Verify Payment</Button>\n                                <Button\n                                  variant=\"outline\"\n                                  disabled={!canRejectPayment}\n                                  className=\"border-orange-300 text-orange-700 hover:bg-orange-50 disabled:border-gray-300 disabled:text-gray-500\"\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    openAction({ type: \"rejectPayment\", tenantId: ph.tenant_id, name: ph.name, pendingPayment: ph.pending_payment });\n                                  }}\n                                >âš  Reject Payment</Button>\n                              </div>\n                            </div>\n                          </CardContent>\n                        </Card>\n                      );\n                    })}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n      {pendingAction && (\n        <ConfirmDialog\n          action={pendingAction}\n          loading={processing}\n          onCancel={() => {\n            if (processing) return;\n            handleDialogCancel();\n          }}\n          onConfirm={async () => {\n            if (processing) return;\n            setProcessing(true);\n            try {\n              switch (pendingAction.type) {\n                case \"approve\": {\n                  if (pendingAction.kycId == null) {\n                    show({ variant: \"destructive\", title: \"Missing application\", description: \"No KYC record found for this tenant.\" });\n                    setProcessing(false);\n                    return;\n                  }\n                  const trimmedPassword = confirmOptions.tempPassword.trim();\n                  if (confirmOptions.issueTempPassword && trimmedPassword && trimmedPassword.length < 6) {\n                    show({ variant: \"destructive\", title: \"Password too short\", description: \"Temporary passwords must be at least 6 characters.\" });\n                    setProcessing(false);\n                    return;\n                  }\n                  const res = await AdminAPI.approvePharmacy(pendingAction.tenantId, pendingAction.kycId, {\n                    issue_temp_password: confirmOptions.issueTempPassword,\n                    temp_password: confirmOptions.issueTempPassword ? (trimmedPassword || undefined) : undefined,\n                  });\n                  const generated = (res as any)?.temporary_password as string | undefined;\n                  if (generated) {\n                    setRecentCredentials({ tenantId: pendingAction.tenantId, name: pendingAction.name, tempPassword: generated });\n                  } else if (confirmOptions.issueTempPassword && trimmedPassword) {\n                    setRecentCredentials({ tenantId: pendingAction.tenantId, name: pendingAction.name, tempPassword: trimmedPassword });\n                  } else {\n                    setRecentCredentials(null);\n                  }\n                  show({ variant: \"success\", title: \"Pharmacy approved\", description: `${pendingAction.name} will be notified to pay` });\n                  refresh();\n                  break;\n                }\n                case \"reject\":\n                  await AdminAPI.rejectPharmacy(pendingAction.tenantId, pendingAction.kycId!);\n                  show({ variant: \"success\", title: \"Pharmacy rejected\", description: pendingAction.name });\n                  refresh();\n                  break;\n                case \"verify\": {\n                  const res = await AdminAPI.verifyPayment(pendingAction.tenantId, pendingAction.pendingPayment?.code || undefined);\n                  show({ variant: \"success\", title: \"Payment verified\", description: `${pendingAction.name} notified` });\n                  updateTenant(pendingAction.tenantId, (prev) => ({\n                    ...prev,\n                    status_category: \"active\",\n                    status_label: \"Active\",\n                    status_priority: 40,\n                    subscription: {\n                      ...(prev.subscription || {}),\n                      blocked: false,\n                      status: \"active\",\n                      next_due_date: res?.next_due_date || prev.subscription?.next_due_date || null,\n                    },\n                    pending_payment: null,\n                    pending_payment_code: null,\n                    pending_payment_submitted_at: null,\n                    latest_payment: {\n                      code: pendingAction.pendingPayment?.code || res?.payment_code || prev.latest_payment?.code || prev.latest_payment_code,\n                      status: \"verified\",\n                      submitted_at: pendingAction.pendingPayment?.submitted_at || prev.latest_payment?.submitted_at || prev.latest_payment_submitted_at,\n                      verified_at: new Date().toISOString(),\n                    },\n                    latest_payment_code: pendingAction.pendingPayment?.code || res?.payment_code || prev.latest_payment_code,\n                    latest_payment_status: \"verified\",\n                    latest_payment_submitted_at: pendingAction.pendingPayment?.submitted_at || prev.latest_payment_submitted_at,\n                    latest_payment_verified_at: new Date().toISOString(),\n                  }));\n                  break;\n                }\n                case \"rejectPayment\":\n                  await AdminAPI.rejectPayment(pendingAction.tenantId, pendingAction.pendingPayment?.code || undefined);\n                  show({ variant: \"success\", title: \"Payment rejected\", description: `${pendingAction.name} informed to retry` });\n                  refresh();\n                  break;\n              }\n              handleDialogCancel();\n            } catch (err: any) {\n              show({ variant: \"destructive\", title: \"Action failed\", description: err?.message || \"Something went wrong\" });\n            } finally {\n              setProcessing(false);\n            }\n          }}\n          options={confirmOptions}\n          setOptions={(opts) => setConfirmOptions(opts)}\n        />\n      )}\n    </>\n  );\n}\n\n\nfunction InfoRow({ label, value, description, className, masked }: { label: string; value: React.ReactNode; description?: React.ReactNode; className?: string; masked?: boolean }) {\n  const [showValue, setShowValue] = useState(!masked);\n  return (\n    <div className={cn(\"space-y-2 rounded-lg border border-gray-200 p-3 bg-gray-50/50 hover:bg-gray-50 transition-colors\", className)}>\n      <div className=\"flex items-center justify-between gap-2\">\n        <div className=\"text-xs font-semibold uppercase tracking-wide text-gray-600\">{label}</div>\n        {masked && (\n          <button type=\"button\" className=\"text-xs text-blue-600 hover:text-blue-800 font-medium\" onClick={() => setShowValue((prev) => !prev)}>\n            {showValue ? \"Hide\" : \"Show\"}\n          </button>\n        )}\n      </div>\n      <div className=\"text-sm font-medium text-gray-900 break-all\">\n        {masked && !showValue ? \"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\" : value}\n      </div>\n      {description && <div className=\"text-xs text-gray-600 mt-1\">{description}</div>}\n    </div>\n  );\n}\n\nfunction StatusPill({ children, tone = \"primary\" }: { children: React.ReactNode; tone?: \"primary\" | \"muted\" | \"outline\" | \"danger\" }) {\n  const styles =\n    tone === \"primary\"\n      ? \"bg-blue-100 text-blue-800 border border-blue-200\"\n      : tone === \"danger\"\n      ? \"bg-red-100 text-red-800 border border-red-200\"\n      : tone === \"outline\"\n      ? \"border border-gray-300 text-gray-700 bg-white\"\n      : \"bg-gray-100 text-gray-700 border border-gray-200\";\n  return <span className={cn(\"rounded-full px-3 py-1 text-xs font-semibold shadow-sm\", styles)}>{children}</span>;\n}\n\n\nfunction ConfirmDialog({\n  action,\n  onConfirm,\n  onCancel,\n  loading,\n  options,\n  setOptions,\n}: {\n  action: PendingActionState;\n  onConfirm: () => void;\n  onCancel: () => void;\n  loading: boolean;\n  options: ConfirmOptions;\n  setOptions: (opts: ConfirmOptions) => void;\n}) {\n  const copy = {\n    approve: {\n      title: \"Approve pharmacy\",\n      description: `Are you sure you want to approve ${action.name} and notify them to pay?`,\n      confirm: \"Yes, approve\",\n    },\n    reject: {\n      title: \"Reject pharmacy\",\n      description: `Reject ${action.name}'s application? They will be notified immediately.`,\n      confirm: \"Yes, reject\",\n    },\n    verify: {\n      title: \"Verify payment\",\n      description: `Confirm that ${action.name} has paid and unblock their subscription?`,\n      confirm: \"Yes, verify\",\n    },\n    rejectPayment: {\n      title: \"Reject payment\",\n      description: `Reject ${action.name}'s submitted payment and ask them to retry?`,\n      confirm: \"Yes, reject payment\",\n    },\n  } as const;\n\n  const meta = copy[action.type];\n  const paymentDetails = action.pendingPayment;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4 backdrop-blur-sm\">\n      <div className=\"w-full max-w-md rounded-xl bg-white p-6 shadow-2xl border border-gray-200\">\n        <h2 className=\"text-xl font-bold text-gray-900\">{meta.title}</h2>\n        <p className=\"mt-3 text-sm text-gray-600\">{meta.description}</p>\n        {paymentDetails && (action.type === \"verify\" || action.type === \"rejectPayment\") && (\n          <div className=\"mt-4 rounded-lg border border-blue-200 bg-blue-50 p-4\">\n            <div className=\"font-semibold text-sm mb-3 text-blue-900\">Payment Details</div>\n            <div className=\"space-y-2 text-sm\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-600\">Code:</span> \n                <span className=\"font-mono bg-white px-2 py-1 rounded border text-blue-900\">{paymentDetails.code}</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-gray-600\">Submitted:</span> \n                <span className=\"text-gray-900\">{formatDateTime(paymentDetails.submitted_at)}</span>\n              </div>\n            </div>\n          </div>\n        )}\n        {action.type === \"approve\" && (\n          <div className=\"mt-4 space-y-4 border border-green-200 rounded-lg bg-green-50 p-4\">\n            <div className=\"flex items-center justify-between gap-3\">\n              <label className=\"text-sm font-semibold text-green-900\">Issue temporary password</label>\n              <input\n                type=\"checkbox\"\n                checked={Boolean(options.issueTempPassword)}\n                onChange={(e) => setOptions({ ...options, issueTempPassword: e.target.checked })}\n                className=\"w-4 h-4 text-green-600 rounded focus:ring-green-500\"\n              />\n            </div>\n            {options.issueTempPassword && (\n              <div className=\"space-y-2\">\n                <label className=\"text-xs font-semibold uppercase tracking-wide text-green-700\" htmlFor=\"temp-password-input\">Password</label>\n                <input\n                  id=\"temp-password-input\"\n                  type=\"text\"\n                  value={options.tempPassword ?? \"\"}\n                  onChange={(e) => setOptions({ ...options, tempPassword: e.target.value })}\n                  className=\"w-full rounded-lg border border-green-300 px-3 py-2 text-sm focus:border-green-500 focus:ring-green-500\"\n                  placeholder=\"Auto-generate if left blank\"\n                />\n                <button\n                  type=\"button\"\n                  className=\"text-xs text-green-600 hover:text-green-800 font-medium\"\n                  onClick={() => setOptions({ ...options, tempPassword: generatePassword() })}\n                >\n                  Generate strong password\n                </button>\n              </div>\n            )}\n          </div>\n        )}\n        <div className=\"mt-6 flex justify-end gap-3\">\n          <Button variant=\"outline\" onClick={onCancel} disabled={loading}>\n            Cancel\n          </Button>\n          <Button onClick={onConfirm} disabled={loading}>\n            {loading ? \"Processing...\" : meta.confirm}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}