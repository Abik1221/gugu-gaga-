{"version":3,"sources":["turbopack:///[project]/app/(dashboard)/dashboard/staff/sales/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useToast } from \"@/components/ui/toast\";\n\ninterface Sale {\n  id: number;\n  branch: string;\n  cashier_user_id: number;\n  total_amount: number;\n  created_at: string;\n  lines: Array<{\n    medicine_id: number;\n    medicine_name: string;\n    sku: string;\n    quantity: number;\n    unit_price: number;\n    line_total: number;\n  }>;\n}\n\nexport default function StaffSales() {\n  const { show } = useToast();\n  const [sales, setSales] = useState<Sale[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [fromDate, setFromDate] = useState(\"\");\n  const [toDate, setToDate] = useState(\"\");\n  const [page, setPage] = useState(1);\n  const [total, setTotal] = useState(0);\n\n  const loadSales = async () => {\n    setLoading(true);\n    try {\n      // Simulate API call - replace with actual API\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // Mock data\n      const mockSales: Sale[] = [\n        {\n          id: 1,\n          branch: \"Main\",\n          cashier_user_id: 1,\n          total_amount: 45.50,\n          created_at: new Date().toISOString(),\n          lines: [\n            {\n              medicine_id: 1,\n              medicine_name: \"Paracetamol 500mg\",\n              sku: \"PARA500\",\n              quantity: 2,\n              unit_price: 2.50,\n              line_total: 5.00\n            },\n            {\n              medicine_id: 2,\n              medicine_name: \"Ibuprofen 200mg\",\n              sku: \"IBU200\",\n              quantity: 1,\n              unit_price: 40.50,\n              line_total: 40.50\n            }\n          ]\n        }\n      ];\n      \n      setSales(mockSales);\n      setTotal(mockSales.length);\n    } catch (err: any) {\n      show({\n        variant: \"destructive\",\n        title: \"Failed to load sales\",\n        description: err?.message || \"Unable to fetch sales data\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadSales();\n  }, [page, searchQuery, fromDate, toDate]);\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleString();\n  };\n\n  const formatCurrency = (amount: number) => {\n    return `$${amount.toFixed(2)}`;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"max-w-6xl mx-auto px-4 py-8\">\n        <Skeleton className=\"h-8 w-48 mb-4\" />\n        <Skeleton className=\"h-64 w-full\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Sales History</h2>\n        <p className=\"text-gray-600\">View and search transaction records</p>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Search Medicine\n            </label>\n            <Input\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              placeholder=\"Search by medicine name or SKU\"\n              className=\"text-black\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              From Date\n            </label>\n            <Input\n              type=\"date\"\n              value={fromDate}\n              onChange={(e) => setFromDate(e.target.value)}\n              className=\"text-black\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              To Date\n            </label>\n            <Input\n              type=\"date\"\n              value={toDate}\n              onChange={(e) => setToDate(e.target.value)}\n              className=\"text-black\"\n            />\n          </div>\n        </div>\n        <div className=\"mt-4 flex space-x-2\">\n          <Button onClick={loadSales} variant=\"outline\">\n            Apply Filters\n          </Button>\n          <Button \n            onClick={() => {\n              setSearchQuery(\"\");\n              setFromDate(\"\");\n              setToDate(\"\");\n            }}\n            variant=\"outline\"\n          >\n            Clear\n          </Button>\n        </div>\n      </div>\n\n      {/* Sales List */}\n      <div className=\"space-y-4\">\n        {sales.length === 0 ? (\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center\">\n            <svg className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n            </svg>\n            <p className=\"text-gray-500\">No sales found</p>\n          </div>\n        ) : (\n          sales.map((sale) => (\n            <div key={sale.id} className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n              <div className=\"flex justify-between items-start mb-4\">\n                <div>\n                  <h3 className=\"text-lg font-semibold text-gray-900\">\n                    Sale #{sale.id}\n                  </h3>\n                  <p className=\"text-sm text-gray-600\">\n                    {formatDate(sale.created_at)} • Branch: {sale.branch || \"Main\"}\n                  </p>\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"text-2xl font-bold text-green-600\">\n                    {formatCurrency(sale.total_amount)}\n                  </p>\n                  <p className=\"text-sm text-gray-600\">\n                    {sale.lines.length} item{sale.lines.length !== 1 ? 's' : ''}\n                  </p>\n                </div>\n              </div>\n\n              {/* Sale Items */}\n              <div className=\"border-t border-gray-200 pt-4\">\n                <h4 className=\"text-sm font-medium text-gray-700 mb-3\">Items:</h4>\n                <div className=\"space-y-2\">\n                  {sale.lines.map((line, index) => (\n                    <div key={index} className=\"flex justify-between items-center py-2 px-3 bg-gray-50 rounded-lg\">\n                      <div className=\"flex-1\">\n                        <p className=\"font-medium text-gray-900\">{line.medicine_name}</p>\n                        <p className=\"text-sm text-gray-600\">SKU: {line.sku}</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"font-medium text-gray-900\">\n                          {line.quantity} × {formatCurrency(line.unit_price)} = {formatCurrency(line.line_total)}\n                        </p>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      {/* Pagination */}\n      {total > 20 && (\n        <div className=\"mt-6 flex justify-center space-x-2\">\n          <Button\n            variant=\"outline\"\n            onClick={() => setPage(Math.max(1, page - 1))}\n            disabled={page === 1}\n          >\n            Previous\n          </Button>\n          <span className=\"flex items-center px-4 py-2 text-sm text-gray-600\">\n            Page {page}\n          </span>\n          <Button\n            variant=\"outline\"\n            onClick={() => setPage(page + 1)}\n            disabled={sales.length < 20}\n          >\n            Next\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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"}