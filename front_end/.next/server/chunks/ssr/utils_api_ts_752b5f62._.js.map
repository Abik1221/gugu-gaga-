{"version":3,"sources":["turbopack:///[project]/utils/api.ts"],"sourcesContent":["export const API_BASE = process.env.NEXT_PUBLIC_API_BASE || \"https://mymesob.com/api/v1\";\nexport const TENANT_HEADER =\n  process.env.NEXT_PUBLIC_TENANT_HEADER || \"X-Tenant-ID\";\n\nconst API_BASE_NORMALIZED = API_BASE.replace(/\\/+$/, \"\");\nlet API_BASE_PATH = \"\";\ntry {\n  const parsed = new URL(API_BASE_NORMALIZED);\n  API_BASE_PATH = parsed.pathname.replace(/^\\/+/, \"\").replace(/\\/+$/, \"\");\n} catch {\n  API_BASE_PATH = \"\";\n}\n\nfunction buildHeaders(\n  initHeaders?: HeadersInit,\n  tenantId?: string\n): HeadersInit {\n  const headers: Record<string, string> = {\n    ...(initHeaders as Record<string, string>),\n  };\n  if (tenantId) headers[TENANT_HEADER] = tenantId;\n  return headers;\n}\n\nfunction resolveApiUrl(path: string): string {\n  if (/^https?:\\/\\//i.test(path)) {\n    return path;\n  }\n\n  if (path.startsWith(\"?\") || path.startsWith(\"#\")) {\n    return `${API_BASE_NORMALIZED}${path}`;\n  }\n\n  const normalizedPath = path.replace(/^\\/+/, \"\");\n  let relativePath = normalizedPath;\n\n\n  if (API_BASE_PATH) {\n    const prefix = `${API_BASE_PATH}/`;\n    if (relativePath.startsWith(prefix)) {\n      relativePath = relativePath.slice(prefix.length);\n    } else if (relativePath === API_BASE_PATH) {\n      relativePath = \"\";\n    }\n  }\n\n  if (!relativePath) {\n    return API_BASE_NORMALIZED;\n  }\n\n  return `${API_BASE_NORMALIZED}/${relativePath}`;\n}\n\nexport async function postForm<T = any>(\n  path: string,\n  data: Record<string, string>,\n  tenantId?: string\n): Promise<T> {\n  const body = new URLSearchParams(data);\n  const res = await fetch(resolveApiUrl(path), {\n    method: \"POST\",\n    headers: buildHeaders(\n      { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n      tenantId\n    ),\n    body,\n  });\n\n  if (!res.ok) {\n    let parsed: any = null;\n    try {\n      parsed = await res.json();\n    } catch {\n      parsed = await res.text().catch(() => null);\n    }\n\n    let msg = \"\";\n    if (!parsed) msg = `Request failed with ${res.status}`;\n    else if (typeof parsed === \"string\") msg = parsed;\n    else if (Array.isArray(parsed)) msg = parsed.join(\", \");\n    else if (parsed?.detail) msg = parsed.detail;\n    else if (parsed?.message) msg = parsed.message;\n    else if (parsed?.error) msg = parsed.error;\n    else if (parsed?.errors) {\n      msg = Object.keys(parsed.errors)\n        .map(\n          (k) =>\n            `${k}: ${Array.isArray(parsed.errors[k])\n              ? parsed.errors[k].join(\", \")\n              : parsed.errors[k]\n            }`\n        )\n        .join(\" | \");\n    } else msg = JSON.stringify(parsed);\n\n    const err: any = new Error(msg || `Request failed with ${res.status}`);\n    err.status = res.status;\n    err.body = parsed;\n    console.error(\"[postForm] failed\", { path, status: res.status, parsed });\n    throw err;\n  }\n\n  return (await res.json()) as T;\n}\n\nexport async function postJSON<T = any>(\n  path: string,\n  body: any,\n  tenantId?: string\n): Promise<T> {\n  const requestInit = {\n    method: \"POST\",\n    headers: buildHeaders({ \"Content-Type\": \"application/json\" }, tenantId),\n    body: JSON.stringify(body),\n  } satisfies RequestInit;\n\n  try {\n    const res = await fetch(resolveApiUrl(path), requestInit);\n\n    if (!res.ok) {\n      let parsed: any = null;\n      let message = \"\";\n      try {\n        parsed = await res.json();\n        if (typeof parsed === \"string\") message = parsed;\n        else if (Array.isArray(parsed)) message = parsed.join(\", \");\n        else message = parsed?.error || parsed?.detail || parsed?.message || \"\";\n        if (!message && parsed) message = JSON.stringify(parsed);\n      } catch {\n        parsed = null;\n        message = await res.text().catch(() => \"\");\n      }\n\n      const error: any = new Error(message || `Request failed with ${res.status}`);\n      error.status = res.status;\n      if (parsed !== null) error.body = parsed;\n      throw error;\n    }\n\n    return (await res.json()) as T;\n  } catch (error: any) {\n    throw error;\n  }\n}\n\nexport async function putAuthJSON<T = any>(\n  path: string,\n  bodyData: any,\n  tenantId?: string\n): Promise<T> {\n  const res = await authFetch(\n    path,\n    {\n      method: \"PUT\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(bodyData),\n    },\n    true,\n    tenantId\n  );\n\n  if (!res.ok) {\n    const text = await res.text().catch(() => \"\");\n    throw new Error(text || `Request failed with ${res.status}`);\n  }\n\n  return (await res.json()) as T;\n}\n\nexport async function postMultipart<T = any>(\n  path: string,\n  formData: FormData,\n  tenantId?: string\n): Promise<T> {\n  const res = await fetch(resolveApiUrl(path), {\n    method: \"POST\",\n    headers: buildHeaders(undefined, tenantId),\n    body: formData,\n  });\n\n  if (!res.ok) {\n    try {\n      const data = await res.json();\n      const msg = data?.error || data?.detail || JSON.stringify(data);\n      throw new Error(msg || `Request failed with ${res.status}`);\n    } catch {\n      throw new Error(`Request failed with ${res.status}`);\n    }\n  }\n\n  return (await res.json()) as T;\n}\n\nexport function getAccessToken(): string | null {\n  if (typeof window === \"undefined\") return null;\n  return localStorage.getItem(\"access_token\") || localStorage.getItem(\"token\");\n}\n\n\n\nfunction getRefreshToken(): string | null {\n  if (typeof window === \"undefined\") return null;\n  return localStorage.getItem(\"refresh_token\");\n}\n\nasync function refreshTokens(): Promise<boolean> {\n  const rt = getRefreshToken();\n  if (!rt) return false;\n  const res = await fetch(resolveApiUrl(\"/api/v1/auth/refresh\"), {\n    method: \"POST\",\n    headers: buildHeaders({ \"Content-Type\": \"application/json\" }),\n    body: JSON.stringify({ refresh_token: rt }),\n  });\n  if (!res.ok) {\n    return false;\n  }\n  try {\n    const data = (await res.json()) as {\n      access_token: string;\n      refresh_token: string;\n    };\n    if (typeof window !== \"undefined\") {\n      localStorage.setItem(\"access_token\", data.access_token);\n      localStorage.setItem(\"refresh_token\", data.refresh_token);\n    }\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nexport async function authFetch<T>(\n  path: string,\n  init?: RequestInit,\n  retry = true,\n  tenantId?: string\n): Promise<Response> {\n  const token = getAccessToken();\n  const headers: HeadersInit = buildHeaders(\n    {\n      ...(init?.headers || {}),\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\n    },\n    tenantId\n  );\n  let res = await fetch(resolveApiUrl(path), { ...(init || {}), headers });\n\n  if (res.status === 401 && retry) {\n    const ok = await refreshTokens();\n    if (ok) {\n      const newToken = getAccessToken();\n      const retryHeaders: HeadersInit = buildHeaders(\n        {\n          ...(init?.headers || {}),\n          ...(newToken ? { Authorization: `Bearer ${newToken}` } : {}),\n        },\n        tenantId\n      );\n      res = await fetch(resolveApiUrl(path), {\n        ...(init || {}),\n        headers: retryHeaders,\n      });\n    }\n  }\n\n  return res;\n}\n\nexport async function getAuthJSON<T = any>(\n  path: string,\n  tenantId?: string\n): Promise<T> {\n  const res = await authFetch(path, undefined, true, tenantId);\n  if (!res.ok) {\n    const data = await res.text().catch(() => \"\");\n    throw new Error(data || `Request failed with ${res.status}`);\n  }\n  return (await res.json()) as T;\n}\n\nexport async function postAuthJSON<T = any>(\n  path: string,\n  bodyData: any,\n  tenantId?: string\n): Promise<T> {\n  const res = await authFetch(\n    path,\n    {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(bodyData),\n    },\n    true,\n    tenantId\n  );\n\n  if (!res.ok) {\n    const data = await res.text().catch(() => \"\");\n    throw new Error(data || `Request failed with ${res.status}`);\n  }\n\n  return (await res.json()) as T;\n}\n\nexport async function deleteAuthJSON(\n  path: string,\n  tenantId?: string\n): Promise<void> {\n  const res = await authFetch(\n    path,\n    {\n      method: \"DELETE\",\n      headers: { \"Content-Type\": \"application/json\" },\n    },\n    true,\n    tenantId\n  );\n\n  if (!res.ok) {\n    const data = await res.text().catch(() => \"\");\n    throw new Error(data || `Request failed with ${res.status}`);\n  }\n\n  // For DELETE requests, we might not have a response body\n  try {\n    return await res.json();\n  } catch {\n    return undefined;\n  }\n}\n\n// ----------------- AuthAPI -----------------\nexport type AuthProfile = {\n  id: number;\n  email: string;\n  username?: string | null;\n  first_name?: string | null;\n  last_name?: string | null;\n  phone?: string | null;\n  role?: string | null;\n  tenant_id?: string | null;\n  kyc_status?: string | null;\n  subscription_status?: string | null;\n  subscription_blocked?: boolean | null;\n  subscription_next_due_date?: string | null;\n  latest_payment_status?: string | null;\n};\n\nexport type AuthTokenResponse = {\n  access_token: string;\n  refresh_token: string;\n  token_type: string;\n  session_id: number;\n};\n\nexport type SessionInfo = {\n  id: number;\n  created_at: string;\n  last_seen_at: string;\n  expires_at: string;\n  revoked_at?: string | null;\n  is_revoked: boolean;\n  user_agent?: string | null;\n  ip_address?: string | null;\n  is_current: boolean;\n};\n\nexport type TenantActivityRecord = {\n  id: number;\n  tenant_id: string;\n  actor_user_id?: number | null;\n  action: string;\n  message: string;\n  target_type?: string | null;\n  target_id?: string | null;\n  metadata?: Record<string, unknown> | null;\n  created_at: string;\n};\n\nexport const AuthAPI = {\n  registerAffiliate: (body: any) => postJSON(\"/api/v1/auth/register/affiliate\", body),\n  registerPharmacy: (body: any) => postJSON(\"/api/v1/auth/register/owner\", body),\n  registerSupplier: (body: any) => postJSON(\"/api/v1/auth/register/supplier\", body),\n\n  registerVerify: async (email: string, code: string) => {\n    try {\n      return await postForm(\"/api/v1/auth/register/verify\", { email, code });\n    } catch (err: any) {\n      if (err?.status === 422) {\n        console.warn(\"[AuthAPI.registerVerify] 422, retrying with JSON\", {\n          body: err.body,\n        });\n        try {\n          return await postJSON(\"/api/v1/auth/register/verify\", { email, code });\n        } catch (err2: any) {\n          const e: any = new Error(\n            err2?.message || err?.message || \"Verification failed\"\n          );\n          e.original = err;\n          e.retry = err2;\n          throw e;\n        }\n      }\n      throw err;\n    }\n  },\n\n  verifyRegistration: (email: string, code: string) =>\n    postForm(\"/api/v1/auth/register/verify\", { email, code }),\n  login: (email: string, password: string, tenantId?: string) =>\n    postForm<AuthTokenResponse>(\n      \"/api/v1/auth/login\",\n      {\n        username: email,\n        password,\n        grant_type: \"password\",\n      },\n      tenantId\n    ).then(\n      (resp) => {\n        if (typeof window !== \"undefined\") {\n          localStorage.setItem(\"access_token\", resp.access_token);\n          localStorage.setItem(\"refresh_token\", resp.refresh_token);\n        }\n        return resp;\n      }\n    ),\n  loginRequestCode: (email: string, password: string, tenantId?: string) =>\n    postForm(\n      \"/api/v1/auth/login/request-code\",\n      { username: email, password, grant_type: \"password\" },\n      tenantId\n    ),\n  loginVerify: (email: string, code: string, tenantId?: string) =>\n    postJSON<AuthTokenResponse>(\"/api/v1/auth/login/verify\", { email, code }, tenantId).then((resp) => {\n      if (typeof window !== \"undefined\") {\n        localStorage.setItem(\"access_token\", resp.access_token);\n        localStorage.setItem(\"refresh_token\", resp.refresh_token);\n      }\n      return resp;\n    }),\n  refresh: (refreshToken: string) =>\n    postJSON<AuthTokenResponse>(\"/api/v1/auth/refresh\", { refresh_token: refreshToken }),\n  sessions: () => getAuthJSON<SessionInfo[]>(\"/api/v1/auth/sessions\"),\n  revokeSession: (sessionId: number) =>\n    authFetch(`/api/v1/auth/sessions/${sessionId}`, { method: \"DELETE\" }).then((res) => {\n      if (!res.ok) throw new Error(\"Failed to revoke session\");\n    }),\n  changePassword: (body: { current_password: string; new_password: string }) =>\n    postAuthJSON<{ status: string }>(\"/api/v1/auth/change-password\", body),\n  me: () => getAuthJSON<AuthProfile>(\"/api/v1/auth/me\"),\n};\n\nexport const TenantAPI = {\n  activity: async (params?: { action?: string[]; limit?: number; offset?: number }, tenantId?: string) => {\n    const searchParams = new URLSearchParams();\n    if (params?.limit) searchParams.set(\"limit\", params.limit.toString());\n    if (params?.offset) searchParams.set(\"offset\", params.offset.toString());\n    params?.action?.forEach((action) => searchParams.append(\"action\", action));\n    const qs = searchParams.toString();\n    const url = `/api/v1/tenant/activity${qs ? `?${qs}` : \"\"}`;\n    const res = await authFetch(url, undefined, true, tenantId);\n    if (res.status === 404 || res.status === 204) {\n      return [];\n    }\n    if (!res.ok) {\n      const text = await res.text().catch(() => \"\");\n      throw new Error(text || `Request failed with ${res.status}`);\n    }\n    const contentType = res.headers.get(\"content-type\") || \"\";\n    if (!contentType.includes(\"application/json\")) {\n      return [];\n    }\n    try {\n      return (await res.json()) as TenantActivityRecord[];\n    } catch {\n      return [];\n    }\n  },\n};\n\n// ----------------- IntegrationsAPI -----------------\nexport type IntegrationProviderOut = {\n  key: string;\n  name: string;\n  category: string;\n  capability: {\n    resources: string[];\n    supports_webhooks: boolean;\n    supports_delta_sync: boolean;\n  };\n  requires_oauth: boolean;\n};\n\nexport type IntegrationConnectionOut = {\n  id: number;\n  tenant_id: string;\n  provider_key: string;\n  provider_name: string;\n  display_name: string;\n  status: string;\n  created_at: string;\n  updated_at: string;\n  last_synced_at?: string | null;\n  resource_scope?: string[] | null;\n};\n\nexport type IntegrationOAuthStartResponse = {\n  authorization_url: string;\n  state: string;\n  expires_in_seconds: number;\n};\n\nexport type IntegrationSyncJobOut = {\n  id: number;\n  connection_id: number;\n  direction: string;\n  resource: string;\n  status: string;\n  started_at?: string | null;\n  finished_at?: string | null;\n  error_message?: string | null;\n};\n\nexport const IntegrationsAPI = {\n  listProviders: () => getAuthJSON<IntegrationProviderOut[]>(\"/api/v1/integrations/providers\"),\n  listConnections: (tenantId: string) =>\n    getAuthJSON<IntegrationConnectionOut[]>(\"/api/v1/integrations/connections\", tenantId),\n  startOAuth: (tenantId: string, providerKey: string, resources?: string[]) =>\n    postAuthJSON<IntegrationOAuthStartResponse>(\n      \"/api/v1/integrations/oauth/start\",\n      { provider_key: providerKey, resources, display_name: undefined },\n      tenantId\n    ),\n  completeOAuth: (code: string, state: string, providerKey?: string) =>\n    postJSON<IntegrationConnectionOut>(\n      \"/api/v1/integrations/oauth/callback\",\n      { code, state, provider_key: providerKey }\n    ),\n  disconnect: (tenantId: string, connectionId: number) =>\n    authFetch(`/api/v1/integrations/connections/${connectionId}`, { method: \"DELETE\" }, true, tenantId).then(\n      async (res) => {\n        if (!res.ok) {\n          const text = await res.text().catch(() => \"\");\n          throw new Error(text || `HTTP ${res.status}`);\n        }\n        return res.json();\n      }\n    ),\n  triggerSync: (tenantId: string, connectionId: number, resource: string, direction: \"incoming\" | \"outgoing\") =>\n    postAuthJSON<IntegrationSyncJobOut>(\n      `/api/v1/integrations/connections/${connectionId}/sync`,\n      { resource, direction },\n      tenantId\n    ),\n};\n\nexport const AffiliateAPI = {\n  getLinks: () => getAuthJSON(\"/api/v1/affiliate/register-link\", \"\"),\n  createLink: () => getAuthJSON(\"/api/v1/affiliate/register-link?create_new=true\", \"\"),\n  deactivate: (token: string) =>\n    postAuthJSON(\n      `/api/v1/affiliate/links/${encodeURIComponent(token)}/deactivate`,\n      {},\n      \"\"\n    ),\n  rotate: (token: string) =>\n    postAuthJSON(`/api/v1/affiliate/links/${encodeURIComponent(token)}/rotate`, {}, \"\"),\n  dashboard: () => getAuthJSON(\"/api/v1/affiliate/dashboard\", \"\"),\n  payouts: (status?: string) =>\n    getAuthJSON(\n      `/api/v1/affiliate/payouts${status ? `?status_filter=${encodeURIComponent(status)}` : \"\"\n      }`,\n      \"\"\n    ),\n  requestPayout: (month?: string, percent = 5) =>\n    postAuthJSON(\"/api/v1/affiliate/payouts/request\", { month, percent }, \"\"),\n  requestPayoutWithBankDetails: (data: {\n    month?: string;\n    percent?: number;\n    bank_name: string;\n    bank_account_name: string;\n    bank_account_number: string;\n  }) =>\n    postAuthJSON(\"/api/v1/affiliate/payouts/request\", data, \"\"),\n  updateProfile: (body: any) => postAuthJSON(\"/api/v1/affiliate/profile\", body, \"\"),\n};\n\n// ----------------- AdminAPI -----------------\nexport const AdminAPI = {\n  analyticsOverview: (days = 30) =>\n    getAuthJSON(`/api/v1/admin/analytics/overview?days=${days}`),\n  pharmacySummary: () => getAuthJSON(`/api/v1/admin/pharmacies/summary`),\n  pharmacies: (page = 1, pageSize = 20, q = \"\") =>\n    getAuthJSON(\n      `/api/v1/admin/pharmacies?page=${page}&page_size=${pageSize}&q=${encodeURIComponent(q)}`\n    ),\n  approvePharmacy: (tenantId: string, applicationId: number, body?: any) =>\n    postAuthJSON(`/api/v1/admin/pharmacies/${applicationId}/approve`, body || {}, tenantId),\n  rejectPharmacy: (tenantId: string, applicationId: number) =>\n    postAuthJSON(`/api/v1/admin/pharmacies/${applicationId}/reject`, {}, tenantId),\n  verifyPayment: (tenantId: string, code?: string | null) =>\n    postAuthJSON(`/api/v1/admin/payments/verify`, { code: code || null }, tenantId),\n  rejectPayment: (tenantId: string, code?: string | null) =>\n    postAuthJSON(`/api/v1/admin/payments/reject`, { code: code || null }, tenantId),\n  approveAffiliate: (userId: number) => postAuthJSON(`/api/v1/admin/affiliates/${userId}/approve`, {}),\n  rejectAffiliate: (userId: number) => postAuthJSON(`/api/v1/admin/affiliates/${userId}/reject`, {}),\n  affiliates: (page = 1, pageSize = 20, q = \"\") =>\n    getAuthJSON(\n      `/api/v1/admin/affiliates?page=${page}&page_size=${pageSize}&q=${encodeURIComponent(q)}`\n    ),\n  usage: (days = 14) => getAuthJSON(`/api/v1/admin/usage?days=${days}`),\n  audit: (params: { tenant_id?: string; action?: string; limit?: number }) => {\n    const query = new URLSearchParams();\n    if (params.tenant_id) query.set('tenant_id', params.tenant_id);\n    if (params.action) query.set('action', params.action);\n    if (params.limit) query.set('limit', params.limit.toString());\n    return getAuthJSON(`/api/v1/admin/audit${query.toString() ? `?${query.toString()}` : ''}`);\n  },\n};\n\n// ----------------- StaffAPI -----------------\nexport const StaffAPI = {\n  createCashier: (\n    tenantId: string,\n    body: {\n      email: string;\n      password: string;\n      phone?: string;\n      role?: string;\n      assigned_branch_id?: number | null;\n    }\n  ) => postAuthJSON(\"/api/v1/staff\", body, tenantId),\n  list: (tenantId: string) => getAuthJSON(\"/api/v1/staff\", tenantId),\n  update: (tenantId: string, userId: number, body: { is_active?: boolean }) =>\n    authFetch(\n      `/api/v1/staff/${userId}`,\n      {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(body),\n      },\n      true,\n      tenantId\n    ).then(async (res) => {\n      if (!res.ok) {\n        const text = await res.text().catch(() => \"\");\n        throw new Error(text || `Request failed with ${res.status}`);\n      }\n      return res.json();\n    }),\n  remove: (tenantId: string, userId: number) =>\n    authFetch(\n      `/api/v1/staff/${userId}`,\n      { method: \"DELETE\" },\n      true,\n      tenantId\n    ).then(async (res) => {\n      if (!res.ok) {\n        const text = await res.text().catch(() => \"\");\n        throw new Error(text || `Request failed with ${res.status}`);\n      }\n      return res.json();\n    }),\n};\n\n// ----------------- Pharmacy models -----------------\nexport type PharmacyOut = {\n  id: number;\n  tenant_id: string;\n  name: string;\n  address?: string | null;\n};\n\nexport type PharmaciesListResponse = {\n  page: number;\n  page_size: number;\n  total: number;\n  items: PharmacyOut[];\n};\n\n// ----------------- BillingAPI -----------------\nexport const BillingAPI = {\n  submitPaymentCode: (tenantId: string, code: string) =>\n    postAuthJSON(\"/api/v1/owner/billing/payment-code\", { code }, tenantId),\n};\n\n// ----------------- UploadAPI -----------------\nexport const UploadAPI = {\n  uploadKyc: async (file: File) => {\n    const fd = new FormData();\n    fd.append(\"file\", file);\n    return postMultipart(\"/uploads/kyc\", fd);\n  },\n};\n\n// ----------------- KYCAPI -----------------\nexport const KYCAPI = {\n  status: (tenantId: string) => getAuthJSON(\"/api/v1/owner/kyc/status\", tenantId),\n  update: (tenantId: string, body: any) =>\n    putAuthJSON(\"/api/v1/owner/kyc/status\", body, tenantId),\n};\n\n// ----------------- PharmaciesAPI -----------------\nexport const PharmaciesAPI = {\n  list: (\n    tenantId?: string,\n    params?: { page?: number; page_size?: number; q?: string }\n  ): Promise<PharmaciesListResponse> => {\n    const search = new URLSearchParams();\n    search.set(\"page\", String(params?.page ?? 1));\n    search.set(\"page_size\", String(params?.page_size ?? 20));\n    if (params?.q) search.set(\"q\", params.q);\n    const queryString = search.toString();\n    const path = `/api/v1/pharmacies${queryString ? `?${queryString}` : \"\"}`;\n    return getAuthJSON<PharmaciesListResponse>(path, tenantId);\n  },\n  get: (id: number, tenantId?: string) =>\n    getAuthJSON<PharmacyOut>(`/api/v1/pharmacies/${id}`, tenantId),\n  update: (id: number, body: { name?: string; address?: string }, tenantId?: string) =>\n    authFetch(`/api/v1/pharmacies/${id}`, {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(body),\n    }, true, tenantId).then(async (res) => {\n      if (!res.ok) throw new Error(await res.text());\n      return (await res.json()) as PharmacyOut;\n    }),\n};\n\n// ----------------- BranchAPI -----------------\n\ninterface BranchRecord {\n  id: number;\n  pharmacy_id: number;\n  tenant_id: string;\n  name: string;\n  address?: string | null;\n  phone?: string | null;\n}\n\nexport const BranchAPI = {\n  create: (tenantId: string | undefined, payload: { name: string; address?: string; phone?: string; pharmacy_id: number }) =>\n    postAuthJSON<{ id: number }>(\"/api/v1/branches\", payload, tenantId),\n\n  list: (tenantId: string | undefined, pharmacyId?: number) => {\n    const query = pharmacyId ? `?pharmacy_id=${pharmacyId}` : '';\n    return getAuthJSON<{ items: BranchRecord[] }>(`/api/v1/branches${query}`, tenantId);\n  },\n\n  get: (tenantId: string | undefined, id: number) =>\n    getAuthJSON<BranchRecord>(`/api/v1/branches/${id}`, tenantId),\n\n  update: (tenantId: string | undefined, id: number, payload: { name?: string; address?: string | null; phone?: string | null }) =>\n    putAuthJSON<BranchRecord>(`/api/v1/branches/${id}`, payload, tenantId),\n\n  delete: (tenantId: string | undefined, id: number) =>\n    deleteAuthJSON(`/api/v1/branches/${id}`, tenantId)\n};\n\n// ----------------- ChatAPI -----------------\nexport const ChatAPI = {\n  listThreads: (tenantId: string) => getAuthJSON(`/api/v1/chat/threads`, tenantId),\n  createThread: (tenantId: string, title?: string) =>\n    postAuthJSON(\n      `/api/v1/chat/threads`,\n      title ? { title } : {},\n      tenantId\n    ),\n  listMessages: (tenantId: string, threadId: number) =>\n    getAuthJSON(`/api/v1/chat/threads/${threadId}/messages`, tenantId),\n  sendMessage: (tenantId: string, threadId: number, prompt: string) =>\n    postAuthJSON(`/api/v1/chat/threads/${threadId}/messages`, { prompt }, tenantId),\n  usage: (tenantId: string, days = 30) =>\n    getAuthJSON(`/api/v1/chat/usage?days=${days}`, tenantId),\n};\n\nexport type OwnerAnalyticsResponse = {\n  summary: {\n    total_revenue: number;\n    total_orders: number;\n    unique_customers: number;\n    low_stock_items: number;\n    avg_order_value: number;\n  };\n  revenue_trends: {\n    date: string;\n    revenue: number;\n    orders: number;\n    customers: number;\n  }[];\n  inventory_health: {\n    category: string;\n    current_stock: number;\n    avg_reorder_level: number;\n    low_stock_items: number;\n    total_items: number;\n    status: string;\n  }[];\n  supplier_performance: {\n    name: string;\n    total_orders: number;\n    on_time_rate: number;\n    total_value: number;\n    avg_rating: number;\n  }[];\n  staff_performance: {\n    name: string;\n    role: string;\n    transactions: number;\n    total_sales: number;\n    avg_transaction: number;\n    efficiency: number;\n  }[];\n};\n\nexport type SupplierAnalyticsResponse = {\n  summary: {\n    total_orders: number;\n    fulfilled_orders: number;\n    fulfillment_rate: number;\n    total_revenue: number;\n    avg_order_value: number;\n    avg_rating: number;\n  };\n  order_trends: {\n    date: string;\n    total_orders: number;\n    fulfilled_orders: number;\n    revenue: number;\n  }[];\n  product_performance: {\n    name: string;\n    units_sold: number;\n    revenue: number;\n    avg_price: number;\n    margin: number;\n  }[];\n  customer_insights: {\n    name: string;\n    total_orders: number;\n    total_value: number;\n    satisfaction: number;\n  }[];\n  delivery_metrics: {\n    status: string;\n    count: number;\n    percentage: number;\n  }[];\n};\n\nexport const OwnerAnalyticsAPI = {\n  overview: (\n    tenantId: string,\n    options?: { horizon?: string; trendWeeks?: number; days?: number }\n  ) => {\n    const params = new URLSearchParams();\n    if (options?.horizon) params.set(\"horizon\", options.horizon);\n    if (options?.trendWeeks) params.set(\"trend_weeks\", String(options.trendWeeks));\n    if (options?.days) params.set(\"days\", String(options.days));\n    const query = params.toString();\n    const path = `/api/v1/analytics/owner/overview${query ? `?${query}` : \"\"}`;\n    return getAuthJSON<OwnerAnalyticsResponse>(path, tenantId);\n  },\n};\n\nexport const SupplierAnalyticsAPI = {\n  overview: (days?: number) => {\n    const params = new URLSearchParams();\n    if (days) params.set(\"days\", String(days));\n    const query = params.toString();\n    const path = `/api/v1/analytics/supplier/overview${query ? `?${query}` : \"\"}`;\n    return getAuthJSON(path);\n  },\n};\n\n// ----------------- OwnerChatAPI -----------------\nexport type OwnerChatThread = {\n  id: number;\n  title: string;\n  created_at: string;\n  updated_at: string;\n};\n\nexport type OwnerChatMessage = {\n  id: number;\n  thread_id: number;\n  role: \"owner\" | \"assistant\";\n  content: string;\n  created_at: string;\n};\n\nexport const OwnerChatAPI = {\n  listThreads: (tenantId: string) => getAuthJSON<OwnerChatThread[]>(\"/api/v1/owner/chat/threads\", tenantId),\n  createThread: (tenantId: string, title: string) =>\n    postAuthJSON<OwnerChatThread>(\"/api/v1/owner/chat/threads\", { title }, tenantId),\n  listMessages: (tenantId: string, threadId: number) =>\n    getAuthJSON<OwnerChatMessage[]>(`/api/v1/owner/chat/threads/${threadId}/messages`, tenantId),\n  sendMessage: (tenantId: string, threadId: number, prompt: string) =>\n    postAuthJSON<OwnerChatMessage>(`/api/v1/owner/chat/threads/${threadId}/messages`, { prompt }, tenantId),\n};\n\n// ----------------- InventoryAPI -----------------\nexport type InventoryItem = {\n  id: number;\n  medicine_id: number;\n  medicine_name: string;\n  sku?: string | null;\n  branch?: string | null;\n  quantity: number;\n  pack_size: number;\n  packs: number;\n  singles: number;\n  reorder_level: number;\n  expiry_date?: string | null;\n  lot_number?: string | null;\n  sell_price?: number | null;\n};\n\nexport type InventoryListResponse = {\n  page: number;\n  page_size: number;\n  total: number;\n  items: InventoryItem[];\n};\n\ntype InventoryListOptions = {\n  q?: string;\n  branch?: string;\n  expiringInDays?: number;\n  lowStockOnly?: boolean;\n  page?: number;\n  pageSize?: number;\n};\n\ntype InventoryUpdatePayload = {\n  quantity?: number;\n  reorder_level?: number;\n  expiry_date?: string | null;\n  lot_number?: string | null;\n  sell_price?: number | null;\n};\n\ntype InventoryCreatePayload = {\n  medicine_id: number;\n  branch?: string | null;\n  pack_size: number;\n  packs_count?: number;\n  singles_count?: number;\n  expiry_date?: string | null;\n  lot_number?: string | null;\n  purchase_price?: number | null;\n  sell_price?: number | null;\n  reorder_level?: number;\n};\n\nexport const InventoryAPI = {\n  list: (tenantId?: string, options?: InventoryListOptions) => {\n    const params = new URLSearchParams();\n    if (options?.q) params.set(\"q\", options.q);\n    if (options?.branch) params.set(\"branch\", options.branch);\n    if (typeof options?.expiringInDays === \"number\") {\n      params.set(\"expiring_in_days\", String(options.expiringInDays));\n    }\n    if (options?.lowStockOnly) params.set(\"low_stock_only\", \"true\");\n    if (options?.page) params.set(\"page\", String(options.page));\n    if (options?.pageSize) params.set(\"page_size\", String(options.pageSize));\n    const query = params.toString();\n    const path = `/api/v1/inventory/items${query ? `?${query}` : \"\"}`;\n    return getAuthJSON<InventoryListResponse>(path, tenantId);\n  },\n  create: async (tenantId: string | undefined, payload: InventoryCreatePayload) => {\n    const form = new URLSearchParams();\n    form.set(\"medicine_id\", String(payload.medicine_id));\n    form.set(\"pack_size\", String(Math.max(1, payload.pack_size || 1)));\n    if (payload.branch) {\n      form.set(\"branch\", payload.branch);\n    }\n    if (typeof payload.packs_count === \"number\") {\n      form.set(\"packs_count\", String(Math.max(0, payload.packs_count)));\n    }\n    if (typeof payload.singles_count === \"number\") {\n      form.set(\"singles_count\", String(Math.max(0, payload.singles_count)));\n    }\n    if (payload.expiry_date) {\n      form.set(\"expiry_date\", payload.expiry_date);\n    }\n    if (payload.lot_number) {\n      form.set(\"lot_number\", payload.lot_number);\n    }\n    if (typeof payload.purchase_price === \"number\") {\n      form.set(\"purchase_price\", String(payload.purchase_price));\n    }\n    if (typeof payload.sell_price === \"number\") {\n      form.set(\"sell_price\", String(payload.sell_price));\n    }\n    if (typeof payload.reorder_level === \"number\") {\n      form.set(\"reorder_level\", String(Math.max(0, payload.reorder_level)));\n    }\n    const res = await authFetch(\n      `/api/v1/inventory/items`,\n      {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n        body: form.toString(),\n      },\n      true,\n      tenantId\n    );\n    if (!res.ok) {\n      throw new Error((await res.text().catch(() => \"\")) || `Request failed with ${res.status}`);\n    }\n    return res.json();\n  },\n  update: async (tenantId: string | undefined, itemId: number, payload: InventoryUpdatePayload) => {\n    const form = new URLSearchParams();\n    if (typeof payload.quantity === \"number\") {\n      form.set(\"quantity\", String(payload.quantity));\n    }\n    if (typeof payload.reorder_level === \"number\") {\n      form.set(\"reorder_level\", String(Math.max(0, payload.reorder_level)));\n    }\n    if (typeof payload.sell_price === \"number\") {\n      form.set(\"sell_price\", String(payload.sell_price));\n    }\n    if (payload.expiry_date !== undefined) {\n      form.set(\"expiry_date\", payload.expiry_date || \"\");\n    }\n    if (payload.lot_number !== undefined) {\n      form.set(\"lot_number\", payload.lot_number || \"\");\n    }\n    const res = await authFetch(\n      `/api/v1/inventory/items/${itemId}`,\n      {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n        body: form.toString(),\n      },\n      true,\n      tenantId\n    );\n    if (!res.ok) {\n      throw new Error((await res.text().catch(() => \"\")) || `Request failed with ${res.status}`);\n    }\n    return res.json();\n  },\n  remove: async (tenantId: string | undefined, itemId: number) => {\n    const res = await authFetch(\n      `/api/v1/inventory/items/${itemId}`,\n      { method: \"DELETE\" },\n      true,\n      tenantId\n    );\n    if (!res.ok) {\n      throw new Error((await res.text().catch(() => \"\")) || `Request failed with ${res.status}`);\n    }\n    return res.json();\n  },\n};\n\n// ----------------- MedicinesAPI -----------------\nexport type MedicineListItem = {\n  id: number;\n  name: string;\n  sku?: string | null;\n  category?: string | null;\n  manufacturer?: string | null;\n};\n\nexport type MedicinesListResponse = {\n  page: number;\n  page_size: number;\n  total: number;\n  items: MedicineListItem[];\n};\n\ntype MedicinesListOptions = {\n  q?: string;\n  page?: number;\n  pageSize?: number;\n};\n\nexport const MedicinesAPI = {\n  list: (tenantId?: string, options?: MedicinesListOptions) => {\n    const query = new URLSearchParams();\n    if (options?.q) {\n      query.set(\"q\", options.q);\n    }\n    if (options?.page) {\n      query.set(\"page\", String(options.page));\n    }\n    if (options?.pageSize) {\n      query.set(\"page_size\", String(Math.min(200, Math.max(1, options.pageSize))));\n    }\n    const path = `/api/v1/medicines${query.toString() ? `?${query.toString()}` : \"\"}`;\n    return getAuthJSON<MedicinesListResponse>(path, tenantId);\n  },\n};\n\n// ----------------- SalesAPI -----------------\ntype SaleLineInput = {\n  name_or_sku: string;\n  quantity_units: number;\n  unit_price?: number;\n};\n\nexport const SalesAPI = {\n  pos: (\n    tenantId: string | undefined,\n    payload: { lines: SaleLineInput[]; branch?: string | null }\n  ) => {\n    const { lines, branch } = payload;\n    const query = branch ? `?branch=${encodeURIComponent(branch)}` : \"\";\n    const path = `/api/v1/sales/pos${query}`;\n    return postAuthJSON<{ id: number; total: number }>(path, lines, tenantId);\n  },\n};\n\n// ----------------- SupplierAPI -----------------\nexport type SupplierProfile = {\n  id: number;\n  user_id: number;\n  business_name: string;\n  contact_person?: string | null;\n  phone?: string | null;\n  email?: string | null;\n  address?: string | null;\n  business_license?: string | null;\n  tax_certificate?: string | null;\n  is_verified: boolean;\n  created_at: string;\n};\n\nexport type SupplierProduct = {\n  id: number;\n  supplier_id: number;\n  name: string;\n  description?: string | null;\n  category?: string | null;\n  unit_price: number;\n  minimum_order_quantity: number;\n  stock_quantity: number;\n  is_active: boolean;\n  created_at: string;\n};\n\nexport type Order = {\n  id: number;\n  customer_id: number;\n  supplier_id: number;\n  tenant_id: string;\n  status: string;\n  total_amount: number;\n  payment_method?: string | null;\n  payment_code?: string | null;\n  notes?: string | null;\n  created_at: string;\n  updated_at: string;\n  items: OrderItem[];\n  supplier?: SupplierProfile;\n};\n\nexport type OrderItem = {\n  id: number;\n  order_id: number;\n  product_id: number;\n  quantity: number;\n  unit_price: number;\n  total_price: number;\n  product?: SupplierProduct;\n};\n\nexport type OrderReview = {\n  id: number;\n  order_id: number;\n  customer_id: number;\n  rating: number;\n  comment?: string | null;\n  created_at: string;\n};\n\nexport const SupplierAPI = {\n  // Profile management\n  getProfile: () => getAuthJSON<SupplierProfile>(\"/api/v1/suppliers/profile\"),\n  createProfile: (data: any) => postAuthJSON<SupplierProfile>(\"/api/v1/suppliers/profile\", data),\n  updateProfile: (data: any) => putAuthJSON<SupplierProfile>(\"/api/v1/suppliers/profile\", data),\n  \n  // Product management\n  getProducts: () => getAuthJSON<SupplierProduct[]>(\"/api/v1/suppliers/products\"),\n  createProduct: (data: any) => postAuthJSON<SupplierProduct>(\"/api/v1/suppliers/products\", data),\n  updateProduct: (id: number, data: any) => putAuthJSON<SupplierProduct>(`/api/v1/suppliers/products/${id}`, data),\n  deleteProduct: (id: number) => deleteAuthJSON(`/api/v1/suppliers/products/${id}`),\n  \n  // Order management\n  getOrders: () => getAuthJSON<Order[]>(\"/api/v1/suppliers/orders\"),\n  approveOrder: (id: number) => putAuthJSON(`/api/v1/suppliers/orders/${id}/approve`, {}),\n  rejectOrder: (id: number) => putAuthJSON(`/api/v1/suppliers/orders/${id}/reject`, {}),\n  verifyPayment: (id: number) => putAuthJSON(`/api/v1/suppliers/orders/${id}/verify-payment`, {}),\n  markDelivered: (id: number) => putAuthJSON(`/api/v1/suppliers/orders/${id}/mark-delivered`, {}),\n  \n  // Public endpoints for customers\n  browse: (tenantId: string) => getAuthJSON<SupplierProfile[]>(\"/api/v1/suppliers/browse\", tenantId),\n  getSupplierProducts: (supplierId: number, tenantId: string) => \n    getAuthJSON<SupplierProduct[]>(`/api/v1/suppliers/${supplierId}/products`, tenantId),\n};\n\nexport const OrderAPI = {\n  create: (data: any, tenantId: string) => postAuthJSON<Order>(\"/api/v1/orders\", data, tenantId),\n  list: (tenantId: string) => getAuthJSON<Order[]>(\"/api/v1/orders\", tenantId),\n  get: (id: number, tenantId: string) => getAuthJSON<Order>(`/api/v1/orders/${id}`, tenantId),\n  submitPaymentCode: (id: number, code: string, tenantId: string) => \n    putAuthJSON(`/api/v1/orders/${id}/payment-code`, { code }, tenantId),\n  createReview: (id: number, data: any, tenantId: string) => \n    postAuthJSON<OrderReview>(`/api/v1/orders/${id}/review`, data, tenantId),\n  getReview: (id: number, tenantId: string) => \n    getAuthJSON<OrderReview>(`/api/v1/orders/${id}/review`, tenantId),\n};\n\nexport const SupplierOnboardingAPI = {\n  getStatus: () => getAuthJSON(\"/api/v1/supplier-onboarding/status\"),\n  submitKYC: (data: any) => postAuthJSON(\"/api/v1/supplier-onboarding/kyc/submit\", data),\n  getKYCStatus: () => getAuthJSON(\"/api/v1/supplier-onboarding/kyc/status\"),\n  submitPayment: (data: any) => postAuthJSON(\"/api/v1/supplier-onboarding/payment/submit\", data),\n  getPaymentStatus: () => getAuthJSON(\"/api/v1/supplier-onboarding/payment/status\"),\n};\n\n// Update AdminAPI with supplier management\nexport const SupplierAdminAPI = {\n  getSuppliers: () => getAuthJSON(\"/api/v1/admin/suppliers\"),\n  getPendingKYC: () => getAuthJSON(\"/api/v1/admin/suppliers/kyc/pending\"),\n  approveKYC: (supplierId: number) => postAuthJSON(`/api/v1/admin/suppliers/${supplierId}/kyc/approve`, {}),\n  rejectKYC: (supplierId: number, notes?: string) => \n    postAuthJSON(`/api/v1/admin/suppliers/${supplierId}/kyc/reject`, { notes }),\n  getPendingPayments: () => getAuthJSON(\"/api/v1/admin/suppliers/payments/pending\"),\n  verifyPayment: (code: string) => postAuthJSON(`/api/v1/admin/suppliers/payments/${code}/verify`, {}),\n  rejectPayment: (code: string, notes?: string) => \n    postAuthJSON(`/api/v1/admin/suppliers/payments/${code}/reject`, { notes }),\n};\n\n// Other API objects (AffiliateAPI, AdminAPI, etc.) remain unchanged\n\n// export const API_BASE =\n//   process.env.NEXT_PUBLIC_API_BASE || \"http://localhost:8000/api/v1\";\n// export const TENANT_HEADER =\n//   process.env.NEXT_PUBLIC_TENANT_HEADER || \"X-Tenant-ID\";\n\n// function buildHeaders(\n//   initHeaders?: HeadersInit,\n//   tenantId?: string\n// ): HeadersInit {\n//   const headers: Record<string, string> = {\n//     ...(initHeaders as Record<string, string>),\n//   };\n//   if (tenantId) headers[TENANT_HEADER] = tenantId;\n//   return headers;\n// }\n\n// export async function putAuthJSON<T = any>(\n//   path: string,\n//   bodyData: any,\n//   tenantId?: string\n// ): Promise<T> {\n//   const res = await authFetch(\n//     path,\n//     {\n//       method: \"PUT\",\n//       headers: { \"Content-Type\": \"application/json\" },\n//       body: JSON.stringify(bodyData),\n//     },\n//     true,\n//     tenantId\n//   );\n//   if (!res.ok) {\n//     try {\n//       const data = await res.json();\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\n//       throw new Error(msg || `Request failed with ${res.status}`);\n//     } catch {\n//       const text = await res.text().catch(() => \"\");\n//       throw new Error(text || `Request failed with ${res.status}`);\n//     }\n//   }\n//   return (await res.json()) as T;\n// }\n\n// export async function postForm<T = any>(\n//   path: string,\n//   data: Record<string, string>,\n//   tenantId?: string\n// ): Promise<T> {\n//   const body = new URLSearchParams(data);\n//   const res = await fetch(`${API_BASE}${path}`, {\n//     method: \"POST\",\n//     headers: buildHeaders(\n//       {\n//         \"Content-Type\": \"application/x-www-form-urlencoded\",\n//       },\n//       tenantId\n//     ),\n//     body,\n//   });\n//   if (!res.ok) {\n//     try {\n//       const data = await res.json();\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\n//       throw new Error(msg || `Request failed with ${res.status}`);\n//     } catch {\n//       const text = await res.text().catch(() => \"\");\n//       throw new Error(text || `Request failed with ${res.status}`);\n//     }\n//   }\n//   return (await res.json()) as T;\n// }\n\n// export async function postJSON<T = any>(\n//   path: string,\n//   body: any,\n//   tenantId?: string\n// ): Promise<T> {\n//   const res = await fetch(`${API_BASE}${path}`, {\n//     method: \"POST\",\n//     headers: buildHeaders({ \"Content-Type\": \"application/json\" }, tenantId),\n//     body: JSON.stringify(body),\n//   });\n//   if (!res.ok) {\n//     try {\n//       const data = await res.json();\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\n//       throw new Error(msg || `Request failed with ${res.status}`);\n//     } catch {\n//       const text = await res.text().catch(() => \"\");\n//       throw new Error(text || `Request failed with ${res.status}`);\n//     }\n//   }\n//   return (await res.json()) as T;\n// }\n\n// export async function postMultipart<T = any>(\n//   path: string,\n//   formData: FormData,\n//   tenantId?: string\n// ): Promise<T> {\n//   const res = await fetch(`${API_BASE}${path}`, {\n//     method: \"POST\",\n//     headers: buildHeaders(undefined, tenantId),\n//     body: formData,\n//   });\n//   if (!res.ok) {\n//     try {\n//       const data = await res.json();\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\n//       throw new Error(msg || `Request failed with ${res.status}`);\n//     } catch {\n//       let message = `Request failed with ${res.status}`;\n//       throw new Error(message);\n//     }\n//   }\n//   return (await res.json()) as T;\n// }\n\n// export function getAccessToken(): string | null {\n//   if (typeof window === \"undefined\") return null;\n//   return localStorage.getItem(\"access_token\");\n// }\n\n// function getRefreshToken(): string | null {\n//   if (typeof window === \"undefined\") return null;\n//   return localStorage.getItem(\"refresh_token\");\n// }\n\n// async function refreshTokens(): Promise<boolean> {\n//   const rt = getRefreshToken();\n//   if (!rt) return false;\n//   const url = `${API_BASE}/api/v1/auth/refresh?refresh_token=${encodeURIComponent(\n//     rt\n//   )}`;\n//   const res = await fetch(url, { method: \"POST\" });\n//   if (!res.ok) return false;\n//   try {\n//     const data = (await res.json()) as {\n//       access_token: string;\n//       refresh_token: string;\n//       token_type: string;\n//       expires_in: number;\n//     };\n//     if (typeof window !== \"undefined\") {\n//       localStorage.setItem(\"access_token\", data.access_token);\n//       localStorage.setItem(\"refresh_token\", data.refresh_token);\n//     }\n//     return true;\n//   } catch {\n//     return false;\n//   }\n// }\n\n// async function authFetch(\n//   path: string,\n//   init?: RequestInit,\n//   retry = true,\n//   tenantId?: string\n// ): Promise<Response> {\n//   const token = getAccessToken();\n//   const headers: HeadersInit = buildHeaders(\n//     {\n//       ...(init?.headers || {}),\n//       ...(token ? { Authorization: `Bearer ${token}` } : {}),\n//     },\n//     tenantId\n//   );\n//   const res = await fetch(`${API_BASE}${path}`, { ...(init || {}), headers });\n//   if (res.status === 401 && retry) {\n//     const ok = await refreshTokens();\n//     if (ok) {\n//       const newToken = getAccessToken();\n//       const retryHeaders: HeadersInit = buildHeaders(\n//         {\n//           ...(init?.headers || {}),\n//           ...(newToken ? { Authorization: `Bearer ${newToken}` } : {}),\n//         },\n//         tenantId\n//       );\n//       return fetch(`${API_BASE}${path}`, {\n//         ...(init || {}),\n//         headers: retryHeaders,\n//       });\n//     }\n//   }\n//   return res;\n// }\n\n// export async function getAuthJSON<T = any>(\n//   path: string,\n//   tenantId?: string\n// ): Promise<T> {\n//   const res = await authFetch(path, undefined, true, tenantId);\n//   if (!res.ok) {\n//     try {\n//       const data = await res.json();\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\n//       throw new Error(msg || `Request failed with ${res.status}`);\n//     } catch {\n//       const text = await res.text().catch(() => \"\");\n//       throw new Error(text || `Request failed with ${res.status}`);\n//     }\n//   }\n//   return (await res.json()) as T;\n// }\n\n// export async function postAuthJSON<T = any>(\n//   path: string,\n//   bodyData: any,\n//   tenantId?: string\n// ): Promise<T> {\n//   const res = await authFetch(\n//     path,\n//     {\n//       method: \"POST\",\n//       headers: { \"Content-Type\": \"application/json\" },\n//       body: JSON.stringify(bodyData),\n//     },\n//     true,\n//     tenantId\n//   );\n//   if (!res.ok) {\n//     try {\n//       const data = await res.json();\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\n//       throw new Error(msg || `Request failed with ${res.status}`);\n//     } catch {\n//       const text = await res.text().catch(() => \"\");\n//       throw new Error(text || `Request failed with ${res.status}`);\n//     }\n//   }\n//   return (await res.json()) as T;\n// }\n\n// // Convenience wrappers for key flows\n// export const AuthAPI = {\n//   registerAffiliate: (body: any) => postJSON(\"/auth/register/affiliate\", body),\n//   registerPharmacy: (body: any) => postJSON(\"/auth/register/pharmacy\", body),\n//   registerVerify: (email: string, code: string) =>\n//     postForm(\"/auth/register/verify\", { email, code }),\n//   verifyRegistration: (email: string, code: string) =>\n//     postForm(\"/auth/register/verify\", { email, code }),\n//   login: (email: string, password: string, tenantId?: string) =>\n//     postForm(\"/auth/login\", { username: email, password }, tenantId),\n//   loginRequestCode: (email: string, password: string, tenantId?: string) =>\n//     postForm(\n//       \"/auth/login/request-code\",\n//       { username: email, password },\n//       tenantId\n//     ),\n//   loginVerify: (email: string, code: string, tenantId?: string) =>\n//     postJSON(\"/auth/login/verify\", { email, code }, tenantId),\n//   me: () => getAuthJSON(\"/auth/me\"),\n// };\n\n// export const AffiliateAPI = {\n//   getLinks: () => getAuthJSON(\"/affiliate/register-link\"),\n//   createLink: () => getAuthJSON(\"/affiliate/register-link?create_new=true\"),\n//   deactivate: (token: string) =>\n//     postAuthJSON(\n//       `/affiliate/links/${encodeURIComponent(token)}/deactivate`,\n//       {}\n//     ),\n//   rotate: (token: string) =>\n//     postAuthJSON(`/affiliate/links/${encodeURIComponent(token)}/rotate`, {}),\n//   dashboard: () => getAuthJSON(\"/affiliate/dashboard\"),\n//   payouts: (status?: string) =>\n//     getAuthJSON(\n//       `/affiliate/payouts${\n//         status ? `?status_filter=${encodeURIComponent(status)}` : \"\"\n//       }`\n//     ),\n//   requestPayout: (month?: string, percent = 5) =>\n//     postAuthJSON(\"/affiliate/payouts/request\", { month, percent }),\n//   updateProfile: (body: any) => postAuthJSON(\"/affiliate/profile\", body),\n// };\n\n// export const AdminAPI = {\n//   pharmacies: (page = 1, pageSize = 20, q?: string) =>\n//     getAuthJSON(\n//       `/admin/pharmacies?page=${page}&page_size=${pageSize}${\n//         q ? `&q=${encodeURIComponent(q)}` : \"\"\n//       }`\n//     ),\n//   affiliates: (page = 1, pageSize = 20, q?: string) =>\n//     getAuthJSON(\n//       `/admin/affiliates?page=${page}&page_size=${pageSize}${\n//         q ? `&q=${encodeURIComponent(q)}` : \"\"\n//       }`\n//     ),\n//   approvePharmacy: (\n//     tenantId: string,\n//     applicationId: number,\n//     body?: { issue_temp_password?: boolean; temp_password?: string }\n//   ) =>\n//     postAuthJSON(\n//       `/admin/pharmacies/${applicationId}/approve`,\n//       body || {},\n//       tenantId\n//     ),\n//   rejectPharmacy: (tenantId: string, applicationId: number) =>\n//     postAuthJSON(`/admin/pharmacies/${applicationId}/reject`, {}, tenantId),\n//   verifyPayment: (tenantId: string, code?: string | null) =>\n//     postAuthJSON(`/admin/payments/verify`, { code: code || null }, tenantId),\n//   rejectPayment: (tenantId: string, code?: string | null) =>\n//     postAuthJSON(`/admin/payments/reject`, { code: code || null }, tenantId),\n//   analyticsOverview: (days = 30) =>\n//     getAuthJSON(`/admin/analytics/overview?days=${days}`),\n//   downloadPharmacyLicense: async (applicationId: number) => {\n//     const res = await authFetch(\n//       `/admin/pharmacies/${applicationId}/license`,\n//       { method: \"GET\" },\n//       true\n//     );\n//     if (!res.ok) {\n//       const text = await res.text().catch(() => \"\");\n//       throw new Error(text || `HTTP ${res.status}`);\n//     }\n//     const blob = await res.blob();\n//     let filename = `license-${applicationId}`;\n//     const disposition = res.headers.get(\"Content-Disposition\") || \"\";\n//     const match = disposition.match(\n//       /filename\\*=UTF-8''([^;]+)|filename=\"?([^\";]+)\"?/i\n//     );\n//     const extracted = match?.[1] || match?.[2];\n//     if (extracted) {\n//       try {\n//         filename = decodeURIComponent(extracted);\n//       } catch {\n//         filename = extracted;\n//       }\n//     }\n//     const url = window.URL.createObjectURL(blob);\n//     const link = document.createElement(\"a\");\n//     link.href = url;\n//     link.download = filename;\n//     document.body.appendChild(link);\n//     link.click();\n//     document.body.removeChild(link);\n//     window.URL.revokeObjectURL(url);\n//   },\n//   approveAffiliate: (userId: number) =>\n//     postAuthJSON(`/admin/affiliates/${userId}/approve`, {}),\n//   rejectAffiliate: (userId: number) =>\n//     postAuthJSON(`/admin/affiliates/${userId}/reject`, {}),\n//   listAffiliatePayouts: (status?: string) =>\n//     getAuthJSON(\n//       `/admin/affiliate/payouts${\n//         status ? `?status=${encodeURIComponent(status)}` : \"\"\n//       }`\n//     ),\n//   markPayoutPaid: (payoutId: number) =>\n//     postAuthJSON(`/admin/affiliate/payouts/${payoutId}/mark-paid`, {}),\n//   approvePayout: (payoutId: number) =>\n//     postAuthJSON(`/admin/affiliate/payouts/${payoutId}/approve`, {}),\n//   usage: (days = 30) => getAuthJSON(`/admin/usage?days=${days}`),\n//   audit: (params?: { tenant_id?: string; action?: string; limit?: number }) =>\n//     getAuthJSON(\n//       `/admin/audit${(() => {\n//         const qs = new URLSearchParams();\n//         if (params?.tenant_id) qs.set(\"tenant_id\", params.tenant_id);\n//         if (params?.action) qs.set(\"action\", params.action);\n//         if (params?.limit) qs.set(\"limit\", String(params.limit));\n//         const s = qs.toString();\n//         return s ? `?${s}` : \"\";\n//       })()}`\n//     ),\n// };\n\n// export const StaffAPI = {\n//   createCashier: (tenantId: string, body: any) =>\n//     postAuthJSON(\"/staff\", body, tenantId),\n//   list: (tenantId: string) => getAuthJSON(\"/staff\", tenantId),\n//   update: (tenantId: string, userId: number, body: { is_active?: boolean }) =>\n//     authFetch(\n//       `/staff/${userId}`,\n//       {\n//         method: \"PATCH\",\n//         headers: { \"Content-Type\": \"application/json\" },\n//         body: JSON.stringify(body),\n//       },\n//       true,\n//       tenantId\n//     ).then(async (res) => {\n//       if (!res.ok) {\n//         const t = await res.text();\n//         throw new Error(t || `HTTP ${res.status}`);\n//       }\n//       return res.json();\n//     }),\n//   remove: (tenantId: string, userId: number) =>\n//     authFetch(`/staff/${userId}`, { method: \"DELETE\" }, true, tenantId).then(\n//       async (res) => {\n//         if (!res.ok) {\n//           const t = await res.text();\n//           throw new Error(t || `HTTP ${res.status}`);\n//         }\n//         return res.json();\n//       }\n//     ),\n// };\n\n// export const BillingAPI = {\n//   submitPaymentCode: (tenantId: string, code: string) =>\n//     postAuthJSON(\"/billing/payment-code\", { code }, tenantId),\n// };\n\n// export const UploadAPI = {\n//   uploadKyc: async (\n//     file: File\n//   ): Promise<{ path: string; size: number; filename: string }> => {\n//     const fd = new FormData();\n//     fd.append(\"file\", file);\n//     return await postMultipart(`/uploads/kyc`, fd);\n//   },\n// };\n\n// export const KYCAPI = {\n//   status: (tenantId: string) => getAuthJSON(`/owner/kyc/status`, tenantId),\n//   update: (tenantId: string, body: any) =>\n//     putAuthJSON(`/owner/kyc/status`, body, tenantId),\n// };\n\n// export const PharmaciesAPI = {\n//   list: (page = 1, pageSize = 20, q?: string) =>\n//     getAuthJSON(\n//       `/pharmacies?page=${page}&page_size=${pageSize}${\n//         q ? `&q=${encodeURIComponent(q)}` : \"\"\n//       }`\n//     ),\n//   get: (id: number) => getAuthJSON(`/pharmacies/${id}`),\n//   update: (id: number, body: { name?: string; address?: string }) =>\n//     authFetch(`/pharmacies/${id}`, {\n//       method: \"PATCH\",\n//       headers: { \"Content-Type\": \"application/json\" },\n//       body: JSON.stringify(body),\n//     }).then(async (res) => {\n//       if (!res.ok) {\n//         const t = await res.text();\n//         throw new Error(t || `HTTP ${res.status}`);\n//       }\n//       return res.json();\n//     }),\n// };\n\n// export const ChatAPI = {\n//   listThreads: (tenantId: string) => getAuthJSON(`/chat/threads`, tenantId),\n//   createThread: (tenantId: string, title: string) =>\n//     postAuthJSON(`/chat/threads`, { title }, tenantId),\n//   listMessages: (tenantId: string, threadId: number) =>\n//     getAuthJSON(`/chat/threads/${threadId}/messages`, tenantId),\n//   sendMessage: (tenantId: string, threadId: number, prompt: string) =>\n//     postAuthJSON(`/chat/threads/${threadId}/messages`, { prompt }, tenantId),\n//   usage: (tenantId: string, days = 30) =>\n//     getAuthJSON(`/chat/usage?days=${days}`, tenantId),\n//   sendStream: async (\n//     tenantId: string,\n//     threadId: number,\n//     prompt: string,\n//     onEvent: (evt: { event: string; data?: any }) => void\n//   ): Promise<void> => {\n//     const res = await authFetch(\n//       `/chat/threads/${threadId}/messages/stream`,\n//       {\n//         method: \"POST\",\n//         headers: { \"Content-Type\": \"application/json\" },\n//         body: JSON.stringify({ prompt }),\n//       },\n//       true,\n//       tenantId\n//     );\n//     if (!res.ok || !res.body) {\n//       const t = await res.text().catch(() => \"\");\n//       throw new Error(t || `HTTP ${res.status}`);\n//     }\n//     const reader = res.body.getReader();\n//     const decoder = new TextDecoder();\n//     let buf = \"\";\n//     while (true) {\n//       const { done, value } = await reader.read();\n//       if (done) break;\n//       buf += decoder.decode(value, { stream: true });\n//       let idx;\n//       while ((idx = buf.indexOf(\"\\n\\n\")) !== -1) {\n//         const chunk = buf.slice(0, idx).trim();\n//         buf = buf.slice(idx + 2);\n//         if (chunk.startsWith(\"data:\")) {\n//           try {\n//             const jsonStr = chunk.slice(5).trim();\n//             const obj = JSON.parse(jsonStr);\n//             onEvent(obj);\n//           } catch {}\n//         }\n//       }\n//     }\n//   },\n// };\n"],"names":[],"mappings":"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"}