{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/mesob/gugu-gaga-/front_end/app/%28auth%29/owner-signin/page.tsx"],"sourcesContent":["\r\n\"use client\";\r\nimport React, { useState, FormEvent } from \"react\";\r\nimport Image from \"next/image\";\r\nimport logoImage from \"@/public/mesoblogo.jpeg\";\r\n\r\ntype Errors = {\r\n    identifier?: string;\r\n    password?: string;\r\n    form?: string;\r\n};\r\n\r\nexport default function PharmacySignInPage(): JSX.Element {\r\n    const [identifier, setIdentifier] = useState<string>(\"\");\r\n    const [password, setPassword] = useState<string>(\"\");\r\n    const [showPassword, setShowPassword] = useState<boolean>(false);\r\n    const [remember, setRemember] = useState<boolean>(true);\r\n    const [errors, setErrors] = useState<Errors>({});\r\n    const [loading, setLoading] = useState<boolean>(false);\r\n    const [otpSent, setOtpSent] = useState<boolean>(false);\r\n    const [otp, setOtp] = useState<string>(\"\");\r\n\r\n    function validate(): Errors {\r\n        const e: Errors = {};\r\n        if (!identifier.trim()) e.identifier = \"Email or phone is required\";\r\n        else if (!/^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$/.test(identifier) && !/^\\+?[0-9]{7,15}$/.test(identifier)) {\r\n            e.identifier = \"Enter a valid email or phone number\";\r\n        }\r\n        if (!password) e.password = \"Password is required\";\r\n        else if (password.length < 6) e.password = \"Password must be 6+ characters\";\r\n        return e;\r\n    }\r\n\r\n    async function handleSubmit(ev: FormEvent<HTMLFormElement>) {\r\n        ev.preventDefault();\r\n        const e = validate();\r\n        setErrors(e);\r\n        if (Object.keys(e).length) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            const formData = new URLSearchParams();\r\n            formData.append(\"username\", identifier.trim());\r\n            formData.append(\"password\", password);\r\n            formData.append(\"grant_type\", \"password\");\r\n\r\n            const response = await fetch(\"http://localhost:8000/api/v1/auth/login/request-code\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n                body: formData,\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorData = await response.json().catch(() => ({}));\r\n                throw new Error(errorData.detail || \"Invalid credentials\");\r\n            }\r\n\r\n            setOtpSent(true);\r\n        } catch (err: any) {\r\n            setErrors({ form: err.message || \"Failed to sign in. Check credentials and try again.\" });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    async function handleVerifyOtp(ev: FormEvent<HTMLFormElement>) {\r\n        ev.preventDefault();\r\n        if (!otp || otp.length < 4) {\r\n            setErrors({ form: \"Please enter the verification code.\" });\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        try {\r\n            const response = await fetch(\"http://localhost:8000/api/v1/auth/login/verify\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ email: identifier.trim(), code: otp }),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorData = await response.json().catch(() => ({}));\r\n                throw new Error(errorData.detail || \"Invalid verification code\");\r\n            }\r\n\r\n            const data = await response.json();\r\n            localStorage.setItem(\"token\", data.access_token);\r\n            localStorage.setItem(\"access_token\", data.access_token);\r\n            localStorage.setItem(\"refresh_token\", data.refresh_token);\r\n\r\n            window.location.href = \"/dashboard/kyc\";\r\n        } catch (err: any) {\r\n            setErrors({ form: err.message || \"Invalid verification code\" });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-white text-slate-800 flex items-center justify-center px-6 py-12\">\r\n            <div className=\"w-full max-w-5xl grid grid-cols-1 md:grid-cols-2 gap-8 rounded-2xl shadow-2xl overflow-hidden bg-white border border-slate-200\">\r\n                {/* Left: brand area */}\r\n                <aside className=\"hidden md:flex flex-col justify-center items-start p-10 bg-gradient-to-br from-emerald-100 to-emerald-50\">\r\n                    <div className=\"rounded-lg p-6\">\r\n                        <div className=\"flex items-center gap-3 mb-4\">\r\n                            <Image\r\n                                height={80}\r\n                                width={80}\r\n                                src={logoImage}\r\n                                alt=\"Mesob Logo\"\r\n                                className=\"rounded\"\r\n                            />\r\n                            <div>\r\n                                <h2 className=\"text-2xl font-semibold text-emerald-700\">Mesob</h2>\r\n                                <p className=\"text-sm text-slate-500\">Manage — Grow — Succeed</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <p className=\"text-slate-600 leading-relaxed\">Access your business dashboard, manage operations, and track performance. Sign in to continue to your business management platform.</p>\r\n\r\n                        <ul className=\"mt-6 space-y-2 text-sm text-slate-600\">\r\n                            <li>• Business operations management</li>\r\n                            <li>• Inventory & stock control</li>\r\n                            <li>• Staff & team management</li>\r\n                        </ul>\r\n                    </div>\r\n                </aside>\r\n\r\n                {/* Right: sign-in form */}\r\n                <main className=\"p-8 md:p-12 flex flex-col justify-center bg-white\">\r\n                    <div className=\"mb-6\">\r\n                        <h1 className=\"text-2xl font-bold text-slate-900\">Business Owner Sign In</h1>\r\n                        <p className=\"text-sm text-slate-500 mt-1\">Welcome back — enter your credentials to continue.</p>\r\n                    </div>\r\n\r\n                    <form onSubmit={otpSent ? handleVerifyOtp : handleSubmit} className=\"space-y-5\">\r\n                        {errors.form && (\r\n                            <div className=\"text-sm text-red-600 bg-red-100 border border-red-300 p-3 rounded\">{errors.form}</div>\r\n                        )}\r\n\r\n                        {!otpSent ? (\r\n                            <>\r\n                                <div>\r\n                                    <label htmlFor=\"identifier\" className=\"block text-sm font-medium text-slate-700 mb-2\">Email or phone</label>\r\n                                    <input\r\n                                        id=\"identifier\"\r\n                                        name=\"identifier\"\r\n                                        value={identifier}\r\n                                        onChange={(e) => setIdentifier(e.target.value)}\r\n                                        className={`w-full bg-white border ${errors.identifier ? 'border-red-500' : 'border-slate-300'} rounded-lg px-4 py-3 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-400`}\r\n                                        placeholder=\"you@business.com or +251900000000\"\r\n                                        aria-invalid={!!errors.identifier}\r\n                                        aria-describedby={errors.identifier ? 'identifier-error' : undefined}\r\n                                        autoComplete=\"username\"\r\n                                        inputMode=\"email\"\r\n                                    />\r\n                                    {errors.identifier && <p id=\"identifier-error\" className=\"mt-2 text-sm text-red-600\">{errors.identifier}</p>}\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label htmlFor=\"password\" className=\"block text-sm font-medium text-slate-700 mb-2\">Password</label>\r\n                                    <div className=\"relative\">\r\n                                        <input\r\n                                            id=\"password\"\r\n                                            name=\"password\"\r\n                                            type={showPassword ? 'text' : 'password'}\r\n                                            value={password}\r\n                                            onChange={(e) => setPassword(e.target.value)}\r\n                                            className={`w-full bg-white border ${errors.password ? 'border-red-500' : 'border-slate-300'} rounded-lg px-4 py-3 pr-12 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-400`}\r\n                                            placeholder=\"••••••••\"\r\n                                            aria-invalid={!!errors.password}\r\n                                            aria-describedby={errors.password ? 'password-error' : undefined}\r\n                                            autoComplete=\"current-password\"\r\n                                        />\r\n\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            onClick={() => setShowPassword((s) => !s)}\r\n                                            className=\"absolute right-2 top-1/2 -translate-y-1/2 text-sm text-emerald-600 bg-emerald-100 px-3 py-1 rounded-md\"\r\n                                            aria-label={showPassword ? 'Hide password' : 'Show password'}\r\n                                        >\r\n                                            {showPassword ? 'Hide' : 'Show'}\r\n                                        </button>\r\n                                    </div>\r\n                                    {errors.password && <p id=\"password-error\" className=\"mt-2 text-sm text-red-600\">{errors.password}</p>}\r\n                                </div>\r\n                            </>\r\n                        ) : (\r\n                            <div>\r\n                                <label htmlFor=\"otp\" className=\"block text-sm font-medium text-slate-700 mb-2\">Verification Code</label>\r\n                                <input\r\n                                    id=\"otp\"\r\n                                    name=\"otp\"\r\n                                    type=\"text\"\r\n                                    value={otp}\r\n                                    onChange={(e) => setOtp(e.target.value)}\r\n                                    className=\"w-full bg-white border border-slate-300 rounded-lg px-4 py-3 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-400\"\r\n                                    placeholder=\"Enter 6-digit code\"\r\n                                    maxLength={6}\r\n                                />\r\n                                <p className=\"mt-2 text-sm text-slate-600\">Check your email for the verification code</p>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <label className=\"inline-flex items-center gap-2 text-sm\">\r\n                                <input type=\"checkbox\" checked={remember} onChange={(e) => setRemember(e.target.checked)} className=\"h-4 w-4 rounded border-slate-300 text-emerald-500 focus:ring-emerald-400\" />\r\n                                <span className=\"text-slate-600\">Remember me</span>\r\n                            </label>\r\n\r\n                            <a href=\"/forgot-password\" className=\"text-sm text-emerald-600 hover:underline\">Forgot password?</a>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={loading}\r\n                                className=\"w-full inline-flex justify-center items-center gap-2 rounded-xl px-4 py-3 font-medium bg-emerald-500 text-white hover:bg-emerald-600 disabled:opacity-60\"\r\n                            >\r\n                                {loading ? (otpSent ? 'Verifying...' : 'Sending code...') : (otpSent ? 'Verify Code' : 'Sign in')}\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"text-center text-sm text-slate-500\">\r\n                            Don't have an account? <a href=\"/register/owner\" className=\"text-emerald-600 hover:underline\">Create one</a>\r\n                        </div>\r\n                    </form>\r\n\r\n                    <div className=\"mt-6 text-xs text-slate-400\">\r\n                        <p>By signing in you agree to our <a href=\"/terms\" className=\"text-emerald-600 hover:underline\">Terms</a> and <a href=\"/privacy\" className=\"text-emerald-600 hover:underline\">Privacy Policy</a>.</p>\r\n                    </div>\r\n                </main>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}