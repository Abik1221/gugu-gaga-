{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/habtamusemagn/gugugaga/gugu-gaga-/front_end/components/ui/input.tsx"],"sourcesContent":["\"use client\";\nimport * as React from \"react\";\n\nexport interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nexport const Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className = \"\", ...props }, ref) => {\n    return (\n      <input\n        ref={ref}\n        className={\n          \"w-full border rounded px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-emerald-200 focus:border-emerald-400 \" +\n          className\n        }\n        {...props}\n      />\n    );\n  }\n);\nInput.displayName = \"Input\";\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAKO,MAAM,sBAAQ,mNAAgB,CACnC,CAAC,EAAE,YAAY,EAAE,EAAE,GAAG,OAAO,EAAE;IAC7B,qBACE,8OAAC;QACC,KAAK;QACL,WACE,uHACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///home/habtamusemagn/gugugaga/gugu-gaga-/front_end/app/%28dashboard%29/dashboard/affiliate/affiliates/page.tsx"],"sourcesContent":["\"use client\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { API_BASE, getAccessToken, getAuthJSON } from \"@/utils/api\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\n\ntype Me = { id: string; tenant_id?: string };\n\ntype AffiliateRow = {\n  id: string;\n  full_name: string;\n  email: string;\n  referral_code: string;\n  verified: boolean;\n};\n\nexport default function AffiliatesListPage() {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [me, setMe] = useState<Me | null>(null);\n  const [rows, setRows] = useState<AffiliateRow[]>([]);\n\n  const [q, setQ] = useState(\"\");\n  const [verified, setVerified] = useState<\"all\" | \"verified\" | \"unverified\">(\"all\");\n  const [page, setPage] = useState(1);\n  const [pageSize, setPageSize] = useState(10);\n\n  useEffect(() => {\n    let active = true;\n    async function load() {\n      try {\n        const m = await getAuthJSON<Me>(\"/api/v1/auth/me\");\n        if (!active) return;\n        setMe(m);\n        const token = getAccessToken();\n        const res = await fetch(`${API_BASE}/api/v1/admin/affiliates`, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            ...(token ? { Authorization: `Bearer ${token}` } : {}),\n            ...(m?.tenant_id ? { \"X-Tenant-ID\": m.tenant_id } : {}),\n          },\n        });\n        if (!res.ok) throw new Error(await res.text().catch(() => \"Failed to load\"));\n        const data = (await res.json()) as AffiliateRow[];\n        if (!active) return;\n        setRows(data);\n      } catch (e: any) {\n        if (!active) return;\n        setError(e.message || \"Failed to load affiliates\");\n      } finally {\n        if (active) setLoading(false);\n      }\n    }\n    load();\n    return () => { active = false };\n  }, []);\n\n  const filtered = useMemo(() => {\n    const query = q.trim().toLowerCase();\n    let list = rows;\n    if (verified !== \"all\") {\n      list = list.filter(r => (verified === \"verified\" ? r.verified : !r.verified));\n    }\n    if (query) {\n      list = list.filter(r =>\n        r.full_name.toLowerCase().includes(query) ||\n        r.email.toLowerCase().includes(query) ||\n        r.referral_code.toLowerCase().includes(query)\n      );\n    }\n    return list;\n  }, [rows, q, verified]);\n\n  const totalPages = Math.max(1, Math.ceil(filtered.length / pageSize));\n  const pageSafe = Math.min(page, totalPages);\n  const paged = filtered.slice((pageSafe - 1) * pageSize, pageSafe * pageSize);\n\n  useEffect(() => { setPage(1); }, [q, verified, pageSize]);\n\n  if (loading) {\n    return (\n      <div className=\"space-y-4\">\n        <Skeleton className=\"h-8 w-64\" />\n        <Skeleton className=\"h-10 w-full\" />\n        <div className=\"space-y-2\">{Array.from({ length: 8 }).map((_, i) => (<Skeleton key={i} className=\"h-14\" />))}</div>\n      </div>\n    );\n  }\n  if (error) return <div className=\"text-sm text-red-600\">{error}</div>;\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-xl font-semibold\">Affiliates</h1>\n        <div className=\"flex items-center gap-2\">\n          <Input placeholder=\"Search name, email, code\" value={q} onChange={(e)=>setQ(e.target.value)} className=\"w-64\" />\n          <select value={verified} onChange={e=>setVerified(e.target.value as any)} className=\"border rounded px-2 py-2 text-sm\">\n            <option value=\"all\">All</option>\n            <option value=\"verified\">Verified</option>\n            <option value=\"unverified\">Unverified</option>\n          </select>\n          <select value={pageSize} onChange={e=>setPageSize(Number(e.target.value))} className=\"border rounded px-2 py-2 text-sm\">\n            <option value={10}>10</option>\n            <option value={25}>25</option>\n            <option value={50}>50</option>\n          </select>\n        </div>\n      </div>\n\n      <div className=\"border rounded bg-white divide-y\">\n        <div className=\"grid grid-cols-12 p-3 text-xs text-gray-600\">\n          <div className=\"col-span-4\">Name</div>\n          <div className=\"col-span-4\">Email</div>\n          <div className=\"col-span-3\">Referral Code</div>\n          <div className=\"col-span-1 text-right\">Status</div>\n        </div>\n        {paged.map((r)=> (\n          <div key={r.id} className=\"grid grid-cols-12 p-3 items-center\">\n            <div className=\"col-span-4 truncate\">{r.full_name}</div>\n            <div className=\"col-span-4 truncate text-gray-700\">{r.email}</div>\n            <div className=\"col-span-3 font-mono text-sm\">{r.referral_code}</div>\n            <div className=\"col-span-1 text-right\">\n              <span className={`text-xs px-2 py-1 rounded ${r.verified ? \"bg-emerald-50 text-emerald-700\" : \"bg-gray-50 text-gray-600\"}`}>{r.verified ? \"Verified\" : \"Waiting\"}</span>\n            </div>\n          </div>\n        ))}\n        {paged.length === 0 && <div className=\"p-6 text-gray-500\">No results.</div>}\n      </div>\n\n      <div className=\"flex items-center justify-between text-sm\">\n        <div>Page {pageSafe} of {totalPages} â€¢ {filtered.length} result(s)</div>\n        <div className=\"flex gap-2\">\n          <Button variant=\"outline\" onClick={()=>setPage(p=>Math.max(1, p-1))} disabled={pageSafe<=1}>Previous</Button>\n          <Button variant=\"outline\" onClick={()=>setPage(p=>Math.min(totalPages, p+1))} disabled={pageSafe>=totalPages}>Next</Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}