{"version":3,"sources":["turbopack:///[project]/app/(dashboard)/dashboard/owner/staff/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\n\nimport { AuthAPI, StaffAPI, BranchAPI } from \"@/utils/api\";\nimport { useToast } from \"@/components/ui/toast\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Card,\n  CardContent,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetFooter,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\";\n\ntype StaffMember = {\n  id: number;\n  email: string;\n  phone?: string | null;\n  role: string;\n  is_active?: boolean;\n  created_at?: string;\n  assigned_branch_id?: number | null;\n  assigned_branch_name?: string | null;\n};\n\nexport default function StaffListPage() {\n  const { show } = useToast();\n\n  const [tenantId, setTenantId] = useState<string | null>(null);\n  const [profile, setProfile] = useState<any>(null);\n\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [staff, setStaff] = useState<StaffMember[]>([]);\n\n  const [search, setSearch] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState<\n    \"all\" | \"active\" | \"inactive\"\n  >(\"all\");\n\n  const [mutatingId, setMutatingId] = useState<number | null>(null);\n  const [inviteOpen, setInviteOpen] = useState(false);\n\n  const loadStaff = useCallback(\n    async (tid: string, options?: { silent?: boolean }) => {\n      if (options?.silent) {\n        setRefreshing(true);\n      } else {\n        setLoading(true);\n      }\n      setError(null);\n      try {\n        const rows = await StaffAPI.list(tid);\n        setStaff(Array.isArray(rows) ? rows : []);\n      } catch (err: any) {\n        const message = err?.message || \"Unable to load staff\";\n        setError(message);\n        show({\n          variant: \"destructive\",\n          title: \"Failed to load staff\",\n          description: message,\n        });\n      } finally {\n        setLoading(false);\n        setRefreshing(false);\n      }\n    },\n    [show]\n  );\n\n  useEffect(() => {\n    let active = true;\n    async function bootstrap() {\n      setLoading(true);\n      try {\n        const me = await AuthAPI.me();\n        if (!active) return;\n        setProfile(me);\n        const tid = me?.tenant_id || null;\n        setTenantId(tid);\n        if (tid) {\n          await loadStaff(tid);\n        } else {\n          setError(\n            \"No tenant attached to this account. Please contact support.\"\n          );\n        }\n      } catch (err: any) {\n        if (!active) return;\n        setError(err?.message || \"Unable to load user profile\");\n      } finally {\n        if (active) setLoading(false);\n      }\n    }\n    bootstrap();\n    return () => {\n      active = false;\n    };\n  }, [loadStaff]);\n\n  const filteredStaff = useMemo(() => {\n    const query = search.trim().toLowerCase();\n    return staff\n      .filter((member) => {\n        if (statusFilter === \"active\" && member.is_active === false)\n          return false;\n        if (statusFilter === \"inactive\" && member.is_active !== false)\n          return false;\n        if (!query) return true;\n        return (\n          member.email?.toLowerCase().includes(query) ||\n          member.phone?.toLowerCase().includes(query) ||\n          member.role?.toLowerCase().includes(query) ||\n          member.assigned_branch_name?.toLowerCase().includes(query)\n        );\n      })\n      .sort((a, b) => a.email.localeCompare(b.email));\n  }, [staff, search, statusFilter]);\n\n  const stats = useMemo(() => {\n    const activeCount = staff.filter((m) => m.is_active !== false).length;\n    const inactiveCount = staff.length - activeCount;\n    return {\n      total: staff.length,\n      active: activeCount,\n      inactive: inactiveCount,\n    };\n  }, [staff]);\n\n  const handleToggleActive = async (\n    member: StaffMember,\n    nextActive: boolean\n  ) => {\n    if (!tenantId) return;\n    setMutatingId(member.id);\n    try {\n      await StaffAPI.update(tenantId, member.id, { is_active: nextActive });\n      show({\n        variant: \"success\",\n        title: nextActive ? \"Staff activated\" : \"Staff suspended\",\n        description: member.email,\n      });\n      await loadStaff(tenantId, { silent: true });\n    } catch (err: any) {\n      show({\n        variant: \"destructive\",\n        title: \"Update failed\",\n        description: err?.message || \"Please try again.\",\n      });\n    } finally {\n      setMutatingId(null);\n    }\n  };\n\n  const handleRemove = async (member: StaffMember) => {\n    if (!tenantId) return;\n    const confirmed = window.confirm(\n      `Remove ${member.email}? This cannot be undone.`\n    );\n    if (!confirmed) return;\n    setMutatingId(member.id);\n    try {\n      await StaffAPI.remove(tenantId, member.id);\n      show({\n        variant: \"success\",\n        title: \"Staff removed\",\n        description: member.email,\n      });\n      await loadStaff(tenantId, { silent: true });\n    } catch (err: any) {\n      show({\n        variant: \"destructive\",\n        title: \"Removal failed\",\n        description: err?.message || \"Please try again.\",\n      });\n    } finally {\n      setMutatingId(null);\n    }\n  };\n\n  const isBusy = loading && !refreshing;\n\n  return (\n    <div className=\"space-y-8\">\n      <header className=\"rounded-2xl border border-slate-200 bg-white px-6 py-6 shadow-md lg:flex lg:items-center lg:justify-between\">\n        <div className=\"space-y-2\">\n          <h1 className=\"text-3xl font-semibold text-slate-900\">Team management</h1>\n          <p className=\"text-sm text-slate-600\">\n            Invite cashiers or managers, grant the right permissions, and keep\n            your operations compliant at all times.\n          </p>\n        </div>\n        <div className=\"mt-6 flex flex-wrap items-center gap-3 lg:mt-0\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => tenantId && loadStaff(tenantId, { silent: true })}\n            disabled={!tenantId || refreshing}\n          >\n            {refreshing ? \"Refreshing...\" : \"Refresh\"}\n          </Button>\n          <Button\n            size=\"sm\"\n            onClick={() => setInviteOpen(true)}\n            disabled={!tenantId}\n            className=\"bg-emerald-700 hover:bg-emerald-800 text-white\"\n          >\n            Invite staff\n          </Button>\n        </div>\n      </header>\n\n      <section className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n        <Card className=\"border border-slate-200 bg-white shadow-md\">\n          <CardHeader className=\"space-y-1\">\n            <CardTitle className=\"text-xs uppercase tracking-wider text-slate-600\">\n              Total team members\n            </CardTitle>\n            {isBusy ? (\n              <Skeleton className=\"h-7 w-12\" />\n            ) : (\n              <div className=\"text-3xl font-semibold text-slate-900\">\n                {stats.total}\n              </div>\n            )}\n          </CardHeader>\n        </Card>\n        <Card className=\"border border-slate-200 bg-white shadow-md\">\n          <CardHeader className=\"space-y-1\">\n            <CardTitle className=\"text-xs uppercase tracking-wider text-slate-600\">\n              Active\n            </CardTitle>\n            {isBusy ? (\n              <Skeleton className=\"h-7 w-12\" />\n            ) : (\n              <div className=\"text-3xl font-semibold text-emerald-700\">\n                {stats.active}\n              </div>\n            )}\n          </CardHeader>\n        </Card>\n        <Card className=\"border border-amber-200 bg-amber-50 shadow-md\">\n          <CardHeader className=\"space-y-1\">\n            <CardTitle className=\"text-xs uppercase tracking-wider text-amber-700\">\n              Suspended\n            </CardTitle>\n            {isBusy ? (\n              <Skeleton className=\"h-7 w-10\" />\n            ) : (\n              <div className=\"text-3xl font-semibold text-amber-700\">\n                {stats.inactive}\n              </div>\n            )}\n          </CardHeader>\n        </Card>\n      </section>\n\n      <section>\n        <Card className=\"border border-slate-200 bg-white shadow-md\">\n          <CardHeader className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n            <div>\n              <CardTitle className=\"text-slate-900\">Directory</CardTitle>\n              <p className=\"text-xs uppercase tracking-wider text-slate-600\">\n                Search, filter, and manage access in seconds\n              </p>\n            </div>\n            <div className=\"flex flex-wrap items-center gap-2\">\n              <Input\n                placeholder=\"Search email, phone, role\"\n                value={search}\n                onChange={(event) => setSearch(event.target.value)}\n                className=\"w-60 border border-slate-300 bg-white text-sm text-slate-900 placeholder:text-slate-500 focus-visible:border-emerald-500 focus-visible:ring-emerald-200\"\n              />\n              <select\n                value={statusFilter}\n                onChange={(event) =>\n                  setStatusFilter(event.target.value as typeof statusFilter)\n                }\n                className=\"border border-slate-300 bg-white px-4 py-2 text-sm text-slate-900 focus:outline-none focus:ring-2 focus:ring-emerald-200 focus:border-emerald-500\"\n              >\n                <option value=\"all\">\n                  All statuses\n                </option>\n                <option value=\"active\">\n                  Active only\n                </option>\n                <option value=\"inactive\">\n                  Suspended only\n                </option>\n              </select>\n            </div>\n          </CardHeader>\n          <CardContent className=\"overflow-hidden border border-slate-200 bg-slate-50 p-0\">\n            {isBusy ? (\n              <Skeleton className=\"h-64 w-full\" />\n            ) : error ? (\n              <div className=\"p-6 text-sm text-red-600\">{error}</div>\n            ) : filteredStaff.length === 0 ? (\n              <div className=\"p-6 text-sm text-slate-600\">\n                No staff match your filters. Invite a teammate to get started.\n              </div>\n            ) : (\n              <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full divide-y divide-slate-200 text-sm text-slate-800\">\n                  <thead className=\"bg-slate-100\">\n                    <tr>\n                      <th className=\"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wider text-slate-900\">\n                        Email\n                      </th>\n                      <th className=\"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wider text-slate-900\">\n                        Phone\n                      </th>\n                      <th className=\"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wider text-slate-900\">\n                        Role\n                      </th>\n                      <th className=\"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wider text-slate-900\">\n                        Branch\n                      </th>\n                      <th className=\"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wider text-slate-900\">\n                        Status\n                      </th>\n                      <th className=\"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wider text-slate-900\">\n                        Actions\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-slate-100 bg-white\">\n                    {filteredStaff.map((member) => {\n                      const active = member.is_active !== false;\n                      return (\n                        <tr key={member.id}>\n                          <td className=\"px-3 py-3 font-semibold text-slate-900\">\n                            {member.email}\n                          </td>\n                          <td className=\"px-3 py-3 text-slate-600\">\n                            {member.phone || \"—\"}\n                          </td>\n                          <td className=\"px-3 py-3 text-slate-600\">\n                            {member.role}\n                          </td>\n                          <td className=\"px-3 py-3 text-slate-600\">\n                            {member.assigned_branch_name ||\n                              (member.assigned_branch_id\n                                ? `#${member.assigned_branch_id}`\n                                : \"—\")}\n                          </td>\n                          <td className=\"px-3 py-3\">\n                            <Badge\n                              variant={active ? \"default\" : \"secondary\"}\n                              className={\n                                active\n                                  ? \"border border-emerald-300 bg-emerald-100 text-emerald-800\"\n                                  : \"border border-amber-300 bg-amber-100 text-amber-800\"\n                              }\n                            >\n                              {active ? \"Active\" : \"Suspended\"}\n                            </Badge>\n                          </td>\n                          <td className=\"px-3 py-3\">\n                            <div className=\"flex flex-wrap items-center gap-2\">\n                              <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() =>\n                                  handleToggleActive(member, !active)\n                                }\n                                disabled={mutatingId === member.id}\n                                className=\"text-xs font-semibold\"\n                              >\n                                {active ? \"Suspend\" : \"Activate\"}\n                              </Button>\n                              <Button\n                                variant=\"destructive\"\n                                size=\"sm\"\n                                onClick={() => handleRemove(member)}\n                                disabled={mutatingId === member.id}\n                                className=\"text-xs font-semibold\"\n                              >\n                                Remove\n                              </Button>\n                            </div>\n                          </td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </CardContent>\n          <CardFooter className=\"flex flex-col gap-2 border-t border-slate-200 bg-slate-50 p-4 text-xs text-slate-600 md:flex-row md:items-center md:justify-between\">\n            <div>\n              Showing {filteredStaff.length} of {staff.length} team members\n            </div>\n\n          </CardFooter>\n        </Card>\n      </section>\n\n      <InviteStaffSheet\n        open={inviteOpen}\n        onOpenChange={setInviteOpen}\n        tenantId={tenantId ?? undefined}\n        onInvited={async () =>\n          tenantId && loadStaff(tenantId, { silent: true })\n        }\n      />\n    </div>\n  );\n}\n\ntype InviteStaffSheetProps = {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  tenantId?: string;\n  onInvited: () => void;\n};\n\nfunction InviteStaffSheet({\n  open,\n  onOpenChange,\n  tenantId,\n  onInvited,\n}: InviteStaffSheetProps) {\n  const { show } = useToast();\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [role] = useState<\"staff\">(\"staff\");\n  const [branches, setBranches] = useState<{ id: number; name: string }[]>([]);\n  const [branchId, setBranchId] = useState<string>(\"\");\n  const [submitting, setSubmitting] = useState(false);\n\n  const resetForm = () => {\n    setEmail(\"\");\n    setPassword(\"\");\n    setPhone(\"\");\n    setBranchId(\"\");\n  };\n\n  useEffect(() => {\n    if (!open || !tenantId) return;\n    let active = true;\n    BranchAPI.list(tenantId, { page_size: 100 })\n      .then((res: any) => {\n        if (!active) return;\n        const items = Array.isArray(res?.items)\n          ? res.items.map((it: any) => ({\n              id: Number(it.id),\n              name: String(it.name),\n            }))\n          : Array.isArray(res)\n          ? res.map((it: any) => ({ id: Number(it.id), name: String(it.name) }))\n          : [];\n        setBranches(items);\n      })\n      .catch(() => {\n        if (!active) return;\n        setBranches([]);\n      });\n    return () => {\n      active = false;\n    };\n  }, [open, tenantId]);\n\n  const handleSubmit: React.FormEventHandler<HTMLFormElement> = async (\n    event\n  ) => {\n    event.preventDefault();\n    if (!tenantId) {\n      show({\n        variant: \"destructive\",\n        title: \"No tenant context\",\n        description: \"Reload and try again.\",\n      });\n      return;\n    }\n    if (!email || !password) {\n      show({\n        variant: \"destructive\",\n        title: \"Missing fields\",\n        description: \"Email and password are required.\",\n      });\n      return;\n    }\n    setSubmitting(true);\n    try {\n      await StaffAPI.createCashier(tenantId, {\n        email,\n        password,\n        phone: phone || undefined,\n        role,\n        assigned_branch_id: branchId ? Number(branchId) : undefined,\n      });\n      show({\n        variant: \"success\",\n        title: \"Invitation sent\",\n        description: email,\n      });\n      resetForm();\n      onOpenChange(false);\n      onInvited();\n    } catch (err: any) {\n      show({\n        variant: \"destructive\",\n        title: \"Failed to invite\",\n        description: err?.message || \"Please try again.\",\n      });\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <Sheet\n      open={open}\n      onOpenChange={(next) => {\n        if (!next) resetForm();\n        onOpenChange(next);\n      }}\n    >\n      <SheetContent\n        side=\"right\"\n        className=\"max-w-md space-y-5 overflow-y-auto border border-white/10 bg-gradient-to-br from-slate-950/95 via-slate-900/90 to-slate-950/95 p-6 text-emerald-50 backdrop-blur-2xl shadow-[0_36px_140px_-70px_rgba(16,185,129,0.6)]\"\n      >\n        <SheetHeader className=\"space-y-2 text-left\">\n          <SheetTitle className=\"text-2xl font-semibold text-white\">\n            Invite staff member\n          </SheetTitle>\n          <SheetDescription className=\"text-sm text-emerald-100/70\">\n            Create credentials for a cashier or manager. They will update their\n            profile on first login.\n          </SheetDescription>\n        </SheetHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-5\">\n          <div className=\"space-y-1\">\n            <label className=\"text-xs uppercase tracking-[0.25em] text-emerald-100/70\">\n              Tenant ID\n            </label>\n            <Input\n              value={tenantId ?? \"\"}\n              readOnly\n              disabled\n              className=\"rounded-2xl border border-white/10 bg-white/10 text-sm text-emerald-100\"\n            />\n          </div>\n          <div className=\"space-y-1\">\n            <label className=\"text-xs uppercase tracking-[0.25em] text-emerald-100/70\">\n              Email\n            </label>\n            <Input\n              type=\"email\"\n              value={email}\n              onChange={(event) => setEmail(event.target.value)}\n              required\n              placeholder=\"cashier@branch.com\"\n              className=\"rounded-2xl border border-white/10 bg-white/10 text-sm text-white placeholder:text-emerald-100/50 focus-visible:border-emerald-300 focus-visible:ring-emerald-300\"\n            />\n          </div>\n          <div className=\"space-y-1\">\n            <label className=\"text-xs uppercase tracking-[0.25em] text-emerald-100/70\">\n              Temporary password\n            </label>\n            <Input\n              type=\"password\"\n              value={password}\n              onChange={(event) => setPassword(event.target.value)}\n              required\n              placeholder=\"Min 6 characters with a capital letter\"\n              className=\"rounded-2xl border border-white/10 bg-white/10 text-sm text-white placeholder:text-emerald-100/50 focus-visible:border-emerald-300 focus-visible:ring-emerald-300\"\n            />\n            <p className=\"text-xs text-emerald-100/60\">\n              Share securely and remind them to reset on first sign-in.\n            </p>\n          </div>\n          <div className=\"space-y-1\">\n            <label className=\"text-xs uppercase tracking-[0.25em] text-emerald-100/70\">\n              Phone (optional)\n            </label>\n            <Input\n              value={phone}\n              onChange={(event) => setPhone(event.target.value)}\n              placeholder=\"e.g. +2519...\"\n              className=\"rounded-2xl border border-white/10 bg-white/10 text-sm text-white placeholder:text-emerald-100/50 focus-visible:border-emerald-300 focus-visible:ring-emerald-300\"\n            />\n          </div>\n          <div className=\"space-y-1\">\n            <label className=\"text-xs uppercase tracking-[0.25em] text-emerald-100/70\">\n              Role\n            </label>\n            <div className=\"w-full rounded-2xl border border-white/10 bg-white/10 px-4 py-2 text-sm text-emerald-100/80 shadow-[0_18px_55px_-35px_rgba(16,185,129,0.5)]\">\n              Staff\n            </div>\n          </div>\n          <div className=\"space-y-1\">\n            <label className=\"text-xs uppercase tracking-[0.25em] text-emerald-100/70\">\n              Assign to branch\n            </label>\n            <select\n              value={branchId}\n              onChange={(event) => setBranchId(event.target.value)}\n              className=\"w-full rounded-2xl border border-white/10 bg-white/10 px-4 py-2 text-sm text-emerald-100/80 shadow-[0_18px_55px_-35px_rgba(16,185,129,0.5)] focus:outline-none focus:ring focus:ring-emerald-300/40\"\n            >\n              <option className=\"bg-slate-900 text-emerald-100\" value=\"\">\n                Unassigned (all branches)\n              </option>\n              {branches.map((branch) => (\n                <option\n                  key={branch.id}\n                  value={branch.id}\n                  className=\"bg-slate-900 text-emerald-100\"\n                >\n                  {branch.name}\n                </option>\n              ))}\n            </select>\n            {branches.length === 0 && (\n              <p className=\"text-xs text-emerald-100/60\">\n                No branches found for this tenant yet. Create one first to tie\n                staff to a location.\n              </p>\n            )}\n          </div>\n          <SheetFooter className=\"gap-3 pt-2\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => {\n                resetForm();\n                onOpenChange(false);\n              }}\n              className=\"rounded-full border-white/20 bg-white/10 px-5 py-2 text-sm font-semibold text-emerald-100 transition hover:border-emerald-300/40 hover:bg-white/15 hover:text-white\"\n            >\n              Cancel\n            </Button>\n            <Button\n              type=\"submit\"\n              disabled={submitting}\n              className=\"rounded-full bg-gradient-to-r from-emerald-500 via-emerald-400 to-sky-500 px-5 py-2 text-sm font-semibold text-white shadow-[0_22px_60px_-30px_rgba(16,185,129,0.75)] transition hover:from-emerald-500/90 hover:to-sky-500/90\"\n            >\n              {submitting ? \"Sending...\" : \"Send invite\"}\n            </Button>\n          </SheetFooter>\n        </form>\n      </SheetContent>\n    </Sheet>\n  );\n}\n"],"names":[],"mappings":"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"}