{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/gugu-gaga-/front_end/components/ui/skeleton.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\n\r\nexport function Skeleton({ className = \"\" }: { className?: string }) {\r\n  return <div className={`animate-pulse bg-gray-200 rounded ${className}`} />;\r\n}\r\n\r\nexport function TableSkeletonRows({ rows = 6, cols = 6 }: { rows?: number; cols?: number }) {\r\n  return (\r\n    <tbody>\r\n      {Array.from({ length: rows }).map((_, r) => (\r\n        <tr key={r} className=\"border-t\">\r\n          {Array.from({ length: cols }).map((__, c) => (\r\n            <td key={c} className=\"px-3 py-2\">\r\n              <Skeleton className=\"h-4 w-full\" />\r\n            </td>\r\n          ))}\r\n        </tr>\r\n      ))}\r\n    </tbody>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;;AAGO,SAAS,SAAS,EAAE,YAAY,EAAE,EAA0B;IACjE,qBAAO,8OAAC;QAAI,WAAW,CAAC,kCAAkC,EAAE,WAAW;;;;;;AACzE;AAEO,SAAS,kBAAkB,EAAE,OAAO,CAAC,EAAE,OAAO,CAAC,EAAoC;IACxF,qBACE,8OAAC;kBACE,MAAM,IAAI,CAAC;YAAE,QAAQ;QAAK,GAAG,GAAG,CAAC,CAAC,GAAG,kBACpC,8OAAC;gBAAW,WAAU;0BACnB,MAAM,IAAI,CAAC;oBAAE,QAAQ;gBAAK,GAAG,GAAG,CAAC,CAAC,IAAI,kBACrC,8OAAC;wBAAW,WAAU;kCACpB,cAAA,8OAAC;4BAAS,WAAU;;;;;;uBADb;;;;;eAFJ;;;;;;;;;;AAUjB","debugId":null}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/gugu-gaga-/front_end/app/%28dashboard%29/dashboard/owner/staff/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { useToast } from \"@/components/ui/toast\";\r\nimport { AuthAPI, StaffAPI, PharmaciesAPI } from \"@/utils/api\";\r\n\r\nexport default function StaffListPage() {\r\n  const { show } = useToast();\r\n  const [loading, setLoading] = useState(true);\r\n  const [tenantId, setTenantId] = useState<string | null>(null);\r\n  const [pharmacies, setPharmacies] = useState<any[]>([]);\r\n  const [items, setItems] = useState<any[]>([]);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  async function refresh(tid: string) {\r\n    setLoading(true);\r\n    try {\r\n      const rows = await StaffAPI.list(tid);\r\n      setItems(rows || []);\r\n      setError(null);\r\n    } catch (e: any) {\r\n      setError(e.message || \"Failed to load staff\");\r\n      show({ variant: \"destructive\", title: \"Error\", description: e.message || \"Failed\" });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const me = await AuthAPI.me();\r\n        const ph = await PharmaciesAPI.list(1, 100);\r\n        const items = ph?.items || [];\r\n        setPharmacies(items);\r\n        const defaultTid = me?.tenant_id || (items[0]?.tenant_id ?? null);\r\n        if (defaultTid) { setTenantId(defaultTid); await refresh(defaultTid); }\r\n        else { setError(\"No tenant context. Please ensure you are an owner.\"); setLoading(false); }\r\n      } catch (e:any) {\r\n        setError(e.message || \"Failed to load user\");\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-xl font-semibold\">Staff</h1>\r\n        <div className=\"flex gap-2\">\r\n          <Link href=\"/dashboard/owner/staff/new\"><Button>Create Cashier</Button></Link>\r\n        </div>\r\n      </div>\r\n      <div className=\"flex items-center gap-2\">\r\n        <div className=\"text-sm text-gray-600\">Active Pharmacy</div>\r\n        <select\r\n          className=\"border rounded px-2 py-1\"\r\n          value={tenantId ?? \"\"}\r\n          onChange={async (e)=>{ const tid = e.target.value || null; setTenantId(tid); if (tid) await refresh(tid); }}\r\n        >\r\n          {pharmacies.map((p:any)=>(<option key={p.tenant_id} value={p.tenant_id}>{p.name} ({p.tenant_id})</option>))}\r\n        </select>\r\n      </div>\r\n      {loading ? (\r\n        <Skeleton className=\"h-64\" />\r\n      ) : error ? (\r\n        <div className=\"text-sm text-red-600\">{error}</div>\r\n      ) : (\r\n        <div className=\"overflow-auto border rounded\">\r\n          <table className=\"min-w-full text-sm\">\r\n            <thead className=\"bg-gray-50\">\r\n              <tr>\r\n                <th className=\"px-3 py-2 text-left\">Email</th>\r\n                <th className=\"px-3 py-2 text-left\">Phone</th>\r\n                <th className=\"px-3 py-2 text-left\">Role</th>\r\n                <th className=\"px-3 py-2 text-left\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y\">\r\n              {items.map((u)=> (\r\n                <tr key={u.id}>\r\n                  <td className=\"px-3 py-2\">{u.email}</td>\r\n                  <td className=\"px-3 py-2\">{u.phone || \"-\"}</td>\r\n                  <td className=\"px-3 py-2\">{u.role}</td>\r\n                  <td className=\"px-3 py-2\">\r\n                    <div className=\"flex gap-2\">\r\n                      <Button variant=\"outline\" onClick={async ()=>{\r\n                        if (!tenantId) return;\r\n                        try { await StaffAPI.update(tenantId, u.id, { is_active: false }); show({ variant:\"success\", title:\"Suspended\", description:u.email }); await refresh(tenantId); } catch(e:any){ show({ variant:\"destructive\", title:\"Failed\", description:e.message }); }\r\n                      }}>Suspend</Button>\r\n                      <Button variant=\"outline\" onClick={async ()=>{\r\n                        if (!tenantId) return;\r\n                        try { await StaffAPI.update(tenantId, u.id, { is_active: true }); show({ variant:\"success\", title:\"Activated\", description:u.email }); await refresh(tenantId); } catch(e:any){ show({ variant:\"destructive\", title:\"Failed\", description:e.message }); }\r\n                      }}>Activate</Button>\r\n                      <Button variant=\"destructive\" onClick={async ()=>{\r\n                        if (!tenantId) return;\r\n                        if (!confirm(`Remove ${u.email}?`)) return;\r\n                        try { await StaffAPI.remove(tenantId, u.id); show({ variant:\"success\", title:\"Removed\", description:u.email }); await refresh(tenantId); } catch(e:any){ show({ variant:\"destructive\", title:\"Failed\", description:e.message }); }\r\n                      }}>Remove</Button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n              {items.length === 0 && (<tr><td className=\"px-3 py-4 text-gray-500\" colSpan={4}>No staff yet.</td></tr>)}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}