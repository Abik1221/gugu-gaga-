module.exports=[21800,a=>{"use strict";a.s(["default",()=>j]);var b=a.i(90944),c=a.i(72131),d=a.i(75320),e=a.i(5522),f=a.i(40695),g=a.i(50463),h=a.i(38246),i=a.i(64037);function j(){let{show:a}=(0,i.useToast)(),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)("");(0,c.useEffect)(()=>{let b=!0;return async function(){try{let a=await (0,d.getAuthJSON)("/auth/me");if(!b)return;m(a);let c=(0,d.getAccessToken)(),e=await fetch(`${d.API_BASE}/admin/users`,{headers:{"Content-Type":"application/json",...c?{Authorization:`Bearer ${c}`}:{}}});if(!e.ok)throw Error(await e.text().catch(()=>"Failed to load"));let f=await e.json();if(!b)return;o(Array.isArray(f)?f:[])}catch(c){if(!b)return;a({variant:"destructive",title:"Failed to load users",description:c.message||""})}finally{b&&k(!1)}}(),()=>{b=!1}},[a]);let z=(0,c.useMemo)(()=>{let a=p.trim().toLowerCase();return a?n.filter(b=>String(b.username||"").toLowerCase().includes(a)||String(b.email||"").toLowerCase().includes(a)):n},[n,p]);async function A(b){if(b.preventDefault(),t&&v&&x){s(!0);try{let b=(0,d.getAccessToken)(),c=await fetch(`${d.API_BASE}/admin/users`,{method:"POST",headers:{"Content-Type":"application/json",...b?{Authorization:`Bearer ${b}`}:{}},body:JSON.stringify({email:t,username:v,password:x})});if(!c.ok)throw Error(await c.text().catch(()=>"Failed to create"));let e=await c.json();o(a=>[e,...a]),u(""),w(""),y(""),a({variant:"success",title:"User created"})}catch(b){a({variant:"destructive",title:"Create failed",description:b.message||""})}finally{s(!1)}}}async function B(b){try{let c=(0,d.getAccessToken)(),e=await fetch(`${d.API_BASE}/admin/users/${encodeURIComponent(b)}`,{method:"DELETE",headers:{...c?{Authorization:`Bearer ${c}`}:{}}});if(!e.ok&&204!==e.status)throw Error(await e.text().catch(()=>"Failed to delete"));o(a=>a.filter(a=>String(a.id)!==String(b))),a({variant:"success",title:"User deleted"})}catch(b){a({variant:"destructive",title:"Delete failed",description:b.message||""})}}return j?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(g.Skeleton,{className:"h-8 w-64"}),(0,b.jsx)(g.Skeleton,{className:"h-10 w-full"}),(0,b.jsx)("div",{className:"space-y-2",children:Array.from({length:8}).map((a,c)=>(0,b.jsx)(g.Skeleton,{className:"h-14"},c))})]}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,b.jsxs)("div",{className:"mx-auto max-w-7xl space-y-8",children:[(0,b.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"User Management"}),(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsx)(e.Input,{placeholder:"Search username or email...",value:p,onChange:a=>q(a.target.value),className:"w-80 rounded-lg border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus:border-emerald-500 focus:ring-emerald-500"})})]})}),(0,b.jsxs)("form",{onSubmit:A,className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,b.jsx)("h2",{className:"mb-4 text-lg font-semibold text-slate-900",children:"Create New User"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Email Address"}),(0,b.jsx)(e.Input,{type:"email",value:t,onChange:a=>u(a.target.value),required:!0,className:"rounded-lg border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus:border-emerald-500 focus:ring-emerald-500",placeholder:"user@example.com"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Username"}),(0,b.jsx)(e.Input,{value:v,onChange:a=>w(a.target.value),required:!0,className:"rounded-lg border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus:border-emerald-500 focus:ring-emerald-500",placeholder:"username"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Password"}),(0,b.jsx)(e.Input,{type:"password",value:x,onChange:a=>y(a.target.value),required:!0,className:"rounded-lg border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus:border-emerald-500 focus:ring-emerald-500",placeholder:"••••••••"})]}),(0,b.jsx)("div",{className:"flex items-end",children:(0,b.jsx)(f.Button,{type:"submit",disabled:r,className:"w-full rounded-lg bg-emerald-600 text-white hover:bg-emerald-700",children:r?"Creating...":"Create User"})})]})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[(0,b.jsx)("div",{className:"border-b border-slate-200 p-6",children:(0,b.jsxs)("h2",{className:"text-lg font-semibold text-slate-900",children:["All Users (",z.length,")"]})}),(0,b.jsxs)("div",{className:"overflow-hidden",children:[(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-4 border-b border-slate-100 bg-slate-50 p-4 text-sm font-medium text-slate-600",children:[(0,b.jsx)("div",{className:"col-span-4",children:"Username"}),(0,b.jsx)("div",{className:"col-span-4",children:"Email Address"}),(0,b.jsx)("div",{className:"col-span-2",children:"User ID"}),(0,b.jsx)("div",{className:"col-span-2 text-right",children:"Actions"})]}),0===z.length?(0,b.jsxs)("div",{className:"p-12 text-center",children:[(0,b.jsx)("div",{className:"text-slate-400",children:(0,b.jsx)("svg",{className:"mx-auto h-12 w-12 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})})}),(0,b.jsx)("h3",{className:"text-lg font-medium text-slate-900 mb-1",children:"No users found"}),(0,b.jsx)("p",{className:"text-slate-500",children:"Try adjusting your search criteria or create a new user."})]}):(0,b.jsx)("div",{className:"divide-y divide-slate-100",children:z.map(a=>(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-4 items-center hover:bg-slate-50 transition-colors",children:[(0,b.jsx)("div",{className:"col-span-4",children:(0,b.jsx)("div",{className:"font-medium text-slate-900",children:a.username||"-"})}),(0,b.jsx)("div",{className:"col-span-4",children:(0,b.jsx)("div",{className:"text-slate-700",children:a.email||"-"})}),(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsx)("div",{className:"text-sm text-slate-500 font-mono",children:a.id})}),(0,b.jsxs)("div",{className:"col-span-2 flex justify-end gap-2",children:[(0,b.jsx)(h.default,{href:`/dashboard/admin/users/${encodeURIComponent(a.id)}/roles`,className:"rounded-lg border border-slate-300 bg-white px-3 py-1.5 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-colors",children:"Manage Roles"}),(0,b.jsx)("button",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-1.5 text-sm font-medium text-red-700 hover:bg-red-100 transition-colors",onClick:()=>B(String(a.id)),children:"Delete"})]})]},a.id))})]})]})]})})}}];

//# sourceMappingURL=app_%28dashboard%29_dashboard_admin_users_page_tsx_362b59e8._.js.map