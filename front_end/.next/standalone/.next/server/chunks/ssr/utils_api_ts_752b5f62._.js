module.exports=[75320,a=>{"use strict";a.s(["API_BASE",()=>b,"AdminAPI",()=>v,"AffiliateAPI",()=>u,"AuthAPI",()=>r,"BillingAPI",()=>x,"BranchAPI",()=>B,"ChatAPI",()=>C,"IntegrationsAPI",()=>t,"InventoryAPI",()=>G,"KYCAPI",()=>z,"MedicinesAPI",()=>H,"OrderAPI",()=>K,"OwnerAnalyticsAPI",()=>D,"OwnerChatAPI",()=>F,"PharmaciesAPI",()=>A,"SalesAPI",()=>I,"StaffAPI",()=>w,"SupplierAPI",()=>J,"SupplierAdminAPI",()=>M,"SupplierAnalyticsAPI",()=>E,"SupplierOnboardingAPI",()=>L,"TENANT_HEADER",()=>c,"TenantAPI",()=>s,"UploadAPI",()=>y,"authFetch",()=>n,"deleteAuthJSON",()=>q,"getAccessToken",()=>l,"getAuthJSON",()=>o,"postAuthJSON",()=>p,"postForm",()=>h,"postJSON",()=>i,"postMultipart",()=>k,"putAuthJSON",()=>j]);let b="https://mymesob.com/api/v1",c="X-Tenant-ID",d=b.replace(/\/+$/,""),e="";try{e=new URL(d).pathname.replace(/^\/+/,"").replace(/\/+$/,"")}catch{e=""}function f(a,b){let d={...a};return b&&(d[c]=b),d}function g(a){if(/^https?:\/\//i.test(a))return a;if(a.startsWith("?")||a.startsWith("#"))return`${d}${a}`;let b=a.replace(/^\/+/,"");if(e){let a=`${e}/`;b.startsWith(a)?b=b.slice(a.length):b===e&&(b="")}return b?`${d}/${b}`:d}async function h(a,b,c){let d=new URLSearchParams(b),e=await fetch(g(a),{method:"POST",headers:f({"Content-Type":"application/x-www-form-urlencoded"},c),body:d});if(!e.ok){let a=null;try{a=await e.json()}catch{a=await e.text().catch(()=>null)}let b=Error((a?"string"==typeof a?a:Array.isArray(a)?a.join(", "):a?.detail?a.detail:a?.message?a.message:a?.error?a.error:a?.errors?Object.keys(a.errors).map(b=>`${b}: ${Array.isArray(a.errors[b])?a.errors[b].join(", "):a.errors[b]}`).join(" | "):JSON.stringify(a):`Request failed with ${e.status}`)||`Request failed with ${e.status}`);throw b.status=e.status,b.body=a,b}return await e.json()}async function i(a,b,c){let d={method:"POST",headers:f({"Content-Type":"application/json"},c),body:JSON.stringify(b)};try{let b=await fetch(g(a),d);if(!b.ok){let a=null,c="";try{a=await b.json(),(c="string"==typeof a?a:Array.isArray(a)?a.join(", "):a?.error||a?.detail||a?.message||"")||!a||(c=JSON.stringify(a))}catch{a=null,c=await b.text().catch(()=>"")}let d=Error(c||`Request failed with ${b.status}`);throw d.status=b.status,null!==a&&(d.body=a),d}return await b.json()}catch(a){throw a}}async function j(a,b,c){let d=await n(a,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)},!0,c);if(!d.ok)throw Error(await d.text().catch(()=>"")||`Request failed with ${d.status}`);return await d.json()}async function k(a,b,c){let d=await fetch(g(a),{method:"POST",headers:f(void 0,c),body:b});if(!d.ok)try{let a=await d.json(),b=a?.error||a?.detail||JSON.stringify(a);throw Error(b||`Request failed with ${d.status}`)}catch{throw Error(`Request failed with ${d.status}`)}return await d.json()}function l(){return null}async function m(){return!1}async function n(a,b,c=!0,d){let e=l(),h=f({...b?.headers||{},...e?{Authorization:`Bearer ${e}`}:{}},d),i=await fetch(g(a),{...b||{},headers:h});if(401===i.status&&c&&await m()){let c=l(),e=f({...b?.headers||{},...c?{Authorization:`Bearer ${c}`}:{}},d);i=await fetch(g(a),{...b||{},headers:e})}return i}async function o(a,b){let c=await n(a,void 0,!0,b);if(!c.ok)throw Error(await c.text().catch(()=>"")||`Request failed with ${c.status}`);return await c.json()}async function p(a,b,c){let d=await n(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)},!0,c);if(!d.ok)throw Error(await d.text().catch(()=>"")||`Request failed with ${d.status}`);return await d.json()}async function q(a,b){let c=await n(a,{method:"DELETE",headers:{"Content-Type":"application/json"}},!0,b);if(!c.ok)throw Error(await c.text().catch(()=>"")||`Request failed with ${c.status}`);try{return await c.json()}catch{return}}let r={registerAffiliate:a=>i("/api/v1/auth/register/affiliate",a),registerPharmacy:a=>i("/api/v1/auth/register/owner",a),registerSupplier:a=>i("/api/v1/auth/register/supplier",a),registerVerify:async(a,b)=>{try{return await h("/api/v1/auth/register/verify",{email:a,code:b})}catch(c){if(c?.status===422)try{return await i("/api/v1/auth/register/verify",{email:a,code:b})}catch(b){let a=Error(b?.message||c?.message||"Verification failed");throw a.original=c,a.retry=b,a}throw c}},verifyRegistration:(a,b)=>h("/api/v1/auth/register/verify",{email:a,code:b}),login:(a,b,c)=>h("/api/v1/auth/login",{username:a,password:b,grant_type:"password"},c).then(a=>a),loginRequestCode:(a,b,c)=>h("/api/v1/auth/login/request-code",{username:a,password:b,grant_type:"password"},c),loginVerify:(a,b,c)=>i("/api/v1/auth/login/verify",{email:a,code:b},c).then(a=>a),refresh:a=>i("/api/v1/auth/refresh",{refresh_token:a}),sessions:()=>o("/api/v1/auth/sessions"),revokeSession:a=>n(`/api/v1/auth/sessions/${a}`,{method:"DELETE"}).then(a=>{if(!a.ok)throw Error("Failed to revoke session")}),changePassword:a=>p("/api/v1/auth/change-password",a),me:()=>o("/api/v1/auth/me")},s={activity:async(a,b)=>{let c=new URLSearchParams;a?.limit&&c.set("limit",a.limit.toString()),a?.offset&&c.set("offset",a.offset.toString()),a?.action?.forEach(a=>c.append("action",a));let d=c.toString(),e=`/api/v1/tenant/activity${d?`?${d}`:""}`,f=await n(e,void 0,!0,b);if(404===f.status||204===f.status)return[];if(!f.ok)throw Error(await f.text().catch(()=>"")||`Request failed with ${f.status}`);if(!(f.headers.get("content-type")||"").includes("application/json"))return[];try{return await f.json()}catch{return[]}}},t={listProviders:()=>o("/api/v1/integrations/providers"),listConnections:a=>o("/api/v1/integrations/connections",a),startOAuth:(a,b,c)=>p("/api/v1/integrations/oauth/start",{provider_key:b,resources:c,display_name:void 0},a),completeOAuth:(a,b,c)=>i("/api/v1/integrations/oauth/callback",{code:a,state:b,provider_key:c}),disconnect:(a,b)=>n(`/api/v1/integrations/connections/${b}`,{method:"DELETE"},!0,a).then(async a=>{if(!a.ok)throw Error(await a.text().catch(()=>"")||`HTTP ${a.status}`);return a.json()}),triggerSync:(a,b,c,d)=>p(`/api/v1/integrations/connections/${b}/sync`,{resource:c,direction:d},a)},u={getLinks:()=>o("/api/v1/affiliate/register-link",""),createLink:()=>o("/api/v1/affiliate/register-link?create_new=true",""),deactivate:a=>p(`/api/v1/affiliate/links/${encodeURIComponent(a)}/deactivate`,{},""),rotate:a=>p(`/api/v1/affiliate/links/${encodeURIComponent(a)}/rotate`,{},""),dashboard:()=>o("/api/v1/affiliate/dashboard",""),payouts:a=>o(`/api/v1/affiliate/payouts${a?`?status_filter=${encodeURIComponent(a)}`:""}`,""),requestPayout:(a,b=5)=>p("/api/v1/affiliate/payouts/request",{month:a,percent:b},""),requestPayoutWithBankDetails:a=>p("/api/v1/affiliate/payouts/request",a,""),updateProfile:a=>p("/api/v1/affiliate/profile",a,"")},v={analyticsOverview:(a=30)=>o(`/api/v1/admin/analytics/overview?days=${a}`),pharmacySummary:()=>o("/api/v1/admin/pharmacies/summary"),pharmacies:(a=1,b=20,c="")=>o(`/api/v1/admin/pharmacies?page=${a}&page_size=${b}&q=${encodeURIComponent(c)}`),approvePharmacy:(a,b,c)=>p(`/api/v1/admin/pharmacies/${b}/approve`,c||{},a),rejectPharmacy:(a,b)=>p(`/api/v1/admin/pharmacies/${b}/reject`,{},a),verifyPayment:(a,b)=>p("/api/v1/admin/payments/verify",{code:b||null},a),rejectPayment:(a,b)=>p("/api/v1/admin/payments/reject",{code:b||null},a),approveAffiliate:a=>p(`/api/v1/admin/affiliates/${a}/approve`,{}),rejectAffiliate:a=>p(`/api/v1/admin/affiliates/${a}/reject`,{}),affiliates:(a=1,b=20,c="")=>o(`/api/v1/admin/affiliates?page=${a}&page_size=${b}&q=${encodeURIComponent(c)}`),usage:(a=14)=>o(`/api/v1/admin/usage?days=${a}`),audit:a=>{let b=new URLSearchParams;return a.tenant_id&&b.set("tenant_id",a.tenant_id),a.action&&b.set("action",a.action),a.limit&&b.set("limit",a.limit.toString()),o(`/api/v1/admin/audit${b.toString()?`?${b.toString()}`:""}`)}},w={createCashier:(a,b)=>p("/api/v1/staff",b,a),list:a=>o("/api/v1/staff",a),update:(a,b,c)=>n(`/api/v1/staff/${b}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)},!0,a).then(async a=>{if(!a.ok)throw Error(await a.text().catch(()=>"")||`Request failed with ${a.status}`);return a.json()}),remove:(a,b)=>n(`/api/v1/staff/${b}`,{method:"DELETE"},!0,a).then(async a=>{if(!a.ok)throw Error(await a.text().catch(()=>"")||`Request failed with ${a.status}`);return a.json()})},x={submitPaymentCode:(a,b)=>p("/api/v1/owner/billing/payment-code",{code:b},a)},y={uploadKyc:async a=>{let b=new FormData;return b.append("file",a),k("/uploads/kyc",b)}},z={status:a=>o("/api/v1/owner/kyc/status",a),update:(a,b)=>j("/api/v1/owner/kyc/status",b,a)},A={list:(a,b)=>{let c=new URLSearchParams;c.set("page",String(b?.page??1)),c.set("page_size",String(b?.page_size??20)),b?.q&&c.set("q",b.q);let d=c.toString();return o(`/api/v1/pharmacies${d?`?${d}`:""}`,a)},get:(a,b)=>o(`/api/v1/pharmacies/${a}`,b),update:(a,b,c)=>n(`/api/v1/pharmacies/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)},!0,c).then(async a=>{if(!a.ok)throw Error(await a.text());return await a.json()})},B={create:(a,b)=>p("/api/v1/branches",b,a),list:(a,b)=>{let c=b?`?pharmacy_id=${b}`:"";return o(`/api/v1/branches${c}`,a)},get:(a,b)=>o(`/api/v1/branches/${b}`,a),update:(a,b,c)=>j(`/api/v1/branches/${b}`,c,a),delete:(a,b)=>q(`/api/v1/branches/${b}`,a)},C={listThreads:a=>o("/api/v1/chat/threads",a),createThread:(a,b)=>p("/api/v1/chat/threads",b?{title:b}:{},a),listMessages:(a,b)=>o(`/api/v1/chat/threads/${b}/messages`,a),sendMessage:(a,b,c)=>p(`/api/v1/chat/threads/${b}/messages`,{prompt:c},a),usage:(a,b=30)=>o(`/api/v1/chat/usage?days=${b}`,a)},D={overview:(a,b)=>{let c=new URLSearchParams;b?.horizon&&c.set("horizon",b.horizon),b?.trendWeeks&&c.set("trend_weeks",String(b.trendWeeks)),b?.days&&c.set("days",String(b.days));let d=c.toString();return o(`/api/v1/analytics/owner/overview${d?`?${d}`:""}`,a)}},E={overview:a=>{let b=new URLSearchParams;a&&b.set("days",String(a));let c=b.toString();return o(`/api/v1/analytics/supplier/overview${c?`?${c}`:""}`)}},F={listThreads:a=>o("/api/v1/owner/chat/threads",a),createThread:(a,b)=>p("/api/v1/owner/chat/threads",{title:b},a),listMessages:(a,b)=>o(`/api/v1/owner/chat/threads/${b}/messages`,a),sendMessage:(a,b,c)=>p(`/api/v1/owner/chat/threads/${b}/messages`,{prompt:c},a)},G={list:(a,b)=>{let c=new URLSearchParams;b?.q&&c.set("q",b.q),b?.branch&&c.set("branch",b.branch),"number"==typeof b?.expiringInDays&&c.set("expiring_in_days",String(b.expiringInDays)),b?.lowStockOnly&&c.set("low_stock_only","true"),b?.page&&c.set("page",String(b.page)),b?.pageSize&&c.set("page_size",String(b.pageSize));let d=c.toString();return o(`/api/v1/inventory/items${d?`?${d}`:""}`,a)},create:async(a,b)=>{let c=new URLSearchParams;c.set("medicine_id",String(b.medicine_id)),c.set("pack_size",String(Math.max(1,b.pack_size||1))),b.branch&&c.set("branch",b.branch),"number"==typeof b.packs_count&&c.set("packs_count",String(Math.max(0,b.packs_count))),"number"==typeof b.singles_count&&c.set("singles_count",String(Math.max(0,b.singles_count))),b.expiry_date&&c.set("expiry_date",b.expiry_date),b.lot_number&&c.set("lot_number",b.lot_number),"number"==typeof b.purchase_price&&c.set("purchase_price",String(b.purchase_price)),"number"==typeof b.sell_price&&c.set("sell_price",String(b.sell_price)),"number"==typeof b.reorder_level&&c.set("reorder_level",String(Math.max(0,b.reorder_level)));let d=await n("/api/v1/inventory/items",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c.toString()},!0,a);if(!d.ok)throw Error(await d.text().catch(()=>"")||`Request failed with ${d.status}`);return d.json()},update:async(a,b,c)=>{let d=new URLSearchParams;"number"==typeof c.quantity&&d.set("quantity",String(c.quantity)),"number"==typeof c.reorder_level&&d.set("reorder_level",String(Math.max(0,c.reorder_level))),"number"==typeof c.sell_price&&d.set("sell_price",String(c.sell_price)),void 0!==c.expiry_date&&d.set("expiry_date",c.expiry_date||""),void 0!==c.lot_number&&d.set("lot_number",c.lot_number||"");let e=await n(`/api/v1/inventory/items/${b}`,{method:"PATCH",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:d.toString()},!0,a);if(!e.ok)throw Error(await e.text().catch(()=>"")||`Request failed with ${e.status}`);return e.json()},remove:async(a,b)=>{let c=await n(`/api/v1/inventory/items/${b}`,{method:"DELETE"},!0,a);if(!c.ok)throw Error(await c.text().catch(()=>"")||`Request failed with ${c.status}`);return c.json()}},H={list:(a,b)=>{let c=new URLSearchParams;return b?.q&&c.set("q",b.q),b?.page&&c.set("page",String(b.page)),b?.pageSize&&c.set("page_size",String(Math.min(200,Math.max(1,b.pageSize)))),o(`/api/v1/medicines${c.toString()?`?${c.toString()}`:""}`,a)}},I={pos:(a,b)=>{let{lines:c,branch:d}=b,e=d?`?branch=${encodeURIComponent(d)}`:"";return p(`/api/v1/sales/pos${e}`,c,a)}},J={getProfile:()=>o("/api/v1/suppliers/profile"),createProfile:a=>p("/api/v1/suppliers/profile",a),updateProfile:a=>j("/api/v1/suppliers/profile",a),getProducts:()=>o("/api/v1/suppliers/products"),createProduct:a=>p("/api/v1/suppliers/products",a),updateProduct:(a,b)=>j(`/api/v1/suppliers/products/${a}`,b),deleteProduct:a=>q(`/api/v1/suppliers/products/${a}`),getOrders:()=>o("/api/v1/suppliers/orders"),approveOrder:a=>j(`/api/v1/suppliers/orders/${a}/approve`,{}),rejectOrder:a=>j(`/api/v1/suppliers/orders/${a}/reject`,{}),verifyPayment:a=>j(`/api/v1/suppliers/orders/${a}/verify-payment`,{}),markDelivered:a=>j(`/api/v1/suppliers/orders/${a}/mark-delivered`,{}),browse:a=>o("/api/v1/suppliers/browse",a),getSupplierProducts:(a,b)=>o(`/api/v1/suppliers/${a}/products`,b)},K={create:(a,b)=>p("/api/v1/orders",a,b),list:a=>o("/api/v1/orders",a),get:(a,b)=>o(`/api/v1/orders/${a}`,b),submitPaymentCode:(a,b,c)=>j(`/api/v1/orders/${a}/payment-code`,{code:b},c),createReview:(a,b,c)=>p(`/api/v1/orders/${a}/review`,b,c),getReview:(a,b)=>o(`/api/v1/orders/${a}/review`,b)},L={getStatus:()=>o("/api/v1/supplier-onboarding/status"),submitKYC:a=>p("/api/v1/supplier-onboarding/kyc/submit",a),getKYCStatus:()=>o("/api/v1/supplier-onboarding/kyc/status"),submitPayment:a=>p("/api/v1/supplier-onboarding/payment/submit",a),getPaymentStatus:()=>o("/api/v1/supplier-onboarding/payment/status")},M={getSuppliers:()=>o("/api/v1/admin/suppliers"),getPendingKYC:()=>o("/api/v1/admin/suppliers/kyc/pending"),approveKYC:a=>p(`/api/v1/admin/suppliers/${a}/kyc/approve`,{}),rejectKYC:(a,b)=>p(`/api/v1/admin/suppliers/${a}/kyc/reject`,{notes:b}),getPendingPayments:()=>o("/api/v1/admin/suppliers/payments/pending"),verifyPayment:a=>p(`/api/v1/admin/suppliers/payments/${a}/verify`,{}),rejectPayment:(a,b)=>p(`/api/v1/admin/suppliers/payments/${a}/reject`,{notes:b})}}];

//# sourceMappingURL=utils_api_ts_752b5f62._.js.map