module.exports=[1728,a=>{"use strict";a.s(["default",()=>x],1728);var b=a.i(90944),c=a.i(72131),d=a.i(46271),e=a.i(72089),f=a.i(5151),g=a.i(90166),h=a.i(2411),h=h,i=a.i(58377),j=a.i(69520),k=a.i(50429),l=a.i(60246),m=a.i(75320),n=a.i(50463),o=a.i(40695),p=a.i(5522),q=a.i(64037),r=a.i(3130),s=a.i(97895);function t({title:a,value:c,description:d,icon:e,className:f}){return(0,b.jsx)(r.Card,{className:(0,s.cn)("border border-white/10 bg-gradient-to-br from-emerald-500/10 via-slate-950/70 to-blue-600/10 text-white shadow-[0_18px_55px_-35px_rgba(255,255,255,0.55)] transition hover:-translate-y-1 hover:shadow-[0_28px_85px_-40px_rgba(255,255,255,0.55)] backdrop-blur-xl",f),children:(0,b.jsxs)(r.CardContent,{className:"flex items-start justify-between gap-3 p-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.35em] text-emerald-200",children:a}),(0,b.jsx)("p",{className:"mt-3 text-2xl font-semibold text-white",children:c}),d&&(0,b.jsx)("p",{className:"mt-3 text-xs text-emerald-100/70",children:d})]}),e&&(0,b.jsx)("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-xl bg-white/15 text-emerald-200 shadow-inner shadow-emerald-500/10",children:e})]})})}function u({label:a,value:c}){return(0,b.jsx)(r.Card,{className:"border border-white/10 bg-gradient-to-br from-slate-900/70 via-emerald-600/10 to-blue-600/10 text-white shadow-[0_12px_45px_-30px_rgba(59,130,246,0.45)]",children:(0,b.jsxs)(r.CardContent,{className:"space-y-2 p-4",children:[(0,b.jsx)("p",{className:"text-[10px] font-semibold uppercase tracking-[0.32em] text-emerald-200/80",children:a}),(0,b.jsx)("div",{className:"text-xl font-semibold leading-tight text-white break-words",children:c})]})})}function v({title:a,description:c,children:d}){return(0,b.jsxs)(r.Card,{className:"border border-black/40 bg-gradient-to-br from-black via-slate-950 to-slate-900 text-white shadow-[0_20px_60px_-35px_rgba(255,255,255,0.6)] backdrop-blur-xl",children:[(0,b.jsxs)(r.CardHeader,{className:"mb-0 space-y-1 pb-0",children:[(0,b.jsx)(r.CardTitle,{className:"text-lg text-white",children:a}),c&&(0,b.jsx)("p",{className:"text-xs text-emerald-100/70",children:c})]}),(0,b.jsx)(r.CardContent,{className:"pt-5",children:d})]})}function w(a){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a||0)}function x(){let{show:a}=(0,q.useToast)(),[r,s]=(0,c.useState)(!0),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)(!0),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(5),[J,K]=(0,c.useState)(!1);async function L(){s(!0);try{let[a,b]=await Promise.all([m.AffiliateAPI.dashboard(),m.AffiliateAPI.getLinks()]);if(A(a),a?.year&&a?.month){let b=`${a.year}-${String(a.month).padStart(2,"0")}`;G(b)}a?.percent&&I(a.percent),C(b.links||[]),E(!!b.can_create_more),y(null)}catch(b){y(b.message||"Failed to load affiliate data"),a({variant:"destructive",title:"Error",description:b.message||"Failed to load"})}finally{s(!1)}}(0,c.useEffect)(()=>{L()},[]);let M=(0,c.useMemo)(()=>({referrals:z?.referrals_count||0,currentCommission:z?.amount||0,pendingPayout:z?.payouts?.pending_total||0,paidPayout:z?.payouts?.paid_total||0}),[z]),N=(0,c.useMemo)(()=>[{title:"Active referrals",value:M.referrals.toLocaleString(),description:"Pharmacies you’ve successfully onboarded",icon:l.Users},{title:"Current commission",value:w(M.currentCommission),description:"Projected payout for this period",icon:e.Coins},{title:"Pending payouts",value:w(M.pendingPayout),description:"Awaiting review & processing",icon:g.DollarSign},{title:"Paid to date",value:w(M.paidPayout),description:"Total earnings transferred to you",icon:k.Target}],[M]),O=(0,c.useMemo)(()=>{if(!z?.month||!z?.year)return"current period";try{return new Date(z.year,z.month-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}catch{return`${z.year}-${String(z.month).padStart(2,"0")}`}},[z?.month,z?.year]),P=z?.tenants?.length??0,Q=(z?.amount??0)>0,R="You haven't earned any commission yet. Share your referral link to start earning before requesting a payout.";async function S(){try{await m.AffiliateAPI.createLink(),await L(),a({variant:"success",title:"Link created"})}catch(b){a({variant:"destructive",title:"Failed to create link",description:b.message})}}async function T(b){try{await m.AffiliateAPI.deactivate(b),await L(),a({variant:"success",title:"Link deactivated"})}catch(b){a({variant:"destructive",title:"Failed to deactivate",description:b.message})}}async function U(b){try{await m.AffiliateAPI.rotate(b),await L(),a({variant:"success",title:"Link rotated"})}catch(b){a({variant:"destructive",title:"Failed to rotate",description:b.message})}}async function V(b){try{if("undefined"!=typeof navigator&&navigator.clipboard?.writeText)await navigator.clipboard.writeText(b),a({variant:"success",title:"Link copied",description:"Referral link copied to clipboard."});else throw Error("Clipboard not available")}catch(b){a({variant:"destructive",title:"Copy failed",description:b?.message||"Unable to copy link on this device"})}}async function W(){if(!F)return void a({variant:"destructive",title:"Missing month",description:"Select a month to request payment for."});if(!Q)return void a({variant:"default",title:"No earnings yet",description:R});K(!0);try{await m.AffiliateAPI.requestPayout(F,H||5),a({variant:"success",title:"Payout requested",description:"We will review and notify you once processed."}),await L()}catch(b){a({variant:"destructive",title:"Failed to request payout",description:b.message||"Try again later"})}finally{K(!1)}}return r?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(n.Skeleton,{className:"h-8 w-64"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((a,c)=>(0,b.jsx)(n.Skeleton,{className:"h-24"},c))}),(0,b.jsx)(n.Skeleton,{className:"h-8 w-40"}),(0,b.jsx)(n.Skeleton,{className:"h-64"})]}):x?(0,b.jsx)("div",{className:"text-sm text-red-600",children:x}):(0,b.jsxs)("div",{className:"space-y-10 p-12",children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:-12},animate:{opacity:1,y:0},transition:{duration:.45,ease:"easeOut"},className:"relative overflow-hidden rounded-3xl border border-emerald-100/40  p-8 text-white shadow-[0_25px_80px_-40px_rgba(255,255,255,0.55)]",children:[(0,b.jsxs)("div",{className:"absolute inset-0",children:[(0,b.jsx)("div",{className:"absolute -top-16 right-10 h-40 w-40 rounded-full bg-emerald-400/30 blur-3xl"}),(0,b.jsx)("div",{className:"absolute bottom-0 left-0 h-48 w-48 -translate-x-1/2 translate-y-1/2 rounded-full bg-blue-500/20 blur-3xl"})]}),(0,b.jsxs)("div",{className:"relative flex flex-col gap-8 lg:flex-row lg:items-center lg:justify-between",children:[(0,b.jsxs)("div",{className:"max-w-xl space-y-4",children:[(0,b.jsx)("p",{className:"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-4 py-1 text-xs font-semibold uppercase tracking-[0.25em] text-emerald-100/80",children:"Affiliate control hub"}),(0,b.jsx)("h1",{className:"text-3xl font-bold leading-tight sm:text-4xl",children:"Welcome back, partner. Let’s grow your pharmacy network."}),(0,b.jsx)("p",{className:"text-sm text-emerald-100/80 sm:text-base",children:"Monitor conversions, unlock commissions, and manage referral links in one streamlined experience designed to match the new Zemen aesthetic."}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 pt-2 sm:flex-row sm:items-center",children:[(0,b.jsxs)(o.Button,{onClick:S,disabled:!D,className:"group h-12 cursor-pointer rounded-3xl bg-gradient-to-r from-emerald-500 via-emerald-400 to-blue-500 px-7 text-sm font-semibold text-white shadow-[0_18px_55px_-30px_rgba(16,185,129,0.7)] transition duration-200 hover:-translate-y-0.5 hover:shadow-[0_24px_70px_-35px_rgba(16,185,129,0.75)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950 disabled:cursor-not-allowed disabled:opacity-60",children:[(0,b.jsx)("span",{className:"mr-2 inline-flex h-8 w-8 items-center justify-center rounded-2xl bg-white/15 text-white transition group-hover:scale-105",children:(0,b.jsx)(i.Pointer,{className:"h-4 w-4"})}),(0,b.jsx)(h.default,{className:"mr-2 h-4 w-4 transition-transform group-hover:-rotate-6"}),D?"Generate referral link":"Link limit reached"]}),(0,b.jsxs)(o.Button,{onClick:L,variant:"outline",className:"h-11 cursor-pointer rounded-2xl border-white/30 bg-white/5 px-5 text-sm font-semibold text-emerald-100 transition hover:-translate-y-0.5 hover:border-emerald-300/60 hover:bg-white/15",children:[(0,b.jsx)(j.RefreshCw,{className:"mr-2 h-4 w-4"})," Refresh data"]})]}),(0,b.jsxs)("p",{className:"text-xs text-emerald-100/70",children:[B.length," of 2 active links in use · ",D?"Generate a new link to start sharing":"Deactivate one to free a slot"]}),(0,b.jsx)("div",{className:"mt-5 space-y-3",children:0===B.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 rounded-2xl border border-dashed border-white/20 bg-white/5 p-6 text-center text-sm text-emerald-100/70",children:[(0,b.jsx)(h.default,{className:"h-8 w-8 text-emerald-300"}),(0,b.jsx)("p",{children:"No referral links yet. Generate one to start sharing."})]}):B.map(a=>{let c=a.active?"bg-emerald-500/15 text-emerald-300":"bg-slate-200/30 text-slate-200";return(0,b.jsxs)("div",{className:"flex flex-col gap-4 rounded-2xl border border-white/10 bg-black/40 p-4 shadow-sm backdrop-blur sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("p",{className:"flex items-center gap-2 text-sm font-semibold text-white",children:[(0,b.jsx)(h.default,{className:"h-4 w-4"})," Referral link",(0,b.jsx)("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-semibold uppercase tracking-widest ${c}`,children:a.active?"Active":"Inactive"})]}),(0,b.jsx)("p",{className:"font-mono text-xs text-emerald-100/80 break-all",children:a.url})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsxs)(o.Button,{size:"sm",variant:"outline",onClick:()=>V(a.url),className:"cursor-pointer rounded-xl border-emerald-300/30 bg-emerald-500/10 text-emerald-100 transition hover:-translate-y-0.5 hover:border-emerald-200 hover:bg-emerald-500/20",children:[(0,b.jsx)(f.Copy,{className:"mr-1.5 h-4 w-4"})," Copy"]}),(0,b.jsx)(o.Button,{size:"sm",variant:"outline",onClick:()=>T(a.token),disabled:!a.active,className:"cursor-pointer rounded-xl border-rose-300/30 bg-rose-500/10 text-rose-100 transition hover:-translate-y-0.5 hover:border-rose-300 hover:bg-rose-500/20 disabled:cursor-not-allowed disabled:opacity-50",children:"Deactivate"}),(0,b.jsxs)(o.Button,{size:"sm",variant:"outline",onClick:()=>U(a.token),className:"cursor-pointer rounded-xl border-cyan-300/30 bg-cyan-500/10 text-cyan-100 transition hover:-translate-y-0.5 hover:border-cyan-200 hover:bg-cyan-500/20",children:[(0,b.jsx)(j.RefreshCw,{className:"mr-1.5 h-4 w-4"})," Rotate"]})]})]},a.token)})})]}),(0,b.jsxs)("div",{className:"grid w-full max-w-sm gap-3 rounded-3xl border border-white/10 bg-black/30 p-4 backdrop-blur lg:max-w-xs",children:[(0,b.jsx)(u,{label:"Verified pharmacies",value:P.toString()}),(0,b.jsx)(u,{label:"Current commission",value:w(M.currentCommission)})]})]})]}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.45,delay:.05,ease:"easeOut"},className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-4",children:N.map(({title:a,value:c,description:e,icon:f},g)=>(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{duration:.4,delay:.08*g},children:(0,b.jsx)(t,{title:a,value:c,description:e,icon:(0,b.jsx)(f,{className:"h-5 w-5"})})},a))}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:22},animate:{opacity:1,y:0},transition:{duration:.45,delay:.12,ease:"easeOut"},children:(0,b.jsxs)(v,{title:"This period at a glance",description:`Commission summary for ${O}.`,children:[(0,b.jsxs)("div",{className:"grid gap-3 sm:grid-cols-3",children:[(0,b.jsx)(u,{label:"Percent",value:`${z?.percent??5}%`}),(0,b.jsx)(u,{label:"Commission",value:w(z?.amount||0)}),(0,b.jsx)(u,{label:"Referred Pharmacies",value:P.toString()})]}),(0,b.jsxs)("div",{className:"mt-6 rounded-2xl border border-emerald-100/30 bg-emerald-500/5 p-4",children:[(0,b.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-widest text-emerald-600/80",children:"Tenant IDs credited"}),(0,b.jsx)("div",{className:"mt-3 max-h-40 overflow-auto rounded-xl border border-white/10 p-3 text-white text-xs font-mono shadow-inner",children:0===(z?.tenants||[]).length?(0,b.jsx)("p",{children:"No pharmacies referred yet this month. Share your link to get started."}):(0,b.jsx)("ul",{className:"space-y-2",children:z?.tenants?.map(a=>(0,b.jsxs)("li",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{children:a}),(0,b.jsx)("span",{className:"rounded-full bg-emerald-500/15 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-widest text-emerald-600",children:"Credited"})]},a))})})]})]})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:22},animate:{opacity:1,y:0},transition:{duration:.45,delay:.16,ease:"easeOut"},children:(0,b.jsxs)(v,{title:"Request payout",description:"Submit a commission payout request for a specific month.",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-widest text-white",children:"Month (YYYY-MM)"}),(0,b.jsx)(p.Input,{value:F,onChange:a=>G(a.target.value),placeholder:"2025-10",className:"rounded-2xl border border-emerald-100/40 bg-white/80 text-emerald-900 placeholder:text-emerald-300 focus:border-emerald-400 focus:ring-emerald-400"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[11px] font-semibold uppercase tracking-widest text-white",children:"Commission percent"}),(0,b.jsx)(p.Input,{type:"number",min:1,max:20,step:.5,value:H,onChange:a=>I(Number(a.target.value)),className:"rounded-2xl border border-emerald-100/40 bg-white/80 text-emerald-900 focus:border-emerald-400 focus:ring-emerald-400"})]})]}),(0,b.jsx)(o.Button,{onClick:W,disabled:J||!Q,className:"mt-6 h-11 w-full rounded-2xl bg-gradient-to-r from-emerald-500 to-blue-500 text-sm font-semibold text-white shadow-[0_15px_45px_-25px_rgba(16,185,129,0.65)] transition-transform hover:scale-[1.01] disabled:cursor-not-allowed disabled:opacity-60",children:J?"Submitting...":"Submit payout request"}),!Q&&(0,b.jsx)("p",{className:"mt-3 text-xs font-medium text-white",children:R})]})})]}),(0,b.jsx)("div",{className:"pb-4"})]})}}];

//# sourceMappingURL=app_affiliate_page_tsx_d58f8bce._.js.map