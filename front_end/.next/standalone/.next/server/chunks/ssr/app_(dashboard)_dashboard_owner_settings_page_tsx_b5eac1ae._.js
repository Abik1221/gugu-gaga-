module.exports=[46711,a=>{"use strict";a.s(["default",()=>n]);var b=a.i(90944),c=a.i(72131),d=a.i(38246),e=a.i(75320),f=a.i(3130),g=a.i(50463),h=a.i(5522),i=a.i(40695),j=a.i(64037);let k=["username","first_name","last_name","phone"];function l(a){return(a??"").trim()}function m({label:a,value:c}){return(0,b.jsxs)("div",{className:"flex flex-col gap-1 rounded-lg border border-slate-200 bg-slate-50 p-3",children:[(0,b.jsx)("span",{className:"text-xs font-medium text-slate-600",children:a}),(0,b.jsx)("span",{className:"break-words text-sm font-semibold text-slate-900",children:c})]})}function n(){let{show:a}=(0,j.useToast)(),[n,p]=(0,c.useState)(null),[q,r]=(0,c.useState)({username:"",first_name:"",last_name:"",phone:""}),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(!0),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)(!0),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)([]),[O,P]=(0,c.useState)(!0),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)("system"),[U,V]=(0,c.useState)(!0),[W,X]=(0,c.useState)({productUpdates:!0,inventoryAlerts:!0,securityEmails:!0}),[Y,Z]=(0,c.useState)(""),[$,_]=(0,c.useState)(""),[aa,ab]=(0,c.useState)(""),[ac,ad]=(0,c.useState)(null),[ae,af]=(0,c.useState)(!1),[ag,ah]=(0,c.useState)(!1),[ai,aj]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let a=!0;return async function(){t(!0);try{let b=await e.AuthAPI.me();if(!a)return;p(b),r({username:b.username??"",first_name:b.first_name??"",last_name:b.last_name??"",phone:b.phone??""}),x(null)}catch(b){if(!a)return;x(b?.message||"Unable to load profile")}finally{a&&t(!1)}}(),()=>{a=!1}},[]),(0,c.useEffect)(()=>{if(!n?.tenant_id){z([]),B(!1),F([]),H(!1),N([]),P(!1);return}let a=!0;return B(!0),D(null),e.StaffAPI.list(n.tenant_id).then(b=>{a&&z(Array.isArray(b)?b:[])}).catch(b=>{a&&D(b?.message||"Unable to load staff")}).finally(()=>{a&&B(!1)}),H(!0),J(null),e.AuthAPI.sessions().then(b=>{a&&F(b)}).catch(b=>{a&&J(b?.message||"Unable to load sessions")}).finally(()=>{a&&H(!1)}),P(!0),R(null),e.TenantAPI.activity({limit:25}).then(b=>{a&&N(b)}).catch(b=>{a&&R(b?.message||"Unable to load activity log")}).finally(()=>{a&&P(!1)}),()=>{a=!1}},[n?.tenant_id]),(0,c.useEffect)(()=>{let a="system";T(a),o(a),V(!1)},[]),(0,c.useEffect)(()=>{U||o(S)},[S,U]),(0,c.useEffect)(()=>{},[S]);let ak=(0,c.useMemo)(()=>!!n&&k.some(a=>l(q[a])!==l(n[a])),[q,n]),al=(0,c.useMemo)(()=>n?[{label:"Email",value:n.email},{label:"Primary role",value:n.role??"—"},{label:"KYC status",value:n.kyc_status??"—"},{label:"Subscription",value:n.subscription_status??"—"},{label:"Next due date",value:n.subscription_next_due_date??"—"},{label:"Latest payment",value:n.latest_payment_status??"—"}]:[],[n]),am=(0,c.useMemo)(()=>{let a=y.filter(a=>!1!==a.is_active).length,b=y.length-a;return{total:y.length,active:a,inactive:b}},[y]),an=(0,c.useMemo)(()=>y.slice(0,5),[y]),ao=(0,c.useMemo)(()=>0===E.length?null:E.find(a=>a.is_current)??E[0],[E]),ap=(0,c.useMemo)(()=>M.length>0?M[0]:null,[M]),aq=a=>b=>{let c=b.target.value;r(b=>({...b,[a]:c}))},ar=async b=>{if(b.preventDefault(),!n)return;let c={};if(k.forEach(a=>{l(q[a])!==l(n[a])&&(c[a]=function(a){let b=a.trim();return""===b?null:b}(q[a]))}),0===Object.keys(c).length)return void a({title:"No changes to save",description:"Update the fields before saving."});v(!0);try{let b=await e.AuthAPI.updateProfile(c);p(b),r({username:b.username??"",first_name:b.first_name??"",last_name:b.last_name??"",phone:b.phone??""}),x(null),a({variant:"success",title:"Profile updated",description:"Your profile details were saved."})}catch(b){a({variant:"destructive",title:"Update failed",description:b?.message||"Unable to update profile"})}finally{v(!1)}},as=b=>{T(b),a({variant:"success",title:"Appearance updated",description:`Theme set to ${b}.`})},at=a=>{X(b=>({...b,[a]:!b[a]}))},au=async()=>{if(n?.tenant_id){H(!0),J(null);try{let a=await e.AuthAPI.sessions();F(a)}catch(a){J(a?.message||"Unable to refresh sessions")}finally{H(!1)}}},av=async b=>{L(b);try{await e.AuthAPI.revokeSession(b),await au(),a({variant:"success",title:"Session revoked",description:"The device was disconnected successfully."})}catch(b){a({variant:"destructive",title:"Failed to revoke",description:b?.message||"Unable to revoke session"})}finally{L(null)}},aw=async()=>{if(n?.tenant_id){P(!0),R(null);try{let a=await e.TenantAPI.activity({limit:25});N(a)}catch(a){R(a?.message||"Unable to load activity log")}finally{P(!1)}}},ax=async b=>{if(b.preventDefault(),n){if(!Y||!$||!aa)return void ad("Enter current password, new password, and confirmation.");if($!==aa)return void ad("New password and confirmation do not match.");ad(null),af(!0);try{await e.AuthAPI.changePassword({current_password:Y,new_password:$}),Z(""),_(""),ab(""),a({variant:"success",title:"Password updated",description:"Other devices have been signed out."}),await au()}catch(a){ad(a?.message||"Unable to change password")}finally{af(!1)}}};return(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,b.jsxs)("div",{className:"mx-auto max-w-7xl space-y-8",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Owner Settings"}),(0,b.jsx)("p",{className:"mt-2 text-slate-600",children:"Control profile details, monitor your team, and keep subscription data in one place."})]}),s?(0,b.jsxs)(f.Card,{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-slate-900",children:"Loading profile…"})}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsx)("div",{className:"grid gap-3 md:grid-cols-2",children:Array.from({length:4}).map((a,c)=>(0,b.jsx)(g.Skeleton,{className:"h-16 w-full rounded-xl bg-slate-100"},`form-${c}`))}),(0,b.jsx)("div",{className:"grid gap-3 md:grid-cols-2",children:Array.from({length:4}).map((a,c)=>(0,b.jsx)(g.Skeleton,{className:"h-16 w-full rounded-xl bg-slate-100"},`summary-${c}`))})]})]}):w?(0,b.jsxs)(f.Card,{className:"rounded-2xl border border-red-200 bg-red-50 shadow-sm",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-red-800",children:"Unable to load profile"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("div",{className:"text-sm text-red-700",children:w})})]}):n?(0,b.jsxs)("div",{className:"grid gap-6 xl:grid-cols-2",children:[(0,b.jsxs)(f.Card,{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-slate-900",children:"Edit Owner Profile"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("form",{onSubmit:ar,className:"space-y-6",children:[(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"Update how your name and contact information appear across every pharmacy tool. Leave a field blank to clear it."}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Username"}),(0,b.jsx)(h.Input,{value:q.username,onChange:aq("username"),placeholder:"Preferred username",maxLength:64,className:"rounded-lg border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus:border-emerald-500 focus:ring-emerald-500"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"First Name"}),(0,b.jsx)(h.Input,{value:q.first_name,onChange:aq("first_name"),placeholder:"e.g. Alex",maxLength:120,className:"rounded-lg border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus:border-emerald-500 focus:ring-emerald-500"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Last Name"}),(0,b.jsx)(h.Input,{value:q.last_name,onChange:aq("last_name"),placeholder:"e.g. Bekele",maxLength:120,className:"rounded-lg border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus:border-emerald-500 focus:ring-emerald-500"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Phone"}),(0,b.jsx)(h.Input,{value:q.phone,onChange:aq("phone"),placeholder:"e.g. +2519…",maxLength:32,className:"rounded-lg border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus:border-emerald-500 focus:ring-emerald-500"})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-end gap-3",children:[(0,b.jsx)(i.Button,{type:"button",variant:"outline",onClick:()=>{n&&r({username:n.username??"",first_name:n.first_name??"",last_name:n.last_name??"",phone:n.phone??""})},disabled:!ak||u,className:"rounded-lg border-slate-300 bg-white text-slate-700 hover:bg-slate-50",children:"Reset"}),(0,b.jsx)(i.Button,{type:"submit",disabled:!ak||u,className:"rounded-lg bg-emerald-600 text-white hover:bg-emerald-700",children:u?"Saving...":"Save Changes"})]})]})})]}),(0,b.jsxs)(f.Card,{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-slate-900",children:"Tenant & Subscription Overview"})}),(0,b.jsxs)(f.CardContent,{className:"grid gap-3",children:[al.map(a=>(0,b.jsx)(m,{label:a.label,value:a.value},a.label)),(0,b.jsx)(d.default,{href:"/dashboard/owner/payment",className:"inline-flex items-center justify-center rounded-lg border border-emerald-200 bg-emerald-50 px-4 py-2 text-sm font-semibold text-emerald-700 transition hover:bg-emerald-100",children:"Review Subscription & Payments"})]})]})]}):(0,b.jsxs)(f.Card,{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-slate-900",children:"No profile data"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("div",{className:"text-sm text-slate-600",children:"We could not retrieve your owner profile. Please refresh or contact support."})})]}),(0,b.jsxs)(f.Card,{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-slate-900",children:"Team Insights"})}),(0,b.jsxs)(f.CardContent,{className:"space-y-6",children:[A?(0,b.jsx)("div",{className:"grid gap-3 md:grid-cols-3",children:Array.from({length:3}).map((a,c)=>(0,b.jsx)(g.Skeleton,{className:"h-20 w-full rounded-xl bg-slate-100"},`staff-${c}`))}):C?(0,b.jsx)("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:C}):0===y.length?(0,b.jsx)("div",{className:"rounded-xl border border-dashed border-slate-300 bg-slate-50 p-4 text-sm text-slate-600",children:"No staff members found for this tenant yet. Invite your first cashier or manager to get started."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid gap-3 md:grid-cols-3",children:[(0,b.jsx)(m,{label:"Total staff",value:am.total}),(0,b.jsx)(m,{label:"Active",value:am.active}),(0,b.jsx)(m,{label:"Inactive",value:am.inactive})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-slate-700",children:"Recent Members"}),(0,b.jsx)("div",{className:"space-y-2",children:an.map(a=>(0,b.jsxs)("div",{className:"flex flex-col gap-1 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold text-slate-900",children:a.email}),(0,b.jsx)("div",{className:"text-xs text-slate-500 capitalize",children:(a.role||"staff").toLowerCase()})]}),(0,b.jsx)("span",{className:`inline-flex h-6 items-center justify-center rounded-full px-3 text-xs font-medium ${!1===a.is_active?"border border-red-200 bg-red-100 text-red-700":"border border-green-200 bg-green-100 text-green-700"}`,children:!1===a.is_active?"Suspended":"Active"})]},a.id))})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,b.jsx)(d.default,{href:"/dashboard/owner/staff",className:"inline-flex items-center justify-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-50",children:"Manage Staff Access"}),(0,b.jsx)(d.default,{href:"/dashboard/owner/staff/new",className:"inline-flex items-center justify-center rounded-lg border border-emerald-200 bg-emerald-50 px-4 py-2 text-sm font-semibold text-emerald-700 transition hover:bg-emerald-100",children:"Invite New Member"}),(0,b.jsx)(d.default,{href:"/dashboard/inventory",className:"inline-flex items-center justify-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-50",children:"Review Inventory Settings"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-6 xl:grid-cols-2",children:[(0,b.jsxs)(f.Card,{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(f.CardTitle,{className:"text-slate-900",children:"Appearance"}),(0,b.jsx)(i.Button,{variant:"ghost",size:"sm",className:"rounded-lg text-slate-600 hover:bg-slate-100",onClick:()=>as("system"),children:"Reset"})]})}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"Choose how the dashboard looks across the app."}),(0,b.jsx)("div",{className:"grid gap-3 sm:grid-cols-3",children:[{value:"light",label:"Light"},{value:"dark",label:"Dark"},{value:"system",label:"System"}].map(a=>{let c=S===a.value;return(0,b.jsx)("button",{type:"button",onClick:()=>as(a.value),className:`rounded-lg border px-4 py-2 text-sm font-semibold transition ${c?"border-emerald-300 bg-emerald-100 text-emerald-800":"border-slate-300 bg-white text-slate-700 hover:bg-slate-50"}`,children:a.label},a.value)})})]})]}),(0,b.jsxs)(f.Card,{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-slate-900",children:"Notifications"})}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"Preferences are stored locally while backend delivery is in progress."}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{className:"flex items-center justify-between rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[(0,b.jsx)("span",{className:"text-slate-700",children:"Product updates"}),(0,b.jsx)("input",{type:"checkbox",className:"h-4 w-4 accent-emerald-600",checked:W.productUpdates,onChange:()=>at("productUpdates")})]}),(0,b.jsxs)("label",{className:"flex items-center justify-between rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[(0,b.jsx)("span",{className:"text-slate-700",children:"Inventory alerts"}),(0,b.jsx)("input",{type:"checkbox",className:"h-4 w-4 accent-emerald-600",checked:W.inventoryAlerts,onChange:()=>at("inventoryAlerts")})]}),(0,b.jsxs)("label",{className:"flex items-center justify-between rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[(0,b.jsx)("span",{className:"text-slate-700",children:"Security emails"}),(0,b.jsx)("input",{type:"checkbox",className:"h-4 w-4 accent-emerald-600",checked:W.securityEmails,onChange:()=>at("securityEmails")})]})]})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-6 xl:grid-cols-2",children:[(0,b.jsxs)(f.Card,{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(f.CardTitle,{className:"text-slate-900",children:"Account Security"}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:au,disabled:G,className:"rounded-lg border-slate-300 bg-white text-slate-700 hover:bg-slate-50",children:"Refresh Sessions"})]})}),(0,b.jsxs)(f.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("form",{onSubmit:ax,className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"Change your password. All other active sessions will be signed out immediately."}),(0,b.jsxs)("div",{className:"grid gap-3 sm:grid-cols-3",children:[(0,b.jsx)(h.Input,{type:"password",placeholder:"Current password",value:Y,onChange:a=>Z(a.target.value),required:!0,className:"rounded-lg border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus:border-emerald-500 focus:ring-emerald-500"}),(0,b.jsx)(h.Input,{type:"password",placeholder:"New password",value:$,onChange:a=>_(a.target.value),required:!0,className:"rounded-lg border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus:border-emerald-500 focus:ring-emerald-500"}),(0,b.jsx)(h.Input,{type:"password",placeholder:"Confirm new password",value:aa,onChange:a=>ab(a.target.value),required:!0,className:"rounded-lg border-slate-300 bg-white text-slate-900 placeholder:text-slate-400 focus:border-emerald-500 focus:ring-emerald-500"})]}),ac?(0,b.jsx)("div",{className:"text-sm text-red-600",children:ac}):null,(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)(i.Button,{type:"submit",disabled:ae,className:"rounded-lg bg-emerald-600 text-white hover:bg-emerald-700",children:ae?"Updating…":"Change Password"})})]}),(0,b.jsx)("div",{className:"space-y-4",children:G?(0,b.jsx)("div",{className:"space-y-2",children:Array.from({length:2}).map((a,c)=>(0,b.jsx)(g.Skeleton,{className:"h-16 w-full rounded-xl bg-slate-100"},`session-${c}`))}):I?(0,b.jsx)("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:I}):0===E.length?(0,b.jsx)("div",{className:"rounded-xl border border-dashed border-slate-300 bg-slate-50 p-4 text-sm text-slate-600",children:"No active sessions found. Devices will appear here after logging in."}):(0,b.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Active Session"}),(0,b.jsx)("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:ao?.user_agent||"Unknown device"}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:ao?.ip_address?`IP ${ao.ip_address}`:"IP unknown"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[ao?.is_current&&(0,b.jsx)("span",{className:"rounded-full border border-green-200 bg-green-100 px-3 py-1 text-xs font-semibold text-green-700",children:"Current"}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",disabled:ao?.is_current||!ao||ao.is_revoked||K===ao.id,onClick:()=>ao&&av(ao.id),className:"rounded-lg border-slate-300 bg-white text-slate-700 hover:bg-slate-50",children:ao?.is_revoked?"Revoked":K===ao?.id?"Revoking…":"Sign Out"})]})]}),ao?(0,b.jsxs)("div",{className:"mt-3 grid gap-2 text-xs text-slate-500 sm:grid-cols-3",children:[(0,b.jsxs)("span",{children:["Created: ",new Date(ao.created_at).toLocaleString()]}),(0,b.jsxs)("span",{children:["Last seen: ",new Date(ao.last_seen_at).toLocaleString()]}),(0,b.jsxs)("span",{children:["Expires: ",new Date(ao.expires_at).toLocaleString()]})]}):null,E.length>1&&(0,b.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-sm text-slate-600",children:[E.length-1," other session",E.length-1==1?"":"s"]}),(0,b.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>ah(a=>!a),className:"rounded-lg text-slate-600 hover:bg-slate-100",children:ag?"Hide Details":"View Details"})]}),ag&&(0,b.jsx)("div",{className:"mt-4 space-y-3",children:E.map(a=>(0,b.jsxs)("div",{className:`rounded-xl border px-3 py-3 text-sm ${a.is_current?"border-green-200 bg-green-50":"border-slate-200 bg-white"}`,children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold text-slate-900",children:a.user_agent||"Unknown device"}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:a.ip_address?`IP ${a.ip_address}`:"IP unknown"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.is_current&&(0,b.jsx)("span",{className:"rounded-full border border-green-200 bg-green-100 px-2 py-0.5 text-xs font-semibold text-green-700",children:"Current"}),(0,b.jsx)(i.Button,{variant:"ghost",size:"sm",disabled:a.is_current||a.is_revoked||K===a.id,onClick:()=>av(a.id),className:"rounded-lg text-slate-600 hover:bg-slate-100",children:a.is_revoked?"Revoked":K===a.id?"Revoking…":"Revoke"})]})]}),(0,b.jsxs)("div",{className:"mt-2 grid gap-1 text-xs text-slate-500 sm:grid-cols-3",children:[(0,b.jsxs)("span",{children:["Created: ",new Date(a.created_at).toLocaleString()]}),(0,b.jsxs)("span",{children:["Last seen: ",new Date(a.last_seen_at).toLocaleString()]}),(0,b.jsxs)("span",{children:["Expires: ",new Date(a.expires_at).toLocaleString()]})]})]},a.id))})]})})]})]}),(0,b.jsxs)(f.Card,{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(f.CardTitle,{className:"text-slate-900",children:"Activity Log"}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:aw,disabled:O,className:"rounded-lg border-slate-300 bg-white text-slate-700 hover:bg-slate-50",children:"Refresh"})]})}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"Monitor recent sessions, staff updates, and tenant-level actions."}),O?(0,b.jsx)("div",{className:"space-y-2",children:Array.from({length:4}).map((a,c)=>(0,b.jsx)(g.Skeleton,{className:"h-14 w-full rounded-xl bg-slate-100"},`activity-${c}`))}):Q?(0,b.jsx)("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:Q}):0===M.length?(0,b.jsx)("div",{className:"rounded-xl border border-dashed border-slate-300 bg-slate-50 p-4 text-sm text-slate-600",children:"No activity recorded yet. Actions such as staff changes or logins will appear here."}):(0,b.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Latest Event"}),(0,b.jsx)("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:ap?.message}),(0,b.jsxs)("div",{className:"text-xs text-slate-500",children:[ap?.action," • ",ap?new Date(ap.created_at).toLocaleString():""]})]}),(0,b.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>aj(a=>!a),className:"rounded-lg text-slate-600 hover:bg-slate-100",children:ai?"Hide Log":"View Log"})]}),ai&&(0,b.jsx)("ul",{className:"mt-4 space-y-3",children:M.map(a=>(0,b.jsxs)("li",{className:"rounded-xl border border-slate-200 bg-white p-3 text-sm",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,b.jsx)("span",{className:"text-xs font-semibold uppercase text-slate-600",children:a.action}),(0,b.jsx)("span",{className:"text-xs text-slate-500",children:new Date(a.created_at).toLocaleString()})]}),(0,b.jsx)("div",{className:"mt-1 font-semibold text-slate-900",children:a.message}),(0,b.jsxs)("div",{className:"mt-1 space-y-1 text-xs text-slate-500",children:[a.target_type&&(0,b.jsxs)("div",{children:["Target: ",a.target_type,a.target_id?` • ${a.target_id}`:""]}),a.actor_user_id?(0,b.jsxs)("div",{children:["Actor ID: ",a.actor_user_id]}):null,a.metadata?(0,b.jsx)("pre",{className:"whitespace-pre-wrap rounded-lg border border-slate-200 bg-slate-50 p-2 text-xs text-slate-600",children:JSON.stringify(a.metadata,null,2)}):null]})]},a.id))})]})]})]})]})]})})}function o(a){if("undefined"==typeof document)return;let b=document.documentElement,c=window.matchMedia?.("(prefers-color-scheme: dark)").matches??!1,d="dark"===a||"system"===a&&c;b.classList.toggle("dark",d),b.dataset.theme=d?"dark":"light"}}];

//# sourceMappingURL=app_%28dashboard%29_dashboard_owner_settings_page_tsx_b5eac1ae._.js.map