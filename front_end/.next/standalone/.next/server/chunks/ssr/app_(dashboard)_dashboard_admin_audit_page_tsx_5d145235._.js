module.exports=[91645,a=>{"use strict";a.s(["default",()=>i]);var b=a.i(90944),c=a.i(72131),d=a.i(75320),e=a.i(5522),f=a.i(40695),g=a.i(64037);function h({action:a}){return(0,b.jsxs)("span",{className:`px-2 py-1 rounded-full text-xs font-bold inline-flex items-center gap-1 whitespace-nowrap ${a.includes("create")||a.includes("register")?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200":a.includes("delete")||a.includes("reject")?"bg-gradient-to-r from-red-100 to-pink-100 text-red-800 border border-red-200":a.includes("update")||a.includes("approve")?"bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-800 border border-blue-200":a.includes("verify")||a.includes("payment")?"bg-gradient-to-r from-purple-100 to-indigo-100 text-purple-800 border border-purple-200":"bg-gradient-to-r from-gray-100 to-slate-100 text-gray-800 border border-gray-200"}`,title:a,children:[(0,b.jsx)("span",{className:"text-xs",children:a.includes("create")||a.includes("register")?"âœ¨":a.includes("delete")||a.includes("reject")?"ðŸ—‘ï¸":a.includes("update")||a.includes("approve")?"âœ…":a.includes("verify")||a.includes("payment")?"ðŸ’³":"âš¡"}),(0,b.jsx)("span",{children:a})]})}function i(){let{show:a}=(0,g.useToast)(),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)("50");async function u(){j(!0);try{let a=Math.max(1,Math.min(200,Number(s)||50)),b=await (d.AdminAPI.audit||d.AdminAPI.getAuditLogs||(()=>[]))({tenant_id:o||void 0,action:q||void 0,limit:a});n(b||[]),l(null)}catch(b){l(b.message||"Failed to load audit"),a({variant:"destructive",title:"Error",description:b.message})}finally{j(!1)}}return(0,c.useEffect)(()=>{u()},[]),(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-4 sm:p-6",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,b.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-6",children:[(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-white text-xl",children:"ðŸ“‹"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-blue-800 bg-clip-text text-transparent",children:"Audit Trail"}),(0,b.jsx)("p",{className:"text-gray-600 text-sm",children:"Track all system activities and changes"})]})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-3 bg-gray-50 p-3 rounded-xl",children:[(0,b.jsx)(e.Input,{placeholder:"ðŸ¢ Tenant",value:o,onChange:a=>p(a.target.value),className:"w-32 text-sm text-gray-900 bg-white border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-200 rounded-lg"}),(0,b.jsx)(e.Input,{placeholder:"âš¡ Action",value:q,onChange:a=>r(a.target.value),className:"w-28 text-sm text-gray-900 bg-white border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-200 rounded-lg"}),(0,b.jsx)(e.Input,{placeholder:"ðŸ“Š Limit",value:s,onChange:a=>t(a.target.value),className:"w-20 text-sm text-gray-900 bg-white border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-200 rounded-lg"}),(0,b.jsx)(f.Button,{onClick:u,className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 font-semibold text-sm",children:"ðŸ” Filter"})]})]})}),i?(0,b.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-16",children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200"}),(0,b.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-blue-600 absolute top-0 left-0"})]}),(0,b.jsx)("div",{className:"text-gray-600 font-medium",children:"Loading audit data..."})]})}):k?(0,b.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-red-200 p-8",children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-red-600 text-2xl",children:"âš ï¸"})}),(0,b.jsx)("div",{className:"text-red-600 font-semibold text-lg",children:"Error Loading Data"}),(0,b.jsx)("div",{className:"text-red-500 text-center",children:k}),(0,b.jsx)(f.Button,{onClick:u,className:"bg-red-600 hover:bg-red-700 text-white",children:"Try Again"})]})}):(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[(0,b.jsx)("div",{className:"overflow-x-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:(0,b.jsxs)("table",{className:"w-full table-fixed",children:[(0,b.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-blue-50 border-b-2 border-blue-100",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"w-20 px-2 py-4 text-left text-xs font-bold text-gray-700 uppercase",children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"text-blue-600",children:"#"}),"ID"]})}),(0,b.jsx)("th",{className:"w-40 px-2 py-4 text-left text-xs font-bold text-gray-700 uppercase",children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"text-green-600",children:"ðŸ•’"}),"Time"]})}),(0,b.jsx)("th",{className:"w-32 px-2 py-4 text-left text-xs font-bold text-gray-700 uppercase",children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"text-blue-600",children:"ðŸ¢"}),"Tenant"]})}),(0,b.jsx)("th",{className:"w-24 px-2 py-4 text-left text-xs font-bold text-gray-700 uppercase",children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"text-purple-600",children:"ðŸ‘¤"}),"Actor"]})}),(0,b.jsx)("th",{className:"w-40 px-2 py-4 text-left text-xs font-bold text-gray-700 uppercase",children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"text-orange-600",children:"âš¡"}),"Action"]})}),(0,b.jsx)("th",{className:"w-32 px-2 py-4 text-left text-xs font-bold text-gray-700 uppercase",children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"text-red-600",children:"ðŸŽ¯"}),"Target"]})}),(0,b.jsx)("th",{className:"w-28 px-2 py-4 text-left text-xs font-bold text-gray-700 uppercase",children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"text-indigo-600",children:"ðŸ“„"}),"Details"]})})]})}),(0,b.jsxs)("tbody",{className:"divide-y divide-gray-100",children:[m.map((a,c)=>(0,b.jsxs)("tr",{className:`transition-all duration-200 hover:bg-blue-50 hover:shadow-sm ${c%2==0?"bg-white":"bg-gray-50/50"}`,children:[(0,b.jsx)("td",{className:"px-2 py-4",children:(0,b.jsx)("span",{className:"font-mono text-xs bg-gradient-to-r from-gray-100 to-gray-200 text-gray-800 px-2 py-1 rounded font-semibold",children:a.id})}),(0,b.jsx)("td",{className:"px-2 py-4",children:(0,b.jsx)("div",{className:"text-xs text-gray-900 font-medium whitespace-nowrap",children:function(a){if(!a)return"-";try{return new Date(a).toLocaleString(void 0,{dateStyle:"short",timeStyle:"medium"})}catch(b){return a}}(a.created_at)})}),(0,b.jsx)("td",{className:"px-2 py-4",children:a.tenant_id?(0,b.jsx)("span",{className:"font-mono text-xs bg-gradient-to-r from-blue-100 to-blue-200 text-blue-800 px-2 py-1 rounded font-semibold break-all",title:a.tenant_id,children:a.tenant_id}):(0,b.jsx)("span",{className:"text-gray-400 italic text-xs",children:"-"})}),(0,b.jsx)("td",{className:"px-2 py-4",children:a.actor_user_id?(0,b.jsxs)("span",{className:"font-mono text-xs bg-gradient-to-r from-purple-100 to-purple-200 text-purple-800 px-2 py-1 rounded font-semibold",children:["#",a.actor_user_id]}):(0,b.jsx)("span",{className:"text-gray-500 bg-gray-100 px-2 py-1 rounded text-xs font-medium",children:"System"})}),(0,b.jsx)("td",{className:"px-2 py-4",children:(0,b.jsx)(h,{action:a.action})}),(0,b.jsx)("td",{className:"px-2 py-4",children:a.target_type?(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"text-gray-700 font-medium text-xs",children:a.target_type}),a.target_id&&(0,b.jsxs)("div",{className:"font-mono text-xs bg-gray-200 text-gray-700 px-2 py-0.5 rounded font-semibold inline-block",children:["#",a.target_id]})]}):(0,b.jsx)("span",{className:"text-gray-400 italic text-xs",children:"-"})}),(0,b.jsx)("td",{className:"px-2 py-4 relative",children:a.metadata&&Object.keys(a.metadata).length>0?(0,b.jsxs)("details",{className:"cursor-pointer group",children:[(0,b.jsx)("summary",{className:"text-xs text-blue-600 hover:text-blue-800 font-semibold bg-blue-50 hover:bg-blue-100 px-2 py-1 rounded transition-colors duration-200 inline-block list-none",children:"ðŸ“„ View"}),(0,b.jsx)("div",{className:"absolute z-20 right-0 mt-2 p-3 bg-white rounded-lg border border-gray-200 shadow-xl max-w-md",children:(0,b.jsx)("pre",{className:"text-xs text-gray-700 overflow-auto max-h-60 whitespace-pre-wrap",children:JSON.stringify(a.metadata,null,2)})})]}):(0,b.jsx)("span",{className:"text-xs text-gray-400 italic",children:"No data"})})]},a.id)),0===m.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{className:"px-6 py-20 text-center",colSpan:7,children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,b.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-4xl",children:"ðŸ“‹"})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"text-xl font-bold text-gray-700",children:"No audit events found"}),(0,b.jsx)("div",{className:"text-gray-500",children:"Try adjusting your filters or check back later"})]}),(0,b.jsx)(f.Button,{onClick:u,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"ðŸ”„ Refresh"})]})})})]})]})}),m.length>0&&(0,b.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 px-6 py-4 border-t border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-600 font-medium",children:["ðŸ“Š Showing ",(0,b.jsx)("span",{className:"font-bold text-blue-600",children:m.length})," events"]}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Limited to ",s," results"]})]})})]})]})})}}];

//# sourceMappingURL=app_%28dashboard%29_dashboard_admin_audit_page_tsx_5d145235._.js.map