module.exports=[33129,a=>{"use strict";a.s(["default",()=>s],33129);var b=a.i(90944),c=a.i(72131),d=a.i(75320),e=a.i(3130),f=a.i(40695),g=a.i(50463),h=a.i(54161),i=a.i(21958),j=a.i(187),k=a.i(97895);let l=(0,j.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function m({className:a,variant:c,...d}){return(0,b.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,k.cn)(l({variant:c}),a),...d})}function n({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-title",className:(0,k.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",a),...c})}function o({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-description",className:(0,k.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...c})}var p=a.i(64037);let q=[{key:"paid",title:"Active (Paid)",description:"Fully onboarded pharmacies with verified payments."},{key:"free_trial",title:"Free Trial",description:"Tenants still within their free-trial window.",tone:"info"},{key:"payment_pending",title:"Payment Under Review",description:"Submitted payment codes awaiting admin verification.",tone:"warning"},{key:"unpaid",title:"Awaiting Payment",description:"Approved KYC but no payment received yet.",tone:"warning"},{key:"blocked",title:"Blocked",description:"Access suspended due to missing or rejected payments.",tone:"danger"},{key:"onboarding",title:"Onboarding",description:"KYC still pending approval.",tone:"info"}];function r(a,b){if(!b)return null;let c=new Date(b);return Number.isNaN(c.getTime())?`${a}: ${b}`:`${a}: ${c.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}`}function s(){let{show:a}=(0,p.useToast)(),[e,f]=(0,c.useState)(!0),[h,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(null),[r,s]=(0,c.useState)("paid");(0,c.useEffect)(()=>{let b=!0;return async function(){f(!0);try{let a=await d.AdminAPI.pharmacySummary();if(!b)return;l(a),j(null)}catch(d){if(!b)return;let c=d?.message||"Failed to load pharmacy summary";j(c),a({variant:"destructive",title:"Error",description:c})}finally{b&&f(!1)}}(),()=>{b=!1}},[a]);let w=(0,c.useMemo)(()=>{let a=new Map;return q.forEach(b=>a.set(b.key,[])),k?.items.forEach(b=>{let c=a.get(b.status)||[];c.push(b),a.set(b.status,c)}),a},[k]);return e?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(g.Skeleton,{className:"h-8 w-56"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Array.from({length:6}).map((a,c)=>(0,b.jsx)(g.Skeleton,{className:"h-32"},c))})]}):h?(0,b.jsxs)(m,{variant:"destructive",children:[(0,b.jsx)(n,{children:"Error"}),(0,b.jsx)(o,{children:h})]}):k?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,b.jsxs)("div",{className:"mx-auto max-w-7xl space-y-8",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Pharmacy Segments"}),(0,b.jsx)("p",{className:"mt-2 text-slate-600",children:"Track every tenant across onboarding, payment, and retention states. Use these segments to drive outreach and support."})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[(0,b.jsx)(t,{label:"Total Pharmacies",value:k.totals.total}),(0,b.jsx)(t,{label:"Active (Paid)",value:k.totals.paid,tone:"success"}),(0,b.jsx)(t,{label:"Free Trial",value:k.totals.free_trial,tone:"info"}),(0,b.jsx)(t,{label:"Payment Pending",value:k.totals.payment_pending,tone:"warning"}),(0,b.jsx)(t,{label:"Awaiting Payment",value:k.totals.unpaid,tone:"muted"}),(0,b.jsx)(t,{label:"Blocked",value:k.totals.blocked,tone:"danger"}),(0,b.jsx)(t,{label:"Onboarding",value:k.totals.onboarding,tone:"info"})]}),(0,b.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:(0,b.jsxs)(i.Tabs,{value:r,onValueChange:a=>s(a),className:"p-6",children:[(0,b.jsx)(i.TabsList,{className:"mb-8 flex flex-wrap gap-3 bg-transparent p-0 h-auto",children:q.map(a=>{let c=w.get(a.key)?.length||0,d=r===a.key;return(0,b.jsxs)(i.TabsTrigger,{value:a.key,className:`inline-flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all border-0 ${d?"bg-emerald-600 text-white data-[state=active]:bg-emerald-600 data-[state=active]:text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[a.title,(0,b.jsx)("span",{className:`inline-flex items-center justify-center rounded-full px-2 py-0.5 text-xs font-medium ${d?"bg-emerald-500 text-white":"bg-white text-slate-600"}`,children:c})]},a.key)})}),q.map(a=>{let c=w.get(a.key)||[];return(0,b.jsxs)(i.TabsContent,{value:a.key,className:"space-y-6",children:[(0,b.jsx)(u,{segment:a,count:c.length}),0===c.length?(0,b.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-12 text-center",children:[(0,b.jsx)("div",{className:"text-slate-400 mb-4",children:(0,b.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,b.jsx)("h3",{className:"text-lg font-medium text-slate-900 mb-1",children:"No pharmacies found"}),(0,b.jsx)("p",{className:"text-slate-500",children:"No pharmacies found in this segment."})]}):(0,b.jsx)("div",{className:"grid gap-4 lg:grid-cols-2 xl:grid-cols-3",children:c.map(a=>(0,b.jsx)(v,{item:a},a.tenant_id))})]},a.key)})]})})]})}):(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"No data available."})}function t({label:a,value:c,tone:d="default"}){return(0,b.jsxs)(e.Card,{className:`${{default:"border-slate-200 bg-white",success:"border-emerald-200 bg-emerald-50",warning:"border-amber-200 bg-amber-50",danger:"border-red-200 bg-red-50",info:"border-blue-200 bg-blue-50",muted:"border-slate-200 bg-slate-50"}[d]} shadow-sm`,children:[(0,b.jsx)(e.CardHeader,{className:"pb-2",children:(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium text-slate-600",children:a})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:`text-3xl font-bold ${{default:"text-slate-900",success:"text-emerald-900",warning:"text-amber-900",danger:"text-red-900",info:"text-blue-900",muted:"text-slate-700"}[d]}`,children:c.toLocaleString()})})]})}function u({segment:a,count:c}){let d="danger"===a.tone?"bg-red-100 text-red-700 border-red-200":"warning"===a.tone?"bg-amber-100 text-amber-700 border-amber-200":"info"===a.tone?"bg-blue-100 text-blue-700 border-blue-200":"bg-slate-100 text-slate-700 border-slate-200";return(0,b.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between border-b border-slate-200 pb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-slate-900 flex items-center gap-3",children:[a.title,(0,b.jsx)("span",{className:`inline-flex items-center rounded-full border px-2.5 py-0.5 text-sm font-medium ${d}`,children:c})]}),(0,b.jsx)("p",{className:"text-slate-600 mt-1",children:a.description})]}),(0,b.jsx)(f.Button,{variant:"outline",size:"sm",className:"rounded-lg border-slate-300 bg-white text-slate-700 hover:bg-slate-50",children:"Export Segment"})]})}function v({item:a}){return(0,b.jsxs)(e.Card,{className:"border-slate-200 bg-white shadow-sm hover:shadow-md transition-shadow",children:[(0,b.jsxs)(e.CardHeader,{className:"pb-3",children:[(0,b.jsx)(e.CardTitle,{className:"text-lg font-semibold text-slate-900",children:a.name||a.tenant_id}),(0,b.jsx)("p",{className:"text-sm text-slate-500 font-mono bg-slate-100 rounded px-2 py-1 inline-block",children:a.tenant_id})]}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-slate-900",children:a.branch_count}),(0,b.jsx)("div",{className:"text-sm text-slate-600",children:"Branches"})]}),(0,b.jsxs)("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-slate-900",children:a.user_count}),(0,b.jsx)("div",{className:"text-sm text-slate-600",children:"Users"})]})]}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[r("Trial ends",a.trial_ends_at)&&(0,b.jsx)("div",{className:"text-slate-600",children:r("Trial ends",a.trial_ends_at)}),r("Last payment",a.last_payment_verified_at)&&(0,b.jsx)("div",{className:"text-emerald-700 bg-emerald-50 rounded px-2 py-1",children:r("Last payment",a.last_payment_verified_at)}),r("Payment submitted",a.pending_payment_submitted_at)&&(0,b.jsx)("div",{className:"text-amber-700 bg-amber-50 rounded px-2 py-1",children:r("Payment submitted",a.pending_payment_submitted_at)})]}),(0,b.jsx)("div",{children:(0,b.jsx)(h.Badge,{variant:"outline",className:"bg-slate-100 text-slate-700 border-slate-300 font-medium",children:a.status_label})}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{size:"sm",className:"flex-1 bg-emerald-600 text-white hover:bg-emerald-700",children:"Open Details"}),(0,b.jsx)(f.Button,{size:"sm",variant:"outline",className:"flex-1 border-slate-300 text-slate-700 hover:bg-slate-50",children:"Message Owner"})]})]})]})}}];

//# sourceMappingURL=app_%28dashboard%29_dashboard_admin_segments_page_tsx_87f3385c._.js.map