{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/gugu-gaga-/front_end/components/ui/skeleton.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\n\r\nexport function Skeleton({ className = \"\" }: { className?: string }) {\r\n  return <div className={`animate-pulse bg-gray-200 rounded ${className}`} />;\r\n}\r\n\r\nexport function TableSkeletonRows({ rows = 6, cols = 6 }: { rows?: number; cols?: number }) {\r\n  return (\r\n    <tbody>\r\n      {Array.from({ length: rows }).map((_, r) => (\r\n        <tr key={r} className=\"border-t\">\r\n          {Array.from({ length: cols }).map((__, c) => (\r\n            <td key={c} className=\"px-3 py-2\">\r\n              <Skeleton className=\"h-4 w-full\" />\r\n            </td>\r\n          ))}\r\n        </tr>\r\n      ))}\r\n    </tbody>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;;AAGO,SAAS,SAAS,KAA0C;QAA1C,EAAE,YAAY,EAAE,EAA0B,GAA1C;IACvB,qBAAO,6LAAC;QAAI,WAAW,AAAC,qCAA8C,OAAV;;;;;;AAC9D;KAFgB;AAIT,SAAS,kBAAkB,KAAwD;QAAxD,EAAE,OAAO,CAAC,EAAE,OAAO,CAAC,EAAoC,GAAxD;IAChC,qBACE,6LAAC;kBACE,MAAM,IAAI,CAAC;YAAE,QAAQ;QAAK,GAAG,GAAG,CAAC,CAAC,GAAG,kBACpC,6LAAC;gBAAW,WAAU;0BACnB,MAAM,IAAI,CAAC;oBAAE,QAAQ;gBAAK,GAAG,GAAG,CAAC,CAAC,IAAI,kBACrC,6LAAC;wBAAW,WAAU;kCACpB,cAAA,6LAAC;4BAAS,WAAU;;;;;;uBADb;;;;;eAFJ;;;;;;;;;;AAUjB;MAdgB","debugId":null}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/gugu-gaga-/front_end/app/%28dashboard%29/dashboard/admin/page.tsx"],"sourcesContent":["\"use client\";\nimport React, { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport { AdminAPI } from \"@/utils/api\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/components/ui/toast\";\n\ninterface PharmaciesResponse {\n  total: number;\n  items: Array<{ tenant_id: string; name: string; kyc_status?: string | null; subscription?: { blocked?: boolean | null } }>;\n}\n\ninterface AffiliatesResponse {\n  total: number;\n  items: Array<{ user_id: number; email: string; referrals: number; payouts?: { pending_total?: number; paid_total?: number } }>;\n}\n\ninterface PayoutRow {\n  id: number;\n  status: string;\n  amount: number;\n  month: string;\n}\n\nexport default function AdminOverviewPage() {\n  const { show } = useToast();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [pharmacies, setPharmacies] = useState<PharmaciesResponse | null>(null);\n  const [affiliates, setAffiliates] = useState<AffiliatesResponse | null>(null);\n  const [payouts, setPayouts] = useState<PayoutRow[]>([]);\n\n  useEffect(() => {\n    let active = true;\n    async function load() {\n      setLoading(true);\n      try {\n        const [ph, af, pay] = await Promise.all([\n          AdminAPI.pharmacies(1, 5),\n          AdminAPI.affiliates(1, 5),\n          AdminAPI.listAffiliatePayouts(\"pending\"),\n        ]);\n        if (!active) return;\n        setPharmacies(ph as PharmaciesResponse);\n        setAffiliates(af as AffiliatesResponse);\n        setPayouts(Array.isArray(pay) ? (pay as PayoutRow[]) : []);\n        setError(null);\n      } catch (e: any) {\n        if (!active) return;\n        const msg = e?.message || \"Failed to load admin overview\";\n        setError(msg);\n        show({ variant: \"destructive\", title: \"Error\", description: msg });\n      } finally {\n        if (active) setLoading(false);\n      }\n    }\n    load();\n    return () => {\n      active = false;\n    };\n  }, [show]);\n\n  const metrics = {\n    pharmacies: pharmacies?.total ?? 0,\n    affiliates: affiliates?.total ?? 0,\n    payoutQueue: payouts.filter((p) => p.status === \"pending\").length,\n    blockedTenants: (pharmacies?.items || []).filter((p) => p.subscription?.blocked).length,\n  };\n\n  if (loading) {\n    return (\n      <div className=\"space-y-4\">\n        <Skeleton className=\"h-8 w-48\" />\n        <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4\">\n          {Array.from({ length: 4 }).map((_, idx) => (\n            <Skeleton key={idx} className=\"h-24\" />\n          ))}\n        </div>\n        <Skeleton className=\"h-64\" />\n      </div>\n    );\n  }\n\n  if (error) {\n    return <div className=\"text-sm text-red-600\">{error}</div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-xl font-semibold\">Admin Overview</h1>\n          <p className=\"text-sm text-gray-500\">At-a-glance snapshot of tenants, affiliates, and payouts.</p>\n        </div>\n        <Button variant=\"outline\" onClick={() => location.reload()}>Refresh</Button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4\">\n        <SummaryCard title=\"Total Pharmacies\" value={metrics.pharmacies} href=\"/dashboard/admin/pharmacies\" />\n        <SummaryCard title=\"Total Affiliates\" value={metrics.affiliates} href=\"/dashboard/admin/affiliates\" />\n        <SummaryCard title=\"Pending Payouts\" value={metrics.payoutQueue} href=\"/dashboard/admin/payouts\" />\n        <SummaryCard title=\"Blocked Tenants\" value={metrics.blockedTenants} href=\"/dashboard/admin/pharmacies\" />\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n        <section className=\"border rounded bg-white\">\n          <header className=\"p-3 border-b flex items-center justify-between\">\n            <div className=\"font-medium\">Recently Registered Pharmacies</div>\n            <Link href=\"/dashboard/admin/pharmacies\" className=\"text-xs text-emerald-600 underline\">View all</Link>\n          </header>\n          <div className=\"divide-y\">\n            {(pharmacies?.items || []).length === 0 ? (\n              <div className=\"p-4 text-sm text-gray-500\">No pharmacies yet.</div>\n            ) : (\n              pharmacies!.items.map((p) => (\n                <div key={p.tenant_id} className=\"p-3\">\n                  <div className=\"font-medium text-sm\">{p.name}</div>\n                  <div className=\"text-xs text-gray-500 flex gap-3 mt-1\">\n                    <span>KYC: {p.kyc_status ?? \"pending\"}</span>\n                    <span>Status: {p.subscription?.blocked ? \"Blocked\" : \"Active\"}</span>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </section>\n\n        <section className=\"border rounded bg-white\">\n          <header className=\"p-3 border-b flex items-center justify-between\">\n            <div className=\"font-medium\">Active Affiliates</div>\n            <Link href=\"/dashboard/admin/affiliates\" className=\"text-xs text-emerald-600 underline\">Manage</Link>\n          </header>\n          <div className=\"divide-y\">\n            {(affiliates?.items || []).length === 0 ? (\n              <div className=\"p-4 text-sm text-gray-500\">No affiliates yet.</div>\n            ) : (\n              affiliates!.items.map((a) => (\n                <div key={a.user_id} className=\"p-3\">\n                  <div className=\"font-medium text-sm\">{a.email}</div>\n                  <div className=\"text-xs text-gray-500 flex gap-3 mt-1\">\n                    <span>Referrals: {a.referrals}</span>\n                    <span>Pending ${a.payouts?.pending_total?.toFixed?.(2) ?? \"0.00\"}</span>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </section>\n      </div>\n    </div>\n  );\n}\n\nfunction SummaryCard({ title, value, href }: { title: string; value: number; href: string }) {\n  return (\n    <Link href={href} className=\"border rounded bg-white p-4 block hover:shadow-sm transition\">\n      <div className=\"text-xs uppercase tracking-wide text-gray-500\">{title}</div>\n      <div className=\"text-3xl font-semibold mt-2\">{value}</div>\n    </Link>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}