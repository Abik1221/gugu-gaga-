{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/b/gugu-gaga-/front_end/utils/api.ts"],"sourcesContent":["export const API_BASE = process.env.NEXT_PUBLIC_API_BASE || \"http://13.61.24.25:8000/api/v1\";\r\nexport const TENANT_HEADER =\r\n  process.env.NEXT_PUBLIC_TENANT_HEADER || \"X-Tenant-ID\";\r\n\r\nconst API_BASE_NORMALIZED = API_BASE.replace(/\\/+$/, \"\");\r\nlet API_BASE_PATH = \"\";\r\ntry {\r\n  const parsed = new URL(API_BASE_NORMALIZED);\r\n  API_BASE_PATH = parsed.pathname.replace(/^\\/+/, \"\").replace(/\\/+$/, \"\");\r\n} catch {\r\n  API_BASE_PATH = \"\";\r\n}\r\n\r\nfunction buildHeaders(\r\n  initHeaders?: HeadersInit,\r\n  tenantId?: string\r\n): HeadersInit {\r\n  const headers: Record<string, string> = {\r\n    'X-Content-Type-Options': 'nosniff',\r\n    'X-Frame-Options': 'DENY',\r\n    'X-XSS-Protection': '1; mode=block',\r\n    ...(initHeaders as Record<string, string>),\r\n  };\r\n  if (tenantId) headers[TENANT_HEADER] = tenantId;\r\n  return headers;\r\n}\r\n\r\nfunction resolveApiUrl(path: string): string {\r\n  if (/^https?:\\/\\//i.test(path)) {\r\n    return path;\r\n  }\r\n\r\n  if (path.startsWith(\"?\") || path.startsWith(\"#\")) {\r\n    return `${API_BASE_NORMALIZED}${path}`;\r\n  }\r\n\r\n  const normalizedPath = path.replace(/^\\/+/, \"\");\r\n  let relativePath = normalizedPath;\r\n\r\n\r\n  if (API_BASE_PATH) {\r\n    const prefix = `${API_BASE_PATH}/`;\r\n    if (relativePath.startsWith(prefix)) {\r\n      relativePath = relativePath.slice(prefix.length);\r\n    } else if (relativePath === API_BASE_PATH) {\r\n      relativePath = \"\";\r\n    }\r\n  }\r\n\r\n  if (!relativePath) {\r\n    return API_BASE_NORMALIZED;\r\n  }\r\n\r\n  return `${API_BASE_NORMALIZED}/${relativePath}`;\r\n}\r\n\r\nexport async function postForm<T = any>(\r\n  path: string,\r\n  data: Record<string, string>,\r\n  tenantId?: string\r\n): Promise<T> {\r\n  const body = new URLSearchParams(data);\r\n  \r\n  try {\r\n    const res = await fetch(resolveApiUrl(path), {\r\n      method: \"POST\",\r\n      headers: buildHeaders(\r\n        { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n        tenantId\r\n      ),\r\n      body,\r\n    });\r\n\r\n    if (!res.ok) {\r\n      let parsed: any = null;\r\n      try {\r\n        parsed = await res.json();\r\n      } catch {\r\n        parsed = await res.text().catch(() => null);\r\n      }\r\n\r\n      let msg = \"\";\r\n      if (!parsed) msg = `Request failed with ${res.status}`;\r\n      else if (typeof parsed === \"string\") msg = parsed;\r\n      else if (Array.isArray(parsed)) msg = parsed.join(\", \");\r\n      else if (parsed?.detail) msg = parsed.detail;\r\n      else if (parsed?.message) msg = parsed.message;\r\n      else if (parsed?.error) msg = parsed.error;\r\n      else if (parsed?.errors) {\r\n        msg = Object.keys(parsed.errors)\r\n          .map(\r\n            (k) =>\r\n              `${k}: ${Array.isArray(parsed.errors[k])\r\n                ? parsed.errors[k].join(\", \")\r\n                : parsed.errors[k]\r\n              }`\r\n          )\r\n          .join(\" | \");\r\n      } else msg = JSON.stringify(parsed);\r\n\r\n      const err: any = new Error(msg || `Request failed with ${res.status}`);\r\n      err.status = res.status;\r\n      err.body = parsed;\r\n      console.error(\"[postForm] failed\", { path, status: res.status, parsed });\r\n      throw err;\r\n    }\r\n\r\n    return (await res.json()) as T;\r\n  } catch (error: any) {\r\n    // Handle network errors\r\n    if (error.name === 'TypeError' && error.message.includes('fetch')) {\r\n      console.error('[postForm] Network error:', error);\r\n      const networkError: any = new Error('Network error - please check your connection and try again');\r\n      networkError.name = 'NetworkError';\r\n      networkError.original = error;\r\n      throw networkError;\r\n    }\r\n    // Re-throw errors that already have status (HTTP errors)\r\n    if (error.status) {\r\n      throw error;\r\n    }\r\n    // Handle other network/connection errors\r\n    if (error.message.includes('Failed to fetch') || error.message.includes('NetworkError')) {\r\n      const networkError: any = new Error('Network error - please check your connection and try again');\r\n      networkError.name = 'NetworkError';\r\n      networkError.original = error;\r\n      throw networkError;\r\n    }\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport async function postJSON<T = any>(\r\n  path: string,\r\n  body: any,\r\n  tenantId?: string\r\n): Promise<T> {\r\n  const requestInit = {\r\n    method: \"POST\",\r\n    headers: buildHeaders({ \"Content-Type\": \"application/json\" }, tenantId),\r\n    body: JSON.stringify(body),\r\n  } satisfies RequestInit;\r\n\r\n  try {\r\n    const res = await fetch(resolveApiUrl(path), requestInit);\r\n\r\n    if (!res.ok) {\r\n      let parsed: any = null;\r\n      let message = \"\";\r\n      try {\r\n        parsed = await res.json();\r\n        if (typeof parsed === \"string\") message = parsed;\r\n        else if (Array.isArray(parsed)) message = parsed.join(\", \");\r\n        else message = parsed?.error || parsed?.detail || parsed?.message || \"\";\r\n        if (!message && parsed) message = JSON.stringify(parsed);\r\n      } catch {\r\n        parsed = null;\r\n        message = await res.text().catch(() => \"\");\r\n      }\r\n\r\n      const error: any = new Error(message || `Request failed with ${res.status}`);\r\n      error.status = res.status;\r\n      if (parsed !== null) error.body = parsed;\r\n      throw error;\r\n    }\r\n\r\n    return (await res.json()) as T;\r\n  } catch (error: any) {\r\n    // Handle network errors\r\n    if (error.name === 'TypeError' && error.message.includes('fetch')) {\r\n      const networkError: any = new Error('Network error - please check your connection and try again');\r\n      networkError.name = 'NetworkError';\r\n      networkError.original = error;\r\n      throw networkError;\r\n    }\r\n    // Re-throw errors that already have status (HTTP errors)\r\n    if (error.status) {\r\n      throw error;\r\n    }\r\n    // Handle other network/connection errors\r\n    if (error.message.includes('Failed to fetch') || error.message.includes('NetworkError')) {\r\n      const networkError: any = new Error('Network error - please check your connection and try again');\r\n      networkError.name = 'NetworkError';\r\n      networkError.original = error;\r\n      throw networkError;\r\n    }\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport async function putAuthJSON<T = any>(\r\n  path: string,\r\n  bodyData: any,\r\n  tenantId?: string\r\n): Promise<T> {\r\n  const res = await authFetch(\r\n    path,\r\n    {\r\n      method: \"PUT\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(bodyData),\r\n    },\r\n    true,\r\n    tenantId\r\n  );\r\n\r\n  if (!res.ok) {\r\n    const text = await res.text().catch(() => \"\");\r\n    throw new Error(text || `Request failed with ${res.status}`);\r\n  }\r\n\r\n  return (await res.json()) as T;\r\n}\r\n\r\nexport async function postMultipart<T = any>(\r\n  path: string,\r\n  formData: FormData,\r\n  tenantId?: string\r\n): Promise<T> {\r\n  const res = await fetch(resolveApiUrl(path), {\r\n    method: \"POST\",\r\n    headers: buildHeaders(undefined, tenantId),\r\n    body: formData,\r\n  });\r\n\r\n  if (!res.ok) {\r\n    try {\r\n      const data = await res.json();\r\n      const msg = data?.error || data?.detail || JSON.stringify(data);\r\n      throw new Error(msg || `Request failed with ${res.status}`);\r\n    } catch {\r\n      throw new Error(`Request failed with ${res.status}`);\r\n    }\r\n  }\r\n\r\n  return (await res.json()) as T;\r\n}\r\n\r\nexport function getAccessToken(): string | null {\r\n  if (typeof window === \"undefined\") return null;\r\n  return localStorage.getItem(\"access_token\") || localStorage.getItem(\"token\");\r\n}\r\n\r\n// Enhanced token management with security\r\nexport function setTokens(accessToken: string, refreshToken: string): void {\r\n  if (typeof window === \"undefined\") return;\r\n  localStorage.setItem(\"access_token\", accessToken);\r\n  localStorage.setItem(\"refresh_token\", refreshToken);\r\n}\r\n\r\nexport function clearTokens(): void {\r\n  if (typeof window === \"undefined\") return;\r\n  const keysToRemove = ['access_token', 'refresh_token', 'token', 'user_role'];\r\n  keysToRemove.forEach(key => localStorage.removeItem(key));\r\n}\r\n\r\n\r\n\r\nfunction getRefreshToken(): string | null {\r\n  if (typeof window === \"undefined\") return null;\r\n  return localStorage.getItem(\"refresh_token\");\r\n}\r\n\r\nasync function refreshTokens(): Promise<boolean> {\r\n  const rt = getRefreshToken();\r\n  if (!rt) return false;\r\n  const res = await fetch(resolveApiUrl(\"/api/v1/auth/refresh\"), {\r\n    method: \"POST\",\r\n    headers: buildHeaders({ \"Content-Type\": \"application/json\" }),\r\n    body: JSON.stringify({ refresh_token: rt }),\r\n  });\r\n  if (!res.ok) {\r\n    return false;\r\n  }\r\n  try {\r\n    const data = (await res.json()) as {\r\n      access_token: string;\r\n      refresh_token: string;\r\n    };\r\n    if (typeof window !== \"undefined\") {\r\n      setTokens(data.access_token, data.refresh_token);\r\n    }\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport async function authFetch<T>(\r\n  path: string,\r\n  init?: RequestInit,\r\n  retry = true,\r\n  tenantId?: string\r\n): Promise<Response> {\r\n  const token = getAccessToken();\r\n  const headers: HeadersInit = buildHeaders(\r\n    {\r\n      ...(init?.headers || {}),\r\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n    },\r\n    tenantId\r\n  );\r\n  let res = await fetch(resolveApiUrl(path), { ...(init || {}), headers });\r\n\r\n  if (res.status === 401 && retry) {\r\n    const ok = await refreshTokens();\r\n    if (ok) {\r\n      const newToken = getAccessToken();\r\n      const retryHeaders: HeadersInit = buildHeaders(\r\n        {\r\n          ...(init?.headers || {}),\r\n          ...(newToken ? { Authorization: `Bearer ${newToken}` } : {}),\r\n        },\r\n        tenantId\r\n      );\r\n      res = await fetch(resolveApiUrl(path), {\r\n        ...(init || {}),\r\n        headers: retryHeaders,\r\n      });\r\n    }\r\n  }\r\n\r\n  return res;\r\n}\r\n\r\nexport async function getAuthJSON<T = any>(\r\n  path: string,\r\n  tenantId?: string\r\n): Promise<T> {\r\n  const res = await authFetch(path, undefined, true, tenantId);\r\n  if (!res.ok) {\r\n    const data = await res.text().catch(() => \"\");\r\n    throw new Error(data || `Request failed with ${res.status}`);\r\n  }\r\n  return (await res.json()) as T;\r\n}\r\n\r\nexport async function postAuthJSON<T = any>(\r\n  path: string,\r\n  bodyData: any,\r\n  tenantId?: string\r\n): Promise<T> {\r\n  const res = await authFetch(\r\n    path,\r\n    {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(bodyData),\r\n    },\r\n    true,\r\n    tenantId\r\n  );\r\n\r\n  if (!res.ok) {\r\n    const data = await res.text().catch(() => \"\");\r\n    throw new Error(data || `Request failed with ${res.status}`);\r\n  }\r\n\r\n  return (await res.json()) as T;\r\n}\r\n\r\nexport async function deleteAuthJSON(\r\n  path: string,\r\n  tenantId?: string\r\n): Promise<void> {\r\n  const res = await authFetch(\r\n    path,\r\n    {\r\n      method: \"DELETE\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    },\r\n    true,\r\n    tenantId\r\n  );\r\n\r\n  if (!res.ok) {\r\n    const data = await res.text().catch(() => \"\");\r\n    throw new Error(data || `Request failed with ${res.status}`);\r\n  }\r\n\r\n  // For DELETE requests, we might not have a response body\r\n  try {\r\n    return await res.json();\r\n  } catch {\r\n    return undefined;\r\n  }\r\n}\r\n\r\n// ----------------- AuthAPI -----------------\r\nexport type AuthProfile = {\r\n  id: number;\r\n  email: string;\r\n  username?: string | null;\r\n  first_name?: string | null;\r\n  last_name?: string | null;\r\n  phone?: string | null;\r\n  role?: string | null;\r\n  tenant_id?: string | null;\r\n  is_verified?: boolean;\r\n  kyc_status?: string | null;\r\n  subscription_status?: string | null;\r\n  subscription_blocked?: boolean | null;\r\n  subscription_next_due_date?: string | null;\r\n  latest_payment_status?: string | null;\r\n};\r\n\r\nexport type AuthTokenResponse = {\r\n  access_token: string;\r\n  refresh_token: string;\r\n  token_type: string;\r\n  session_id: number;\r\n};\r\n\r\nexport type SessionInfo = {\r\n  id: number;\r\n  created_at: string;\r\n  last_seen_at: string;\r\n  expires_at: string;\r\n  revoked_at?: string | null;\r\n  is_revoked: boolean;\r\n  user_agent?: string | null;\r\n  ip_address?: string | null;\r\n  is_current: boolean;\r\n};\r\n\r\nexport type TenantActivityRecord = {\r\n  id: number;\r\n  tenant_id: string;\r\n  actor_user_id?: number | null;\r\n  action: string;\r\n  message: string;\r\n  target_type?: string | null;\r\n  target_id?: string | null;\r\n  metadata?: Record<string, unknown> | null;\r\n  created_at: string;\r\n};\r\n\r\nexport const AuthAPI = {\r\n  registerAffiliate: (body: any) => postJSON(\"/api/v1/auth/register/affiliate\", body),\r\n  registerPharmacy: (body: any) => postJSON(\"/api/v1/auth/register/owner\", body),\r\n  registerSupplier: (body: any) => postJSON(\"/api/v1/auth/register/supplier\", body),\r\n\r\n  registerVerify: async (email: string, code: string) => {\r\n    console.log('ðŸ” AuthAPI.registerVerify called with:', { email, code });\r\n    \r\n    // Clean inputs\r\n    const cleanEmail = email.trim().toLowerCase();\r\n    const cleanCode = String(code).trim();\r\n    \r\n    try {\r\n      const result = await postForm(\"/api/v1/auth/register/verify\", { email: cleanEmail, code: cleanCode });\r\n      console.log('âœ… registerVerify success:', result);\r\n      return result;\r\n    } catch (err: any) {\r\n      console.error('âŒ registerVerify failed:', err);\r\n      \r\n      // Handle network errors\r\n      if (err?.name === 'NetworkError' || (err?.name === 'TypeError' && err?.message?.includes('fetch'))) {\r\n        throw new Error('Network error - please check your connection and try again');\r\n      }\r\n      \r\n      // Handle specific HTTP errors with user-friendly messages\r\n      if (err?.status === 404) {\r\n        throw new Error('No account found with this email address');\r\n      } else if (err?.status === 400) {\r\n        // Check if the error message contains more specific info\r\n        const errorMsg = err?.message || err?.body?.detail || 'Invalid or expired verification code';\r\n        if (errorMsg.includes('Invalid or expired')) {\r\n          throw new Error('Invalid or expired verification code. Please check your email or request a new code.');\r\n        }\r\n        throw new Error(errorMsg);\r\n      } else if (err?.status === 422) {\r\n        console.warn(\"[AuthAPI.registerVerify] 422, retrying with JSON\", {\r\n          body: err.body,\r\n        });\r\n        try {\r\n          const result = await postJSON(\"/api/v1/auth/register/verify\", { email: cleanEmail, code: cleanCode });\r\n          console.log('âœ… registerVerify retry success:', result);\r\n          return result;\r\n        } catch (err2: any) {\r\n          console.error('âŒ registerVerify retry failed:', err2);\r\n          \r\n          if (err2?.status === 404) {\r\n            throw new Error('No account found with this email address');\r\n          } else if (err2?.status === 400) {\r\n            const errorMsg = err2?.message || err2?.body?.detail || 'Invalid or expired verification code';\r\n            if (errorMsg.includes('Invalid or expired')) {\r\n              throw new Error('Invalid or expired verification code. Please check your email or request a new code.');\r\n            }\r\n            throw new Error(errorMsg);\r\n          }\r\n          \r\n          const e: any = new Error(\r\n            err2?.message || err?.message || \"Verification failed\"\r\n          );\r\n          e.original = err;\r\n          e.retry = err2;\r\n          throw e;\r\n        }\r\n      } else if (err?.status >= 500) {\r\n        throw new Error('Server error - please try again later');\r\n      }\r\n      \r\n      // Default error handling\r\n      const errorMessage = err?.message || err?.body?.detail || 'Verification failed';\r\n      throw new Error(errorMessage);\r\n    }\r\n  },\r\n\r\n  verifyRegistration: (email: string, code: string) =>\r\n    postForm(\"/api/v1/auth/register/verify\", { email, code }),\r\n  login: (email: string, password: string, tenantId?: string) =>\r\n    postForm<AuthTokenResponse>(\r\n      \"/api/v1/auth/login\",\r\n      {\r\n        username: email,\r\n        password,\r\n        grant_type: \"password\",\r\n      },\r\n      tenantId\r\n    ).then(\r\n      (resp) => {\r\n        if (typeof window !== \"undefined\") {\r\n          setTokens(resp.access_token, resp.refresh_token);\r\n        }\r\n        return resp;\r\n      }\r\n    ),\r\n  loginRequestCode: (email: string, password: string, expectedRole?: string, tenantId?: string) => {\r\n    const url = expectedRole \r\n      ? `/api/v1/auth/login/request-code?expected_role=${encodeURIComponent(expectedRole)}`\r\n      : \"/api/v1/auth/login/request-code\";\r\n    return postForm(\r\n      url,\r\n      { username: email, password, grant_type: \"password\" },\r\n      tenantId\r\n    );\r\n  },\r\n  loginVerify: (email: string, code: string, tenantId?: string) =>\r\n    postJSON<AuthTokenResponse>(\"/api/v1/auth/login/verify\", { email, code }, tenantId).then((resp) => {\r\n      if (typeof window !== \"undefined\") {\r\n        setTokens(resp.access_token, resp.refresh_token);\r\n      }\r\n      return resp;\r\n    }),\r\n  refresh: (refreshToken: string) =>\r\n    postJSON<AuthTokenResponse>(\"/api/v1/auth/refresh\", { refresh_token: refreshToken }),\r\n  sessions: () => getAuthJSON<SessionInfo[]>(\"/api/v1/auth/sessions\"),\r\n  revokeSession: (sessionId: number) =>\r\n    authFetch(`/api/v1/auth/sessions/${sessionId}`, { method: \"DELETE\" }).then((res) => {\r\n      if (!res.ok) throw new Error(\"Failed to revoke session\");\r\n    }),\r\n  changePassword: (body: { current_password: string; new_password: string }) =>\r\n    postAuthJSON<{ status: string }>(\"/api/v1/auth/change-password\", body),\r\n  me: () => getAuthJSON<AuthProfile>(\"/api/v1/auth/me\"),\r\n};\r\n\r\nexport const TenantAPI = {\r\n  activity: async (params?: { action?: string[]; limit?: number; offset?: number }, tenantId?: string) => {\r\n    const searchParams = new URLSearchParams();\r\n    if (params?.limit) searchParams.set(\"limit\", params.limit.toString());\r\n    if (params?.offset) searchParams.set(\"offset\", params.offset.toString());\r\n    params?.action?.forEach((action) => searchParams.append(\"action\", action));\r\n    const qs = searchParams.toString();\r\n    const url = `/api/v1/tenant/activity${qs ? `?${qs}` : \"\"}`;\r\n    const res = await authFetch(url, undefined, true, tenantId);\r\n    if (res.status === 404 || res.status === 204) {\r\n      return [];\r\n    }\r\n    if (!res.ok) {\r\n      const text = await res.text().catch(() => \"\");\r\n      throw new Error(text || `Request failed with ${res.status}`);\r\n    }\r\n    const contentType = res.headers.get(\"content-type\") || \"\";\r\n    if (!contentType.includes(\"application/json\")) {\r\n      return [];\r\n    }\r\n    try {\r\n      return (await res.json()) as TenantActivityRecord[];\r\n    } catch {\r\n      return [];\r\n    }\r\n  },\r\n};\r\n\r\n// ----------------- IntegrationsAPI -----------------\r\nexport type IntegrationProviderOut = {\r\n  key: string;\r\n  name: string;\r\n  category: string;\r\n  capability: {\r\n    resources: string[];\r\n    supports_webhooks: boolean;\r\n    supports_delta_sync: boolean;\r\n  };\r\n  requires_oauth: boolean;\r\n};\r\n\r\nexport type IntegrationConnectionOut = {\r\n  id: number;\r\n  tenant_id: string;\r\n  provider_key: string;\r\n  provider_name: string;\r\n  display_name: string;\r\n  status: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n  last_synced_at?: string | null;\r\n  resource_scope?: string[] | null;\r\n};\r\n\r\nexport type IntegrationOAuthStartResponse = {\r\n  authorization_url: string;\r\n  state: string;\r\n  expires_in_seconds: number;\r\n};\r\n\r\nexport type IntegrationSyncJobOut = {\r\n  id: number;\r\n  connection_id: number;\r\n  direction: string;\r\n  resource: string;\r\n  status: string;\r\n  started_at?: string | null;\r\n  finished_at?: string | null;\r\n  error_message?: string | null;\r\n};\r\n\r\nexport const IntegrationsAPI = {\r\n  listProviders: () => getAuthJSON<IntegrationProviderOut[]>(\"/api/v1/integrations/providers\"),\r\n  listConnections: (tenantId: string) =>\r\n    getAuthJSON<IntegrationConnectionOut[]>(\"/api/v1/integrations/connections\", tenantId),\r\n  startOAuth: (tenantId: string, providerKey: string, resources?: string[]) =>\r\n    postAuthJSON<IntegrationOAuthStartResponse>(\r\n      \"/api/v1/integrations/oauth/start\",\r\n      { provider_key: providerKey, resources, display_name: undefined },\r\n      tenantId\r\n    ),\r\n  completeOAuth: (code: string, state: string, providerKey?: string) =>\r\n    postJSON<IntegrationConnectionOut>(\r\n      \"/api/v1/integrations/oauth/callback\",\r\n      { code, state, provider_key: providerKey }\r\n    ),\r\n  disconnect: (tenantId: string, connectionId: number) =>\r\n    authFetch(`/api/v1/integrations/connections/${connectionId}`, { method: \"DELETE\" }, true, tenantId).then(\r\n      async (res) => {\r\n        if (!res.ok) {\r\n          const text = await res.text().catch(() => \"\");\r\n          throw new Error(text || `HTTP ${res.status}`);\r\n        }\r\n        return res.json();\r\n      }\r\n    ),\r\n  triggerSync: (tenantId: string, connectionId: number, resource: string, direction: \"incoming\" | \"outgoing\") =>\r\n    postAuthJSON<IntegrationSyncJobOut>(\r\n      `/api/v1/integrations/connections/${connectionId}/sync`,\r\n      { resource, direction },\r\n      tenantId\r\n    ),\r\n};\r\n\r\nexport const AffiliateAPI = {\r\n  getLinks: () => getAuthJSON(\"/api/v1/affiliate/register-link\", \"\"),\r\n  createLink: () => getAuthJSON(\"/api/v1/affiliate/register-link?create_new=true\", \"\"),\r\n  deactivate: (token: string) =>\r\n    postAuthJSON(\r\n      `/api/v1/affiliate/links/${encodeURIComponent(token)}/deactivate`,\r\n      {},\r\n      \"\"\r\n    ),\r\n  rotate: (token: string) =>\r\n    postAuthJSON(`/api/v1/affiliate/links/${encodeURIComponent(token)}/rotate`, {}, \"\"),\r\n  dashboard: () => getAuthJSON(\"/api/v1/affiliate/dashboard\", \"\"),\r\n  payouts: (status?: string) =>\r\n    getAuthJSON(\r\n      `/api/v1/affiliate/payouts${status ? `?status_filter=${encodeURIComponent(status)}` : \"\"\r\n      }`,\r\n      \"\"\r\n    ),\r\n  requestPayout: (month?: string, percent = 5) =>\r\n    postAuthJSON(\"/api/v1/affiliate/payouts/request\", { month, percent }, \"\"),\r\n  requestPayoutWithBankDetails: (data: {\r\n    month?: string;\r\n    percent?: number;\r\n    bank_name: string;\r\n    bank_account_name: string;\r\n    bank_account_number: string;\r\n  }) =>\r\n    postAuthJSON(\"/api/v1/affiliate/payouts/request\", data, \"\"),\r\n  updateProfile: (body: any) => postAuthJSON(\"/api/v1/affiliate/profile\", body, \"\"),\r\n};\r\n\r\n// ----------------- AdminAPI -----------------\r\nexport const AdminAPI = {\r\n  analyticsOverview: (days = 30) =>\r\n    getAuthJSON(`/api/v1/admin/analytics/overview?days=${days}`),\r\n  pharmacySummary: () => getAuthJSON(`/api/v1/admin/pharmacies/summary`),\r\n  pharmacies: (page = 1, pageSize = 20, q = \"\") =>\r\n    getAuthJSON(\r\n      `/api/v1/admin/pharmacies?page=${page}&page_size=${pageSize}&q=${encodeURIComponent(q)}`\r\n    ),\r\n  approvePharmacy: (tenantId: string, applicationId: number, body?: any) =>\r\n    postAuthJSON(`/api/v1/admin/pharmacies/${applicationId}/approve`, body || {}, tenantId),\r\n  rejectPharmacy: (tenantId: string, applicationId: number) =>\r\n    postAuthJSON(`/api/v1/admin/pharmacies/${applicationId}/reject`, {}, tenantId),\r\n  verifyPayment: (tenantId: string, code?: string | null) =>\r\n    postAuthJSON(`/api/v1/admin/payments/verify`, { code: code || null }, tenantId),\r\n  rejectPayment: (tenantId: string, code?: string | null) =>\r\n    postAuthJSON(`/api/v1/admin/payments/reject`, { code: code || null }, tenantId),\r\n  approveAffiliate: (userId: number) => postAuthJSON(`/api/v1/admin/affiliates/${userId}/approve`, {}),\r\n  rejectAffiliate: (userId: number) => postAuthJSON(`/api/v1/admin/affiliates/${userId}/reject`, {}),\r\n  affiliates: (page = 1, pageSize = 20, q = \"\") =>\r\n    getAuthJSON(\r\n      `/api/v1/admin/affiliates?page=${page}&page_size=${pageSize}&q=${encodeURIComponent(q)}`\r\n    ),\r\n  usage: (days = 14) => getAuthJSON(`/api/v1/admin/usage?days=${days}`),\r\n  audit: (params: { tenant_id?: string; action?: string; limit?: number }) => {\r\n    const query = new URLSearchParams();\r\n    if (params.tenant_id) query.set('tenant_id', params.tenant_id);\r\n    if (params.action) query.set('action', params.action);\r\n    if (params.limit) query.set('limit', params.limit.toString());\r\n    return getAuthJSON(`/api/v1/admin/audit${query.toString() ? `?${query.toString()}` : ''}`);\r\n  },\r\n  downloadPharmacyLicense: async (applicationId: number) => {\r\n    const res = await authFetch(\r\n      `/api/v1/admin/pharmacies/${applicationId}/license`,\r\n      { method: \"GET\" },\r\n      true\r\n    );\r\n    if (!res.ok) {\r\n      const text = await res.text().catch(() => \"\");\r\n      throw new Error(text || `HTTP ${res.status}`);\r\n    }\r\n    const blob = await res.blob();\r\n    let filename = `license-${applicationId}`;\r\n    const disposition = res.headers.get(\"Content-Disposition\") || \"\";\r\n    const match = disposition.match(\r\n      /filename\\*=UTF-8''([^;]+)|filename=\"?([^\";]+)\"?/i\r\n    );\r\n    const extracted = match?.[1] || match?.[2];\r\n    if (extracted) {\r\n      try {\r\n        filename = decodeURIComponent(extracted);\r\n      } catch {\r\n        filename = extracted;\r\n      }\r\n    }\r\n    const url = window.URL.createObjectURL(blob);\r\n    const link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.download = filename;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    window.URL.revokeObjectURL(url);\r\n  },\r\n};\r\n\r\n// ----------------- StaffAPI -----------------\r\nexport const StaffAPI = {\r\n  createCashier: (\r\n    tenantId: string,\r\n    body: {\r\n      email: string;\r\n      password: string;\r\n      phone?: string;\r\n      role?: string;\r\n      assigned_branch_id?: number | null;\r\n    }\r\n  ) => postAuthJSON(\"/api/v1/staff\", body, tenantId),\r\n  list: (tenantId: string) => getAuthJSON(\"/api/v1/staff\", tenantId),\r\n  update: (tenantId: string, userId: number, body: { is_active?: boolean }) =>\r\n    authFetch(\r\n      `/api/v1/staff/${userId}`,\r\n      {\r\n        method: \"PATCH\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(body),\r\n      },\r\n      true,\r\n      tenantId\r\n    ).then(async (res) => {\r\n      if (!res.ok) {\r\n        const text = await res.text().catch(() => \"\");\r\n        throw new Error(text || `Request failed with ${res.status}`);\r\n      }\r\n      return res.json();\r\n    }),\r\n  remove: (tenantId: string, userId: number) =>\r\n    authFetch(\r\n      `/api/v1/staff/${userId}`,\r\n      { method: \"DELETE\" },\r\n      true,\r\n      tenantId\r\n    ).then(async (res) => {\r\n      if (!res.ok) {\r\n        const text = await res.text().catch(() => \"\");\r\n        throw new Error(text || `Request failed with ${res.status}`);\r\n      }\r\n      return res.json();\r\n    }),\r\n};\r\n\r\n// ----------------- Pharmacy models -----------------\r\nexport type PharmacyOut = {\r\n  id: number;\r\n  tenant_id: string;\r\n  name: string;\r\n  address?: string | null;\r\n};\r\n\r\nexport type PharmaciesListResponse = {\r\n  page: number;\r\n  page_size: number;\r\n  total: number;\r\n  items: PharmacyOut[];\r\n};\r\n\r\n// ----------------- BillingAPI -----------------\r\nexport const BillingAPI = {\r\n  submitPaymentCode: (tenantId: string, code: string) =>\r\n    postAuthJSON(\"/api/v1/owner/billing/payment-code\", { code }, tenantId),\r\n};\r\n\r\n// ----------------- UploadAPI -----------------\r\nexport const UploadAPI = {\r\n  uploadKyc: async (file: File) => {\r\n    const fd = new FormData();\r\n    fd.append(\"file\", file);\r\n    return postMultipart(\"/uploads/kyc\", fd);\r\n  },\r\n};\r\n\r\n// ----------------- KYCAPI -----------------\r\nexport const KYCAPI = {\r\n  status: (tenantId: string) => getAuthJSON(\"/api/v1/owner/kyc/status\", tenantId),\r\n  update: (tenantId: string, body: any) =>\r\n    putAuthJSON(\"/api/v1/owner/kyc/status\", body, tenantId),\r\n};\r\n\r\n// ----------------- PharmaciesAPI -----------------\r\nexport const PharmaciesAPI = {\r\n  list: (\r\n    tenantId?: string,\r\n    params?: { page?: number; page_size?: number; q?: string }\r\n  ): Promise<PharmaciesListResponse> => {\r\n    const search = new URLSearchParams();\r\n    search.set(\"page\", String(params?.page ?? 1));\r\n    search.set(\"page_size\", String(params?.page_size ?? 20));\r\n    if (params?.q) search.set(\"q\", params.q);\r\n    const queryString = search.toString();\r\n    const path = `/api/v1/pharmacies${queryString ? `?${queryString}` : \"\"}`;\r\n    return getAuthJSON<PharmaciesListResponse>(path, tenantId);\r\n  },\r\n  get: (id: number, tenantId?: string) =>\r\n    getAuthJSON<PharmacyOut>(`/api/v1/pharmacies/${id}`, tenantId),\r\n  update: (id: number, body: { name?: string; address?: string }, tenantId?: string) =>\r\n    authFetch(`/api/v1/pharmacies/${id}`, {\r\n      method: \"PATCH\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(body),\r\n    }, true, tenantId).then(async (res) => {\r\n      if (!res.ok) throw new Error(await res.text());\r\n      return (await res.json()) as PharmacyOut;\r\n    }),\r\n};\r\n\r\n// ----------------- BranchAPI -----------------\r\n\r\ninterface BranchRecord {\r\n  id: number;\r\n  pharmacy_id: number;\r\n  tenant_id: string;\r\n  name: string;\r\n  address?: string | null;\r\n  phone?: string | null;\r\n}\r\n\r\nexport const BranchAPI = {\r\n  create: (tenantId: string | undefined, payload: { name: string; address?: string; phone?: string; pharmacy_id: number }) =>\r\n    postAuthJSON<{ id: number }>(\"/api/v1/branches\", payload, tenantId),\r\n\r\n  list: (tenantId: string | undefined, pharmacyId?: number) => {\r\n    const query = pharmacyId ? `?pharmacy_id=${pharmacyId}` : '';\r\n    return getAuthJSON<{ items: BranchRecord[] }>(`/api/v1/branches${query}`, tenantId);\r\n  },\r\n\r\n  get: (tenantId: string | undefined, id: number) =>\r\n    getAuthJSON<BranchRecord>(`/api/v1/branches/${id}`, tenantId),\r\n\r\n  update: (tenantId: string | undefined, id: number, payload: { name?: string; address?: string | null; phone?: string | null }) =>\r\n    putAuthJSON<BranchRecord>(`/api/v1/branches/${id}`, payload, tenantId),\r\n\r\n  delete: (tenantId: string | undefined, id: number) =>\r\n    deleteAuthJSON(`/api/v1/branches/${id}`, tenantId)\r\n};\r\n\r\n// ----------------- ChatAPI -----------------\r\nexport const ChatAPI = {\r\n  listThreads: (tenantId: string) => getAuthJSON(`/api/v1/chat/threads`, tenantId),\r\n  createThread: (tenantId: string, title?: string) =>\r\n    postAuthJSON(\r\n      `/api/v1/chat/threads`,\r\n      title ? { title } : {},\r\n      tenantId\r\n    ),\r\n  listMessages: (tenantId: string, threadId: number) =>\r\n    getAuthJSON(`/api/v1/chat/threads/${threadId}/messages`, tenantId),\r\n  sendMessage: (tenantId: string, threadId: number, prompt: string) =>\r\n    postAuthJSON(`/api/v1/chat/threads/${threadId}/messages`, { prompt }, tenantId),\r\n  usage: (tenantId: string, days = 30) =>\r\n    getAuthJSON(`/api/v1/chat/usage?days=${days}`, tenantId),\r\n};\r\n\r\nexport type OwnerAnalyticsResponse = {\r\n  summary: {\r\n    total_revenue: number;\r\n    total_orders: number;\r\n    unique_customers: number;\r\n    low_stock_items: number;\r\n    avg_order_value: number;\r\n  };\r\n  revenue_trends: {\r\n    date: string;\r\n    revenue: number;\r\n    orders: number;\r\n    customers: number;\r\n  }[];\r\n  inventory_health: {\r\n    category: string;\r\n    current_stock: number;\r\n    avg_reorder_level: number;\r\n    low_stock_items: number;\r\n    total_items: number;\r\n    status: string;\r\n  }[];\r\n  supplier_performance: {\r\n    name: string;\r\n    total_orders: number;\r\n    on_time_rate: number;\r\n    total_value: number;\r\n    avg_rating: number;\r\n  }[];\r\n  staff_performance: {\r\n    name: string;\r\n    role: string;\r\n    transactions: number;\r\n    total_sales: number;\r\n    avg_transaction: number;\r\n    efficiency: number;\r\n  }[];\r\n};\r\n\r\nexport type SupplierAnalyticsResponse = {\r\n  summary: {\r\n    total_orders: number;\r\n    fulfilled_orders: number;\r\n    fulfillment_rate: number;\r\n    total_revenue: number;\r\n    avg_order_value: number;\r\n    avg_rating: number;\r\n  };\r\n  order_trends: {\r\n    date: string;\r\n    total_orders: number;\r\n    fulfilled_orders: number;\r\n    revenue: number;\r\n  }[];\r\n  product_performance: {\r\n    name: string;\r\n    units_sold: number;\r\n    revenue: number;\r\n    avg_price: number;\r\n    margin: number;\r\n  }[];\r\n  customer_insights: {\r\n    name: string;\r\n    total_orders: number;\r\n    total_value: number;\r\n    satisfaction: number;\r\n  }[];\r\n  delivery_metrics: {\r\n    status: string;\r\n    count: number;\r\n    percentage: number;\r\n  }[];\r\n};\r\n\r\nexport const OwnerAnalyticsAPI = {\r\n  overview: (\r\n    tenantId: string,\r\n    options?: { horizon?: string; trendWeeks?: number; days?: number }\r\n  ) => {\r\n    const params = new URLSearchParams();\r\n    if (options?.horizon) params.set(\"horizon\", options.horizon);\r\n    if (options?.trendWeeks) params.set(\"trend_weeks\", String(options.trendWeeks));\r\n    if (options?.days) params.set(\"days\", String(options.days));\r\n    const query = params.toString();\r\n    const path = `/api/v1/analytics/owner/overview${query ? `?${query}` : \"\"}`;\r\n    return getAuthJSON<OwnerAnalyticsResponse>(path, tenantId);\r\n  },\r\n};\r\n\r\nexport const SupplierAnalyticsAPI = {\r\n  overview: (days?: number) => {\r\n    const params = new URLSearchParams();\r\n    if (days) params.set(\"days\", String(days));\r\n    const query = params.toString();\r\n    const path = `/api/v1/analytics/supplier/overview${query ? `?${query}` : \"\"}`;\r\n    return getAuthJSON(path);\r\n  },\r\n};\r\n\r\n// ----------------- OwnerChatAPI -----------------\r\nexport type OwnerChatThread = {\r\n  id: number;\r\n  title: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n};\r\n\r\nexport type OwnerChatMessage = {\r\n  id: number;\r\n  thread_id: number;\r\n  role: \"owner\" | \"assistant\";\r\n  content: string;\r\n  created_at: string;\r\n};\r\n\r\nexport const OwnerChatAPI = {\r\n  listThreads: (tenantId: string) => getAuthJSON<OwnerChatThread[]>(\"/api/v1/owner/chat/threads\", tenantId),\r\n  createThread: (tenantId: string, title: string) =>\r\n    postAuthJSON<OwnerChatThread>(\"/api/v1/owner/chat/threads\", { title }, tenantId),\r\n  listMessages: (tenantId: string, threadId: number) =>\r\n    getAuthJSON<OwnerChatMessage[]>(`/api/v1/owner/chat/threads/${threadId}/messages`, tenantId),\r\n  sendMessage: (tenantId: string, threadId: number, prompt: string) =>\r\n    postAuthJSON<OwnerChatMessage>(`/api/v1/owner/chat/threads/${threadId}/messages`, { prompt }, tenantId),\r\n};\r\n\r\n// ----------------- InventoryAPI -----------------\r\nexport type InventoryItem = {\r\n  id: number;\r\n  medicine_id: number;\r\n  medicine_name: string;\r\n  sku?: string | null;\r\n  branch?: string | null;\r\n  quantity: number;\r\n  pack_size: number;\r\n  packs: number;\r\n  singles: number;\r\n  reorder_level: number;\r\n  expiry_date?: string | null;\r\n  lot_number?: string | null;\r\n  sell_price?: number | null;\r\n};\r\n\r\nexport type InventoryListResponse = {\r\n  page: number;\r\n  page_size: number;\r\n  total: number;\r\n  items: InventoryItem[];\r\n};\r\n\r\ntype InventoryListOptions = {\r\n  q?: string;\r\n  branch?: string;\r\n  expiringInDays?: number;\r\n  lowStockOnly?: boolean;\r\n  page?: number;\r\n  pageSize?: number;\r\n};\r\n\r\ntype InventoryUpdatePayload = {\r\n  quantity?: number;\r\n  reorder_level?: number;\r\n  expiry_date?: string | null;\r\n  lot_number?: string | null;\r\n  sell_price?: number | null;\r\n};\r\n\r\ntype InventoryCreatePayload = {\r\n  medicine_id: number;\r\n  branch?: string | null;\r\n  pack_size: number;\r\n  packs_count?: number;\r\n  singles_count?: number;\r\n  expiry_date?: string | null;\r\n  lot_number?: string | null;\r\n  purchase_price?: number | null;\r\n  sell_price?: number | null;\r\n  reorder_level?: number;\r\n};\r\n\r\nexport const InventoryAPI = {\r\n  list: (tenantId?: string, options?: InventoryListOptions) => {\r\n    const params = new URLSearchParams();\r\n    if (options?.q) params.set(\"q\", options.q);\r\n    if (options?.branch) params.set(\"branch\", options.branch);\r\n    if (typeof options?.expiringInDays === \"number\") {\r\n      params.set(\"expiring_in_days\", String(options.expiringInDays));\r\n    }\r\n    if (options?.lowStockOnly) params.set(\"low_stock_only\", \"true\");\r\n    if (options?.page) params.set(\"page\", String(options.page));\r\n    if (options?.pageSize) params.set(\"page_size\", String(options.pageSize));\r\n    const query = params.toString();\r\n    const path = `/api/v1/inventory/items${query ? `?${query}` : \"\"}`;\r\n    return getAuthJSON<InventoryListResponse>(path, tenantId);\r\n  },\r\n  create: async (tenantId: string | undefined, payload: InventoryCreatePayload) => {\r\n    const form = new URLSearchParams();\r\n    form.set(\"medicine_id\", String(payload.medicine_id));\r\n    form.set(\"pack_size\", String(Math.max(1, payload.pack_size || 1)));\r\n    if (payload.branch) {\r\n      form.set(\"branch\", payload.branch);\r\n    }\r\n    if (typeof payload.packs_count === \"number\") {\r\n      form.set(\"packs_count\", String(Math.max(0, payload.packs_count)));\r\n    }\r\n    if (typeof payload.singles_count === \"number\") {\r\n      form.set(\"singles_count\", String(Math.max(0, payload.singles_count)));\r\n    }\r\n    if (payload.expiry_date) {\r\n      form.set(\"expiry_date\", payload.expiry_date);\r\n    }\r\n    if (payload.lot_number) {\r\n      form.set(\"lot_number\", payload.lot_number);\r\n    }\r\n    if (typeof payload.purchase_price === \"number\") {\r\n      form.set(\"purchase_price\", String(payload.purchase_price));\r\n    }\r\n    if (typeof payload.sell_price === \"number\") {\r\n      form.set(\"sell_price\", String(payload.sell_price));\r\n    }\r\n    if (typeof payload.reorder_level === \"number\") {\r\n      form.set(\"reorder_level\", String(Math.max(0, payload.reorder_level)));\r\n    }\r\n    const res = await authFetch(\r\n      `/api/v1/inventory/items`,\r\n      {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n        body: form.toString(),\r\n      },\r\n      true,\r\n      tenantId\r\n    );\r\n    if (!res.ok) {\r\n      throw new Error((await res.text().catch(() => \"\")) || `Request failed with ${res.status}`);\r\n    }\r\n    return res.json();\r\n  },\r\n  update: async (tenantId: string | undefined, itemId: number, payload: InventoryUpdatePayload) => {\r\n    const form = new URLSearchParams();\r\n    if (typeof payload.quantity === \"number\") {\r\n      form.set(\"quantity\", String(payload.quantity));\r\n    }\r\n    if (typeof payload.reorder_level === \"number\") {\r\n      form.set(\"reorder_level\", String(Math.max(0, payload.reorder_level)));\r\n    }\r\n    if (typeof payload.sell_price === \"number\") {\r\n      form.set(\"sell_price\", String(payload.sell_price));\r\n    }\r\n    if (payload.expiry_date !== undefined) {\r\n      form.set(\"expiry_date\", payload.expiry_date || \"\");\r\n    }\r\n    if (payload.lot_number !== undefined) {\r\n      form.set(\"lot_number\", payload.lot_number || \"\");\r\n    }\r\n    const res = await authFetch(\r\n      `/api/v1/inventory/items/${itemId}`,\r\n      {\r\n        method: \"PATCH\",\r\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n        body: form.toString(),\r\n      },\r\n      true,\r\n      tenantId\r\n    );\r\n    if (!res.ok) {\r\n      throw new Error((await res.text().catch(() => \"\")) || `Request failed with ${res.status}`);\r\n    }\r\n    return res.json();\r\n  },\r\n  remove: async (tenantId: string | undefined, itemId: number) => {\r\n    const res = await authFetch(\r\n      `/api/v1/inventory/items/${itemId}`,\r\n      { method: \"DELETE\" },\r\n      true,\r\n      tenantId\r\n    );\r\n    if (!res.ok) {\r\n      throw new Error((await res.text().catch(() => \"\")) || `Request failed with ${res.status}`);\r\n    }\r\n    return res.json();\r\n  },\r\n};\r\n\r\n// ----------------- MedicinesAPI -----------------\r\nexport type MedicineListItem = {\r\n  id: number;\r\n  name: string;\r\n  sku?: string | null;\r\n  category?: string | null;\r\n  manufacturer?: string | null;\r\n};\r\n\r\nexport type MedicinesListResponse = {\r\n  page: number;\r\n  page_size: number;\r\n  total: number;\r\n  items: MedicineListItem[];\r\n};\r\n\r\ntype MedicinesListOptions = {\r\n  q?: string;\r\n  page?: number;\r\n  pageSize?: number;\r\n};\r\n\r\nexport const MedicinesAPI = {\r\n  list: (tenantId?: string, options?: MedicinesListOptions) => {\r\n    const query = new URLSearchParams();\r\n    if (options?.q) {\r\n      query.set(\"q\", options.q);\r\n    }\r\n    if (options?.page) {\r\n      query.set(\"page\", String(options.page));\r\n    }\r\n    if (options?.pageSize) {\r\n      query.set(\"page_size\", String(Math.min(200, Math.max(1, options.pageSize))));\r\n    }\r\n    const path = `/api/v1/medicines${query.toString() ? `?${query.toString()}` : \"\"}`;\r\n    return getAuthJSON<MedicinesListResponse>(path, tenantId);\r\n  },\r\n};\r\n\r\n// ----------------- SalesAPI -----------------\r\ntype SaleLineInput = {\r\n  name_or_sku: string;\r\n  quantity_units: number;\r\n  unit_price?: number;\r\n};\r\n\r\nexport const SalesAPI = {\r\n  pos: (\r\n    tenantId: string | undefined,\r\n    payload: { lines: SaleLineInput[]; branch?: string | null }\r\n  ) => {\r\n    const { lines, branch } = payload;\r\n    const query = branch ? `?branch=${encodeURIComponent(branch)}` : \"\";\r\n    const path = `/api/v1/sales/pos${query}`;\r\n    return postAuthJSON<{ id: number; total: number }>(path, lines, tenantId);\r\n  },\r\n};\r\n\r\n// ----------------- SupplierAPI -----------------\r\nexport type SupplierProfile = {\r\n  id: number;\r\n  user_id: number;\r\n  business_name: string;\r\n  contact_person?: string | null;\r\n  phone?: string | null;\r\n  email?: string | null;\r\n  address?: string | null;\r\n  business_license?: string | null;\r\n  tax_certificate?: string | null;\r\n  is_verified: boolean;\r\n  created_at: string;\r\n};\r\n\r\nexport type SupplierProduct = {\r\n  id: number;\r\n  supplier_id: number;\r\n  name: string;\r\n  description?: string | null;\r\n  category?: string | null;\r\n  unit_price: number;\r\n  minimum_order_quantity: number;\r\n  stock_quantity: number;\r\n  is_active: boolean;\r\n  created_at: string;\r\n};\r\n\r\nexport type Order = {\r\n  id: number;\r\n  customer_id: number;\r\n  supplier_id: number;\r\n  tenant_id: string;\r\n  status: string;\r\n  total_amount: number;\r\n  payment_method?: string | null;\r\n  payment_code?: string | null;\r\n  notes?: string | null;\r\n  created_at: string;\r\n  updated_at: string;\r\n  items: OrderItem[];\r\n  supplier?: SupplierProfile;\r\n};\r\n\r\nexport type OrderItem = {\r\n  id: number;\r\n  order_id: number;\r\n  product_id: number;\r\n  quantity: number;\r\n  unit_price: number;\r\n  total_price: number;\r\n  product?: SupplierProduct;\r\n};\r\n\r\nexport type OrderReview = {\r\n  id: number;\r\n  order_id: number;\r\n  customer_id: number;\r\n  rating: number;\r\n  comment?: string | null;\r\n  created_at: string;\r\n};\r\n\r\nexport const SupplierAPI = {\r\n  // Profile management\r\n  getProfile: () => getAuthJSON<SupplierProfile>(\"/api/v1/suppliers/profile\"),\r\n  createProfile: (data: any) => postAuthJSON<SupplierProfile>(\"/api/v1/suppliers/profile\", data),\r\n  updateProfile: (data: any) => putAuthJSON<SupplierProfile>(\"/api/v1/suppliers/profile\", data),\r\n  \r\n  // Product management\r\n  getProducts: () => getAuthJSON<SupplierProduct[]>(\"/api/v1/suppliers/products\"),\r\n  createProduct: (data: any) => postAuthJSON<SupplierProduct>(\"/api/v1/suppliers/products\", data),\r\n  updateProduct: (id: number, data: any) => putAuthJSON<SupplierProduct>(`/api/v1/suppliers/products/${id}`, data),\r\n  deleteProduct: (id: number) => deleteAuthJSON(`/api/v1/suppliers/products/${id}`),\r\n  \r\n  // Order management\r\n  getOrders: () => getAuthJSON<Order[]>(\"/api/v1/suppliers/orders\"),\r\n  approveOrder: (id: number) => putAuthJSON(`/api/v1/suppliers/orders/${id}/approve`, {}),\r\n  rejectOrder: (id: number) => putAuthJSON(`/api/v1/suppliers/orders/${id}/reject`, {}),\r\n  verifyPayment: (id: number) => putAuthJSON(`/api/v1/suppliers/orders/${id}/verify-payment`, {}),\r\n  markDelivered: (id: number) => putAuthJSON(`/api/v1/suppliers/orders/${id}/mark-delivered`, {}),\r\n  \r\n  // Public endpoints for customers\r\n  browse: (tenantId: string) => getAuthJSON<SupplierProfile[]>(\"/api/v1/suppliers/browse\", tenantId),\r\n  getSupplierProducts: (supplierId: number, tenantId: string) => \r\n    getAuthJSON<SupplierProduct[]>(`/api/v1/suppliers/${supplierId}/products`, tenantId),\r\n};\r\n\r\nexport const OrderAPI = {\r\n  create: (data: any, tenantId: string) => postAuthJSON<Order>(\"/api/v1/orders\", data, tenantId),\r\n  list: (tenantId: string) => getAuthJSON<Order[]>(\"/api/v1/orders\", tenantId),\r\n  get: (id: number, tenantId: string) => getAuthJSON<Order>(`/api/v1/orders/${id}`, tenantId),\r\n  submitPaymentCode: (id: number, code: string, tenantId: string) => \r\n    putAuthJSON(`/api/v1/orders/${id}/payment-code`, { code }, tenantId),\r\n  createReview: (id: number, data: any, tenantId: string) => \r\n    postAuthJSON<OrderReview>(`/api/v1/orders/${id}/review`, data, tenantId),\r\n  getReview: (id: number, tenantId: string) => \r\n    getAuthJSON<OrderReview>(`/api/v1/orders/${id}/review`, tenantId),\r\n};\r\n\r\nexport const SupplierOnboardingAPI = {\r\n  getStatus: () => getAuthJSON(\"/api/v1/supplier-onboarding/status\"),\r\n  submitKYC: (data: any) => postAuthJSON(\"/api/v1/supplier-onboarding/kyc/submit\", data),\r\n  getKYCStatus: () => getAuthJSON(\"/api/v1/supplier-onboarding/kyc/status\"),\r\n  submitPayment: (data: any) => postAuthJSON(\"/api/v1/supplier-onboarding/payment/submit\", data),\r\n  getPaymentStatus: () => getAuthJSON(\"/api/v1/supplier-onboarding/payment/status\"),\r\n};\r\n\r\n// Update AdminAPI with supplier management\r\nexport const SupplierAdminAPI = {\r\n  getSuppliers: () => getAuthJSON(\"/api/v1/admin/suppliers\"),\r\n  getPendingKYC: () => getAuthJSON(\"/api/v1/admin/suppliers/kyc/pending\"),\r\n  approveKYC: (supplierId: number) => postAuthJSON(`/api/v1/admin/suppliers/${supplierId}/kyc/approve`, {}),\r\n  rejectKYC: (supplierId: number, notes?: string) => \r\n    postAuthJSON(`/api/v1/admin/suppliers/${supplierId}/kyc/reject`, { notes }),\r\n  getPendingPayments: () => getAuthJSON(\"/api/v1/admin/suppliers/payments/pending\"),\r\n  verifyPayment: (code: string) => postAuthJSON(`/api/v1/admin/suppliers/payments/${code}/verify`, {}),\r\n  rejectPayment: (code: string, notes?: string) => \r\n    postAuthJSON(`/api/v1/admin/suppliers/payments/${code}/reject`, { notes }),\r\n};\r\n\r\n// Other API objects (AffiliateAPI, AdminAPI, etc.) remain unchanged\r\n\r\n// export const API_BASE =\r\n//   process.env.NEXT_PUBLIC_API_BASE || \"http://localhost:8000/api/v1\";\r\n// export const TENANT_HEADER =\r\n//   process.env.NEXT_PUBLIC_TENANT_HEADER || \"X-Tenant-ID\";\r\n\r\n// function buildHeaders(\r\n//   initHeaders?: HeadersInit,\r\n//   tenantId?: string\r\n// ): HeadersInit {\r\n//   const headers: Record<string, string> = {\r\n//     ...(initHeaders as Record<string, string>),\r\n//   };\r\n//   if (tenantId) headers[TENANT_HEADER] = tenantId;\r\n//   return headers;\r\n// }\r\n\r\n// export async function putAuthJSON<T = any>(\r\n//   path: string,\r\n//   bodyData: any,\r\n//   tenantId?: string\r\n// ): Promise<T> {\r\n//   const res = await authFetch(\r\n//     path,\r\n//     {\r\n//       method: \"PUT\",\r\n//       headers: { \"Content-Type\": \"application/json\" },\r\n//       body: JSON.stringify(bodyData),\r\n//     },\r\n//     true,\r\n//     tenantId\r\n//   );\r\n//   if (!res.ok) {\r\n//     try {\r\n//       const data = await res.json();\r\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\r\n//       throw new Error(msg || `Request failed with ${res.status}`);\r\n//     } catch {\r\n//       const text = await res.text().catch(() => \"\");\r\n//       throw new Error(text || `Request failed with ${res.status}`);\r\n//     }\r\n//   }\r\n//   return (await res.json()) as T;\r\n// }\r\n\r\n// export async function postForm<T = any>(\r\n//   path: string,\r\n//   data: Record<string, string>,\r\n//   tenantId?: string\r\n// ): Promise<T> {\r\n//   const body = new URLSearchParams(data);\r\n//   const res = await fetch(`${API_BASE}${path}`, {\r\n//     method: \"POST\",\r\n//     headers: buildHeaders(\r\n//       {\r\n//         \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n//       },\r\n//       tenantId\r\n//     ),\r\n//     body,\r\n//   });\r\n//   if (!res.ok) {\r\n//     try {\r\n//       const data = await res.json();\r\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\r\n//       throw new Error(msg || `Request failed with ${res.status}`);\r\n//     } catch {\r\n//       const text = await res.text().catch(() => \"\");\r\n//       throw new Error(text || `Request failed with ${res.status}`);\r\n//     }\r\n//   }\r\n//   return (await res.json()) as T;\r\n// }\r\n\r\n// export async function postJSON<T = any>(\r\n//   path: string,\r\n//   body: any,\r\n//   tenantId?: string\r\n// ): Promise<T> {\r\n//   const res = await fetch(`${API_BASE}${path}`, {\r\n//     method: \"POST\",\r\n//     headers: buildHeaders({ \"Content-Type\": \"application/json\" }, tenantId),\r\n//     body: JSON.stringify(body),\r\n//   });\r\n//   if (!res.ok) {\r\n//     try {\r\n//       const data = await res.json();\r\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\r\n//       throw new Error(msg || `Request failed with ${res.status}`);\r\n//     } catch {\r\n//       const text = await res.text().catch(() => \"\");\r\n//       throw new Error(text || `Request failed with ${res.status}`);\r\n//     }\r\n//   }\r\n//   return (await res.json()) as T;\r\n// }\r\n\r\n// export async function postMultipart<T = any>(\r\n//   path: string,\r\n//   formData: FormData,\r\n//   tenantId?: string\r\n// ): Promise<T> {\r\n//   const res = await fetch(`${API_BASE}${path}`, {\r\n//     method: \"POST\",\r\n//     headers: buildHeaders(undefined, tenantId),\r\n//     body: formData,\r\n//   });\r\n//   if (!res.ok) {\r\n//     try {\r\n//       const data = await res.json();\r\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\r\n//       throw new Error(msg || `Request failed with ${res.status}`);\r\n//     } catch {\r\n//       let message = `Request failed with ${res.status}`;\r\n//       throw new Error(message);\r\n//     }\r\n//   }\r\n//   return (await res.json()) as T;\r\n// }\r\n\r\n// export function getAccessToken(): string | null {\r\n//   if (typeof window === \"undefined\") return null;\r\n//   return localStorage.getItem(\"access_token\");\r\n// }\r\n\r\n// function getRefreshToken(): string | null {\r\n//   if (typeof window === \"undefined\") return null;\r\n//   return localStorage.getItem(\"refresh_token\");\r\n// }\r\n\r\n// async function refreshTokens(): Promise<boolean> {\r\n//   const rt = getRefreshToken();\r\n//   if (!rt) return false;\r\n//   const url = `${API_BASE}/api/v1/auth/refresh?refresh_token=${encodeURIComponent(\r\n//     rt\r\n//   )}`;\r\n//   const res = await fetch(url, { method: \"POST\" });\r\n//   if (!res.ok) return false;\r\n//   try {\r\n//     const data = (await res.json()) as {\r\n//       access_token: string;\r\n//       refresh_token: string;\r\n//       token_type: string;\r\n//       expires_in: number;\r\n//     };\r\n//     if (typeof window !== \"undefined\") {\r\n//       localStorage.setItem(\"access_token\", data.access_token);\r\n//       localStorage.setItem(\"refresh_token\", data.refresh_token);\r\n//     }\r\n//     return true;\r\n//   } catch {\r\n//     return false;\r\n//   }\r\n// }\r\n\r\n// async function authFetch(\r\n//   path: string,\r\n//   init?: RequestInit,\r\n//   retry = true,\r\n//   tenantId?: string\r\n// ): Promise<Response> {\r\n//   const token = getAccessToken();\r\n//   const headers: HeadersInit = buildHeaders(\r\n//     {\r\n//       ...(init?.headers || {}),\r\n//       ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n//     },\r\n//     tenantId\r\n//   );\r\n//   const res = await fetch(`${API_BASE}${path}`, { ...(init || {}), headers });\r\n//   if (res.status === 401 && retry) {\r\n//     const ok = await refreshTokens();\r\n//     if (ok) {\r\n//       const newToken = getAccessToken();\r\n//       const retryHeaders: HeadersInit = buildHeaders(\r\n//         {\r\n//           ...(init?.headers || {}),\r\n//           ...(newToken ? { Authorization: `Bearer ${newToken}` } : {}),\r\n//         },\r\n//         tenantId\r\n//       );\r\n//       return fetch(`${API_BASE}${path}`, {\r\n//         ...(init || {}),\r\n//         headers: retryHeaders,\r\n//       });\r\n//     }\r\n//   }\r\n//   return res;\r\n// }\r\n\r\n// export async function getAuthJSON<T = any>(\r\n//   path: string,\r\n//   tenantId?: string\r\n// ): Promise<T> {\r\n//   const res = await authFetch(path, undefined, true, tenantId);\r\n//   if (!res.ok) {\r\n//     try {\r\n//       const data = await res.json();\r\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\r\n//       throw new Error(msg || `Request failed with ${res.status}`);\r\n//     } catch {\r\n//       const text = await res.text().catch(() => \"\");\r\n//       throw new Error(text || `Request failed with ${res.status}`);\r\n//     }\r\n//   }\r\n//   return (await res.json()) as T;\r\n// }\r\n\r\n// export async function postAuthJSON<T = any>(\r\n//   path: string,\r\n//   bodyData: any,\r\n//   tenantId?: string\r\n// ): Promise<T> {\r\n//   const res = await authFetch(\r\n//     path,\r\n//     {\r\n//       method: \"POST\",\r\n//       headers: { \"Content-Type\": \"application/json\" },\r\n//       body: JSON.stringify(bodyData),\r\n//     },\r\n//     true,\r\n//     tenantId\r\n//   );\r\n//   if (!res.ok) {\r\n//     try {\r\n//       const data = await res.json();\r\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\r\n//       throw new Error(msg || `Request failed with ${res.status}`);\r\n//     } catch {\r\n//       const text = await res.text().catch(() => \"\");\r\n//       throw new Error(text || `Request failed with ${res.status}`);\r\n//     }\r\n//   }\r\n//   return (await res.json()) as T;\r\n// }\r\n\r\n// // Convenience wrappers for key flows\r\n// export const AuthAPI = {\r\n//   registerAffiliate: (body: any) => postJSON(\"/auth/register/affiliate\", body),\r\n//   registerPharmacy: (body: any) => postJSON(\"/auth/register/pharmacy\", body),\r\n//   registerVerify: (email: string, code: string) =>\r\n//     postForm(\"/auth/register/verify\", { email, code }),\r\n//   verifyRegistration: (email: string, code: string) =>\r\n//     postForm(\"/auth/register/verify\", { email, code }),\r\n//   login: (email: string, password: string, tenantId?: string) =>\r\n//     postForm(\"/auth/login\", { username: email, password }, tenantId),\r\n//   loginRequestCode: (email: string, password: string, tenantId?: string) =>\r\n//     postForm(\r\n//       \"/auth/login/request-code\",\r\n//       { username: email, password },\r\n//       tenantId\r\n//     ),\r\n//   loginVerify: (email: string, code: string, tenantId?: string) =>\r\n//     postJSON(\"/auth/login/verify\", { email, code }, tenantId),\r\n//   me: () => getAuthJSON(\"/auth/me\"),\r\n// };\r\n\r\n// export const AffiliateAPI = {\r\n//   getLinks: () => getAuthJSON(\"/affiliate/register-link\"),\r\n//   createLink: () => getAuthJSON(\"/affiliate/register-link?create_new=true\"),\r\n//   deactivate: (token: string) =>\r\n//     postAuthJSON(\r\n//       `/affiliate/links/${encodeURIComponent(token)}/deactivate`,\r\n//       {}\r\n//     ),\r\n//   rotate: (token: string) =>\r\n//     postAuthJSON(`/affiliate/links/${encodeURIComponent(token)}/rotate`, {}),\r\n//   dashboard: () => getAuthJSON(\"/affiliate/dashboard\"),\r\n//   payouts: (status?: string) =>\r\n//     getAuthJSON(\r\n//       `/affiliate/payouts${\r\n//         status ? `?status_filter=${encodeURIComponent(status)}` : \"\"\r\n//       }`\r\n//     ),\r\n//   requestPayout: (month?: string, percent = 5) =>\r\n//     postAuthJSON(\"/affiliate/payouts/request\", { month, percent }),\r\n//   updateProfile: (body: any) => postAuthJSON(\"/affiliate/profile\", body),\r\n// };\r\n\r\n// export const AdminAPI = {\r\n//   pharmacies: (page = 1, pageSize = 20, q?: string) =>\r\n//     getAuthJSON(\r\n//       `/admin/pharmacies?page=${page}&page_size=${pageSize}${\r\n//         q ? `&q=${encodeURIComponent(q)}` : \"\"\r\n//       }`\r\n//     ),\r\n//   affiliates: (page = 1, pageSize = 20, q?: string) =>\r\n//     getAuthJSON(\r\n//       `/admin/affiliates?page=${page}&page_size=${pageSize}${\r\n//         q ? `&q=${encodeURIComponent(q)}` : \"\"\r\n//       }`\r\n//     ),\r\n//   approvePharmacy: (\r\n//     tenantId: string,\r\n//     applicationId: number,\r\n//     body?: { issue_temp_password?: boolean; temp_password?: string }\r\n//   ) =>\r\n//     postAuthJSON(\r\n//       `/admin/pharmacies/${applicationId}/approve`,\r\n//       body || {},\r\n//       tenantId\r\n//     ),\r\n//   rejectPharmacy: (tenantId: string, applicationId: number) =>\r\n//     postAuthJSON(`/admin/pharmacies/${applicationId}/reject`, {}, tenantId),\r\n//   verifyPayment: (tenantId: string, code?: string | null) =>\r\n//     postAuthJSON(`/admin/payments/verify`, { code: code || null }, tenantId),\r\n//   rejectPayment: (tenantId: string, code?: string | null) =>\r\n//     postAuthJSON(`/admin/payments/reject`, { code: code || null }, tenantId),\r\n//   analyticsOverview: (days = 30) =>\r\n//     getAuthJSON(`/admin/analytics/overview?days=${days}`),\r\n//   downloadPharmacyLicense: async (applicationId: number) => {\r\n//     const res = await authFetch(\r\n//       `/admin/pharmacies/${applicationId}/license`,\r\n//       { method: \"GET\" },\r\n//       true\r\n//     );\r\n//     if (!res.ok) {\r\n//       const text = await res.text().catch(() => \"\");\r\n//       throw new Error(text || `HTTP ${res.status}`);\r\n//     }\r\n//     const blob = await res.blob();\r\n//     let filename = `license-${applicationId}`;\r\n//     const disposition = res.headers.get(\"Content-Disposition\") || \"\";\r\n//     const match = disposition.match(\r\n//       /filename\\*=UTF-8''([^;]+)|filename=\"?([^\";]+)\"?/i\r\n//     );\r\n//     const extracted = match?.[1] || match?.[2];\r\n//     if (extracted) {\r\n//       try {\r\n//         filename = decodeURIComponent(extracted);\r\n//       } catch {\r\n//         filename = extracted;\r\n//       }\r\n//     }\r\n//     const url = window.URL.createObjectURL(blob);\r\n//     const link = document.createElement(\"a\");\r\n//     link.href = url;\r\n//     link.download = filename;\r\n//     document.body.appendChild(link);\r\n//     link.click();\r\n//     document.body.removeChild(link);\r\n//     window.URL.revokeObjectURL(url);\r\n//   },\r\n//   approveAffiliate: (userId: number) =>\r\n//     postAuthJSON(`/admin/affiliates/${userId}/approve`, {}),\r\n//   rejectAffiliate: (userId: number) =>\r\n//     postAuthJSON(`/admin/affiliates/${userId}/reject`, {}),\r\n//   listAffiliatePayouts: (status?: string) =>\r\n//     getAuthJSON(\r\n//       `/admin/affiliate/payouts${\r\n//         status ? `?status=${encodeURIComponent(status)}` : \"\"\r\n//       }`\r\n//     ),\r\n//   markPayoutPaid: (payoutId: number) =>\r\n//     postAuthJSON(`/admin/affiliate/payouts/${payoutId}/mark-paid`, {}),\r\n//   approvePayout: (payoutId: number) =>\r\n//     postAuthJSON(`/admin/affiliate/payouts/${payoutId}/approve`, {}),\r\n//   usage: (days = 30) => getAuthJSON(`/admin/usage?days=${days}`),\r\n//   audit: (params?: { tenant_id?: string; action?: string; limit?: number }) =>\r\n//     getAuthJSON(\r\n//       `/admin/audit${(() => {\r\n//         const qs = new URLSearchParams();\r\n//         if (params?.tenant_id) qs.set(\"tenant_id\", params.tenant_id);\r\n//         if (params?.action) qs.set(\"action\", params.action);\r\n//         if (params?.limit) qs.set(\"limit\", String(params.limit));\r\n//         const s = qs.toString();\r\n//         return s ? `?${s}` : \"\";\r\n//       })()}`\r\n//     ),\r\n// };\r\n\r\n// export const StaffAPI = {\r\n//   createCashier: (tenantId: string, body: any) =>\r\n//     postAuthJSON(\"/staff\", body, tenantId),\r\n//   list: (tenantId: string) => getAuthJSON(\"/staff\", tenantId),\r\n//   update: (tenantId: string, userId: number, body: { is_active?: boolean }) =>\r\n//     authFetch(\r\n//       `/staff/${userId}`,\r\n//       {\r\n//         method: \"PATCH\",\r\n//         headers: { \"Content-Type\": \"application/json\" },\r\n//         body: JSON.stringify(body),\r\n//       },\r\n//       true,\r\n//       tenantId\r\n//     ).then(async (res) => {\r\n//       if (!res.ok) {\r\n//         const t = await res.text();\r\n//         throw new Error(t || `HTTP ${res.status}`);\r\n//       }\r\n//       return res.json();\r\n//     }),\r\n//   remove: (tenantId: string, userId: number) =>\r\n//     authFetch(`/staff/${userId}`, { method: \"DELETE\" }, true, tenantId).then(\r\n//       async (res) => {\r\n//         if (!res.ok) {\r\n//           const t = await res.text();\r\n//           throw new Error(t || `HTTP ${res.status}`);\r\n//         }\r\n//         return res.json();\r\n//       }\r\n//     ),\r\n// };\r\n\r\n// export const BillingAPI = {\r\n//   submitPaymentCode: (tenantId: string, code: string) =>\r\n//     postAuthJSON(\"/billing/payment-code\", { code }, tenantId),\r\n// };\r\n\r\n// export const UploadAPI = {\r\n//   uploadKyc: async (\r\n//     file: File\r\n//   ): Promise<{ path: string; size: number; filename: string }> => {\r\n//     const fd = new FormData();\r\n//     fd.append(\"file\", file);\r\n//     return await postMultipart(`/uploads/kyc`, fd);\r\n//   },\r\n// };\r\n\r\n// export const KYCAPI = {\r\n//   status: (tenantId: string) => getAuthJSON(`/owner/kyc/status`, tenantId),\r\n//   update: (tenantId: string, body: any) =>\r\n//     putAuthJSON(`/owner/kyc/status`, body, tenantId),\r\n// };\r\n\r\n// export const PharmaciesAPI = {\r\n//   list: (page = 1, pageSize = 20, q?: string) =>\r\n//     getAuthJSON(\r\n//       `/pharmacies?page=${page}&page_size=${pageSize}${\r\n//         q ? `&q=${encodeURIComponent(q)}` : \"\"\r\n//       }`\r\n//     ),\r\n//   get: (id: number) => getAuthJSON(`/pharmacies/${id}`),\r\n//   update: (id: number, body: { name?: string; address?: string }) =>\r\n//     authFetch(`/pharmacies/${id}`, {\r\n//       method: \"PATCH\",\r\n//       headers: { \"Content-Type\": \"application/json\" },\r\n//       body: JSON.stringify(body),\r\n//     }).then(async (res) => {\r\n//       if (!res.ok) {\r\n//         const t = await res.text();\r\n//         throw new Error(t || `HTTP ${res.status}`);\r\n//       }\r\n//       return res.json();\r\n//     }),\r\n// };\r\n\r\n// export const ChatAPI = {\r\n//   listThreads: (tenantId: string) => getAuthJSON(`/chat/threads`, tenantId),\r\n//   createThread: (tenantId: string, title: string) =>\r\n//     postAuthJSON(`/chat/threads`, { title }, tenantId),\r\n//   listMessages: (tenantId: string, threadId: number) =>\r\n//     getAuthJSON(`/chat/threads/${threadId}/messages`, tenantId),\r\n//   sendMessage: (tenantId: string, threadId: number, prompt: string) =>\r\n//     postAuthJSON(`/chat/threads/${threadId}/messages`, { prompt }, tenantId),\r\n//   usage: (tenantId: string, days = 30) =>\r\n//     getAuthJSON(`/chat/usage?days=${days}`, tenantId),\r\n//   sendStream: async (\r\n//     tenantId: string,\r\n//     threadId: number,\r\n//     prompt: string,\r\n//     onEvent: (evt: { event: string; data?: any }) => void\r\n//   ): Promise<void> => {\r\n//     const res = await authFetch(\r\n//       `/chat/threads/${threadId}/messages/stream`,\r\n//       {\r\n//         method: \"POST\",\r\n//         headers: { \"Content-Type\": \"application/json\" },\r\n//         body: JSON.stringify({ prompt }),\r\n//       },\r\n//       true,\r\n//       tenantId\r\n//     );\r\n//     if (!res.ok || !res.body) {\r\n//       const t = await res.text().catch(() => \"\");\r\n//       throw new Error(t || `HTTP ${res.status}`);\r\n//     }\r\n//     const reader = res.body.getReader();\r\n//     const decoder = new TextDecoder();\r\n//     let buf = \"\";\r\n//     while (true) {\r\n//       const { done, value } = await reader.read();\r\n//       if (done) break;\r\n//       buf += decoder.decode(value, { stream: true });\r\n//       let idx;\r\n//       while ((idx = buf.indexOf(\"\\n\\n\")) !== -1) {\r\n//         const chunk = buf.slice(0, idx).trim();\r\n//         buf = buf.slice(idx + 2);\r\n//         if (chunk.startsWith(\"data:\")) {\r\n//           try {\r\n//             const jsonStr = chunk.slice(5).trim();\r\n//             const obj = JSON.parse(jsonStr);\r\n//             onEvent(obj);\r\n//           } catch {}\r\n//         }\r\n//       }\r\n//     }\r\n//   },\r\n// };\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1411, "column": 0}, "map": {"version":3,"sources":["file:///D:/b/gugu-gaga-/front_end/utils/security.ts"],"sourcesContent":["// Security utilities for the frontend application\r\n\r\n/**\r\n * Sanitize user input to prevent XSS attacks\r\n */\r\nexport function sanitizeInput(input: string): string {\r\n  if (typeof input !== 'string') return '';\r\n  \r\n  return input\r\n    .replace(/[<>]/g, '') // Remove potential HTML tags\r\n    .replace(/javascript:/gi, '') // Remove javascript: protocol\r\n    .replace(/on\\w+=/gi, '') // Remove event handlers\r\n    .trim();\r\n}\r\n\r\n/**\r\n * Validate email format\r\n */\r\nexport function isValidEmail(email: string): boolean {\r\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n  return emailRegex.test(email);\r\n}\r\n\r\n/**\r\n * Validate phone number format\r\n */\r\nexport function isValidPhone(phone: string): boolean {\r\n  const phoneRegex = /^\\+?[0-9]{7,15}$/;\r\n  return phoneRegex.test(phone);\r\n}\r\n\r\n/**\r\n * Check if password meets security requirements\r\n */\r\nexport function isValidPassword(password: string): { valid: boolean; message?: string } {\r\n  if (password.length < 8) {\r\n    return { valid: false, message: 'Password must be at least 8 characters long' };\r\n  }\r\n  \r\n  if (!/[A-Z]/.test(password)) {\r\n    return { valid: false, message: 'Password must contain at least one uppercase letter' };\r\n  }\r\n  \r\n  if (!/[a-z]/.test(password)) {\r\n    return { valid: false, message: 'Password must contain at least one lowercase letter' };\r\n  }\r\n  \r\n  if (!/[0-9]/.test(password)) {\r\n    return { valid: false, message: 'Password must contain at least one number' };\r\n  }\r\n  \r\n  return { valid: true };\r\n}\r\n\r\n/**\r\n * Secure token storage with expiration\r\n */\r\nexport function setSecureToken(key: string, token: string, expiresInHours: number = 24): void {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  const expiry = new Date();\r\n  expiry.setHours(expiry.getHours() + expiresInHours);\r\n  \r\n  const tokenData = {\r\n    token,\r\n    expiry: expiry.getTime()\r\n  };\r\n  \r\n  localStorage.setItem(key, JSON.stringify(tokenData));\r\n}\r\n\r\n/**\r\n * Get secure token with expiration check\r\n */\r\nexport function getSecureToken(key: string): string | null {\r\n  if (typeof window === 'undefined') return null;\r\n  \r\n  try {\r\n    const stored = localStorage.getItem(key);\r\n    if (!stored) return null;\r\n    \r\n    const tokenData = JSON.parse(stored);\r\n    \r\n    // Check if token is expired\r\n    if (Date.now() > tokenData.expiry) {\r\n      localStorage.removeItem(key);\r\n      return null;\r\n    }\r\n    \r\n    return tokenData.token;\r\n  } catch {\r\n    localStorage.removeItem(key);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Clear all authentication tokens\r\n */\r\nexport function clearAuthTokens(): void {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  const keysToRemove = [\r\n    'access_token',\r\n    'refresh_token',\r\n    'token',\r\n    'user_role'\r\n  ];\r\n  \r\n  keysToRemove.forEach(key => localStorage.removeItem(key));\r\n}\r\n\r\n/**\r\n * Rate limiting for API calls\r\n */\r\nclass RateLimiter {\r\n  private requests: Map<string, number[]> = new Map();\r\n  \r\n  canMakeRequest(key: string, maxRequests: number = 10, windowMs: number = 60000): boolean {\r\n    const now = Date.now();\r\n    const windowStart = now - windowMs;\r\n    \r\n    if (!this.requests.has(key)) {\r\n      this.requests.set(key, []);\r\n    }\r\n    \r\n    const requests = this.requests.get(key)!;\r\n    \r\n    // Remove old requests outside the window\r\n    const validRequests = requests.filter(time => time > windowStart);\r\n    this.requests.set(key, validRequests);\r\n    \r\n    if (validRequests.length >= maxRequests) {\r\n      return false;\r\n    }\r\n    \r\n    validRequests.push(now);\r\n    this.requests.set(key, validRequests);\r\n    return true;\r\n  }\r\n}\r\n\r\nexport const rateLimiter = new RateLimiter();\r\n\r\n/**\r\n * Content Security Policy headers for API requests\r\n */\r\nexport function getSecureHeaders(): HeadersInit {\r\n  return {\r\n    'X-Content-Type-Options': 'nosniff',\r\n    'X-Frame-Options': 'DENY',\r\n    'X-XSS-Protection': '1; mode=block',\r\n    'Referrer-Policy': 'strict-origin-when-cross-origin'\r\n  };\r\n}\r\n\r\n/**\r\n * Validate tenant ID format\r\n */\r\nexport function isValidTenantId(tenantId: string): boolean {\r\n  // Tenant ID should be alphanumeric with hyphens, 3-50 characters\r\n  const tenantRegex = /^[a-zA-Z0-9-]{3,50}$/;\r\n  return tenantRegex.test(tenantId);\r\n}\r\n\r\n/**\r\n * Generate secure random string for CSRF tokens\r\n */\r\nexport function generateSecureToken(length: number = 32): string {\r\n  if (typeof window !== 'undefined' && window.crypto && window.crypto.getRandomValues) {\r\n    const array = new Uint8Array(length);\r\n    window.crypto.getRandomValues(array);\r\n    return Array.from(array, byte => byte.toString(16).padStart(2, '0')).join('');\r\n  }\r\n  \r\n  // Fallback for environments without crypto API\r\n  return Math.random().toString(36).substring(2, length + 2);\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1581, "column": 0}, "map": {"version":3,"sources":["file:///D:/b/gugu-gaga-/front_end/components/auth/auth-provider.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { AuthAPI, type AuthProfile, clearTokens } from \"@/utils/api\";\r\nimport { clearAuthTokens } from \"@/utils/security\";\r\n\r\ninterface AuthContextType {\r\n  user: AuthProfile | null;\r\n  loading: boolean;\r\n  login: (email: string, password: string, tenantId?: string) => Promise<void>;\r\n  logout: () => void;\r\n  refreshUser: () => Promise<void>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const [user, setUser] = useState<AuthProfile | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const router = useRouter();\r\n\r\n  const refreshUser = async () => {\r\n    try {\r\n      const profile = await AuthAPI.me();\r\n      setUser(profile);\r\n    } catch (error) {\r\n      setUser(null);\r\n      if (typeof window !== \"undefined\") {\r\n        localStorage.removeItem(\"access_token\");\r\n        localStorage.removeItem(\"refresh_token\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const login = async (email: string, password: string, tenantId?: string) => {\r\n    const response = await AuthAPI.login(email, password, tenantId);\r\n    \r\n    // Store tokens in cookies for middleware access\r\n    if (typeof window !== \"undefined\" && response.access_token) {\r\n      const isProduction = process.env.NODE_ENV === 'production';\r\n      const cookieOptions = `path=/; max-age=${20160 * 60}; ${isProduction ? 'secure; ' : ''}samesite=strict`;\r\n      document.cookie = `access_token=${response.access_token}; ${cookieOptions}`;\r\n      if (response.refresh_token) {\r\n        document.cookie = `refresh_token=${response.refresh_token}; path=/; max-age=${14 * 24 * 60 * 60}; ${isProduction ? 'secure; ' : ''}samesite=strict`;\r\n      }\r\n    }\r\n    \r\n    await refreshUser();\r\n  };\r\n\r\n  const logout = () => {\r\n    setUser(null);\r\n    clearTokens();\r\n    clearAuthTokens();\r\n    \r\n    // Clear cookies\r\n    if (typeof window !== \"undefined\") {\r\n      document.cookie = \"access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT\";\r\n      document.cookie = \"refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT\";\r\n    }\r\n    \r\n    router.push(\"/\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n\r\n    async function checkAuth() {\r\n      try {\r\n        const token = typeof window !== \"undefined\" ? localStorage.getItem(\"access_token\") : null;\r\n        if (!token) {\r\n          setUser(null);\r\n          return;\r\n        }\r\n\r\n        const profile = await AuthAPI.me();\r\n        if (mounted) {\r\n          setUser(profile);\r\n        }\r\n      } catch (error) {\r\n        if (mounted) {\r\n          setUser(null);\r\n          clearTokens();\r\n          clearAuthTokens();\r\n        }\r\n      } finally {\r\n        if (mounted) {\r\n          setLoading(false);\r\n        }\r\n      }\r\n    }\r\n\r\n    checkAuth();\r\n\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, loading, login, logout, refreshUser }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useAuth must be used within an AuthProvider\");\r\n  }\r\n  return context;\r\n}"],"names":[],"mappings":";;;;;;AAwC2B;;AAtC3B;AACA;AACA;AACA;;;AALA;;;;;AAeA,MAAM,4BAAc,IAAA,8KAAa,EAA8B;AAExD,SAAS,aAAa,KAA2C;QAA3C,EAAE,QAAQ,EAAiC,GAA3C;;IAC3B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAqB;IACrD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,cAAc;QAClB,IAAI;YACF,MAAM,UAAU,MAAM,0HAAO,CAAC,EAAE;YAChC,QAAQ;QACV,EAAE,OAAO,OAAO;YACd,QAAQ;YACR,wCAAmC;gBACjC,aAAa,UAAU,CAAC;gBACxB,aAAa,UAAU,CAAC;YAC1B;QACF;IACF;IAEA,MAAM,QAAQ,OAAO,OAAe,UAAkB;QACpD,MAAM,WAAW,MAAM,0HAAO,CAAC,KAAK,CAAC,OAAO,UAAU;QAEtD,gDAAgD;QAChD,IAAI,aAAkB,eAAe,SAAS,YAAY,EAAE;YAC1D,MAAM,eAAe,oDAAyB;YAC9C,MAAM,gBAAgB,AAAC,mBAAiC,OAAf,QAAQ,IAAG,MAAmC,OAA/B,sCAAe,0BAAa,IAAG;YACvF,SAAS,MAAM,GAAG,AAAC,gBAAyC,OAA1B,SAAS,YAAY,EAAC,MAAkB,OAAd;YAC5D,IAAI,SAAS,aAAa,EAAE;gBAC1B,SAAS,MAAM,GAAG,AAAC,iBAA2D,OAA3C,SAAS,aAAa,EAAC,sBAA0C,OAAtB,KAAK,KAAK,KAAK,IAAG,MAAmC,OAA/B,sCAAe,0BAAa,IAAG;YACrI;QACF;QAEA,MAAM;IACR;IAEA,MAAM,SAAS;QACb,QAAQ;QACR,IAAA,8HAAW;QACX,IAAA,uIAAe;QAEf,gBAAgB;QAChB,wCAAmC;YACjC,SAAS,MAAM,GAAG;YAClB,SAAS,MAAM,GAAG;QACpB;QAEA,OAAO,IAAI,CAAC;IACd;IAEA,IAAA,0KAAS;kCAAC;YACR,IAAI,UAAU;YAEd,eAAe;gBACb,IAAI;oBACF,MAAM,QAAQ,uCAAgC,aAAa,OAAO,CAAC,kBAAkB;oBACrF,IAAI,CAAC,OAAO;wBACV,QAAQ;wBACR;oBACF;oBAEA,MAAM,UAAU,MAAM,0HAAO,CAAC,EAAE;oBAChC,IAAI,SAAS;wBACX,QAAQ;oBACV;gBACF,EAAE,OAAO,OAAO;oBACd,IAAI,SAAS;wBACX,QAAQ;wBACR,IAAA,8HAAW;wBACX,IAAA,uIAAe;oBACjB;gBACF,SAAU;oBACR,IAAI,SAAS;wBACX,WAAW;oBACb;gBACF;YACF;YAEA;YAEA;0CAAO;oBACL,UAAU;gBACZ;;QACF;iCAAG,EAAE;IAEL,qBACE,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;YAAO;YAAQ;QAAY;kBACtE;;;;;;AAGP;GAxFgB;;QAGC,kJAAS;;;KAHV;AA0FT,SAAS;;IACd,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB","debugId":null}},
    {"offset": {"line": 1716, "column": 0}, "map": {"version":3,"sources":["file:///D:/b/gugu-gaga-/front_end/components/ui/toast.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { createContext, useCallback, useContext, useMemo, useState } from \"react\";\r\n\r\nexport default function Toast() {\r\n  return null;\r\n}\r\n\r\nexport type Toast = {\r\n  id: string;\r\n  title?: React.ReactNode;\r\n  description?: React.ReactNode;\r\n  variant?: \"default\" | \"success\" | \"destructive\";\r\n  duration?: number;\r\n};\r\n\r\ntype ToastContextValue = {\r\n  toasts: Toast[];\r\n  show: (t: Omit<Toast, \"id\">) => void;\r\n  dismiss: (id: string) => void;\r\n};\r\n\r\nconst ToastContext = createContext<ToastContextValue | null>(null);\r\n\r\nexport function ToastProvider({ children }: { children: React.ReactNode }) {\r\n  const [toasts, setToasts] = useState<Toast[]>([]);\r\n\r\n  const dismiss = useCallback((id: string) => {\r\n    setToasts((prev) => prev.filter((t) => t.id !== id));\r\n  }, []);\r\n\r\n  const show = useCallback(\r\n    (t: Omit<Toast, \"id\">) => {\r\n      const id = Math.random().toString(36).slice(2);\r\n      const toast: Toast = { id, duration: 3000, variant: \"default\", ...t };\r\n      setToasts((prev) => [...prev, toast]);\r\n      const duration = toast.duration ?? 3000;\r\n      if (duration > 0) {\r\n        setTimeout(() => dismiss(id), duration);\r\n      }\r\n    },\r\n    [dismiss]\r\n  );\r\n\r\n  const value = useMemo(() => ({ toasts, show, dismiss }), [toasts, show, dismiss]);\r\n\r\n  return <ToastContext.Provider value={value}>{children}</ToastContext.Provider>;\r\n}\r\n\r\nexport function useToast() {\r\n  const ctx = useContext(ToastContext);\r\n  if (!ctx) throw new Error(\"useToast must be used within ToastProvider\");\r\n  return ctx;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;AACA;;;AADA;;AAGe,SAAS;IACtB,OAAO;AACT;KAFwB;AAkBxB,MAAM,6BAAe,IAAA,8KAAa,EAA2B;AAEtD,SAAS,cAAc,KAA2C;QAA3C,EAAE,QAAQ,EAAiC,GAA3C;;IAC5B,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAU,EAAE;IAEhD,MAAM,UAAU,IAAA,4KAAW;8CAAC,CAAC;YAC3B;sDAAU,CAAC,OAAS,KAAK,MAAM;8DAAC,CAAC,IAAM,EAAE,EAAE,KAAK;;;QAClD;6CAAG,EAAE;IAEL,MAAM,OAAO,IAAA,4KAAW;2CACtB,CAAC;YACC,MAAM,KAAK,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC;YAC5C,MAAM,QAAe;gBAAE;gBAAI,UAAU;gBAAM,SAAS;gBAAW,GAAG,CAAC;YAAC;YACpE;mDAAU,CAAC,OAAS;2BAAI;wBAAM;qBAAM;;gBACnB;YAAjB,MAAM,WAAW,CAAA,kBAAA,MAAM,QAAQ,cAAd,6BAAA,kBAAkB;YACnC,IAAI,WAAW,GAAG;gBAChB;uDAAW,IAAM,QAAQ;sDAAK;YAChC;QACF;0CACA;QAAC;KAAQ;IAGX,MAAM,QAAQ,IAAA,wKAAO;wCAAC,IAAM,CAAC;gBAAE;gBAAQ;gBAAM;YAAQ,CAAC;uCAAG;QAAC;QAAQ;QAAM;KAAQ;IAEhF,qBAAO,6LAAC,aAAa,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC/C;GAvBgB;MAAA;AAyBT,SAAS;;IACd,MAAM,MAAM,IAAA,2KAAU,EAAC;IACvB,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAC1B,OAAO;AACT;IAJgB","debugId":null}},
    {"offset": {"line": 1813, "column": 0}, "map": {"version":3,"sources":["file:///D:/b/gugu-gaga-/front_end/utils/hardcoded-routing.ts"],"sourcesContent":["// Hardcoded routing logic for production\r\nexport function getHardcodedRoute(user: any): string {\r\n  if (!user) return '/';\r\n\r\n  // If not verified, always go to verify page\r\n  if (!user.is_verified) {\r\n    return '/verify';\r\n  }\r\n\r\n  // Role-based routing after verification\r\n  switch (user.role) {\r\n    case 'affiliate':\r\n      return '/dashboard/affiliate';\r\n\r\n    case 'pharmacy_owner':\r\n      // Check KYC status first\r\n      if (user.kyc_status === 'not_submitted' || user.kyc_status === 'rejected') {\r\n        return '/dashboard/kyc';\r\n      }\r\n      if (user.kyc_status === 'pending') {\r\n        return '/dashboard/kyc';\r\n      }\r\n      // If KYC approved, check subscription\r\n      if (user.subscription_status === 'pending_verification') {\r\n        return '/dashboard/payment';\r\n      }\r\n      if (user.subscription_blocked) {\r\n        return '/dashboard/payment';\r\n      }\r\n      // All good, go to dashboard\r\n      return '/dashboard';\r\n\r\n    case 'supplier':\r\n      // Check KYC status first\r\n      if (user.kyc_status === 'not_submitted' || user.kyc_status === 'rejected') {\r\n        return '/dashboard/supplier/kyc';\r\n      }\r\n      if (user.kyc_status === 'pending') {\r\n        return '/dashboard/supplier/kyc';\r\n      }\r\n      // If KYC approved, check subscription\r\n      if (user.subscription_status === 'pending_verification') {\r\n        return '/dashboard/payment';\r\n      }\r\n      if (user.subscription_blocked) {\r\n        return '/dashboard/payment';\r\n      }\r\n      // All good, go to supplier dashboard\r\n      return '/dashboard/supplier';\r\n\r\n    case 'cashier':\r\n      // Cashiers are created by approved owners, go directly to dashboard\r\n      return '/dashboard';\r\n\r\n    case 'admin':\r\n      return '/secure-admin-zmp-7x9k';\r\n\r\n    default:\r\n      return '/';\r\n  }\r\n}\r\n\r\n// Route protection - returns true if user can access the route\r\nexport function canAccessRoute(user: any, pathname: string): boolean {\r\n  if (!user) return false;\r\n\r\n  // Always allow verify page if not verified\r\n  if (!user.is_verified && pathname === '/verify') {\r\n    return true;\r\n  }\r\n\r\n  // Block all other routes if not verified\r\n  if (!user.is_verified) {\r\n    return false;\r\n  }\r\n\r\n  // Role-specific route protection\r\n  switch (user.role) {\r\n    case 'affiliate':\r\n      return pathname.startsWith('/dashboard/affiliate') || pathname === '/dashboard/affiliate';\r\n\r\n    case 'pharmacy_owner':\r\n      // Block dashboard if KYC not approved\r\n      if ((user.kyc_status !== 'approved') && pathname.startsWith('/dashboard') && !pathname.includes('/kyc')) {\r\n        return false;\r\n      }\r\n      // Block dashboard if payment pending\r\n      if ((user.subscription_status === 'pending_verification' || user.subscription_blocked) &&\r\n        pathname.startsWith('/dashboard') && !pathname.includes('/payment')) {\r\n        return false;\r\n      }\r\n      return pathname.startsWith('/dashboard') && !pathname.includes('/affiliate') && !pathname.includes('/supplier');\r\n\r\n    case 'supplier':\r\n      // Block dashboard if KYC not approved\r\n      if ((user.kyc_status !== 'approved') && pathname.startsWith('/dashboard/supplier') && !pathname.includes('/kyc')) {\r\n        return false;\r\n      }\r\n      // Block dashboard if payment pending\r\n      if ((user.subscription_status === 'pending_verification' || user.subscription_blocked) &&\r\n        pathname.startsWith('/dashboard') && !pathname.includes('/payment')) {\r\n        return false;\r\n      }\r\n      // Allow payment page access\r\n      if (pathname.includes('/payment')) {\r\n        return true;\r\n      }\r\n      return pathname.startsWith('/dashboard/supplier');\r\n\r\n    case 'cashier':\r\n      // Cashiers can access dashboard (created by approved owners)\r\n      return pathname.startsWith('/dashboard') && !pathname.includes('/affiliate') && !pathname.includes('/supplier');\r\n\r\n    case 'admin':\r\n      return pathname.startsWith('/secure-admin-zmp-7x9k');\r\n\r\n    default:\r\n      return false;\r\n  }\r\n}"],"names":[],"mappings":"AAAA,yCAAyC;;;;;;;AAClC,SAAS,kBAAkB,IAAS;IACzC,IAAI,CAAC,MAAM,OAAO;IAElB,4CAA4C;IAC5C,IAAI,CAAC,KAAK,WAAW,EAAE;QACrB,OAAO;IACT;IAEA,wCAAwC;IACxC,OAAQ,KAAK,IAAI;QACf,KAAK;YACH,OAAO;QAET,KAAK;YACH,yBAAyB;YACzB,IAAI,KAAK,UAAU,KAAK,mBAAmB,KAAK,UAAU,KAAK,YAAY;gBACzE,OAAO;YACT;YACA,IAAI,KAAK,UAAU,KAAK,WAAW;gBACjC,OAAO;YACT;YACA,sCAAsC;YACtC,IAAI,KAAK,mBAAmB,KAAK,wBAAwB;gBACvD,OAAO;YACT;YACA,IAAI,KAAK,oBAAoB,EAAE;gBAC7B,OAAO;YACT;YACA,4BAA4B;YAC5B,OAAO;QAET,KAAK;YACH,yBAAyB;YACzB,IAAI,KAAK,UAAU,KAAK,mBAAmB,KAAK,UAAU,KAAK,YAAY;gBACzE,OAAO;YACT;YACA,IAAI,KAAK,UAAU,KAAK,WAAW;gBACjC,OAAO;YACT;YACA,sCAAsC;YACtC,IAAI,KAAK,mBAAmB,KAAK,wBAAwB;gBACvD,OAAO;YACT;YACA,IAAI,KAAK,oBAAoB,EAAE;gBAC7B,OAAO;YACT;YACA,qCAAqC;YACrC,OAAO;QAET,KAAK;YACH,oEAAoE;YACpE,OAAO;QAET,KAAK;YACH,OAAO;QAET;YACE,OAAO;IACX;AACF;AAGO,SAAS,eAAe,IAAS,EAAE,QAAgB;IACxD,IAAI,CAAC,MAAM,OAAO;IAElB,2CAA2C;IAC3C,IAAI,CAAC,KAAK,WAAW,IAAI,aAAa,WAAW;QAC/C,OAAO;IACT;IAEA,yCAAyC;IACzC,IAAI,CAAC,KAAK,WAAW,EAAE;QACrB,OAAO;IACT;IAEA,iCAAiC;IACjC,OAAQ,KAAK,IAAI;QACf,KAAK;YACH,OAAO,SAAS,UAAU,CAAC,2BAA2B,aAAa;QAErE,KAAK;YACH,sCAAsC;YACtC,IAAI,AAAC,KAAK,UAAU,KAAK,cAAe,SAAS,UAAU,CAAC,iBAAiB,CAAC,SAAS,QAAQ,CAAC,SAAS;gBACvG,OAAO;YACT;YACA,qCAAqC;YACrC,IAAI,CAAC,KAAK,mBAAmB,KAAK,0BAA0B,KAAK,oBAAoB,KACnF,SAAS,UAAU,CAAC,iBAAiB,CAAC,SAAS,QAAQ,CAAC,aAAa;gBACrE,OAAO;YACT;YACA,OAAO,SAAS,UAAU,CAAC,iBAAiB,CAAC,SAAS,QAAQ,CAAC,iBAAiB,CAAC,SAAS,QAAQ,CAAC;QAErG,KAAK;YACH,sCAAsC;YACtC,IAAI,AAAC,KAAK,UAAU,KAAK,cAAe,SAAS,UAAU,CAAC,0BAA0B,CAAC,SAAS,QAAQ,CAAC,SAAS;gBAChH,OAAO;YACT;YACA,qCAAqC;YACrC,IAAI,CAAC,KAAK,mBAAmB,KAAK,0BAA0B,KAAK,oBAAoB,KACnF,SAAS,UAAU,CAAC,iBAAiB,CAAC,SAAS,QAAQ,CAAC,aAAa;gBACrE,OAAO;YACT;YACA,4BAA4B;YAC5B,IAAI,SAAS,QAAQ,CAAC,aAAa;gBACjC,OAAO;YACT;YACA,OAAO,SAAS,UAAU,CAAC;QAE7B,KAAK;YACH,6DAA6D;YAC7D,OAAO,SAAS,UAAU,CAAC,iBAAiB,CAAC,SAAS,QAAQ,CAAC,iBAAiB,CAAC,SAAS,QAAQ,CAAC;QAErG,KAAK;YACH,OAAO,SAAS,UAAU,CAAC;QAE7B;YACE,OAAO;IACX;AACF","debugId":null}},
    {"offset": {"line": 1927, "column": 0}, "map": {"version":3,"sources":["file:///D:/b/gugu-gaga-/front_end/components/auth/route-guard.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from 'react';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { getHardcodedRoute, canAccessRoute } from '@/utils/hardcoded-routing';\r\nimport { useAuth } from './auth-provider';\r\n\r\nexport function RouteGuard({ children }: { children: React.ReactNode }) {\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const { user, loading } = useAuth();\r\n  const [isAuthorized, setIsAuthorized] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (loading) return;\r\n\r\n    // Public routes that don't need auth\r\n    if (pathname === '/' || pathname.startsWith('/auth') || pathname.startsWith('/register') || pathname.startsWith('/verify')) {\r\n      setIsAuthorized(true);\r\n      return;\r\n    }\r\n\r\n    if (!user) {\r\n      // No user and trying to access protected route -> redirect to home\r\n      if (pathname.startsWith('/dashboard')) {\r\n        router.replace('/');\r\n      } else {\r\n        // Allow other public pages\r\n        setIsAuthorized(true);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Check if user can access current route\r\n    if (!canAccessRoute(user, pathname)) {\r\n      const correctRoute = getHardcodedRoute(user);\r\n      if (pathname !== correctRoute) {\r\n        router.replace(correctRoute);\r\n      }\r\n      return;\r\n    }\r\n\r\n    setIsAuthorized(true);\r\n  }, [pathname, user, loading, router]);\r\n\r\n  if (loading || !isAuthorized) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <>{children}</>;\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;;;AAJA;;;;;AAMO,SAAS,WAAW,KAA2C;QAA3C,EAAE,QAAQ,EAAiC,GAA3C;;IACzB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,qJAAO;IACjC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IAEjD,IAAA,0KAAS;gCAAC;YACR,IAAI,SAAS;YAEb,qCAAqC;YACrC,IAAI,aAAa,OAAO,SAAS,UAAU,CAAC,YAAY,SAAS,UAAU,CAAC,gBAAgB,SAAS,UAAU,CAAC,YAAY;gBAC1H,gBAAgB;gBAChB;YACF;YAEA,IAAI,CAAC,MAAM;gBACT,mEAAmE;gBACnE,IAAI,SAAS,UAAU,CAAC,eAAe;oBACrC,OAAO,OAAO,CAAC;gBACjB,OAAO;oBACL,2BAA2B;oBAC3B,gBAAgB;gBAClB;gBACA;YACF;YAEA,yCAAyC;YACzC,IAAI,CAAC,IAAA,kJAAc,EAAC,MAAM,WAAW;gBACnC,MAAM,eAAe,IAAA,qJAAiB,EAAC;gBACvC,IAAI,aAAa,cAAc;oBAC7B,OAAO,OAAO,CAAC;gBACjB;gBACA;YACF;YAEA,gBAAgB;QAClB;+BAAG;QAAC;QAAU;QAAM;QAAS;KAAO;IAEpC,IAAI,WAAW,CAAC,cAAc;QAC5B,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,qBAAO;kBAAG;;AACZ;GA/CgB;;QACC,kJAAS;QACP,oJAAW;QACF,qJAAO;;;KAHnB","debugId":null}},
    {"offset": {"line": 2021, "column": 0}, "map": {"version":3,"sources":["file:///D:/b/gugu-gaga-/front_end/node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js"],"sourcesContent":["/**\n * @license React\n * react-jsx-dev-runtime.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function getComponentNameFromType(type) {\n      if (null == type) return null;\n      if (\"function\" === typeof type)\n        return type.$$typeof === REACT_CLIENT_REFERENCE\n          ? null\n          : type.displayName || type.name || null;\n      if (\"string\" === typeof type) return type;\n      switch (type) {\n        case REACT_FRAGMENT_TYPE:\n          return \"Fragment\";\n        case REACT_PROFILER_TYPE:\n          return \"Profiler\";\n        case REACT_STRICT_MODE_TYPE:\n          return \"StrictMode\";\n        case REACT_SUSPENSE_TYPE:\n          return \"Suspense\";\n        case REACT_SUSPENSE_LIST_TYPE:\n          return \"SuspenseList\";\n        case REACT_ACTIVITY_TYPE:\n          return \"Activity\";\n      }\n      if (\"object\" === typeof type)\n        switch (\n          (\"number\" === typeof type.tag &&\n            console.error(\n              \"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"\n            ),\n          type.$$typeof)\n        ) {\n          case REACT_PORTAL_TYPE:\n            return \"Portal\";\n          case REACT_CONTEXT_TYPE:\n            return type.displayName || \"Context\";\n          case REACT_CONSUMER_TYPE:\n            return (type._context.displayName || \"Context\") + \".Consumer\";\n          case REACT_FORWARD_REF_TYPE:\n            var innerType = type.render;\n            type = type.displayName;\n            type ||\n              ((type = innerType.displayName || innerType.name || \"\"),\n              (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n            return type;\n          case REACT_MEMO_TYPE:\n            return (\n              (innerType = type.displayName || null),\n              null !== innerType\n                ? innerType\n                : getComponentNameFromType(type.type) || \"Memo\"\n            );\n          case REACT_LAZY_TYPE:\n            innerType = type._payload;\n            type = type._init;\n            try {\n              return getComponentNameFromType(type(innerType));\n            } catch (x) {}\n        }\n      return null;\n    }\n    function testStringCoercion(value) {\n      return \"\" + value;\n    }\n    function checkKeyStringCoercion(value) {\n      try {\n        testStringCoercion(value);\n        var JSCompiler_inline_result = !1;\n      } catch (e) {\n        JSCompiler_inline_result = !0;\n      }\n      if (JSCompiler_inline_result) {\n        JSCompiler_inline_result = console;\n        var JSCompiler_temp_const = JSCompiler_inline_result.error;\n        var JSCompiler_inline_result$jscomp$0 =\n          (\"function\" === typeof Symbol &&\n            Symbol.toStringTag &&\n            value[Symbol.toStringTag]) ||\n          value.constructor.name ||\n          \"Object\";\n        JSCompiler_temp_const.call(\n          JSCompiler_inline_result,\n          \"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.\",\n          JSCompiler_inline_result$jscomp$0\n        );\n        return testStringCoercion(value);\n      }\n    }\n    function getTaskName(type) {\n      if (type === REACT_FRAGMENT_TYPE) return \"<>\";\n      if (\n        \"object\" === typeof type &&\n        null !== type &&\n        type.$$typeof === REACT_LAZY_TYPE\n      )\n        return \"<...>\";\n      try {\n        var name = getComponentNameFromType(type);\n        return name ? \"<\" + name + \">\" : \"<...>\";\n      } catch (x) {\n        return \"<...>\";\n      }\n    }\n    function getOwner() {\n      var dispatcher = ReactSharedInternals.A;\n      return null === dispatcher ? null : dispatcher.getOwner();\n    }\n    function UnknownOwner() {\n      return Error(\"react-stack-top-frame\");\n    }\n    function hasValidKey(config) {\n      if (hasOwnProperty.call(config, \"key\")) {\n        var getter = Object.getOwnPropertyDescriptor(config, \"key\").get;\n        if (getter && getter.isReactWarning) return !1;\n      }\n      return void 0 !== config.key;\n    }\n    function defineKeyPropWarningGetter(props, displayName) {\n      function warnAboutAccessingKey() {\n        specialPropKeyWarningShown ||\n          ((specialPropKeyWarningShown = !0),\n          console.error(\n            \"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)\",\n            displayName\n          ));\n      }\n      warnAboutAccessingKey.isReactWarning = !0;\n      Object.defineProperty(props, \"key\", {\n        get: warnAboutAccessingKey,\n        configurable: !0\n      });\n    }\n    function elementRefGetterWithDeprecationWarning() {\n      var componentName = getComponentNameFromType(this.type);\n      didWarnAboutElementRef[componentName] ||\n        ((didWarnAboutElementRef[componentName] = !0),\n        console.error(\n          \"Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.\"\n        ));\n      componentName = this.props.ref;\n      return void 0 !== componentName ? componentName : null;\n    }\n    function ReactElement(type, key, props, owner, debugStack, debugTask) {\n      var refProp = props.ref;\n      type = {\n        $$typeof: REACT_ELEMENT_TYPE,\n        type: type,\n        key: key,\n        props: props,\n        _owner: owner\n      };\n      null !== (void 0 !== refProp ? refProp : null)\n        ? Object.defineProperty(type, \"ref\", {\n            enumerable: !1,\n            get: elementRefGetterWithDeprecationWarning\n          })\n        : Object.defineProperty(type, \"ref\", { enumerable: !1, value: null });\n      type._store = {};\n      Object.defineProperty(type._store, \"validated\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: 0\n      });\n      Object.defineProperty(type, \"_debugInfo\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: null\n      });\n      Object.defineProperty(type, \"_debugStack\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugStack\n      });\n      Object.defineProperty(type, \"_debugTask\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugTask\n      });\n      Object.freeze && (Object.freeze(type.props), Object.freeze(type));\n      return type;\n    }\n    function jsxDEVImpl(\n      type,\n      config,\n      maybeKey,\n      isStaticChildren,\n      debugStack,\n      debugTask\n    ) {\n      var children = config.children;\n      if (void 0 !== children)\n        if (isStaticChildren)\n          if (isArrayImpl(children)) {\n            for (\n              isStaticChildren = 0;\n              isStaticChildren < children.length;\n              isStaticChildren++\n            )\n              validateChildKeys(children[isStaticChildren]);\n            Object.freeze && Object.freeze(children);\n          } else\n            console.error(\n              \"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\"\n            );\n        else validateChildKeys(children);\n      if (hasOwnProperty.call(config, \"key\")) {\n        children = getComponentNameFromType(type);\n        var keys = Object.keys(config).filter(function (k) {\n          return \"key\" !== k;\n        });\n        isStaticChildren =\n          0 < keys.length\n            ? \"{key: someKey, \" + keys.join(\": ..., \") + \": ...}\"\n            : \"{key: someKey}\";\n        didWarnAboutKeySpread[children + isStaticChildren] ||\n          ((keys =\n            0 < keys.length ? \"{\" + keys.join(\": ..., \") + \": ...}\" : \"{}\"),\n          console.error(\n            'A props object containing a \"key\" prop is being spread into JSX:\\n  let props = %s;\\n  <%s {...props} />\\nReact keys must be passed directly to JSX without using spread:\\n  let props = %s;\\n  <%s key={someKey} {...props} />',\n            isStaticChildren,\n            children,\n            keys,\n            children\n          ),\n          (didWarnAboutKeySpread[children + isStaticChildren] = !0));\n      }\n      children = null;\n      void 0 !== maybeKey &&\n        (checkKeyStringCoercion(maybeKey), (children = \"\" + maybeKey));\n      hasValidKey(config) &&\n        (checkKeyStringCoercion(config.key), (children = \"\" + config.key));\n      if (\"key\" in config) {\n        maybeKey = {};\n        for (var propName in config)\n          \"key\" !== propName && (maybeKey[propName] = config[propName]);\n      } else maybeKey = config;\n      children &&\n        defineKeyPropWarningGetter(\n          maybeKey,\n          \"function\" === typeof type\n            ? type.displayName || type.name || \"Unknown\"\n            : type\n        );\n      return ReactElement(\n        type,\n        children,\n        maybeKey,\n        getOwner(),\n        debugStack,\n        debugTask\n      );\n    }\n    function validateChildKeys(node) {\n      \"object\" === typeof node &&\n        null !== node &&\n        node.$$typeof === REACT_ELEMENT_TYPE &&\n        node._store &&\n        (node._store.validated = 1);\n    }\n    var React = require(\"next/dist/compiled/react\"),\n      REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n      REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n      REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n      REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n      REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n      REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n      REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n      REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n      REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n      REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n      REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n      REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n      REACT_ACTIVITY_TYPE = Symbol.for(\"react.activity\"),\n      REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\"),\n      ReactSharedInternals =\n        React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n      hasOwnProperty = Object.prototype.hasOwnProperty,\n      isArrayImpl = Array.isArray,\n      createTask = console.createTask\n        ? console.createTask\n        : function () {\n            return null;\n          };\n    React = {\n      react_stack_bottom_frame: function (callStackForError) {\n        return callStackForError();\n      }\n    };\n    var specialPropKeyWarningShown;\n    var didWarnAboutElementRef = {};\n    var unknownOwnerDebugStack = React.react_stack_bottom_frame.bind(\n      React,\n      UnknownOwner\n    )();\n    var unknownOwnerDebugTask = createTask(getTaskName(UnknownOwner));\n    var didWarnAboutKeySpread = {};\n    exports.Fragment = REACT_FRAGMENT_TYPE;\n    exports.jsxDEV = function (type, config, maybeKey, isStaticChildren) {\n      var trackActualOwner =\n        1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;\n      return jsxDEVImpl(\n        type,\n        config,\n        maybeKey,\n        isStaticChildren,\n        trackActualOwner\n          ? Error(\"react-stack-top-frame\")\n          : unknownOwnerDebugStack,\n        trackActualOwner ? createTask(getTaskName(type)) : unknownOwnerDebugTask\n      );\n    };\n  })();\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2226, "column": 0}, "map": {"version":3,"sources":["file:///D:/b/gugu-gaga-/front_end/node_modules/next/dist/compiled/react/jsx-dev-runtime.js"],"sourcesContent":["'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-dev-runtime.production.js');\n} else {\n  module.exports = require('./cjs/react-jsx-dev-runtime.development.js');\n}\n"],"names":[],"mappings":"AAEI;AAFJ;AAEA;;KAEO;IACL,OAAO,OAAO;AAChB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2236, "column": 0}, "map": {"version":3,"sources":["file:///D:/b/gugu-gaga-/front_end/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2241, "column": 0}, "map": {"version":3,"sources":["file:///D:/b/gugu-gaga-/front_end/node_modules/%40swc/helpers/esm/_define_property.js"],"sourcesContent":["function _define_property(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });\n    } else obj[key] = value;\n\n    return obj;\n}\nexport { _define_property as _ };\n"],"names":[],"mappings":";;;;AAAA,SAAS,iBAAiB,GAAG,EAAE,GAAG,EAAE,KAAK;IACrC,IAAI,OAAO,KAAK;QACZ,OAAO,cAAc,CAAC,KAAK,KAAK;YAAE,OAAO;YAAO,YAAY;YAAM,cAAc;YAAM,UAAU;QAAK;IACzG,OAAO,GAAG,CAAC,IAAI,GAAG;IAElB,OAAO;AACX","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2261, "column": 0}, "map": {"version":3,"sources":["file:///D:/b/gugu-gaga-/front_end/node_modules/next/src/client/request-idle-callback.ts"],"sourcesContent":["export const requestIdleCallback =\n  (typeof self !== 'undefined' &&\n    self.requestIdleCallback &&\n    self.requestIdleCallback.bind(window)) ||\n  function (cb: IdleRequestCallback): number {\n    let start = Date.now()\n    return self.setTimeout(function () {\n      cb({\n        didTimeout: false,\n        timeRemaining: function () {\n          return Math.max(0, 50 - (Date.now() - start))\n        },\n      })\n    }, 1)\n  }\n\nexport const cancelIdleCallback =\n  (typeof self !== 'undefined' &&\n    self.cancelIdleCallback &&\n    self.cancelIdleCallback.bind(window)) ||\n  function (id: number) {\n    return clearTimeout(id)\n  }\n"],"names":["cancelIdleCallback","requestIdleCallback","self","bind","window","cb","start","Date","now","setTimeout","didTimeout","timeRemaining","Math","max","id","clearTimeout"],"mappings":";;;;;;;;;;;;;;IAgBaA,kBAAkB,EAAA;eAAlBA;;IAhBAC,mBAAmB,EAAA;eAAnBA;;;AAAN,MAAMA,sBACV,OAAOC,SAAS,eACfA,KAAKD,mBAAmB,IACxBC,KAAKD,mBAAmB,CAACE,IAAI,CAACC,WAChC,SAAUC,EAAuB;IAC/B,IAAIC,QAAQC,KAAKC,GAAG;IACpB,OAAON,KAAKO,UAAU,CAAC;QACrBJ,GAAG;YACDK,YAAY;YACZC,eAAe;gBACb,OAAOC,KAAKC,GAAG,CAAC,GAAG,KAAMN,CAAAA,KAAKC,GAAG,KAAKF,KAAI;YAC5C;QACF;IACF,GAAG;AACL;AAEK,MAAMN,qBACV,OAAOE,SAAS,eACfA,KAAKF,kBAAkB,IACvBE,KAAKF,kBAAkB,CAACG,IAAI,CAACC,WAC/B,SAAUU,EAAU;IAClB,OAAOC,aAAaD;AACtB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2307, "column": 0}, "map": {"version":3,"sources":["file:///D:/b/gugu-gaga-/front_end/node_modules/next/src/client/script.tsx"],"sourcesContent":["'use client'\n\nimport ReactDOM from 'react-dom'\nimport React, { useEffect, useContext, useRef, type JSX } from 'react'\nimport type { ScriptHTMLAttributes } from 'react'\nimport { HeadManagerContext } from '../shared/lib/head-manager-context.shared-runtime'\nimport { setAttributesFromProps } from './set-attributes-from-props'\nimport { requestIdleCallback } from './request-idle-callback'\n\nconst ScriptCache = new Map()\nconst LoadCache = new Set()\n\nexport interface ScriptProps extends ScriptHTMLAttributes<HTMLScriptElement> {\n  strategy?: 'afterInteractive' | 'lazyOnload' | 'beforeInteractive' | 'worker'\n  id?: string\n  onLoad?: (e: any) => void\n  onReady?: () => void | null\n  onError?: (e: any) => void\n  children?: React.ReactNode\n  stylesheets?: string[]\n}\n\n/**\n * @deprecated Use `ScriptProps` instead.\n */\nexport type Props = ScriptProps\n\nconst insertStylesheets = (stylesheets: string[]) => {\n  // Case 1: Styles for afterInteractive/lazyOnload with appDir injected via handleClientScriptLoad\n  //\n  // Using ReactDOM.preinit to feature detect appDir and inject styles\n  // Stylesheets might have already been loaded if initialized with Script component\n  // Re-inject styles here to handle scripts loaded via handleClientScriptLoad\n  // ReactDOM.preinit handles dedup and ensures the styles are loaded only once\n  if (ReactDOM.preinit) {\n    stylesheets.forEach((stylesheet: string) => {\n      ReactDOM.preinit(stylesheet, { as: 'style' })\n    })\n\n    return\n  }\n\n  // Case 2: Styles for afterInteractive/lazyOnload with pages injected via handleClientScriptLoad\n  //\n  // We use this function to load styles when appdir is not detected\n  // TODO: Use React float APIs to load styles once available for pages dir\n  if (typeof window !== 'undefined') {\n    let head = document.head\n    stylesheets.forEach((stylesheet: string) => {\n      let link = document.createElement('link')\n\n      link.type = 'text/css'\n      link.rel = 'stylesheet'\n      link.href = stylesheet\n\n      head.appendChild(link)\n    })\n  }\n}\n\nconst loadScript = (props: ScriptProps): void => {\n  const {\n    src,\n    id,\n    onLoad = () => {},\n    onReady = null,\n    dangerouslySetInnerHTML,\n    children = '',\n    strategy = 'afterInteractive',\n    onError,\n    stylesheets,\n  } = props\n\n  const cacheKey = id || src\n\n  // Script has already loaded\n  if (cacheKey && LoadCache.has(cacheKey)) {\n    return\n  }\n\n  // Contents of this script are already loading/loaded\n  if (ScriptCache.has(src)) {\n    LoadCache.add(cacheKey)\n    // It is possible that multiple `next/script` components all have same \"src\", but has different \"onLoad\"\n    // This is to make sure the same remote script will only load once, but \"onLoad\" are executed in order\n    ScriptCache.get(src).then(onLoad, onError)\n    return\n  }\n\n  /** Execute after the script first loaded */\n  const afterLoad = () => {\n    // Run onReady for the first time after load event\n    if (onReady) {\n      onReady()\n    }\n    // add cacheKey to LoadCache when load successfully\n    LoadCache.add(cacheKey)\n  }\n\n  const el = document.createElement('script')\n\n  const loadPromise = new Promise<void>((resolve, reject) => {\n    el.addEventListener('load', function (e) {\n      resolve()\n      if (onLoad) {\n        onLoad.call(this, e)\n      }\n      afterLoad()\n    })\n    el.addEventListener('error', function (e) {\n      reject(e)\n    })\n  }).catch(function (e) {\n    if (onError) {\n      onError(e)\n    }\n  })\n\n  if (dangerouslySetInnerHTML) {\n    // Casting since lib.dom.d.ts doesn't have TrustedHTML yet.\n    el.innerHTML = (dangerouslySetInnerHTML.__html as string) || ''\n\n    afterLoad()\n  } else if (children) {\n    el.textContent =\n      typeof children === 'string'\n        ? children\n        : Array.isArray(children)\n          ? children.join('')\n          : ''\n\n    afterLoad()\n  } else if (src) {\n    el.src = src\n    // do not add cacheKey into LoadCache for remote script here\n    // cacheKey will be added to LoadCache when it is actually loaded (see loadPromise above)\n\n    ScriptCache.set(src, loadPromise)\n  }\n\n  setAttributesFromProps(el, props)\n\n  if (strategy === 'worker') {\n    el.setAttribute('type', 'text/partytown')\n  }\n\n  el.setAttribute('data-nscript', strategy)\n\n  // Load styles associated with this script\n  if (stylesheets) {\n    insertStylesheets(stylesheets)\n  }\n\n  document.body.appendChild(el)\n}\n\nexport function handleClientScriptLoad(props: ScriptProps) {\n  const { strategy = 'afterInteractive' } = props\n  if (strategy === 'lazyOnload') {\n    window.addEventListener('load', () => {\n      requestIdleCallback(() => loadScript(props))\n    })\n  } else {\n    loadScript(props)\n  }\n}\n\nfunction loadLazyScript(props: ScriptProps) {\n  if (document.readyState === 'complete') {\n    requestIdleCallback(() => loadScript(props))\n  } else {\n    window.addEventListener('load', () => {\n      requestIdleCallback(() => loadScript(props))\n    })\n  }\n}\n\nfunction addBeforeInteractiveToCache() {\n  const scripts = [\n    ...document.querySelectorAll('[data-nscript=\"beforeInteractive\"]'),\n    ...document.querySelectorAll('[data-nscript=\"beforePageRender\"]'),\n  ]\n  scripts.forEach((script) => {\n    const cacheKey = script.id || script.getAttribute('src')\n    LoadCache.add(cacheKey)\n  })\n}\n\nexport function initScriptLoader(scriptLoaderItems: ScriptProps[]) {\n  scriptLoaderItems.forEach(handleClientScriptLoad)\n  addBeforeInteractiveToCache()\n}\n\n/**\n * Load a third-party scripts in an optimized way.\n *\n * Read more: [Next.js Docs: `next/script`](https://nextjs.org/docs/app/api-reference/components/script)\n */\nfunction Script(props: ScriptProps): JSX.Element | null {\n  const {\n    id,\n    src = '',\n    onLoad = () => {},\n    onReady = null,\n    strategy = 'afterInteractive',\n    onError,\n    stylesheets,\n    ...restProps\n  } = props\n\n  // Context is available only during SSR\n  let { updateScripts, scripts, getIsSsr, appDir, nonce } =\n    useContext(HeadManagerContext)\n\n  // if a nonce is explicitly passed to the script tag, favor that over the automatic handling\n  nonce = restProps.nonce || nonce\n\n  /**\n   * - First mount:\n   *   1. The useEffect for onReady executes\n   *   2. hasOnReadyEffectCalled.current is false, but the script hasn't loaded yet (not in LoadCache)\n   *      onReady is skipped, set hasOnReadyEffectCalled.current to true\n   *   3. The useEffect for loadScript executes\n   *   4. hasLoadScriptEffectCalled.current is false, loadScript executes\n   *      Once the script is loaded, the onLoad and onReady will be called by then\n   *   [If strict mode is enabled / is wrapped in <OffScreen /> component]\n   *   5. The useEffect for onReady executes again\n   *   6. hasOnReadyEffectCalled.current is true, so entire effect is skipped\n   *   7. The useEffect for loadScript executes again\n   *   8. hasLoadScriptEffectCalled.current is true, so entire effect is skipped\n   *\n   * - Second mount:\n   *   1. The useEffect for onReady executes\n   *   2. hasOnReadyEffectCalled.current is false, but the script has already loaded (found in LoadCache)\n   *      onReady is called, set hasOnReadyEffectCalled.current to true\n   *   3. The useEffect for loadScript executes\n   *   4. The script is already loaded, loadScript bails out\n   *   [If strict mode is enabled / is wrapped in <OffScreen /> component]\n   *   5. The useEffect for onReady executes again\n   *   6. hasOnReadyEffectCalled.current is true, so entire effect is skipped\n   *   7. The useEffect for loadScript executes again\n   *   8. hasLoadScriptEffectCalled.current is true, so entire effect is skipped\n   */\n  const hasOnReadyEffectCalled = useRef(false)\n\n  useEffect(() => {\n    const cacheKey = id || src\n    if (!hasOnReadyEffectCalled.current) {\n      // Run onReady if script has loaded before but component is re-mounted\n      if (onReady && cacheKey && LoadCache.has(cacheKey)) {\n        onReady()\n      }\n\n      hasOnReadyEffectCalled.current = true\n    }\n  }, [onReady, id, src])\n\n  const hasLoadScriptEffectCalled = useRef(false)\n\n  useEffect(() => {\n    if (!hasLoadScriptEffectCalled.current) {\n      if (strategy === 'afterInteractive') {\n        loadScript(props)\n      } else if (strategy === 'lazyOnload') {\n        loadLazyScript(props)\n      }\n\n      hasLoadScriptEffectCalled.current = true\n    }\n  }, [props, strategy])\n\n  if (strategy === 'beforeInteractive' || strategy === 'worker') {\n    if (updateScripts) {\n      scripts[strategy] = (scripts[strategy] || []).concat([\n        {\n          id,\n          src,\n          onLoad,\n          onReady,\n          onError,\n          ...restProps,\n          nonce,\n        },\n      ])\n      updateScripts(scripts)\n    } else if (getIsSsr && getIsSsr()) {\n      // Script has already loaded during SSR\n      LoadCache.add(id || src)\n    } else if (getIsSsr && !getIsSsr()) {\n      loadScript({\n        ...props,\n        nonce,\n      })\n    }\n  }\n\n  // For the app directory, we need React Float to preload these scripts.\n  if (appDir) {\n    // Injecting stylesheets here handles beforeInteractive and worker scripts correctly\n    // For other strategies injecting here ensures correct stylesheet order\n    // ReactDOM.preinit handles loading the styles in the correct order,\n    // also ensures the stylesheet is loaded only once and in a consistent manner\n    //\n    // Case 1: Styles for beforeInteractive/worker with appDir - handled here\n    // Case 2: Styles for beforeInteractive/worker with pages dir - Not handled yet\n    // Case 3: Styles for afterInteractive/lazyOnload with appDir - handled here\n    // Case 4: Styles for afterInteractive/lazyOnload with pages dir - handled in insertStylesheets function\n    if (stylesheets) {\n      stylesheets.forEach((styleSrc) => {\n        ReactDOM.preinit(styleSrc, { as: 'style' })\n      })\n    }\n\n    // Before interactive scripts need to be loaded by Next.js' runtime instead\n    // of native <script> tags, because they no longer have `defer`.\n    if (strategy === 'beforeInteractive') {\n      if (!src) {\n        // For inlined scripts, we put the content in `children`.\n        if (restProps.dangerouslySetInnerHTML) {\n          // Casting since lib.dom.d.ts doesn't have TrustedHTML yet.\n          restProps.children = restProps.dangerouslySetInnerHTML\n            .__html as string\n          delete restProps.dangerouslySetInnerHTML\n        }\n\n        return (\n          <script\n            nonce={nonce}\n            dangerouslySetInnerHTML={{\n              __html: `(self.__next_s=self.__next_s||[]).push(${JSON.stringify([\n                0,\n                { ...restProps, id },\n              ])})`,\n            }}\n          />\n        )\n      } else {\n        // @ts-ignore\n        ReactDOM.preload(\n          src,\n          restProps.integrity\n            ? {\n                as: 'script',\n                integrity: restProps.integrity,\n                nonce,\n                crossOrigin: restProps.crossOrigin,\n              }\n            : { as: 'script', nonce, crossOrigin: restProps.crossOrigin }\n        )\n        return (\n          <script\n            nonce={nonce}\n            dangerouslySetInnerHTML={{\n              __html: `(self.__next_s=self.__next_s||[]).push(${JSON.stringify([\n                src,\n                { ...restProps, id },\n              ])})`,\n            }}\n          />\n        )\n      }\n    } else if (strategy === 'afterInteractive') {\n      if (src) {\n        // @ts-ignore\n        ReactDOM.preload(\n          src,\n          restProps.integrity\n            ? {\n                as: 'script',\n                integrity: restProps.integrity,\n                nonce,\n                crossOrigin: restProps.crossOrigin,\n              }\n            : { as: 'script', nonce, crossOrigin: restProps.crossOrigin }\n        )\n      }\n    }\n  }\n\n  return null\n}\n\nObject.defineProperty(Script, '__nextScript', { value: true })\n\nexport default Script\n"],"names":["handleClientScriptLoad","initScriptLoader","ScriptCache","Map","LoadCache","Set","insertStylesheets","stylesheets","ReactDOM","preinit","forEach","stylesheet","as","window","head","document","link","createElement","type","rel","href","appendChild","loadScript","props","src","id","onLoad","onReady","dangerouslySetInnerHTML","children","strategy","onError","cacheKey","has","add","get","then","afterLoad","el","loadPromise","Promise","resolve","reject","addEventListener","e","call","catch","innerHTML","__html","textContent","Array","isArray","join","set","setAttributesFromProps","setAttribute","body","requestIdleCallback","loadLazyScript","readyState","addBeforeInteractiveToCache","scripts","querySelectorAll","script","getAttribute","scriptLoaderItems","Script","restProps","updateScripts","getIsSsr","appDir","nonce","useContext","HeadManagerContext","hasOnReadyEffectCalled","useRef","useEffect","current","hasLoadScriptEffectCalled","concat","styleSrc","JSON","stringify","preload","integrity","crossOrigin","Object","defineProperty","value"],"mappings":"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","ignoreList":[0],"debugId":null}}]
}