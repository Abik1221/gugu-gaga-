{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/habtamusemagn/Desktop/last/gugu-gaga-/front_end/app/%28dashboard%29/dashboard/staff/sales/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useToast } from \"@/components/ui/toast\";\n\ninterface Sale {\n  id: number;\n  branch: string;\n  cashier_user_id: number;\n  total_amount: number;\n  created_at: string;\n  lines: Array<{\n    medicine_id: number;\n    medicine_name: string;\n    sku: string;\n    quantity: number;\n    unit_price: number;\n    line_total: number;\n  }>;\n}\n\nexport default function StaffSales() {\n  const { show } = useToast();\n  const [sales, setSales] = useState<Sale[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [fromDate, setFromDate] = useState(\"\");\n  const [toDate, setToDate] = useState(\"\");\n  const [page, setPage] = useState(1);\n  const [total, setTotal] = useState(0);\n\n  const loadSales = async () => {\n    setLoading(true);\n    try {\n      // Simulate API call - replace with actual API\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // Mock data\n      const mockSales: Sale[] = [\n        {\n          id: 1,\n          branch: \"Main\",\n          cashier_user_id: 1,\n          total_amount: 45.50,\n          created_at: new Date().toISOString(),\n          lines: [\n            {\n              medicine_id: 1,\n              medicine_name: \"Paracetamol 500mg\",\n              sku: \"PARA500\",\n              quantity: 2,\n              unit_price: 2.50,\n              line_total: 5.00\n            },\n            {\n              medicine_id: 2,\n              medicine_name: \"Ibuprofen 200mg\",\n              sku: \"IBU200\",\n              quantity: 1,\n              unit_price: 40.50,\n              line_total: 40.50\n            }\n          ]\n        }\n      ];\n      \n      setSales(mockSales);\n      setTotal(mockSales.length);\n    } catch (err: any) {\n      show({\n        variant: \"destructive\",\n        title: \"Failed to load sales\",\n        description: err?.message || \"Unable to fetch sales data\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadSales();\n  }, [page, searchQuery, fromDate, toDate]);\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleString();\n  };\n\n  const formatCurrency = (amount: number) => {\n    return `$${amount.toFixed(2)}`;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"max-w-6xl mx-auto px-4 py-8\">\n        <Skeleton className=\"h-8 w-48 mb-4\" />\n        <Skeleton className=\"h-64 w-full\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Sales History</h2>\n        <p className=\"text-gray-600\">View and search transaction records</p>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Search Medicine\n            </label>\n            <Input\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              placeholder=\"Search by medicine name or SKU\"\n              className=\"text-black\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              From Date\n            </label>\n            <Input\n              type=\"date\"\n              value={fromDate}\n              onChange={(e) => setFromDate(e.target.value)}\n              className=\"text-black\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              To Date\n            </label>\n            <Input\n              type=\"date\"\n              value={toDate}\n              onChange={(e) => setToDate(e.target.value)}\n              className=\"text-black\"\n            />\n          </div>\n        </div>\n        <div className=\"mt-4 flex space-x-2\">\n          <Button onClick={loadSales} variant=\"outline\">\n            Apply Filters\n          </Button>\n          <Button \n            onClick={() => {\n              setSearchQuery(\"\");\n              setFromDate(\"\");\n              setToDate(\"\");\n            }}\n            variant=\"outline\"\n          >\n            Clear\n          </Button>\n        </div>\n      </div>\n\n      {/* Sales List */}\n      <div className=\"space-y-4\">\n        {sales.length === 0 ? (\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center\">\n            <svg className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n            </svg>\n            <p className=\"text-gray-500\">No sales found</p>\n          </div>\n        ) : (\n          sales.map((sale) => (\n            <div key={sale.id} className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n              <div className=\"flex justify-between items-start mb-4\">\n                <div>\n                  <h3 className=\"text-lg font-semibold text-gray-900\">\n                    Sale #{sale.id}\n                  </h3>\n                  <p className=\"text-sm text-gray-600\">\n                    {formatDate(sale.created_at)} • Branch: {sale.branch || \"Main\"}\n                  </p>\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"text-2xl font-bold text-green-600\">\n                    {formatCurrency(sale.total_amount)}\n                  </p>\n                  <p className=\"text-sm text-gray-600\">\n                    {sale.lines.length} item{sale.lines.length !== 1 ? 's' : ''}\n                  </p>\n                </div>\n              </div>\n\n              {/* Sale Items */}\n              <div className=\"border-t border-gray-200 pt-4\">\n                <h4 className=\"text-sm font-medium text-gray-700 mb-3\">Items:</h4>\n                <div className=\"space-y-2\">\n                  {sale.lines.map((line, index) => (\n                    <div key={index} className=\"flex justify-between items-center py-2 px-3 bg-gray-50 rounded-lg\">\n                      <div className=\"flex-1\">\n                        <p className=\"font-medium text-gray-900\">{line.medicine_name}</p>\n                        <p className=\"text-sm text-gray-600\">SKU: {line.sku}</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"font-medium text-gray-900\">\n                          {line.quantity} × {formatCurrency(line.unit_price)} = {formatCurrency(line.line_total)}\n                        </p>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      {/* Pagination */}\n      {total > 20 && (\n        <div className=\"mt-6 flex justify-center space-x-2\">\n          <Button\n            variant=\"outline\"\n            onClick={() => setPage(Math.max(1, page - 1))}\n            disabled={page === 1}\n          >\n            Previous\n          </Button>\n          <span className=\"flex items-center px-4 py-2 text-sm text-gray-600\">\n            Page {page}\n          </span>\n          <Button\n            variant=\"outline\"\n            onClick={() => setPage(page + 1)}\n            disabled={sales.length < 20}\n          >\n            Next\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}