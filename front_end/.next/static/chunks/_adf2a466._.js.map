{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/b/gugu-gaga-/front_end/utils/supplier-flow.ts"],"sourcesContent":["import { SupplierOnboardingAPI } from './api';\r\n\r\nexport type SupplierFlowStatus = {\r\n  step: 'kyc_pending' | 'payment_pending' | 'approved' | 'rejected';\r\n  kyc_status?: string;\r\n  payment_status?: string;\r\n  can_access_dashboard: boolean;\r\n  next_action?: string;\r\n};\r\n\r\nexport async function getSupplierFlowStatus(): Promise<SupplierFlowStatus> {\r\n  try {\r\n    const [kycStatus, paymentStatus] = await Promise.all([\r\n      SupplierOnboardingAPI.getKYCStatus().catch(() => ({ status: 'not_submitted' })),\r\n      SupplierOnboardingAPI.getPaymentStatus().catch(() => ({ status: 'not_submitted' }))\r\n    ]);\r\n\r\n    // KYC not submitted or rejected\r\n    if (!kycStatus.status || kycStatus.status === 'not_submitted' || kycStatus.status === 'rejected') {\r\n      return {\r\n        step: 'kyc_pending',\r\n        kyc_status: kycStatus.status,\r\n        can_access_dashboard: false,\r\n        next_action: 'Submit KYC documents'\r\n      };\r\n    }\r\n\r\n    // KYC pending approval\r\n    if (kycStatus.status === 'pending') {\r\n      return {\r\n        step: 'kyc_pending',\r\n        kyc_status: kycStatus.status,\r\n        can_access_dashboard: false,\r\n        next_action: 'Wait for KYC approval'\r\n      };\r\n    }\r\n\r\n    // KYC approved, but payment not submitted or rejected\r\n    if (kycStatus.status === 'approved') {\r\n      if (!paymentStatus.status || paymentStatus.status === 'not_submitted' || paymentStatus.status === 'rejected') {\r\n        return {\r\n          step: 'payment_pending',\r\n          kyc_status: kycStatus.status,\r\n          payment_status: paymentStatus.status,\r\n          can_access_dashboard: false,\r\n          next_action: 'Submit payment verification'\r\n        };\r\n      }\r\n\r\n      // Payment pending approval\r\n      if (paymentStatus.status === 'pending') {\r\n        return {\r\n          step: 'payment_pending',\r\n          kyc_status: kycStatus.status,\r\n          payment_status: paymentStatus.status,\r\n          can_access_dashboard: false,\r\n          next_action: 'Wait for payment verification'\r\n        };\r\n      }\r\n\r\n      // Both approved - can access dashboard\r\n      if (paymentStatus.status === 'verified') {\r\n        return {\r\n          step: 'approved',\r\n          kyc_status: kycStatus.status,\r\n          payment_status: paymentStatus.status,\r\n          can_access_dashboard: true\r\n        };\r\n      }\r\n    }\r\n\r\n    // Default fallback\r\n    return {\r\n      step: 'kyc_pending',\r\n      can_access_dashboard: false,\r\n      next_action: 'Complete onboarding process'\r\n    };\r\n  } catch (error) {\r\n    console.error('Error checking supplier flow status:', error);\r\n    return {\r\n      step: 'kyc_pending',\r\n      can_access_dashboard: false,\r\n      next_action: 'Complete onboarding process'\r\n    };\r\n  }\r\n}\r\n\r\nexport function getRedirectPath(status: SupplierFlowStatus): string {\r\n  switch (status.step) {\r\n    case 'kyc_pending':\r\n      return '/dashboard/supplier-kyc';\r\n    case 'payment_pending':\r\n      return '/dashboard/supplier-payment';\r\n    case 'approved':\r\n      return '/dashboard/supplier';\r\n    default:\r\n      return '/dashboard/supplier-kyc';\r\n  }\r\n}"],"names":[],"mappings":";;;;;;AAAA;;AAUO,eAAe;IACpB,IAAI;QACF,MAAM,CAAC,WAAW,cAAc,GAAG,MAAM,QAAQ,GAAG,CAAC;YACnD,wIAAqB,CAAC,YAAY,GAAG,KAAK,CAAC,IAAM,CAAC;oBAAE,QAAQ;gBAAgB,CAAC;YAC7E,wIAAqB,CAAC,gBAAgB,GAAG,KAAK,CAAC,IAAM,CAAC;oBAAE,QAAQ;gBAAgB,CAAC;SAClF;QAED,gCAAgC;QAChC,IAAI,CAAC,UAAU,MAAM,IAAI,UAAU,MAAM,KAAK,mBAAmB,UAAU,MAAM,KAAK,YAAY;YAChG,OAAO;gBACL,MAAM;gBACN,YAAY,UAAU,MAAM;gBAC5B,sBAAsB;gBACtB,aAAa;YACf;QACF;QAEA,uBAAuB;QACvB,IAAI,UAAU,MAAM,KAAK,WAAW;YAClC,OAAO;gBACL,MAAM;gBACN,YAAY,UAAU,MAAM;gBAC5B,sBAAsB;gBACtB,aAAa;YACf;QACF;QAEA,sDAAsD;QACtD,IAAI,UAAU,MAAM,KAAK,YAAY;YACnC,IAAI,CAAC,cAAc,MAAM,IAAI,cAAc,MAAM,KAAK,mBAAmB,cAAc,MAAM,KAAK,YAAY;gBAC5G,OAAO;oBACL,MAAM;oBACN,YAAY,UAAU,MAAM;oBAC5B,gBAAgB,cAAc,MAAM;oBACpC,sBAAsB;oBACtB,aAAa;gBACf;YACF;YAEA,2BAA2B;YAC3B,IAAI,cAAc,MAAM,KAAK,WAAW;gBACtC,OAAO;oBACL,MAAM;oBACN,YAAY,UAAU,MAAM;oBAC5B,gBAAgB,cAAc,MAAM;oBACpC,sBAAsB;oBACtB,aAAa;gBACf;YACF;YAEA,uCAAuC;YACvC,IAAI,cAAc,MAAM,KAAK,YAAY;gBACvC,OAAO;oBACL,MAAM;oBACN,YAAY,UAAU,MAAM;oBAC5B,gBAAgB,cAAc,MAAM;oBACpC,sBAAsB;gBACxB;YACF;QACF;QAEA,mBAAmB;QACnB,OAAO;YACL,MAAM;YACN,sBAAsB;YACtB,aAAa;QACf;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wCAAwC;QACtD,OAAO;YACL,MAAM;YACN,sBAAsB;YACtB,aAAa;QACf;IACF;AACF;AAEO,SAAS,gBAAgB,MAA0B;IACxD,OAAQ,OAAO,IAAI;QACjB,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,OAAO;IACX;AACF","debugId":null}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///D:/b/gugu-gaga-/front_end/components/ui/skeleton.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\n\r\nexport function Skeleton({ className = \"\" }: { className?: string }) {\r\n  return <div className={`animate-pulse bg-gray-200 rounded ${className}`} />;\r\n}\r\n\r\nexport function TableSkeletonRows({ rows = 6, cols = 6 }: { rows?: number; cols?: number }) {\r\n  return (\r\n    <tbody>\r\n      {Array.from({ length: rows }).map((_, r) => (\r\n        <tr key={r} className=\"border-t\">\r\n          {Array.from({ length: cols }).map((__, c) => (\r\n            <td key={c} className=\"px-3 py-2\">\r\n              <Skeleton className=\"h-4 w-full\" />\r\n            </td>\r\n          ))}\r\n        </tr>\r\n      ))}\r\n    </tbody>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;;AAGO,SAAS,SAAS,KAA0C;QAA1C,EAAE,YAAY,EAAE,EAA0B,GAA1C;IACvB,qBAAO,6LAAC;QAAI,WAAW,AAAC,qCAA8C,OAAV;;;;;;AAC9D;KAFgB;AAIT,SAAS,kBAAkB,KAAwD;QAAxD,EAAE,OAAO,CAAC,EAAE,OAAO,CAAC,EAAoC,GAAxD;IAChC,qBACE,6LAAC;kBACE,MAAM,IAAI,CAAC;YAAE,QAAQ;QAAK,GAAG,GAAG,CAAC,CAAC,GAAG,kBACpC,6LAAC;gBAAW,WAAU;0BACnB,MAAM,IAAI,CAAC;oBAAE,QAAQ;gBAAK,GAAG,GAAG,CAAC,CAAC,IAAI,kBACrC,6LAAC;wBAAW,WAAU;kCACpB,cAAA,6LAAC;4BAAS,WAAU;;;;;;uBADb;;;;;eAFJ;;;;;;;;;;AAUjB;MAdgB","debugId":null}},
    {"offset": {"line": 170, "column": 0}, "map": {"version":3,"sources":["file:///D:/b/gugu-gaga-/front_end/components/supplier-flow-guard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter, usePathname } from \"next/navigation\";\r\nimport { getSupplierFlowStatus, getRedirectPath } from \"@/utils/supplier-flow\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\n\r\ninterface SupplierFlowGuardProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport function SupplierFlowGuard({ children }: SupplierFlowGuardProps) {\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const [loading, setLoading] = useState(true);\r\n  const [canAccess, setCanAccess] = useState(false);\r\n\r\n  useEffect(() => {\r\n    checkAccess();\r\n  }, [pathname]);\r\n\r\n  const checkAccess = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const flowStatus = await getSupplierFlowStatus();\r\n      \r\n      // Define allowed paths for each step\r\n      const allowedPaths = {\r\n        kyc_pending: ['/dashboard/supplier-kyc'],\r\n        payment_pending: ['/dashboard/supplier-payment'],\r\n        approved: ['/dashboard/supplier']\r\n      };\r\n\r\n      const currentAllowedPaths = allowedPaths[flowStatus.step] || [];\r\n      \r\n      // Check if current path is allowed for current step\r\n      if (currentAllowedPaths.some(path => pathname.startsWith(path))) {\r\n        setCanAccess(true);\r\n      } else {\r\n        // Redirect to appropriate step\r\n        const redirectPath = getRedirectPath(flowStatus);\r\n        router.replace(redirectPath);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error checking supplier flow:', error);\r\n      router.replace('/dashboard/supplier-kyc');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"text-center space-y-4\">\r\n          <Skeleton className=\"h-8 w-64 mx-auto\" />\r\n          <Skeleton className=\"h-4 w-48 mx-auto\" />\r\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!canAccess) {\r\n    return null;\r\n  }\r\n\r\n  return <>{children}</>;\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAWO,SAAS,kBAAkB,KAAoC;QAApC,EAAE,QAAQ,EAA0B,GAApC;;IAChC,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,IAAA,0KAAS;uCAAC;YACR;QACF;sCAAG;QAAC;KAAS;IAEb,MAAM,cAAc;QAClB,IAAI;YACF,WAAW;YACX,MAAM,aAAa,MAAM,IAAA,qJAAqB;YAE9C,qCAAqC;YACrC,MAAM,eAAe;gBACnB,aAAa;oBAAC;iBAA0B;gBACxC,iBAAiB;oBAAC;iBAA8B;gBAChD,UAAU;oBAAC;iBAAsB;YACnC;YAEA,MAAM,sBAAsB,YAAY,CAAC,WAAW,IAAI,CAAC,IAAI,EAAE;YAE/D,oDAAoD;YACpD,IAAI,oBAAoB,IAAI,CAAC,CAAA,OAAQ,SAAS,UAAU,CAAC,QAAQ;gBAC/D,aAAa;YACf,OAAO;gBACL,+BAA+B;gBAC/B,MAAM,eAAe,IAAA,+IAAe,EAAC;gBACrC,OAAO,OAAO,CAAC;YACjB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iCAAiC;YAC/C,OAAO,OAAO,CAAC;QACjB,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,4IAAQ;wBAAC,WAAU;;;;;;kCACpB,6LAAC,4IAAQ;wBAAC,WAAU;;;;;;kCACpB,6LAAC;wBAAI,WAAU;;;;;;;;;;;;;;;;;IAIvB;IAEA,IAAI,CAAC,WAAW;QACd,OAAO;IACT;IAEA,qBAAO;kBAAG;;AACZ;GAzDgB;;QACC,kJAAS;QACP,oJAAW;;;KAFd","debugId":null}},
    {"offset": {"line": 294, "column": 0}, "map": {"version":3,"sources":["file:///D:/b/gugu-gaga-/front_end/app/%28dashboard%29/dashboard/%28supplier-flow%29/layout.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { SupplierFlowGuard } from \"@/components/supplier-flow-guard\";\r\n\r\nexport default function SupplierFlowLayout({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  return (\r\n    <SupplierFlowGuard>\r\n      <div className=\"min-h-screen bg-gray-50\">\r\n        {/* <div className=\"container mx-auto px-4 py-8\"> */}\r\n          {children}\r\n        {/* </div> */}\r\n      </div>\r\n    </SupplierFlowGuard>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS,mBAAmB,KAI1C;QAJ0C,EACzC,QAAQ,EAGT,GAJ0C;IAKzC,qBACE,6LAAC,gKAAiB;kBAChB,cAAA,6LAAC;YAAI,WAAU;sBAEV;;;;;;;;;;;AAKX;KAdwB","debugId":null}},
    {"offset": {"line": 329, "column": 0}, "map": {"version":3,"sources":["file:///D:/b/gugu-gaga-/front_end/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}