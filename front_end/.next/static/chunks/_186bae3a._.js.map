{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/habtamusemagn/Desktop/last/gugu-gaga-/front_end/utils/api.ts"],"sourcesContent":["export const API_BASE =\n  process.env.NEXT_PUBLIC_API_BASE || \"http://localhost:8000\";\nexport const TENANT_HEADER =\n  process.env.NEXT_PUBLIC_TENANT_HEADER || \"X-Tenant-ID\";\n\nconst API_BASE_NORMALIZED = API_BASE.replace(/\\/+$/, \"\");\nlet API_BASE_PATH = \"\";\ntry {\n  const parsed = new URL(API_BASE_NORMALIZED);\n  API_BASE_PATH = parsed.pathname.replace(/^\\/+/, \"\").replace(/\\/+$/, \"\");\n} catch {\n  API_BASE_PATH = \"\";\n}\n\nfunction buildHeaders(\n  initHeaders?: HeadersInit,\n  tenantId?: string\n): HeadersInit {\n  const headers: Record<string, string> = {\n    ...(initHeaders as Record<string, string>),\n  };\n  if (tenantId) headers[TENANT_HEADER] = tenantId;\n  return headers;\n}\n\nfunction resolveApiUrl(path: string): string {\n  if (/^https?:\\/\\//i.test(path)) {\n    return path;\n  }\n\n  if (path.startsWith(\"?\") || path.startsWith(\"#\")) {\n    return `${API_BASE_NORMALIZED}${path}`;\n  }\n\n  const normalizedPath = path.replace(/^\\/+/, \"\");\n  let relativePath = normalizedPath;\n\n\n  if (API_BASE_PATH) {\n    const prefix = `${API_BASE_PATH}/`;\n    if (relativePath.startsWith(prefix)) {\n      relativePath = relativePath.slice(prefix.length);\n    } else if (relativePath === API_BASE_PATH) {\n      relativePath = \"\";\n    }\n  }\n\n  if (!relativePath) {\n    return API_BASE_NORMALIZED;\n  }\n\n  return `${API_BASE_NORMALIZED}/${relativePath}`;\n}\n\nexport async function postForm<T = any>(\n  path: string,\n  data: Record<string, string>,\n  tenantId?: string\n): Promise<T> {\n  const body = new URLSearchParams(data);\n  const res = await fetch(resolveApiUrl(path), {\n    method: \"POST\",\n    headers: buildHeaders(\n      { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n      tenantId\n    ),\n    body,\n  });\n\n  if (!res.ok) {\n    let parsed: any = null;\n    try {\n      parsed = await res.json();\n    } catch {\n      parsed = await res.text().catch(() => null);\n    }\n\n    let msg = \"\";\n    if (!parsed) msg = `Request failed with ${res.status}`;\n    else if (typeof parsed === \"string\") msg = parsed;\n    else if (Array.isArray(parsed)) msg = parsed.join(\", \");\n    else if (parsed?.detail) msg = parsed.detail;\n    else if (parsed?.message) msg = parsed.message;\n    else if (parsed?.error) msg = parsed.error;\n    else if (parsed?.errors) {\n      msg = Object.keys(parsed.errors)\n        .map(\n          (k) =>\n            `${k}: ${Array.isArray(parsed.errors[k])\n              ? parsed.errors[k].join(\", \")\n              : parsed.errors[k]\n            }`\n        )\n        .join(\" | \");\n    } else msg = JSON.stringify(parsed);\n\n    const err: any = new Error(msg || `Request failed with ${res.status}`);\n    err.status = res.status;\n    err.body = parsed;\n    console.error(\"[postForm] failed\", { path, status: res.status, parsed });\n    throw err;\n  }\n\n  return (await res.json()) as T;\n}\n\nexport async function postJSON<T = any>(\n  path: string,\n  body: any,\n  tenantId?: string\n): Promise<T> {\n  const requestInit = {\n    method: \"POST\",\n    headers: buildHeaders({ \"Content-Type\": \"application/json\" }, tenantId),\n    body: JSON.stringify(body),\n  } satisfies RequestInit;\n\n  try {\n    const res = await fetch(resolveApiUrl(path), requestInit);\n\n    if (!res.ok) {\n      let parsed: any = null;\n      let message = \"\";\n      try {\n        parsed = await res.json();\n        if (typeof parsed === \"string\") message = parsed;\n        else if (Array.isArray(parsed)) message = parsed.join(\", \");\n        else message = parsed?.error || parsed?.detail || parsed?.message || \"\";\n        if (!message && parsed) message = JSON.stringify(parsed);\n      } catch {\n        parsed = null;\n        message = await res.text().catch(() => \"\");\n      }\n\n      const error: any = new Error(message || `Request failed with ${res.status}`);\n      error.status = res.status;\n      if (parsed !== null) error.body = parsed;\n      throw error;\n    }\n\n    return (await res.json()) as T;\n  } catch (error: any) {\n    if (typeof window !== \"undefined\" && !navigator.onLine) {\n      const { queueRequest } = await import(\"@/lib/offline/queue\");\n      await queueRequest(path, requestInit, {\n        tenantId,\n        requiresAuth: true,\n        description: requestInit.body ? `POST ${path}` : undefined,\n      });\n      const offlineError: any = new Error(\"Request queued until you are back online.\");\n      offlineError.offline = true;\n      throw offlineError;\n    }\n    throw error;\n  }\n}\n\nexport async function putAuthJSON<T = any>(\n  path: string,\n  bodyData: any,\n  tenantId?: string\n): Promise<T> {\n  const res = await authFetch(\n    path,\n    {\n      method: \"PUT\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(bodyData),\n    },\n    true,\n    tenantId\n  );\n\n  if (!res.ok) {\n    const text = await res.text().catch(() => \"\");\n    throw new Error(text || `Request failed with ${res.status}`);\n  }\n\n  return (await res.json()) as T;\n}\n\nexport async function postMultipart<T = any>(\n  path: string,\n  formData: FormData,\n  tenantId?: string\n): Promise<T> {\n  const res = await fetch(resolveApiUrl(path), {\n    method: \"POST\",\n    headers: buildHeaders(undefined, tenantId),\n    body: formData,\n  });\n\n  if (!res.ok) {\n    try {\n      const data = await res.json();\n      const msg = data?.error || data?.detail || JSON.stringify(data);\n      throw new Error(msg || `Request failed with ${res.status}`);\n    } catch {\n      throw new Error(`Request failed with ${res.status}`);\n    }\n  }\n\n  return (await res.json()) as T;\n}\n\nexport function getAccessToken(): string | null {\n  if (typeof window === \"undefined\") return null;\n  return localStorage.getItem(\"access_token\");\n}\n\nfunction getTenantId(): string | null {\n  if (typeof window === \"undefined\") return null;\n  return localStorage.getItem(\"tenant_id\");\n}\n\nfunction getRefreshToken(): string | null {\n  if (typeof window === \"undefined\") return null;\n  return localStorage.getItem(\"refresh_token\");\n}\n\nasync function refreshTokens(): Promise<boolean> {\n  const rt = getRefreshToken();\n  if (!rt) return false;\n  const res = await fetch(resolveApiUrl(\"/api/v1/auth/refresh\"), {\n    method: \"POST\",\n    headers: buildHeaders({ \"Content-Type\": \"application/json\" }),\n    body: JSON.stringify({ refresh_token: rt }),\n  });\n  if (!res.ok) {\n    return false;\n  }\n  try {\n    const data = (await res.json()) as {\n      access_token: string;\n      refresh_token: string;\n    };\n    if (typeof window !== \"undefined\") {\n      localStorage.setItem(\"access_token\", data.access_token);\n      localStorage.setItem(\"refresh_token\", data.refresh_token);\n    }\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nexport async function authFetch<T>(\n  path: string,\n  init?: RequestInit,\n  retry = true,\n  tenantId?: string\n): Promise<Response> {\n  const token = getAccessToken();\n  const activeTenantId = tenantId ?? getTenantId() ?? undefined;\n  const headers: HeadersInit = buildHeaders(\n    {\n      ...(init?.headers || {}),\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\n    },\n    activeTenantId\n  );\n  let res = await fetch(resolveApiUrl(path), { ...(init || {}), headers });\n\n  if (res.status === 401 && retry) {\n    const ok = await refreshTokens();\n    if (ok) {\n      const newToken = getAccessToken();\n      const retryTenantId = tenantId ?? getTenantId() ?? undefined;\n      const retryHeaders: HeadersInit = buildHeaders(\n        {\n          ...(init?.headers || {}),\n          ...(newToken ? { Authorization: `Bearer ${newToken}` } : {}),\n        },\n        retryTenantId\n      );\n      res = await fetch(resolveApiUrl(path), {\n        ...(init || {}),\n        headers: retryHeaders,\n      });\n    }\n  }\n\n  return res;\n}\n\nexport async function getAuthJSON<T = any>(\n  path: string,\n  tenantId?: string\n): Promise<T> {\n  const res = await authFetch(path, undefined, true, tenantId);\n  if (!res.ok) {\n    const data = await res.text().catch(() => \"\");\n    throw new Error(data || `Request failed with ${res.status}`);\n  }\n  return (await res.json()) as T;\n}\n\nexport async function postAuthJSON<T = any>(\n  path: string,\n  bodyData: any,\n  tenantId?: string\n): Promise<T> {\n  const res = await authFetch(\n    path,\n    {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(bodyData),\n    },\n    true,\n    tenantId\n  );\n\n  if (!res.ok) {\n    const data = await res.text().catch(() => \"\");\n    throw new Error(data || `Request failed with ${res.status}`);\n  }\n\n  return (await res.json()) as T;\n}\n\nexport async function deleteAuthJSON(\n  path: string,\n  tenantId?: string\n): Promise<void> {\n  const res = await authFetch(\n    path,\n    {\n      method: \"DELETE\",\n      headers: { \"Content-Type\": \"application/json\" },\n    },\n    true,\n    tenantId\n  );\n\n  if (!res.ok) {\n    const data = await res.text().catch(() => \"\");\n    throw new Error(data || `Request failed with ${res.status}`);\n  }\n\n  // For DELETE requests, we might not have a response body\n  try {\n    return await res.json();\n  } catch {\n    return undefined;\n  }\n}\n\n// ----------------- AuthAPI -----------------\nexport type AuthProfile = {\n  id: number;\n  email: string;\n  username?: string | null;\n  first_name?: string | null;\n  last_name?: string | null;\n  phone?: string | null;\n  role?: string | null;\n  tenant_id?: string | null;\n  kyc_status?: string | null;\n  subscription_status?: string | null;\n  subscription_blocked?: boolean | null;\n  subscription_next_due_date?: string | null;\n  latest_payment_status?: string | null;\n};\n\nexport type AuthTokenResponse = {\n  access_token: string;\n  refresh_token: string;\n  token_type: string;\n  session_id: number;\n};\n\nexport type SessionInfo = {\n  id: number;\n  created_at: string;\n  last_seen_at: string;\n  expires_at: string;\n  revoked_at?: string | null;\n  is_revoked: boolean;\n  user_agent?: string | null;\n  ip_address?: string | null;\n  is_current: boolean;\n};\n\nexport type TenantActivityRecord = {\n  id: number;\n  tenant_id: string;\n  actor_user_id?: number | null;\n  action: string;\n  message: string;\n  target_type?: string | null;\n  target_id?: string | null;\n  metadata?: Record<string, unknown> | null;\n  created_at: string;\n};\n\nexport const AuthAPI = {\n  registerAffiliate: (body: any) => postJSON(\"/api/v1/auth/register/affiliate\", body),\n  registerPharmacy: (body: any) => postJSON(\"/api/v1/auth/register/pharmacy\", body),\n\n  registerVerify: async (email: string, code: string) => {\n    try {\n      return await postForm(\"/api/v1/auth/register/verify\", { email, code });\n    } catch (err: any) {\n      if (err?.status === 422) {\n        console.warn(\"[AuthAPI.registerVerify] 422, retrying with JSON\", {\n          body: err.body,\n        });\n        try {\n          return await postJSON(\"/api/v1/auth/register/verify\", { email, code });\n        } catch (err2: any) {\n          const e: any = new Error(\n            err2?.message || err?.message || \"Verification failed\"\n          );\n          e.original = err;\n          e.retry = err2;\n          throw e;\n        }\n      }\n      throw err;\n    }\n  },\n\n  verifyRegistration: (email: string, code: string) =>\n    postForm(\"/api/v1/auth/register/verify\", { email, code }),\n  login: (email: string, password: string, tenantId?: string) =>\n    postForm<AuthTokenResponse>(\n      \"/api/v1/auth/login\",\n      {\n        username: email,\n        password,\n        grant_type: \"password\",\n      },\n      tenantId\n    ).then(\n      (resp) => {\n        if (typeof window !== \"undefined\") {\n          localStorage.setItem(\"access_token\", resp.access_token);\n          localStorage.setItem(\"refresh_token\", resp.refresh_token);\n          if (tenantId) {\n            localStorage.setItem(\"tenant_id\", tenantId);\n          }\n        }\n        return resp;\n      }\n    ),\n  loginRequestCode: (email: string, password: string, tenantId?: string) =>\n    postForm(\n      \"/api/v1/auth/login/request-code\",\n      { username: email, password, grant_type: \"password\" },\n      tenantId\n    ),\n  loginVerify: (email: string, code: string, tenantId?: string) =>\n    postJSON<AuthTokenResponse>(\"/api/v1/auth/login/verify\", { email, code }, tenantId).then((resp) => {\n      if (typeof window !== \"undefined\") {\n        localStorage.setItem(\"access_token\", resp.access_token);\n        localStorage.setItem(\"refresh_token\", resp.refresh_token);\n        if (tenantId) {\n          localStorage.setItem(\"tenant_id\", tenantId);\n        }\n      }\n      return resp;\n    }),\n  refresh: (refreshToken: string) =>\n    postJSON<AuthTokenResponse>(\"/api/v1/auth/refresh\", { refresh_token: refreshToken }),\n  sessions: () => getAuthJSON<SessionInfo[]>(\"/api/v1/auth/sessions\"),\n  revokeSession: (sessionId: number) =>\n    authFetch(`/api/v1/auth/sessions/${sessionId}`, { method: \"DELETE\" }).then((res) => {\n      if (!res.ok) throw new Error(\"Failed to revoke session\");\n    }),\n  changePassword: (body: { current_password: string; new_password: string }) =>\n    postAuthJSON<{ status: string }>(\"/api/v1/auth/change-password\", body),\n  me: () =>\n    getAuthJSON<AuthProfile>(\"/api/v1/auth/me\").then((profile) => {\n      if (typeof window !== \"undefined\") {\n        if (profile?.tenant_id) {\n          localStorage.setItem(\"tenant_id\", profile.tenant_id);\n        }\n      }\n      return profile;\n    }),\n};\n\nexport const TenantAPI = {\n  activity: async (params?: { action?: string[]; limit?: number; offset?: number }) => {\n    const searchParams = new URLSearchParams();\n    if (params?.limit) searchParams.set(\"limit\", params.limit.toString());\n    if (params?.offset) searchParams.set(\"offset\", params.offset.toString());\n    params?.action?.forEach((action) => searchParams.append(\"action\", action));\n    const qs = searchParams.toString();\n    const url = `/api/v1/tenant/activity${qs ? `?${qs}` : \"\"}`;\n    const tenantId = getTenantId() ?? undefined;\n    const res = await authFetch(url, undefined, true, tenantId);\n    if (res.status === 404 || res.status === 204) {\n      return [];\n    }\n    if (!res.ok) {\n      const text = await res.text().catch(() => \"\");\n      throw new Error(text || `Request failed with ${res.status}`);\n    }\n    const contentType = res.headers.get(\"content-type\") || \"\";\n    if (!contentType.includes(\"application/json\")) {\n      return [];\n    }\n    try {\n      return (await res.json()) as TenantActivityRecord[];\n    } catch {\n      return [];\n    }\n  },\n};\n\n// ----------------- IntegrationsAPI -----------------\nexport type IntegrationProviderOut = {\n  key: string;\n  name: string;\n  category: string;\n  capability: {\n    resources: string[];\n    supports_webhooks: boolean;\n    supports_delta_sync: boolean;\n  };\n  requires_oauth: boolean;\n};\n\nexport type IntegrationConnectionOut = {\n  id: number;\n  tenant_id: string;\n  provider_key: string;\n  provider_name: string;\n  display_name: string;\n  status: string;\n  created_at: string;\n  updated_at: string;\n  last_synced_at?: string | null;\n  resource_scope?: string[] | null;\n};\n\nexport type IntegrationOAuthStartResponse = {\n  authorization_url: string;\n  state: string;\n  expires_in_seconds: number;\n};\n\nexport type IntegrationSyncJobOut = {\n  id: number;\n  connection_id: number;\n  direction: string;\n  resource: string;\n  status: string;\n  started_at?: string | null;\n  finished_at?: string | null;\n  error_message?: string | null;\n};\n\nexport const IntegrationsAPI = {\n  listProviders: () => getAuthJSON<IntegrationProviderOut[]>(\"/api/v1/integrations/providers\"),\n  listConnections: (tenantId: string) =>\n    getAuthJSON<IntegrationConnectionOut[]>(\"/api/v1/integrations/connections\", tenantId),\n  startOAuth: (tenantId: string, providerKey: string, resources?: string[]) =>\n    postAuthJSON<IntegrationOAuthStartResponse>(\n      \"/api/v1/integrations/oauth/start\",\n      { provider_key: providerKey, resources, display_name: undefined },\n      tenantId\n    ),\n  completeOAuth: (code: string, state: string, providerKey?: string) =>\n    postJSON<IntegrationConnectionOut>(\n      \"/api/v1/integrations/oauth/callback\",\n      { code, state, provider_key: providerKey }\n    ),\n  disconnect: (tenantId: string, connectionId: number) =>\n    authFetch(`/api/v1/integrations/connections/${connectionId}`, { method: \"DELETE\" }, true, tenantId).then(\n      async (res) => {\n        if (!res.ok) {\n          const text = await res.text().catch(() => \"\");\n          throw new Error(text || `HTTP ${res.status}`);\n        }\n        return res.json();\n      }\n    ),\n  triggerSync: (tenantId: string, connectionId: number, resource: string, direction: \"incoming\" | \"outgoing\") =>\n    postAuthJSON<IntegrationSyncJobOut>(\n      `/api/v1/integrations/connections/${connectionId}/sync`,\n      { resource, direction },\n      tenantId\n    ),\n};\n\nexport const AffiliateAPI = {\n  getLinks: () => getAuthJSON(\"/api/v1/affiliate/register-link\", \"\"),\n  createLink: () => getAuthJSON(\"/api/v1/affiliate/register-link?create_new=true\", \"\"),\n  deactivate: (token: string) =>\n    postAuthJSON(\n      `/api/v1/affiliate/links/${encodeURIComponent(token)}/deactivate`,\n      {},\n      \"\"\n    ),\n  rotate: (token: string) =>\n    postAuthJSON(`/api/v1/affiliate/links/${encodeURIComponent(token)}/rotate`, {}, \"\"),\n  dashboard: () => getAuthJSON(\"/api/v1/affiliate/dashboard\", \"\"),\n  payouts: (status?: string) =>\n    getAuthJSON(\n      `/api/v1/affiliate/payouts${status ? `?status_filter=${encodeURIComponent(status)}` : \"\"\n      }`,\n      \"\"\n    ),\n  requestPayout: (month?: string, percent = 5) =>\n    postAuthJSON(\"/api/v1/affiliate/payouts/request\", { month, percent }, \"\"),\n  updateProfile: (body: any) => postAuthJSON(\"/api/v1/affiliate/profile\", body, \"\"),\n};\n\n// ----------------- AdminAPI -----------------\nexport const AdminAPI = {\n  analyticsOverview: (days = 30) =>\n    getAuthJSON(`/api/v1/admin/analytics/overview?days=${days}`),\n  pharmacySummary: () => getAuthJSON(`/api/v1/admin/pharmacies/summary`),\n  pharmacies: (page = 1, pageSize = 20, q = \"\") =>\n    getAuthJSON(\n      `/api/v1/admin/pharmacies?page=${page}&page_size=${pageSize}&q=${encodeURIComponent(q)}`\n    ),\n  approvePharmacy: (tenantId: string, applicationId: number, body?: any) =>\n    postAuthJSON(`/api/v1/admin/pharmacies/${applicationId}/approve`, body || {}, tenantId),\n  rejectPharmacy: (tenantId: string, applicationId: number) =>\n    postAuthJSON(`/api/v1/admin/pharmacies/${applicationId}/reject`, {}, tenantId),\n  verifyPayment: (tenantId: string, code?: string | null) =>\n    postAuthJSON(`/api/v1/admin/payments/verify`, { code: code || null }, tenantId),\n  rejectPayment: (tenantId: string, code?: string | null) =>\n    postAuthJSON(`/api/v1/admin/payments/reject`, { code: code || null }, tenantId),\n  approveAffiliate: (userId: number) => postAuthJSON(`/api/v1/admin/affiliates/${userId}/approve`, {}),\n  rejectAffiliate: (userId: number) => postAuthJSON(`/api/v1/admin/affiliates/${userId}/reject`, {}),\n};\n\n// ----------------- StaffAPI -----------------\nexport const StaffAPI = {\n  createCashier: (\n    tenantId: string,\n    body: {\n      email: string;\n      password: string;\n      phone?: string;\n      role?: string;\n      assigned_branch_id?: number | null;\n    }\n  ) => postAuthJSON(\"/api/v1/staff\", body, tenantId),\n  list: (tenantId: string) => getAuthJSON(\"/api/v1/staff\", tenantId),\n  update: (tenantId: string, userId: number, body: { is_active?: boolean }) =>\n    authFetch(\n      `/api/v1/staff/${userId}`,\n      {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(body),\n      },\n      true,\n      tenantId\n    ).then(async (res) => {\n      if (!res.ok) {\n        const text = await res.text().catch(() => \"\");\n        throw new Error(text || `Request failed with ${res.status}`);\n      }\n      return res.json();\n    }),\n  remove: (tenantId: string, userId: number) =>\n    authFetch(\n      `/api/v1/staff/${userId}`,\n      { method: \"DELETE\" },\n      true,\n      tenantId\n    ).then(async (res) => {\n      if (!res.ok) {\n        const text = await res.text().catch(() => \"\");\n        throw new Error(text || `Request failed with ${res.status}`);\n      }\n      return res.json();\n    }),\n};\n\n// ----------------- Pharmacy models -----------------\nexport type PharmacyOut = {\n  id: number;\n  tenant_id: string;\n  name: string;\n  address?: string | null;\n};\n\nexport type PharmaciesListResponse = {\n  page: number;\n  page_size: number;\n  total: number;\n  items: PharmacyOut[];\n};\n\n// ----------------- BillingAPI -----------------\nexport const BillingAPI = {\n  submitPaymentCode: (tenantId: string, code: string) =>\n    postAuthJSON(\"/api/v1/owner/billing/payment-code\", { code }, tenantId),\n};\n\n// ----------------- UploadAPI -----------------\nexport const UploadAPI = {\n  uploadKyc: async (file: File) => {\n    const fd = new FormData();\n    fd.append(\"file\", file);\n    return postMultipart(\"/uploads/kyc\", fd);\n  },\n};\n\n// ----------------- KYCAPI -----------------\nexport const KYCAPI = {\n  status: (tenantId: string) => getAuthJSON(\"/api/v1/owner/kyc/status\", tenantId),\n  update: (tenantId: string, body: any) =>\n    putAuthJSON(\"/api/v1/owner/kyc/status\", body, tenantId),\n};\n\n// ----------------- PharmaciesAPI -----------------\nexport const PharmaciesAPI = {\n  list: (\n    tenantId?: string,\n    params?: { page?: number; page_size?: number; q?: string }\n  ): Promise<PharmaciesListResponse> => {\n    const search = new URLSearchParams();\n    search.set(\"page\", String(params?.page ?? 1));\n    search.set(\"page_size\", String(params?.page_size ?? 20));\n    if (params?.q) search.set(\"q\", params.q);\n    const queryString = search.toString();\n    const path = `/api/v1/pharmacies${queryString ? `?${queryString}` : \"\"}`;\n    return getAuthJSON<PharmaciesListResponse>(path, tenantId);\n  },\n  get: (id: number, tenantId?: string) =>\n    getAuthJSON<PharmacyOut>(`/api/v1/pharmacies/${id}`, tenantId),\n  update: (id: number, body: { name?: string; address?: string }, tenantId?: string) =>\n    authFetch(`/api/v1/pharmacies/${id}`, {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(body),\n    }, true, tenantId).then(async (res) => {\n      if (!res.ok) throw new Error(await res.text());\n      return (await res.json()) as PharmacyOut;\n    }),\n};\n\n// ----------------- BranchAPI -----------------\n\ninterface BranchRecord {\n  id: number;\n  pharmacy_id: number;\n  tenant_id: string;\n  name: string;\n  address?: string | null;\n  phone?: string | null;\n}\n\nexport const BranchAPI = {\n  create: (tenantId: string | undefined, payload: { name: string; address?: string; phone?: string; pharmacy_id: number }) =>\n    postAuthJSON<{ id: number }>(\"/api/v1/branches\", payload, tenantId),\n\n  list: (tenantId: string | undefined, pharmacyId?: number) => {\n    const query = pharmacyId ? `?pharmacy_id=${pharmacyId}` : '';\n    return getAuthJSON<{ items: BranchRecord[] }>(`/api/v1/branches${query}`, tenantId);\n  },\n\n  get: (tenantId: string | undefined, id: number) =>\n    getAuthJSON<BranchRecord>(`/api/v1/branches/${id}`, tenantId),\n\n  update: (tenantId: string | undefined, id: number, payload: { name?: string; address?: string | null; phone?: string | null }) =>\n    putAuthJSON<BranchRecord>(`/api/v1/branches/${id}`, payload, tenantId),\n\n  delete: (tenantId: string | undefined, id: number) =>\n    deleteAuthJSON(`/api/v1/branches/${id}`, tenantId)\n};\n\n// ----------------- ChatAPI -----------------\nexport const ChatAPI = {\n  listThreads: (tenantId: string) => getAuthJSON(`/api/v1/chat/threads`, tenantId),\n  createThread: (tenantId: string, title?: string) =>\n    postAuthJSON(\n      `/api/v1/chat/threads`,\n      title ? { title } : {},\n      tenantId\n    ),\n  listMessages: (tenantId: string, threadId: number) =>\n    getAuthJSON(`/api/v1/chat/threads/${threadId}/messages`, tenantId),\n  sendMessage: (tenantId: string, threadId: number, prompt: string) =>\n    postAuthJSON(`/api/v1/chat/threads/${threadId}/messages`, { prompt }, tenantId),\n  usage: (tenantId: string, days = 30) =>\n    getAuthJSON(`/api/v1/chat/usage?days=${days}`, tenantId),\n};\n\nexport type OwnerAnalyticsResponse = {\n  horizon: string;\n  totals: {\n    total_revenue: number;\n    average_ticket: number;\n    units_sold: number;\n    sale_count: number;\n    active_cashiers: number;\n    total_customers: number;\n    active_customers: number;\n    upcoming_refills: number;\n  };\n  deltas: {\n    revenue_vs_last_period: number;\n    avg_ticket_vs_last_period: number;\n    units_vs_last_period: number;\n  };\n  revenue_trend: { period: string; revenue: number }[];\n  top_products: { name: string; revenue: number; quantity: number }[];\n  inventory_health: { label: string; count: number }[];\n  recent_payments: {\n    id: number;\n    status: string;\n    status_label: string;\n    code?: string | null;\n    created_at: string;\n    created_at_formatted: string;\n  }[];\n  branch_comparison: {\n    branch: string | null;\n    revenue: number;\n    sale_count: number;\n    units_sold: number;\n  }[];\n  staff_productivity: {\n    user_id: number;\n    name: string;\n    email?: string | null;\n    role: string;\n    total_sales: number;\n    transactions: number;\n    units_sold: number;\n  }[];\n  staff_activity: {\n    id: number;\n    action: string;\n    actor_user_id?: number | null;\n    actor_name?: string | null;\n    actor_role?: string | null;\n    target_type?: string | null;\n    target_id?: string | null;\n    metadata?: Record<string, any> | null;\n    created_at: string;\n  }[];\n};\n\nexport const OwnerAnalyticsAPI = {\n  overview: (\n    tenantId: string,\n    options?: { horizon?: string; trendWeeks?: number }\n  ) => {\n    const params = new URLSearchParams();\n    if (options?.horizon) params.set(\"horizon\", options.horizon);\n    if (options?.trendWeeks) params.set(\"trend_weeks\", String(options.trendWeeks));\n    const query = params.toString();\n    const path = `/api/v1/owner/analytics/overview${query ? `?${query}` : \"\"}`;\n    return getAuthJSON<OwnerAnalyticsResponse>(path, tenantId);\n  },\n};\n\n// ----------------- OwnerChatAPI -----------------\nexport type OwnerChatThread = {\n  id: number;\n  title: string;\n  created_at: string;\n  updated_at: string;\n};\n\nexport type OwnerChatMessage = {\n  id: number;\n  thread_id: number;\n  role: \"owner\" | \"assistant\";\n  content: string;\n  created_at: string;\n};\n\nexport const OwnerChatAPI = {\n  listThreads: (tenantId: string) => getAuthJSON<OwnerChatThread[]>(\"/api/v1/owner/chat/threads\", tenantId),\n  createThread: (tenantId: string, title: string) =>\n    postAuthJSON<OwnerChatThread>(\"/api/v1/owner/chat/threads\", { title }, tenantId),\n  listMessages: (tenantId: string, threadId: number) =>\n    getAuthJSON<OwnerChatMessage[]>(`/api/v1/owner/chat/threads/${threadId}/messages`, tenantId),\n  sendMessage: (tenantId: string, threadId: number, prompt: string) =>\n    postAuthJSON<OwnerChatMessage>(`/api/v1/owner/chat/threads/${threadId}/messages`, { prompt }, tenantId),\n};\n\n// ----------------- InventoryAPI -----------------\nexport type InventoryItem = {\n  id: number;\n  medicine_id: number;\n  medicine_name: string;\n  sku?: string | null;\n  branch?: string | null;\n  quantity: number;\n  pack_size: number;\n  packs: number;\n  singles: number;\n  reorder_level: number;\n  expiry_date?: string | null;\n  lot_number?: string | null;\n  sell_price?: number | null;\n};\n\nexport type InventoryListResponse = {\n  page: number;\n  page_size: number;\n  total: number;\n  items: InventoryItem[];\n};\n\ntype InventoryListOptions = {\n  q?: string;\n  branch?: string;\n  expiringInDays?: number;\n  lowStockOnly?: boolean;\n  page?: number;\n  pageSize?: number;\n};\n\ntype InventoryUpdatePayload = {\n  quantity?: number;\n  reorder_level?: number;\n  expiry_date?: string | null;\n  lot_number?: string | null;\n  sell_price?: number | null;\n};\n\ntype InventoryCreatePayload = {\n  medicine_id: number;\n  branch?: string | null;\n  pack_size: number;\n  packs_count?: number;\n  singles_count?: number;\n  expiry_date?: string | null;\n  lot_number?: string | null;\n  purchase_price?: number | null;\n  sell_price?: number | null;\n  reorder_level?: number;\n};\n\nexport const InventoryAPI = {\n  list: (tenantId?: string, options?: InventoryListOptions) => {\n    const params = new URLSearchParams();\n    if (options?.q) params.set(\"q\", options.q);\n    if (options?.branch) params.set(\"branch\", options.branch);\n    if (typeof options?.expiringInDays === \"number\") {\n      params.set(\"expiring_in_days\", String(options.expiringInDays));\n    }\n    if (options?.lowStockOnly) params.set(\"low_stock_only\", \"true\");\n    if (options?.page) params.set(\"page\", String(options.page));\n    if (options?.pageSize) params.set(\"page_size\", String(options.pageSize));\n    const query = params.toString();\n    const path = `/api/v1/inventory/items${query ? `?${query}` : \"\"}`;\n    return getAuthJSON<InventoryListResponse>(path, tenantId);\n  },\n  create: async (tenantId: string | undefined, payload: InventoryCreatePayload) => {\n    const form = new URLSearchParams();\n    form.set(\"medicine_id\", String(payload.medicine_id));\n    form.set(\"pack_size\", String(Math.max(1, payload.pack_size || 1)));\n    if (payload.branch) {\n      form.set(\"branch\", payload.branch);\n    }\n    if (typeof payload.packs_count === \"number\") {\n      form.set(\"packs_count\", String(Math.max(0, payload.packs_count)));\n    }\n    if (typeof payload.singles_count === \"number\") {\n      form.set(\"singles_count\", String(Math.max(0, payload.singles_count)));\n    }\n    if (payload.expiry_date) {\n      form.set(\"expiry_date\", payload.expiry_date);\n    }\n    if (payload.lot_number) {\n      form.set(\"lot_number\", payload.lot_number);\n    }\n    if (typeof payload.purchase_price === \"number\") {\n      form.set(\"purchase_price\", String(payload.purchase_price));\n    }\n    if (typeof payload.sell_price === \"number\") {\n      form.set(\"sell_price\", String(payload.sell_price));\n    }\n    if (typeof payload.reorder_level === \"number\") {\n      form.set(\"reorder_level\", String(Math.max(0, payload.reorder_level)));\n    }\n    const res = await authFetch(\n      `/api/v1/inventory/items`,\n      {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n        body: form.toString(),\n      },\n      true,\n      tenantId\n    );\n    if (!res.ok) {\n      throw new Error((await res.text().catch(() => \"\")) || `Request failed with ${res.status}`);\n    }\n    return res.json();\n  },\n  update: async (tenantId: string | undefined, itemId: number, payload: InventoryUpdatePayload) => {\n    const form = new URLSearchParams();\n    if (typeof payload.quantity === \"number\") {\n      form.set(\"quantity\", String(payload.quantity));\n    }\n    if (typeof payload.reorder_level === \"number\") {\n      form.set(\"reorder_level\", String(Math.max(0, payload.reorder_level)));\n    }\n    if (typeof payload.sell_price === \"number\") {\n      form.set(\"sell_price\", String(payload.sell_price));\n    }\n    if (payload.expiry_date !== undefined) {\n      form.set(\"expiry_date\", payload.expiry_date || \"\");\n    }\n    if (payload.lot_number !== undefined) {\n      form.set(\"lot_number\", payload.lot_number || \"\");\n    }\n    const res = await authFetch(\n      `/api/v1/inventory/items/${itemId}`,\n      {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n        body: form.toString(),\n      },\n      true,\n      tenantId\n    );\n    if (!res.ok) {\n      throw new Error((await res.text().catch(() => \"\")) || `Request failed with ${res.status}`);\n    }\n    return res.json();\n  },\n  remove: async (tenantId: string | undefined, itemId: number) => {\n    const res = await authFetch(\n      `/api/v1/inventory/items/${itemId}`,\n      { method: \"DELETE\" },\n      true,\n      tenantId\n    );\n    if (!res.ok) {\n      throw new Error((await res.text().catch(() => \"\")) || `Request failed with ${res.status}`);\n    }\n    return res.json();\n  },\n};\n\n// ----------------- MedicinesAPI -----------------\nexport type MedicineListItem = {\n  id: number;\n  name: string;\n  sku?: string | null;\n  category?: string | null;\n  manufacturer?: string | null;\n};\n\nexport type MedicinesListResponse = {\n  page: number;\n  page_size: number;\n  total: number;\n  items: MedicineListItem[];\n};\n\ntype MedicinesListOptions = {\n  q?: string;\n  page?: number;\n  pageSize?: number;\n};\n\nexport const MedicinesAPI = {\n  list: (tenantId?: string, options?: MedicinesListOptions) => {\n    const query = new URLSearchParams();\n    if (options?.q) {\n      query.set(\"q\", options.q);\n    }\n    if (options?.page) {\n      query.set(\"page\", String(options.page));\n    }\n    if (options?.pageSize) {\n      query.set(\"page_size\", String(Math.min(200, Math.max(1, options.pageSize))));\n    }\n    const path = `/api/v1/medicines${query.toString() ? `?${query.toString()}` : \"\"}`;\n    return getAuthJSON<MedicinesListResponse>(path, tenantId);\n  },\n};\n\n// ----------------- SalesAPI -----------------\ntype SaleLineInput = {\n  name_or_sku: string;\n  quantity_units: number;\n  unit_price?: number;\n};\n\nexport const SalesAPI = {\n  pos: (\n    tenantId: string | undefined,\n    payload: { lines: SaleLineInput[]; branch?: string | null }\n  ) => {\n    const { lines, branch } = payload;\n    const query = branch ? `?branch=${encodeURIComponent(branch)}` : \"\";\n    const path = `/api/v1/sales/pos${query}`;\n    return postAuthJSON<{ id: number; total: number }>(path, lines, tenantId);\n  },\n};\n\n// Other API objects (AffiliateAPI, AdminAPI, etc.) remain unchanged\n\n// export const API_BASE =\n//   process.env.NEXT_PUBLIC_API_BASE || \"http://localhost:8000/api/v1\";\n// export const TENANT_HEADER =\n//   process.env.NEXT_PUBLIC_TENANT_HEADER || \"X-Tenant-ID\";\n\n// function buildHeaders(\n//   initHeaders?: HeadersInit,\n//   tenantId?: string\n// ): HeadersInit {\n//   const headers: Record<string, string> = {\n//     ...(initHeaders as Record<string, string>),\n//   };\n//   if (tenantId) headers[TENANT_HEADER] = tenantId;\n//   return headers;\n// }\n\n// export async function putAuthJSON<T = any>(\n//   path: string,\n//   bodyData: any,\n//   tenantId?: string\n// ): Promise<T> {\n//   const res = await authFetch(\n//     path,\n//     {\n//       method: \"PUT\",\n//       headers: { \"Content-Type\": \"application/json\" },\n//       body: JSON.stringify(bodyData),\n//     },\n//     true,\n//     tenantId\n//   );\n//   if (!res.ok) {\n//     try {\n//       const data = await res.json();\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\n//       throw new Error(msg || `Request failed with ${res.status}`);\n//     } catch {\n//       const text = await res.text().catch(() => \"\");\n//       throw new Error(text || `Request failed with ${res.status}`);\n//     }\n//   }\n//   return (await res.json()) as T;\n// }\n\n// export async function postForm<T = any>(\n//   path: string,\n//   data: Record<string, string>,\n//   tenantId?: string\n// ): Promise<T> {\n//   const body = new URLSearchParams(data);\n//   const res = await fetch(`${API_BASE}${path}`, {\n//     method: \"POST\",\n//     headers: buildHeaders(\n//       {\n//         \"Content-Type\": \"application/x-www-form-urlencoded\",\n//       },\n//       tenantId\n//     ),\n//     body,\n//   });\n//   if (!res.ok) {\n//     try {\n//       const data = await res.json();\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\n//       throw new Error(msg || `Request failed with ${res.status}`);\n//     } catch {\n//       const text = await res.text().catch(() => \"\");\n//       throw new Error(text || `Request failed with ${res.status}`);\n//     }\n//   }\n//   return (await res.json()) as T;\n// }\n\n// export async function postJSON<T = any>(\n//   path: string,\n//   body: any,\n//   tenantId?: string\n// ): Promise<T> {\n//   const res = await fetch(`${API_BASE}${path}`, {\n//     method: \"POST\",\n//     headers: buildHeaders({ \"Content-Type\": \"application/json\" }, tenantId),\n//     body: JSON.stringify(body),\n//   });\n//   if (!res.ok) {\n//     try {\n//       const data = await res.json();\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\n//       throw new Error(msg || `Request failed with ${res.status}`);\n//     } catch {\n//       const text = await res.text().catch(() => \"\");\n//       throw new Error(text || `Request failed with ${res.status}`);\n//     }\n//   }\n//   return (await res.json()) as T;\n// }\n\n// export async function postMultipart<T = any>(\n//   path: string,\n//   formData: FormData,\n//   tenantId?: string\n// ): Promise<T> {\n//   const res = await fetch(`${API_BASE}${path}`, {\n//     method: \"POST\",\n//     headers: buildHeaders(undefined, tenantId),\n//     body: formData,\n//   });\n//   if (!res.ok) {\n//     try {\n//       const data = await res.json();\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\n//       throw new Error(msg || `Request failed with ${res.status}`);\n//     } catch {\n//       let message = `Request failed with ${res.status}`;\n//       throw new Error(message);\n//     }\n//   }\n//   return (await res.json()) as T;\n// }\n\n// export function getAccessToken(): string | null {\n//   if (typeof window === \"undefined\") return null;\n//   return localStorage.getItem(\"access_token\");\n// }\n\n// function getRefreshToken(): string | null {\n//   if (typeof window === \"undefined\") return null;\n//   return localStorage.getItem(\"refresh_token\");\n// }\n\n// async function refreshTokens(): Promise<boolean> {\n//   const rt = getRefreshToken();\n//   if (!rt) return false;\n//   const url = `${API_BASE}/api/v1/auth/refresh?refresh_token=${encodeURIComponent(\n//     rt\n//   )}`;\n//   const res = await fetch(url, { method: \"POST\" });\n//   if (!res.ok) return false;\n//   try {\n//     const data = (await res.json()) as {\n//       access_token: string;\n//       refresh_token: string;\n//       token_type: string;\n//       expires_in: number;\n//     };\n//     if (typeof window !== \"undefined\") {\n//       localStorage.setItem(\"access_token\", data.access_token);\n//       localStorage.setItem(\"refresh_token\", data.refresh_token);\n//     }\n//     return true;\n//   } catch {\n//     return false;\n//   }\n// }\n\n// async function authFetch(\n//   path: string,\n//   init?: RequestInit,\n//   retry = true,\n//   tenantId?: string\n// ): Promise<Response> {\n//   const token = getAccessToken();\n//   const headers: HeadersInit = buildHeaders(\n//     {\n//       ...(init?.headers || {}),\n//       ...(token ? { Authorization: `Bearer ${token}` } : {}),\n//     },\n//     tenantId\n//   );\n//   const res = await fetch(`${API_BASE}${path}`, { ...(init || {}), headers });\n//   if (res.status === 401 && retry) {\n//     const ok = await refreshTokens();\n//     if (ok) {\n//       const newToken = getAccessToken();\n//       const retryHeaders: HeadersInit = buildHeaders(\n//         {\n//           ...(init?.headers || {}),\n//           ...(newToken ? { Authorization: `Bearer ${newToken}` } : {}),\n//         },\n//         tenantId\n//       );\n//       return fetch(`${API_BASE}${path}`, {\n//         ...(init || {}),\n//         headers: retryHeaders,\n//       });\n//     }\n//   }\n//   return res;\n// }\n\n// export async function getAuthJSON<T = any>(\n//   path: string,\n//   tenantId?: string\n// ): Promise<T> {\n//   const res = await authFetch(path, undefined, true, tenantId);\n//   if (!res.ok) {\n//     try {\n//       const data = await res.json();\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\n//       throw new Error(msg || `Request failed with ${res.status}`);\n//     } catch {\n//       const text = await res.text().catch(() => \"\");\n//       throw new Error(text || `Request failed with ${res.status}`);\n//     }\n//   }\n//   return (await res.json()) as T;\n// }\n\n// export async function postAuthJSON<T = any>(\n//   path: string,\n//   bodyData: any,\n//   tenantId?: string\n// ): Promise<T> {\n//   const res = await authFetch(\n//     path,\n//     {\n//       method: \"POST\",\n//       headers: { \"Content-Type\": \"application/json\" },\n//       body: JSON.stringify(bodyData),\n//     },\n//     true,\n//     tenantId\n//   );\n//   if (!res.ok) {\n//     try {\n//       const data = await res.json();\n//       const msg = data?.error || data?.detail || JSON.stringify(data);\n//       throw new Error(msg || `Request failed with ${res.status}`);\n//     } catch {\n//       const text = await res.text().catch(() => \"\");\n//       throw new Error(text || `Request failed with ${res.status}`);\n//     }\n//   }\n//   return (await res.json()) as T;\n// }\n\n// // Convenience wrappers for key flows\n// export const AuthAPI = {\n//   registerAffiliate: (body: any) => postJSON(\"/auth/register/affiliate\", body),\n//   registerPharmacy: (body: any) => postJSON(\"/auth/register/pharmacy\", body),\n//   registerVerify: (email: string, code: string) =>\n//     postForm(\"/auth/register/verify\", { email, code }),\n//   verifyRegistration: (email: string, code: string) =>\n//     postForm(\"/auth/register/verify\", { email, code }),\n//   login: (email: string, password: string, tenantId?: string) =>\n//     postForm(\"/auth/login\", { username: email, password }, tenantId),\n//   loginRequestCode: (email: string, password: string, tenantId?: string) =>\n//     postForm(\n//       \"/auth/login/request-code\",\n//       { username: email, password },\n//       tenantId\n//     ),\n//   loginVerify: (email: string, code: string, tenantId?: string) =>\n//     postJSON(\"/auth/login/verify\", { email, code }, tenantId),\n//   me: () => getAuthJSON(\"/auth/me\"),\n// };\n\n// export const AffiliateAPI = {\n//   getLinks: () => getAuthJSON(\"/affiliate/register-link\"),\n//   createLink: () => getAuthJSON(\"/affiliate/register-link?create_new=true\"),\n//   deactivate: (token: string) =>\n//     postAuthJSON(\n//       `/affiliate/links/${encodeURIComponent(token)}/deactivate`,\n//       {}\n//     ),\n//   rotate: (token: string) =>\n//     postAuthJSON(`/affiliate/links/${encodeURIComponent(token)}/rotate`, {}),\n//   dashboard: () => getAuthJSON(\"/affiliate/dashboard\"),\n//   payouts: (status?: string) =>\n//     getAuthJSON(\n//       `/affiliate/payouts${\n//         status ? `?status_filter=${encodeURIComponent(status)}` : \"\"\n//       }`\n//     ),\n//   requestPayout: (month?: string, percent = 5) =>\n//     postAuthJSON(\"/affiliate/payouts/request\", { month, percent }),\n//   updateProfile: (body: any) => postAuthJSON(\"/affiliate/profile\", body),\n// };\n\n// export const AdminAPI = {\n//   pharmacies: (page = 1, pageSize = 20, q?: string) =>\n//     getAuthJSON(\n//       `/admin/pharmacies?page=${page}&page_size=${pageSize}${\n//         q ? `&q=${encodeURIComponent(q)}` : \"\"\n//       }`\n//     ),\n//   affiliates: (page = 1, pageSize = 20, q?: string) =>\n//     getAuthJSON(\n//       `/admin/affiliates?page=${page}&page_size=${pageSize}${\n//         q ? `&q=${encodeURIComponent(q)}` : \"\"\n//       }`\n//     ),\n//   approvePharmacy: (\n//     tenantId: string,\n//     applicationId: number,\n//     body?: { issue_temp_password?: boolean; temp_password?: string }\n//   ) =>\n//     postAuthJSON(\n//       `/admin/pharmacies/${applicationId}/approve`,\n//       body || {},\n//       tenantId\n//     ),\n//   rejectPharmacy: (tenantId: string, applicationId: number) =>\n//     postAuthJSON(`/admin/pharmacies/${applicationId}/reject`, {}, tenantId),\n//   verifyPayment: (tenantId: string, code?: string | null) =>\n//     postAuthJSON(`/admin/payments/verify`, { code: code || null }, tenantId),\n//   rejectPayment: (tenantId: string, code?: string | null) =>\n//     postAuthJSON(`/admin/payments/reject`, { code: code || null }, tenantId),\n//   analyticsOverview: (days = 30) =>\n//     getAuthJSON(`/admin/analytics/overview?days=${days}`),\n//   downloadPharmacyLicense: async (applicationId: number) => {\n//     const res = await authFetch(\n//       `/admin/pharmacies/${applicationId}/license`,\n//       { method: \"GET\" },\n//       true\n//     );\n//     if (!res.ok) {\n//       const text = await res.text().catch(() => \"\");\n//       throw new Error(text || `HTTP ${res.status}`);\n//     }\n//     const blob = await res.blob();\n//     let filename = `license-${applicationId}`;\n//     const disposition = res.headers.get(\"Content-Disposition\") || \"\";\n//     const match = disposition.match(\n//       /filename\\*=UTF-8''([^;]+)|filename=\"?([^\";]+)\"?/i\n//     );\n//     const extracted = match?.[1] || match?.[2];\n//     if (extracted) {\n//       try {\n//         filename = decodeURIComponent(extracted);\n//       } catch {\n//         filename = extracted;\n//       }\n//     }\n//     const url = window.URL.createObjectURL(blob);\n//     const link = document.createElement(\"a\");\n//     link.href = url;\n//     link.download = filename;\n//     document.body.appendChild(link);\n//     link.click();\n//     document.body.removeChild(link);\n//     window.URL.revokeObjectURL(url);\n//   },\n//   approveAffiliate: (userId: number) =>\n//     postAuthJSON(`/admin/affiliates/${userId}/approve`, {}),\n//   rejectAffiliate: (userId: number) =>\n//     postAuthJSON(`/admin/affiliates/${userId}/reject`, {}),\n//   listAffiliatePayouts: (status?: string) =>\n//     getAuthJSON(\n//       `/admin/affiliate/payouts${\n//         status ? `?status=${encodeURIComponent(status)}` : \"\"\n//       }`\n//     ),\n//   markPayoutPaid: (payoutId: number) =>\n//     postAuthJSON(`/admin/affiliate/payouts/${payoutId}/mark-paid`, {}),\n//   approvePayout: (payoutId: number) =>\n//     postAuthJSON(`/admin/affiliate/payouts/${payoutId}/approve`, {}),\n//   usage: (days = 30) => getAuthJSON(`/admin/usage?days=${days}`),\n//   audit: (params?: { tenant_id?: string; action?: string; limit?: number }) =>\n//     getAuthJSON(\n//       `/admin/audit${(() => {\n//         const qs = new URLSearchParams();\n//         if (params?.tenant_id) qs.set(\"tenant_id\", params.tenant_id);\n//         if (params?.action) qs.set(\"action\", params.action);\n//         if (params?.limit) qs.set(\"limit\", String(params.limit));\n//         const s = qs.toString();\n//         return s ? `?${s}` : \"\";\n//       })()}`\n//     ),\n// };\n\n// export const StaffAPI = {\n//   createCashier: (tenantId: string, body: any) =>\n//     postAuthJSON(\"/staff\", body, tenantId),\n//   list: (tenantId: string) => getAuthJSON(\"/staff\", tenantId),\n//   update: (tenantId: string, userId: number, body: { is_active?: boolean }) =>\n//     authFetch(\n//       `/staff/${userId}`,\n//       {\n//         method: \"PATCH\",\n//         headers: { \"Content-Type\": \"application/json\" },\n//         body: JSON.stringify(body),\n//       },\n//       true,\n//       tenantId\n//     ).then(async (res) => {\n//       if (!res.ok) {\n//         const t = await res.text();\n//         throw new Error(t || `HTTP ${res.status}`);\n//       }\n//       return res.json();\n//     }),\n//   remove: (tenantId: string, userId: number) =>\n//     authFetch(`/staff/${userId}`, { method: \"DELETE\" }, true, tenantId).then(\n//       async (res) => {\n//         if (!res.ok) {\n//           const t = await res.text();\n//           throw new Error(t || `HTTP ${res.status}`);\n//         }\n//         return res.json();\n//       }\n//     ),\n// };\n\n// export const BillingAPI = {\n//   submitPaymentCode: (tenantId: string, code: string) =>\n//     postAuthJSON(\"/billing/payment-code\", { code }, tenantId),\n// };\n\n// export const UploadAPI = {\n//   uploadKyc: async (\n//     file: File\n//   ): Promise<{ path: string; size: number; filename: string }> => {\n//     const fd = new FormData();\n//     fd.append(\"file\", file);\n//     return await postMultipart(`/uploads/kyc`, fd);\n//   },\n// };\n\n// export const KYCAPI = {\n//   status: (tenantId: string) => getAuthJSON(`/owner/kyc/status`, tenantId),\n//   update: (tenantId: string, body: any) =>\n//     putAuthJSON(`/owner/kyc/status`, body, tenantId),\n// };\n\n// export const PharmaciesAPI = {\n//   list: (page = 1, pageSize = 20, q?: string) =>\n//     getAuthJSON(\n//       `/pharmacies?page=${page}&page_size=${pageSize}${\n//         q ? `&q=${encodeURIComponent(q)}` : \"\"\n//       }`\n//     ),\n//   get: (id: number) => getAuthJSON(`/pharmacies/${id}`),\n//   update: (id: number, body: { name?: string; address?: string }) =>\n//     authFetch(`/pharmacies/${id}`, {\n//       method: \"PATCH\",\n//       headers: { \"Content-Type\": \"application/json\" },\n//       body: JSON.stringify(body),\n//     }).then(async (res) => {\n//       if (!res.ok) {\n//         const t = await res.text();\n//         throw new Error(t || `HTTP ${res.status}`);\n//       }\n//       return res.json();\n//     }),\n// };\n\n// export const ChatAPI = {\n//   listThreads: (tenantId: string) => getAuthJSON(`/chat/threads`, tenantId),\n//   createThread: (tenantId: string, title: string) =>\n//     postAuthJSON(`/chat/threads`, { title }, tenantId),\n//   listMessages: (tenantId: string, threadId: number) =>\n//     getAuthJSON(`/chat/threads/${threadId}/messages`, tenantId),\n//   sendMessage: (tenantId: string, threadId: number, prompt: string) =>\n//     postAuthJSON(`/chat/threads/${threadId}/messages`, { prompt }, tenantId),\n//   usage: (tenantId: string, days = 30) =>\n//     getAuthJSON(`/chat/usage?days=${days}`, tenantId),\n//   sendStream: async (\n//     tenantId: string,\n//     threadId: number,\n//     prompt: string,\n//     onEvent: (evt: { event: string; data?: any }) => void\n//   ): Promise<void> => {\n//     const res = await authFetch(\n//       `/chat/threads/${threadId}/messages/stream`,\n//       {\n//         method: \"POST\",\n//         headers: { \"Content-Type\": \"application/json\" },\n//         body: JSON.stringify({ prompt }),\n//       },\n//       true,\n//       tenantId\n//     );\n//     if (!res.ok || !res.body) {\n//       const t = await res.text().catch(() => \"\");\n//       throw new Error(t || `HTTP ${res.status}`);\n//     }\n//     const reader = res.body.getReader();\n//     const decoder = new TextDecoder();\n//     let buf = \"\";\n//     while (true) {\n//       const { done, value } = await reader.read();\n//       if (done) break;\n//       buf += decoder.decode(value, { stream: true });\n//       let idx;\n//       while ((idx = buf.indexOf(\"\\n\\n\")) !== -1) {\n//         const chunk = buf.slice(0, idx).trim();\n//         buf = buf.slice(idx + 2);\n//         if (chunk.startsWith(\"data:\")) {\n//           try {\n//             const jsonStr = chunk.slice(5).trim();\n//             const obj = JSON.parse(jsonStr);\n//             onEvent(obj);\n//           } catch {}\n//         }\n//       }\n//     }\n//   },\n// };\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1222, "column": 0}, "map": {"version":3,"sources":["file:///home/habtamusemagn/Desktop/last/gugu-gaga-/front_end/app/%28dashboard%29/dashboard/affiliate/_hooks/use-affiliate-dashboard.ts"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { AffiliateAPI } from \"@/utils/api\";\nimport { useToast } from \"@/components/ui/toast\";\n\nexport type AffiliateStats = {\n  currentCommission: number;\n  pendingPayout: number;\n  paidPayout: number;\n  referrals: number;\n};\n\nexport type AffiliateLink = {\n  token: string;\n  url: string;\n  active: boolean;\n  createdAt?: string | null;\n};\n\nexport type AffiliateDashboardSummary = {\n  percent?: number;\n  amount?: number;\n  tenants?: string[];\n  [key: string]: unknown;\n};\n\nexport type AffiliatePayout = {\n  id: number;\n  month: string;\n  percent: number;\n  amount: number;\n  status: string;\n};\n\ntype DashboardState = {\n  loading: boolean;\n  error: string | null;\n  stats: AffiliateStats;\n  dash: AffiliateDashboardSummary | null;\n  links: AffiliateLink[];\n  payouts: AffiliatePayout[];\n  canCreateMore: boolean;\n  monthLabel: string;\n  payoutMonth: string;\n  payoutPercent: number;\n  requestingPayout: boolean;\n  setPayoutMonth: (value: string) => void;\n  setPayoutPercent: (value: number) => void;\n  actions: {\n    refresh: () => Promise<void>;\n    createLink: () => Promise<void>;\n    deactivate: (token: string) => Promise<void>;\n    rotate: (token: string) => Promise<void>;\n    copyLink: (url: string) => Promise<void>;\n    requestPayout: () => Promise<void>;\n  };\n};\n\nconst DEFAULT_STATS: AffiliateStats = {\n  currentCommission: 0,\n  pendingPayout: 0,\n  paidPayout: 0,\n  referrals: 0,\n};\n\nconst DEFAULT_MONTH = new Date().toISOString().slice(0, 7);\nconst MAX_ACTIVE_LINKS = 2;\n\nfunction toNumber(value: unknown): number {\n  if (typeof value === \"number\" && !Number.isNaN(value)) return value;\n  if (typeof value === \"string\") {\n    const parsed = Number.parseFloat(value);\n    return Number.isFinite(parsed) ? parsed : 0;\n  }\n  return 0;\n}\n\nfunction extractStats(data: any): AffiliateStats {\n  const source = data?.stats ?? data ?? {};\n  const payouts = source?.payouts ?? {};\n  return {\n    currentCommission:\n      toNumber(\n        source.currentCommission ??\n          source.current_commission ??\n          source.current ??\n          source.amount ??\n          source.commission ??\n          0\n      ),\n    pendingPayout: toNumber(\n      source.pendingPayout ??\n        source.pending_payout ??\n        source.pending ??\n        payouts.pending_total ??\n        payouts.pending ??\n        0\n    ),\n    paidPayout: toNumber(\n      source.paidPayout ??\n        source.paid_payout ??\n        source.paid ??\n        payouts.paid_total ??\n        payouts.paid ??\n        0\n    ),\n    referrals: toNumber(\n      source.referrals ??\n        source.total_referrals ??\n        source.affiliates ??\n        source.referrals_count ??\n        source.activated_referrals ??\n        0\n    ),\n  };\n}\n\nfunction normalizeLinks(payload: any): AffiliateLink[] {\n  const list = Array.isArray(payload)\n    ? payload\n    : Array.isArray(payload?.links)\n    ? payload.links\n    : [];\n\n  return list\n    .map((item: any) => ({\n      token: String(item?.token ?? item?.code ?? \"\"),\n      url: String(item?.url ?? item?.link ?? item?.register_url ?? \"\"),\n      active: Boolean(item?.active ?? item?.is_active ?? item?.status === \"active\"),\n      createdAt: item?.created_at ?? item?.createdAt ?? null,\n    }))\n    .filter((item: AffiliateLink) => item.token && item.url);\n}\n\nfunction extractMonthLabel(data: any): string {\n  if (typeof data?.year === \"number\" && typeof data?.month === \"number\") {\n    try {\n      return new Intl.DateTimeFormat(\"en-US\", { month: \"long\", year: \"numeric\" }).format(\n        new Date(data.year, data.month - 1)\n      );\n    } catch {\n      return `${data.year}-${String(data.month).padStart(2, \"0\")}`;\n    }\n  }\n  const month =\n    data?.monthLabel ??\n    data?.month_label ??\n    data?.current_month_label ??\n    data?.stats?.month_label ??\n    null;\n  if (month) return String(month);\n  return new Intl.DateTimeFormat(\"en-US\", { month: \"long\", year: \"numeric\" }).format(new Date());\n}\n\nfunction extractPercent(data: any): number {\n  return toNumber(\n    data?.percent ??\n      data?.commission_percent ??\n      data?.stats?.percent ??\n      data?.current_percent ??\n      5\n  );\n}\n\nfunction normalizePayout(item: any): AffiliatePayout {\n  return {\n    id: Number(item?.id ?? 0),\n    month: item?.month ? String(item.month) : \"\",\n    percent: toNumber(item?.percent ?? 0),\n    amount: toNumber(item?.amount ?? 0),\n    status: String(item?.status ?? \"pending\"),\n  };\n}\n\nfunction getErrorMessage(error: unknown): string {\n  if (typeof error === \"string\") return error;\n  if (error instanceof Error) return error.message;\n  try {\n    return JSON.stringify(error);\n  } catch {\n    return \"Unexpected error\";\n  }\n}\n\nexport function useAffiliateDashboard(): DashboardState {\n  const { show } = useToast();\n\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [stats, setStats] = useState<AffiliateStats>(DEFAULT_STATS);\n  const [dash, setDash] = useState<AffiliateDashboardSummary | null>(null);\n  const [links, setLinks] = useState<AffiliateLink[]>([]);\n  const [payouts, setPayouts] = useState<AffiliatePayout[]>([]);\n  const [canCreateMore, setCanCreateMore] = useState<boolean>(true);\n  const [monthLabel, setMonthLabel] = useState<string>(extractMonthLabel(null));\n  const [payoutMonth, setPayoutMonthState] = useState<string>(DEFAULT_MONTH);\n  const [payoutPercent, setPayoutPercentState] = useState<number>(5);\n  const [requestingPayout, setRequestingPayout] = useState<boolean>(false);\n\n  const hasInitialized = useRef(false);\n\n  const refreshLinks = useCallback(async () => {\n    const response = await AffiliateAPI.getLinks();\n    const normalized = normalizeLinks(response);\n    setLinks(normalized);\n    const activeCount = normalized.filter((link) => link.active).length;\n    setCanCreateMore(activeCount < MAX_ACTIVE_LINKS);\n  }, []);\n\n  const refreshDashboard = useCallback(async () => {\n    const response = await AffiliateAPI.dashboard();\n    setStats(extractStats(response));\n    const snapshot =\n      response?.dash ??\n      response?.current_month ??\n      response?.summary ??\n      response?.stats?.current_month ??\n      response ??\n      null;\n    setDash(snapshot ?? null);\n    setMonthLabel(extractMonthLabel(response));\n    const percent = extractPercent(response);\n    const nextMonth =\n      response?.next_payout_month ??\n      response?.payout_month ??\n      (typeof response?.year === \"number\" && typeof response?.month === \"number\"\n        ? `${response.year}-${String(response.month).padStart(2, \"0\")}`\n        : null);\n\n    if (!hasInitialized.current) {\n      setPayoutPercentState(percent > 0 ? percent : 5);\n      setPayoutMonthState(typeof nextMonth === \"string\" && nextMonth ? nextMonth : DEFAULT_MONTH);\n      hasInitialized.current = true;\n    }\n  }, []);\n\n  const refreshPayouts = useCallback(async () => {\n    const response = await AffiliateAPI.payouts();\n    if (Array.isArray(response)) {\n      setPayouts(response.map(normalizePayout));\n    } else {\n      setPayouts([]);\n    }\n  }, []);\n\n  const refresh = useCallback(async () => {\n    try {\n      setLoading(true);\n      await Promise.all([refreshDashboard(), refreshLinks(), refreshPayouts()]);\n      setError(null);\n    } catch (err) {\n      const message = getErrorMessage(err);\n      console.error(\"[useAffiliateDashboard] refresh failed\", err);\n      setError(message);\n    } finally {\n      setLoading(false);\n    }\n  }, [refreshDashboard, refreshLinks, refreshPayouts]);\n\n  useEffect(() => {\n    refresh();\n  }, [refresh]);\n\n  const handleCreateLink = useCallback(async () => {\n    try {\n      await AffiliateAPI.createLink();\n      await refreshLinks();\n      show({ variant: \"success\", title: \"Link created\", description: \"A new referral link is now active.\" });\n    } catch (err) {\n      const message = getErrorMessage(err);\n      show({ variant: \"destructive\", title: \"Failed to create link\", description: message });\n    }\n  }, [refreshLinks, show]);\n\n  const handleRotateLink = useCallback(\n    async (token: string) => {\n      try {\n        await AffiliateAPI.rotate(token);\n        await refreshLinks();\n        show({ variant: \"success\", title: \"Link rotated\", description: \"The referral link has been refreshed.\" });\n      } catch (err) {\n        const message = getErrorMessage(err);\n        show({ variant: \"destructive\", title: \"Failed to rotate\", description: message });\n      }\n    },\n    [refreshLinks, show]\n  );\n\n  const handleDeactivateLink = useCallback(\n    async (token: string) => {\n      try {\n        await AffiliateAPI.deactivate(token);\n        await refreshLinks();\n        show({ variant: \"success\", title: \"Link deactivated\", description: \"The referral link is now inactive.\" });\n      } catch (err) {\n        const message = getErrorMessage(err);\n        show({ variant: \"destructive\", title: \"Failed to deactivate\", description: message });\n      }\n    },\n    [refreshLinks, show]\n  );\n\n  const handleCopyLink = useCallback(\n    async (url: string) => {\n      try {\n        if (typeof navigator !== \"undefined\" && navigator.clipboard) {\n          await navigator.clipboard.writeText(url);\n          show({ variant: \"success\", title: \"Copied\", description: \"Referral link copied to clipboard.\" });\n        } else {\n          throw new Error(\"Clipboard API unavailable\");\n        }\n      } catch (err) {\n        const message = getErrorMessage(err);\n        show({ variant: \"destructive\", title: \"Copy failed\", description: message });\n      }\n    },\n    [show]\n  );\n\n  const handleRequestPayout = useCallback(async () => {\n    setRequestingPayout(true);\n    try {\n      await AffiliateAPI.requestPayout(payoutMonth || undefined, payoutPercent || 5);\n      show({ variant: \"success\", title: \"Payout requested\", description: \"Finance will review your request shortly.\" });\n      await Promise.all([refreshDashboard(), refreshPayouts()]);\n    } catch (err) {\n      const message = getErrorMessage(err);\n      show({ variant: \"destructive\", title: \"Request failed\", description: message });\n    } finally {\n      setRequestingPayout(false);\n    }\n  }, [payoutMonth, payoutPercent, refreshDashboard, refreshPayouts, show]);\n\n  const actions = useMemo(\n    () => ({\n      refresh,\n      createLink: handleCreateLink,\n      deactivate: handleDeactivateLink,\n      rotate: handleRotateLink,\n      copyLink: handleCopyLink,\n      requestPayout: handleRequestPayout,\n    }),\n    [refresh, handleCreateLink, handleDeactivateLink, handleRotateLink, handleCopyLink, handleRequestPayout]\n  );\n\n  return {\n    loading,\n    error,\n    stats,\n    dash,\n    links,\n    payouts,\n    canCreateMore,\n    monthLabel,\n    payoutMonth,\n    payoutPercent,\n    requestingPayout,\n    setPayoutMonth: setPayoutMonthState,\n    setPayoutPercent: setPayoutPercentState,\n    actions,\n  };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1576, "column": 0}, "map": {"version":3,"sources":["file:///home/habtamusemagn/Desktop/last/gugu-gaga-/front_end/app/%28dashboard%29/dashboard/affiliate/_context/affiliate-dashboard-context.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext } from \"react\";\nimport {\n  useAffiliateDashboard,\n  type AffiliateLink,\n  type AffiliateStats,\n  type AffiliateDashboardSummary,\n} from \"../_hooks/use-affiliate-dashboard\";\n\nconst AffiliateDashboardContext = createContext<ReturnType<typeof useAffiliateDashboard> | null>(null);\n\nexport function AffiliateDashboardProvider({ children }: { children: React.ReactNode }) {\n  const value = useAffiliateDashboard();\n  return <AffiliateDashboardContext.Provider value={value}>{children}</AffiliateDashboardContext.Provider>;\n}\n\nexport function useAffiliateDashboardContext() {\n  const context = useContext(AffiliateDashboardContext);\n  if (!context) {\n    throw new Error(\"useAffiliateDashboardContext must be used within AffiliateDashboardProvider\");\n  }\n  return context;\n}\n\nexport type { AffiliateStats, AffiliateLink, AffiliateDashboardSummary };\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;AAHA;;;AAUA,MAAM,0CAA4B,IAAA,oVAAa,EAAkD;AAE1F,SAAS,2BAA2B,KAA2C;QAA3C,EAAE,QAAQ,EAAiC,GAA3C;;IACzC,MAAM,QAAQ,IAAA,qNAAqB;IACnC,qBAAO,mWAAC,0BAA0B,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC5D;GAHgB;;QACA,qNAAqB;;;KADrB;AAKT,SAAS;;IACd,MAAM,UAAU,IAAA,iVAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB","debugId":null}},
    {"offset": {"line": 1628, "column": 0}, "map": {"version":3,"sources":["file:///home/habtamusemagn/Desktop/last/gugu-gaga-/front_end/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"rounded-2xl border border-white/20 bg-white/70 p-6 shadow-[0_20px_70px_-40px_rgba(16,185,129,0.65)] backdrop-blur-md\", className)}\n    {...props}\n  />\n));\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"mb-3 flex items-center justify-between gap-4\", className)} {...props} />\n));\nCardHeader.displayName = \"CardHeader\";\n\nconst CardTitle = React.forwardRef<\n  HTMLHeadingElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h4\n    ref={ref}\n    className={cn(\"text-lg font-semibold leading-tight text-emerald-900\", className)}\n    {...props}\n  />\n));\nCardTitle.displayName = \"CardTitle\";\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"text-sm leading-relaxed text-slate-700\", className)} {...props} />\n));\nCardContent.displayName = \"CardContent\";\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"mt-4 flex flex-wrap items-center justify-between gap-3\", className)}\n    {...props}\n  />\n));\nCardFooter.displayName = \"CardFooter\";\n\nexport { Card, CardHeader, CardTitle, CardContent, CardFooter };\n"],"names":[],"mappings":";;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,iVAAgB,MAG3B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,mWAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,wHAAwH;QACrI,GAAG,KAAK;;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,iVAAgB,OAGjC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,mWAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,gDAAgD;QAAa,GAAG,KAAK;;;;;;;;AAEpG,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,iVAAgB,OAGhC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,mWAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,iVAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,mWAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,0CAA0C;QAAa,GAAG,KAAK;;;;;;;;AAE9F,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,iVAAgB,OAGjC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,mWAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,0DAA0D;QACvE,GAAG,KAAK;;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 1735, "column": 0}, "map": {"version":3,"sources":["file:///home/habtamusemagn/Desktop/last/gugu-gaga-/front_end/app/%28dashboard%29/dashboard/affiliate/_components/cards.tsx"],"sourcesContent":["\"use client\";\n\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { cn } from \"@/lib/utils\";\nimport React from \"react\";\n\nexport function StatCard({\n  title,\n  value,\n  description,\n  icon,\n  className,\n}: {\n  title: string;\n  value: React.ReactNode;\n  description?: string;\n  icon?: React.ReactNode;\n  className?: string;\n}) {\n  return (\n    <Card\n      className={cn(\n        \"border border-white/10 bg-gradient-to-br from-emerald-500/10 via-slate-950/70 to-blue-600/10 text-white shadow-[0_18px_55px_-35px_rgba(16,185,129,0.55)] transition hover:-translate-y-1 hover:shadow-[0_28px_85px_-40px_rgba(56,189,248,0.55)] backdrop-blur-xl\",\n        className\n      )}\n    >\n      <CardContent className=\"flex items-start justify-between gap-3 p-5\">\n        <div>\n          <p className=\"text-[11px] font-semibold uppercase tracking-[0.35em] text-emerald-200\">{title}</p>\n          <p className=\"mt-3 text-2xl font-semibold text-white\">{value}</p>\n          {description && <p className=\"mt-3 text-xs text-emerald-100/70\">{description}</p>}\n        </div>\n        {icon && (\n          <span className=\"inline-flex h-10 w-10 items-center justify-center rounded-xl bg-white/15 text-emerald-200 shadow-inner shadow-emerald-500/10\">\n            {icon}\n          </span>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\nexport function MiniStat({ label, value }: { label: string; value: React.ReactNode }) {\n  return (\n    <Card className=\"border border-white/10 bg-gradient-to-br from-slate-900/70 via-emerald-600/10 to-blue-600/10 text-white shadow-[0_12px_45px_-30px_rgba(59,130,246,0.45)]\">\n      <CardContent className=\"space-y-2 p-4\">\n        <p className=\"text-[10px] font-semibold uppercase tracking-[0.32em] text-emerald-200/80\">{label}</p>\n        <div className=\"text-xl font-semibold leading-tight text-white break-words\">{value}</div>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport function HighlightPill({\n  label,\n  value,\n  tone = \"default\",\n}: {\n  label: string;\n  value: React.ReactNode;\n  tone?: \"default\" | \"warning\";\n}) {\n  const classes =\n    tone === \"warning\"\n      ? \"border-amber-300/40 bg-amber-500/10 text-amber-100\"\n      : \"border-emerald-300/30 bg-emerald-500/10 text-emerald-100\";\n  return (\n    <div className={`rounded-2xl border px-4 py-3 shadow-[0_14px_40px_-30px_rgba(16,185,129,0.7)] ${classes}`}>\n      <p className=\"text-[10px] uppercase tracking-[0.35em] text-white/70\">{label}</p>\n      <p className=\"mt-2 text-lg font-semibold text-white\">{value}</p>\n    </div>\n  );\n}\n\nexport function SectionCard({\n  title,\n  description,\n  children,\n}: {\n  title: string;\n  description?: string;\n  children: React.ReactNode;\n}) {\n  return (\n    <Card className=\"border border-white/10 bg-gradient-to-br from-slate-950/80 via-emerald-700/15 to-blue-800/10 text-white shadow-[0_20px_60px_-35px_rgba(16,185,129,0.6)] backdrop-blur-xl\">\n      <CardHeader className=\"mb-0 space-y-1 pb-0\">\n        <CardTitle className=\"text-lg text-white\">{title}</CardTitle>\n        {description && <p className=\"text-xs text-emerald-100/70\">{description}</p>}\n      </CardHeader>\n      <CardContent className=\"pt-5\">{children}</CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AAHA;;;;AAMO,SAAS,SAAS,KAYxB;QAZwB,EACvB,KAAK,EACL,KAAK,EACL,WAAW,EACX,IAAI,EACJ,SAAS,EAOV,GAZwB;IAavB,qBACE,mWAAC,oIAAI;QACH,WAAW,IAAA,qHAAE,EACX,oQACA;kBAGF,cAAA,mWAAC,2IAAW;YAAC,WAAU;;8BACrB,mWAAC;;sCACC,mWAAC;4BAAE,WAAU;sCAA0E;;;;;;sCACvF,mWAAC;4BAAE,WAAU;sCAA0C;;;;;;wBACtD,6BAAe,mWAAC;4BAAE,WAAU;sCAAoC;;;;;;;;;;;;gBAElE,sBACC,mWAAC;oBAAK,WAAU;8BACb;;;;;;;;;;;;;;;;;AAMb;KAlCgB;AAoCT,SAAS,SAAS,KAA2D;QAA3D,EAAE,KAAK,EAAE,KAAK,EAA6C,GAA3D;IACvB,qBACE,mWAAC,oIAAI;QAAC,WAAU;kBACd,cAAA,mWAAC,2IAAW;YAAC,WAAU;;8BACrB,mWAAC;oBAAE,WAAU;8BAA6E;;;;;;8BAC1F,mWAAC;oBAAI,WAAU;8BAA8D;;;;;;;;;;;;;;;;;AAIrF;MATgB;AAWT,SAAS,cAAc,KAQ7B;QAR6B,EAC5B,KAAK,EACL,KAAK,EACL,OAAO,SAAS,EAKjB,GAR6B;IAS5B,MAAM,UACJ,SAAS,YACL,uDACA;IACN,qBACE,mWAAC;QAAI,WAAW,AAAC,gFAAuF,OAAR;;0BAC9F,mWAAC;gBAAE,WAAU;0BAAyD;;;;;;0BACtE,mWAAC;gBAAE,WAAU;0BAAyC;;;;;;;;;;;;AAG5D;MAnBgB;AAqBT,SAAS,YAAY,KAQ3B;QAR2B,EAC1B,KAAK,EACL,WAAW,EACX,QAAQ,EAKT,GAR2B;IAS1B,qBACE,mWAAC,oIAAI;QAAC,WAAU;;0BACd,mWAAC,0IAAU;gBAAC,WAAU;;kCACpB,mWAAC,yIAAS;wBAAC,WAAU;kCAAsB;;;;;;oBAC1C,6BAAe,mWAAC;wBAAE,WAAU;kCAA+B;;;;;;;;;;;;0BAE9D,mWAAC,2IAAW;gBAAC,WAAU;0BAAQ;;;;;;;;;;;;AAGrC;MAlBgB","debugId":null}},
    {"offset": {"line": 1936, "column": 0}, "map": {"version":3,"sources":["file:///home/habtamusemagn/Desktop/last/gugu-gaga-/front_end/app/%28dashboard%29/dashboard/affiliate/_components/sidebar.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { HighlightPill } from \"./cards\";\nimport { cn } from \"@/lib/utils\";\nimport { DollarSign, Sparkles, Users, Wallet, ChevronRight } from \"lucide-react\";\nimport type { AffiliateStats } from \"../_hooks/use-affiliate-dashboard\";\n\nconst navItems = [\n  {\n    label: \"Overview\",\n    href: \"/dashboard/affiliate\",\n    description: \"Snapshot of current performance and actions\",\n  },\n  {\n    label: \"Payouts\",\n    href: \"/dashboard/affiliate/payouts\",\n    description: \"Track requests and statuses\",\n  },\n  {\n    label: \"Commissions\",\n    href: \"/dashboard/affiliate/commissions\",\n    description: \"Review earned commissions\",\n  },\n  {\n    label: \"Affiliates\",\n    href: \"/dashboard/affiliate/affiliates\",\n    description: \"Manage referred pharmacies\",\n  },\n];\n\nexport function AffiliateSidebar({\n  stats,\n  monthLabel,\n  payoutPercent,\n}: {\n  stats: AffiliateStats;\n  monthLabel: string;\n  payoutPercent: number;\n}) {\n  const pathname = usePathname();\n\n  return (\n    <div className=\"space-y-6 lg:sticky lg:top-8 lg:max-h-[calc(100vh-4rem)] lg:overflow-y-auto\">\n      <Card className=\"relative overflow-hidden border-none bg-gradient-to-br from-emerald-500 via-emerald-600 to-teal-600 text-white shadow-xl\">\n        <div className=\"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.25),transparent_55%)]\" />\n        <CardHeader className=\"relative space-y-4 pb-0\">\n          <div className=\"inline-flex items-center gap-2 rounded-full bg-white/15 px-4 py-1.5 text-[10px] font-semibold uppercase tracking-[0.38em] text-white/80\">\n            <span className=\"flex h-6 w-6 items-center justify-center rounded-full bg-white/20\">\n              <Sparkles className=\"h-3.5 w-3.5\" />\n            </span>\n            <span>Partner hub</span>\n          </div>\n          <CardTitle className=\"text-2xl font-semibold leading-tight\">Your partner performance</CardTitle>\n          <p className=\"text-sm text-emerald-50/85\">\n            Track payouts and commissions without losing momentum. {monthLabel} is on pace with a {payoutPercent}% rate.\n          </p>\n        </CardHeader>\n        <CardContent className=\"relative space-y-4\">\n          <div className=\"grid gap-3 sm:grid-cols-2\">\n            <MetricTile label=\"Referrals\" value={stats.referrals.toLocaleString()} icon={<Users className=\"h-4 w-4\" />} />\n            <MetricTile label=\"Paid to date\" value={formatCurrency(stats.paidPayout)} icon={<DollarSign className=\"h-4 w-4\" />} />\n            <MetricTile label=\"This month\" value={formatCurrency(stats.currentCommission)} icon={<Wallet className=\"h-4 w-4\" />} />\n            <MetricTile label=\"Pending payout\" value={formatCurrency(stats.pendingPayout)} icon={<Sparkles className=\"h-4 w-4\" />} />\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card className=\"border border-emerald-100/60 bg-emerald-50/60 shadow-md backdrop-blur\">\n        <CardHeader className=\"space-y-2 pb-0\">\n          <CardTitle className=\"text-base font-semibold text-emerald-900\">Performance highlights</CardTitle>\n          <p className=\"text-xs text-emerald-800/80\">Stick to the numbers that reflect your pipeline health.</p>\n        </CardHeader>\n        <CardContent className=\"space-y-2 pt-5\">\n          <HighlightPill label=\"Active pharmacies\" value={stats.referrals.toLocaleString()} />\n          <HighlightPill label=\"Current commission\" value={formatCurrency(stats.currentCommission)} />\n          <HighlightPill label=\"Pending payout\" value={formatCurrency(stats.pendingPayout)} tone=\"warning\" />\n        </CardContent>\n      </Card>\n\n      <Card className=\"border border-emerald-100/60 bg-white/95 shadow-md backdrop-blur\">\n        <CardHeader className=\"space-y-2 pb-0\">\n          <CardTitle className=\"text-base font-semibold text-emerald-900\">Quick navigation</CardTitle>\n          <p className=\"text-xs text-emerald-700/80\">Jump to detail views for payouts, commissions, and referrals.</p>\n        </CardHeader>\n        <CardContent className=\"space-y-3 pt-4\">\n          <nav className=\"flex flex-col gap-3 text-sm\">\n            {navItems.map((item) => {\n              const active = pathname === item.href || pathname.startsWith(`${item.href}/`);\n              return (\n                <Link\n                  key={item.href}\n                  href={item.href}\n                  className={cn(\n                    \"group flex items-center justify-between rounded-2xl border px-4 py-3 text-left transition\",\n                    active\n                      ? \"border-transparent bg-gradient-to-r from-emerald-500/20 to-teal-500/20 text-emerald-900 shadow-sm\"\n                      : \"border-emerald-100/40 bg-white/80 text-emerald-800 hover:border-emerald-200 hover:bg-emerald-50/80\"\n                  )}\n                >\n                  <span>\n                    <span className=\"block font-semibold tracking-tight\">{item.label}</span>\n                    <span className=\"text-xs text-emerald-600/70\">{item.description}</span>\n                  </span>\n                  <ChevronRight className=\"h-4 w-4 text-emerald-500 transition-transform group-hover:translate-x-1\" />\n                </Link>\n              );\n            })}\n          </nav>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\nfunction MetricTile({\n  label,\n  value,\n  icon,\n}: {\n  label: string;\n  value: React.ReactNode;\n  icon: React.ReactNode;\n}) {\n  return (\n    <div className=\"flex items-center justify-between rounded-2xl bg-white/12 p-3 ring-1 ring-inset ring-white/15 backdrop-blur-sm\">\n      <div>\n        <p className=\"text-[11px] font-semibold uppercase tracking-widest text-white/65\">{label}</p>\n        <p className=\"mt-2 text-lg font-semibold text-white\">{value}</p>\n      </div>\n      <span className=\"inline-flex h-9 w-9 items-center justify-center rounded-xl bg-white/20 text-white\">{icon}</span>\n    </div>\n  );\n}\n\nfunction formatCurrency(amount: number) {\n  return new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency: \"USD\",\n  }).format(amount || 0);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2376, "column": 0}, "map": {"version":3,"sources":["file:///home/habtamusemagn/Desktop/last/gugu-gaga-/front_end/app/%28dashboard%29/dashboard/affiliate/_components/layout-shell.tsx"],"sourcesContent":["\"use client\";\n\nimport { usePathname } from \"next/navigation\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { AffiliateSidebar } from \"./sidebar\";\nimport { useAffiliateDashboardContext } from \"../_context/affiliate-dashboard-context\";\n\nexport function AffiliateLayoutShell({ children }: { children: React.ReactNode }) {\n  const { loading, error, stats, payoutPercent, monthLabel } = useAffiliateDashboardContext();\n  const pathname = usePathname();\n  const isOverview = pathname === \"/dashboard/affiliate\";\n\n  if (loading) {\n    return (\n      <div className=\"grid gap-6 lg:grid-cols-[minmax(0,260px),minmax(0,1fr)]\">\n        <div className=\"space-y-4\">\n          <Skeleton className=\"h-48 rounded-3xl\" />\n          <Skeleton className=\"h-56 rounded-3xl\" />\n          <Skeleton className=\"h-56 rounded-3xl\" />\n        </div>\n        <div className=\"space-y-4\">\n          <Skeleton className=\"h-48 rounded-3xl\" />\n          <Skeleton className=\"h-32 rounded-3xl\" />\n          <Skeleton className=\"h-96 rounded-3xl\" />\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return <div className=\"text-sm text-red-600\">{error}</div>;\n  }\n\n  return (\n    isOverview ? (\n      <div className=\"w-full\">\n        {children}\n      </div>\n    ) : (\n      <div className=\"relative mx-auto grid max-w-6xl gap-8 lg:grid-cols-[minmax(0,280px),minmax(0,1fr)]\">\n        <AffiliateSidebar stats={stats} monthLabel={monthLabel} payoutPercent={payoutPercent} />\n        <div className=\"space-y-8 pb-20\">{children}</div>\n      </div>\n    )\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOO,SAAS,qBAAqB,KAA2C;QAA3C,EAAE,QAAQ,EAAiC,GAA3C;;IACnC,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,aAAa,EAAE,UAAU,EAAE,GAAG,IAAA,mOAA4B;IACzF,MAAM,WAAW,IAAA,0TAAW;IAC5B,MAAM,aAAa,aAAa;IAEhC,IAAI,SAAS;QACX,qBACE,mWAAC;YAAI,WAAU;;8BACb,mWAAC;oBAAI,WAAU;;sCACb,mWAAC,4IAAQ;4BAAC,WAAU;;;;;;sCACpB,mWAAC,4IAAQ;4BAAC,WAAU;;;;;;sCACpB,mWAAC,4IAAQ;4BAAC,WAAU;;;;;;;;;;;;8BAEtB,mWAAC;oBAAI,WAAU;;sCACb,mWAAC,4IAAQ;4BAAC,WAAU;;;;;;sCACpB,mWAAC,4IAAQ;4BAAC,WAAU;;;;;;sCACpB,mWAAC,4IAAQ;4BAAC,WAAU;;;;;;;;;;;;;;;;;;IAI5B;IAEA,IAAI,OAAO;QACT,qBAAO,mWAAC;YAAI,WAAU;sBAAwB;;;;;;IAChD;IAEA,OACE,2BACE,mWAAC;QAAI,WAAU;kBACZ;;;;;6BAGH,mWAAC;QAAI,WAAU;;0BACb,mWAAC,gMAAgB;gBAAC,OAAO;gBAAO,YAAY;gBAAY,eAAe;;;;;;0BACvE,mWAAC;gBAAI,WAAU;0BAAmB;;;;;;;;;;;;AAI1C;GAtCgB;;QAC+C,mOAA4B;QACxE,0TAAW;;;KAFd","debugId":null}},
    {"offset": {"line": 2529, "column": 0}, "map": {"version":3,"sources":["file:///home/habtamusemagn/Desktop/last/gugu-gaga-/front_end/app/%28dashboard%29/dashboard/affiliate/layout.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { AffiliateDashboardProvider } from \"./_context/affiliate-dashboard-context\";\nimport { AffiliateLayoutShell } from \"./_components/layout-shell\";\n\nexport default function AffiliateLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <AffiliateDashboardProvider>\n      <AffiliateLayoutShell>{children}</AffiliateLayoutShell>\n    </AffiliateDashboardProvider>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAJA;;;;AAMe,SAAS,gBAAgB,KAA2C;QAA3C,EAAE,QAAQ,EAAiC,GAA3C;IACtC,qBACE,mWAAC,iOAA0B;kBACzB,cAAA,mWAAC,4MAAoB;sBAAE;;;;;;;;;;;AAG7B;KANwB","debugId":null}}]
}