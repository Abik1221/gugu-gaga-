{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/neww/gugu-gaga-/front_end/components/ui/input.tsx"],"sourcesContent":["\"use client\";\r\nimport * as React from \"react\";\r\n\r\nexport interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {}\r\n\r\nexport const Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className = \"\", ...props }, ref) => {\r\n    return (\r\n      <input\r\n        ref={ref}\r\n        className={\r\n          \"w-full border rounded px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-emerald-200 focus:border-emerald-400 \" +\r\n          className\r\n        }\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\nInput.displayName = \"Input\";\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAKO,MAAM,sBAAQ,2KAAgB,MACnC,QAA+B;QAA9B,EAAE,YAAY,EAAE,EAAE,GAAG,OAAO;IAC3B,qBACE,6LAAC;QACC,KAAK;QACL,WACE,uHACA;QAED,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/neww/gugu-gaga-/front_end/components/ui/skeleton.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\n\r\nexport function Skeleton({ className = \"\" }: { className?: string }) {\r\n  return <div className={`animate-pulse bg-gray-200 rounded ${className}`} />;\r\n}\r\n\r\nexport function TableSkeletonRows({ rows = 6, cols = 6 }: { rows?: number; cols?: number }) {\r\n  return (\r\n    <tbody>\r\n      {Array.from({ length: rows }).map((_, r) => (\r\n        <tr key={r} className=\"border-t\">\r\n          {Array.from({ length: cols }).map((__, c) => (\r\n            <td key={c} className=\"px-3 py-2\">\r\n              <Skeleton className=\"h-4 w-full\" />\r\n            </td>\r\n          ))}\r\n        </tr>\r\n      ))}\r\n    </tbody>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;;AAGO,SAAS,SAAS,KAA0C;QAA1C,EAAE,YAAY,EAAE,EAA0B,GAA1C;IACvB,qBAAO,6LAAC;QAAI,WAAW,AAAC,qCAA8C,OAAV;;;;;;AAC9D;KAFgB;AAIT,SAAS,kBAAkB,KAAwD;QAAxD,EAAE,OAAO,CAAC,EAAE,OAAO,CAAC,EAAoC,GAAxD;IAChC,qBACE,6LAAC;kBACE,MAAM,IAAI,CAAC;YAAE,QAAQ;QAAK,GAAG,GAAG,CAAC,CAAC,GAAG,kBACpC,6LAAC;gBAAW,WAAU;0BACnB,MAAM,IAAI,CAAC;oBAAE,QAAQ;gBAAK,GAAG,GAAG,CAAC,CAAC,IAAI,kBACrC,6LAAC;wBAAW,WAAU;kCACpB,cAAA,6LAAC;4BAAS,WAAU;;;;;;uBADb;;;;;eAFJ;;;;;;;;;;AAUjB;MAdgB","debugId":null}},
    {"offset": {"line": 102, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/neww/gugu-gaga-/front_end/app/%28dashboard%29/dashboard/owner/payment/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { useToast } from \"@/components/ui/toast\";\r\nimport { AuthAPI, BillingAPI } from \"@/utils/api\";\r\n\r\nexport default function OwnerPaymentPage() {\r\n  const router = useRouter();\r\n  const { show } = useToast();\r\n  const [loading, setLoading] = useState(true);\r\n  const [user, setUser] = useState<any>(null);\r\n  const [tenantId, setTenantId] = useState<string | null>(null);\r\n  const [paymentCode, setPaymentCode] = useState(\"\"\r\n  );\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [refreshing, setRefreshing] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    let active = true;\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        const me = await AuthAPI.me();\r\n        if (!active) return;\r\n        setUser(me);\r\n        const tenantFromUser = me?.tenant_id ?? null;\r\n        setTenantId(tenantFromUser);\r\n\r\n        const kycApproved = me?.kyc_status === \"approved\";\r\n        const subscriptionStatus = me?.subscription_status || \"active\";\r\n        if (!kycApproved) {\r\n          router.replace(\"/dashboard/owner/kyc\");\r\n          return;\r\n        }\r\n        if (subscriptionStatus === \"active\") {\r\n          router.replace(\"/dashboard/owner\");\r\n          return;\r\n        }\r\n\r\n        setError(null);\r\n      } catch (err: any) {\r\n        if (!active) return;\r\n        setError(err?.message || \"Failed to load payment page\");\r\n      } finally {\r\n        if (active) setLoading(false);\r\n      }\r\n    })();\r\n    return () => {\r\n      active = false;\r\n    };\r\n  }, [router]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!tenantId) return;\r\n    const trimmed = paymentCode.trim();\r\n    if (trimmed.length < 4) {\r\n      show({ variant: \"destructive\", title: \"Code too short\", description: \"Payment codes must be at least 4 characters.\" });\r\n      return;\r\n    }\r\n    setSubmitting(true);\r\n    try {\r\n      await BillingAPI.submitPaymentCode(tenantId, trimmed);\r\n      show({ variant: \"success\", title: \"Payment submitted\", description: \"We’ll notify you once the team verifies it.\" });\r\n      setPaymentCode(\"\");\r\n      const latest = await AuthAPI.me();\r\n      setUser(latest);\r\n      if (latest?.subscription_status === \"pending_verification\") {\r\n        show({ variant: \"default\", title: \"Awaiting verification\", description: \"The admin team is reviewing your payment.\" });\r\n      }\r\n      if (latest?.subscription_status === \"active\") {\r\n        router.replace(\"/dashboard/owner\");\r\n      }\r\n    } catch (err: any) {\r\n      show({ variant: \"destructive\", title: \"Submission failed\", description: err?.message || \"Unable to submit payment code\" });\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleRefresh = async () => {\r\n    if (!tenantId) return;\r\n    setRefreshing(true);\r\n    try {\r\n      const latest = await AuthAPI.me();\r\n      setUser(latest);\r\n      if (latest?.kyc_status !== \"approved\") {\r\n        router.replace(\"/dashboard/owner/kyc\");\r\n        return;\r\n      }\r\n      const status = latest?.subscription_status || \"active\";\r\n      if (status === \"active\") {\r\n        router.replace(\"/dashboard/owner\");\r\n      }\r\n      show({ variant: \"success\", title: \"Status refreshed\", description: \"We have the latest update.\" });\r\n    } catch (err: any) {\r\n      show({ variant: \"destructive\", title: \"Refresh failed\", description: err?.message || \"Unable to refresh status\" });\r\n    } finally {\r\n      setRefreshing(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <Skeleton className=\"h-64\" />;\r\n  if (error) return <div className=\"text-red-600 text-sm\">{error}</div>;\r\n\r\n  const subscriptionStatus = user?.subscription_status || \"awaiting_payment\";\r\n\r\n  const copies: Record<string, { title: string; description: string; variant: \"info\" | \"warning\" | \"success\" }> = {\r\n    awaiting_payment: {\r\n      title: \"Subscription payment required\",\r\n      description: \"Your pharmacy has been approved. Please enter the payment code provided by the admin desk so we can activate your tools.\",\r\n      variant: \"info\",\r\n    },\r\n    pending_verification: {\r\n      title: \"Payment awaiting verification\",\r\n      description: \"Thanks for submitting your payment code. The admin team is reviewing it now. You’ll be notified as soon as it’s verified.\",\r\n      variant: \"success\",\r\n    },\r\n    payment_rejected: {\r\n      title: \"Payment could not be verified\",\r\n      description: \"The last payment submission was rejected. Double-check the receipt and submit a valid payment code to continue.\",\r\n      variant: \"warning\",\r\n    },\r\n  };\r\n\r\n  const copy = copies[subscriptionStatus] || copies.awaiting_payment;\r\n  const bannerClasses =\r\n    copy.variant === \"warning\"\r\n      ? \"border-red-200 bg-red-50 text-red-800\"\r\n      : copy.variant === \"success\"\r\n      ? \"border-emerald-200 bg-emerald-50 text-emerald-800\"\r\n      : \"border-amber-200 bg-amber-50 text-amber-800\";\r\n\r\n  return (\r\n    <div className=\"max-w-3xl mx-auto space-y-6\">\r\n      <div className=\"space-y-2\">\r\n        <h1 className=\"text-2xl font-semibold\">{copy.title}</h1>\r\n        <p className=\"text-sm text-muted-foreground\">{copy.description}</p>\r\n      </div>\r\n\r\n      <div className={`rounded border p-4 space-y-4 ${bannerClasses}`}>\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <div className=\"text-xs uppercase tracking-wide\">Current status</div>\r\n            <div className=\"text-lg font-semibold capitalize\">{subscriptionStatus.replace(/_/g, \" \")}</div>\r\n          </div>\r\n          <Button variant=\"outline\" onClick={handleRefresh} disabled={refreshing}>\r\n            {refreshing ? \"Refreshing...\" : \"Refresh status\"}\r\n          </Button>\r\n        </div>\r\n\r\n        {subscriptionStatus !== \"pending_verification\" && (\r\n          <form className=\"space-y-3\" onSubmit={handleSubmit}>\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-xs uppercase tracking-wide text-muted-foreground\" htmlFor=\"payment-code-input\">\r\n                Payment code\r\n              </label>\r\n              <Input\r\n                id=\"payment-code-input\"\r\n                value={paymentCode}\r\n                onChange={(e) => setPaymentCode(e.target.value)}\r\n                placeholder=\"Enter the receipt/payment code\"\r\n              />\r\n            </div>\r\n            <div className=\"flex gap-2\">\r\n              <Button type=\"submit\" disabled={submitting}>\r\n                {submitting ? \"Submitting...\" : \"Submit code\"}\r\n              </Button>\r\n              <Button type=\"button\" variant=\"outline\" onClick={() => setPaymentCode(\"\")} disabled={submitting || paymentCode.length === 0}>\r\n                Clear\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        )}\r\n\r\n        {subscriptionStatus === \"pending_verification\" && (\r\n          <div className=\"text-sm\">\r\n            We will email you once verification is complete. You can refresh this page to check for updates.\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}