{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/habtamusemagn/Desktop/last/gugu-gaga-/front_end/app/%28dashboard%29/dashboard/staff/pos/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useToast } from \"@/components/ui/toast\";\nimport { AuthAPI } from \"@/utils/api\";\n\ninterface CartItem {\n  medicine_id: number;\n  name: string;\n  sku: string;\n  quantity: number;\n  unit_price: number;\n  total: number;\n}\n\nexport default function StaffPOS() {\n  const { show } = useToast();\n  const [user, setUser] = useState<any>(null);\n  const [cart, setCart] = useState<CartItem[]>([]);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [quantity, setQuantity] = useState(1);\n  const [unitPrice, setUnitPrice] = useState(\"\");\n  const [processing, setProcessing] = useState(false);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const me = await AuthAPI.me();\n        setUser(me);\n      } catch (err) {\n        console.error(\"Failed to load user:\", err);\n      }\n    })();\n  }, []);\n\n  const addToCart = () => {\n    if (!searchQuery.trim() || !unitPrice || quantity <= 0) {\n      show({\n        variant: \"destructive\",\n        title: \"Invalid input\",\n        description: \"Please fill all fields correctly\",\n      });\n      return;\n    }\n\n    const price = parseFloat(unitPrice);\n    if (isNaN(price) || price <= 0) {\n      show({\n        variant: \"destructive\",\n        title: \"Invalid price\",\n        description: \"Please enter a valid price\",\n      });\n      return;\n    }\n\n    const newItem: CartItem = {\n      medicine_id: Date.now(), // Temporary ID\n      name: searchQuery,\n      sku: searchQuery,\n      quantity,\n      unit_price: price,\n      total: quantity * price,\n    };\n\n    setCart([...cart, newItem]);\n    setSearchQuery(\"\");\n    setQuantity(1);\n    setUnitPrice(\"\");\n  };\n\n  const removeFromCart = (index: number) => {\n    setCart(cart.filter((_, i) => i !== index));\n  };\n\n  const updateQuantity = (index: number, newQuantity: number) => {\n    if (newQuantity <= 0) return;\n    const updatedCart = cart.map((item, i) => \n      i === index \n        ? { ...item, quantity: newQuantity, total: newQuantity * item.unit_price }\n        : item\n    );\n    setCart(updatedCart);\n  };\n\n  const getTotalAmount = () => {\n    return cart.reduce((sum, item) => sum + item.total, 0);\n  };\n\n  const processSale = async () => {\n    if (cart.length === 0) {\n      show({\n        variant: \"destructive\",\n        title: \"Empty cart\",\n        description: \"Add items to cart before processing sale\",\n      });\n      return;\n    }\n\n    setProcessing(true);\n    try {\n      // Simulate API call\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      show({\n        variant: \"success\",\n        title: \"Sale completed\",\n        description: `Transaction processed successfully. Total: $${getTotalAmount().toFixed(2)}`,\n      });\n      \n      setCart([]);\n    } catch (err: any) {\n      show({\n        variant: \"destructive\",\n        title: \"Sale failed\",\n        description: err?.message || \"Failed to process sale\",\n      });\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Point of Sale</h2>\n        <p className=\"text-gray-600\">Process customer transactions</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n        {/* Product Search & Add */}\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Add Items</h2>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Medicine Name/SKU\n              </label>\n              <Input\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                placeholder=\"Search medicine by name or SKU\"\n                className=\"text-black\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Quantity\n                </label>\n                <Input\n                  type=\"number\"\n                  value={quantity}\n                  onChange={(e) => setQuantity(parseInt(e.target.value) || 1)}\n                  min=\"1\"\n                  className=\"text-black\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Unit Price ($)\n                </label>\n                <Input\n                  type=\"number\"\n                  step=\"0.01\"\n                  value={unitPrice}\n                  onChange={(e) => setUnitPrice(e.target.value)}\n                  placeholder=\"0.00\"\n                  className=\"text-black\"\n                />\n              </div>\n            </div>\n\n            <Button \n              onClick={addToCart}\n              className=\"w-full bg-blue-600 hover:bg-blue-700\"\n            >\n              Add to Cart\n            </Button>\n          </div>\n        </div>\n\n        {/* Cart */}\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">\n            Cart ({cart.length} items)\n          </h2>\n\n          {cart.length === 0 ? (\n            <div className=\"text-center py-8 text-gray-500\">\n              <svg className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5-6m0 0h15.5M7 13h10m0 0v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6z\" />\n              </svg>\n              Cart is empty\n            </div>\n          ) : (\n            <div className=\"space-y-3\">\n              {cart.map((item, index) => (\n                <div key={index} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                  <div className=\"flex-1\">\n                    <p className=\"font-medium text-gray-900\">{item.name}</p>\n                    <p className=\"text-sm text-gray-600\">${item.unit_price.toFixed(2)} each</p>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={() => updateQuantity(index, item.quantity - 1)}\n                    >\n                      -\n                    </Button>\n                    <span className=\"w-8 text-center\">{item.quantity}</span>\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={() => updateQuantity(index, item.quantity + 1)}\n                    >\n                      +\n                    </Button>\n                    <span className=\"w-16 text-right font-medium\">\n                      ${item.total.toFixed(2)}\n                    </span>\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={() => removeFromCart(index)}\n                      className=\"text-red-600 hover:text-red-700\"\n                    >\n                      Ã—\n                    </Button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {cart.length > 0 && (\n            <div className=\"mt-6 pt-4 border-t border-gray-200\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <span className=\"text-lg font-semibold text-gray-900\">Total:</span>\n                <span className=\"text-2xl font-bold text-green-600\">\n                  ${getTotalAmount().toFixed(2)}\n                </span>\n              </div>\n              <Button\n                onClick={processSale}\n                disabled={processing}\n                className=\"w-full bg-green-600 hover:bg-green-700 text-lg py-3\"\n              >\n                {processing ? \"Processing...\" : \"Complete Sale\"}\n              </Button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}