(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,92075,e=>{"use strict";e.s(["default",()=>n]);var t=e.i(43476),s=e.i(71645),a=e.i(67881),l=e.i(23750),i=e.i(6799),r=e.i(4427);function n(){let{show:e}=(0,i.useToast)(),[n,c]=(0,s.useState)(null),[d,o]=(0,s.useState)([]),[m,x]=(0,s.useState)(""),[u,h]=(0,s.useState)(1),[g,p]=(0,s.useState)(""),[v,b]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{let e=await r.AuthAPI.me();c(e)}catch(e){}})()},[]);let j=(e,t)=>{t<=0||o(d.map((s,a)=>a===e?{...s,quantity:t,total:t*s.unit_price}:s))},y=()=>d.reduce((e,t)=>e+t.total,0),N=async()=>{if(0===d.length)return void e({variant:"destructive",title:"Empty cart",description:"Add items to cart before processing sale"});b(!0);try{await new Promise(e=>setTimeout(e,1e3)),e({variant:"success",title:"Sale completed",description:"Transaction processed successfully. Total: $".concat(y().toFixed(2))}),o([])}catch(t){e({variant:"destructive",title:"Sale failed",description:(null==t?void 0:t.message)||"Failed to process sale"})}finally{b(!1)}};return(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Point of Sale"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Process customer transactions"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Add Items"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medicine Name/SKU"}),(0,t.jsx)(l.Input,{value:m,onChange:e=>x(e.target.value),placeholder:"Search medicine by name or SKU",className:"text-black"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity"}),(0,t.jsx)(l.Input,{type:"number",value:u,onChange:e=>h(parseInt(e.target.value)||1),min:"1",className:"text-black"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Price ($)"}),(0,t.jsx)(l.Input,{type:"number",step:"0.01",value:g,onChange:e=>p(e.target.value),placeholder:"0.00",className:"text-black"})]})]}),(0,t.jsx)(a.Button,{onClick:()=>{if(!m.trim()||!g||u<=0)return void e({variant:"destructive",title:"Invalid input",description:"Please fill all fields correctly"});let t=parseFloat(g);if(isNaN(t)||t<=0)return void e({variant:"destructive",title:"Invalid price",description:"Please enter a valid price"});o([...d,{medicine_id:Date.now(),name:m,sku:m,quantity:u,unit_price:t,total:u*t}]),x(""),h(1),p("")},className:"w-full bg-blue-600 hover:bg-blue-700",children:"Add to Cart"})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Cart (",d.length," items)"]}),0===d.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5-6m0 0h15.5M7 13h10m0 0v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6z"})}),"Cart is empty"]}):(0,t.jsx)("div",{className:"space-y-3",children:d.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["$",e.unit_price.toFixed(2)," each"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(a.Button,{size:"sm",variant:"outline",onClick:()=>j(s,e.quantity-1),children:"-"}),(0,t.jsx)("span",{className:"w-8 text-center",children:e.quantity}),(0,t.jsx)(a.Button,{size:"sm",variant:"outline",onClick:()=>j(s,e.quantity+1),children:"+"}),(0,t.jsxs)("span",{className:"w-16 text-right font-medium",children:["$",e.total.toFixed(2)]}),(0,t.jsx)(a.Button,{size:"sm",variant:"outline",onClick:()=>{o(d.filter((e,t)=>t!==s))},className:"text-red-600 hover:text-red-700",children:"Ã—"})]})]},s))}),d.length>0&&(0,t.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"Total:"}),(0,t.jsxs)("span",{className:"text-2xl font-bold text-green-600",children:["$",y().toFixed(2)]})]}),(0,t.jsx)(a.Button,{onClick:N,disabled:v,className:"w-full bg-green-600 hover:bg-green-700 text-lg py-3",children:v?"Processing...":"Complete Sale"})]})]})]})]})}}]);