{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/gugu-gaga-/front_end/components/ui/input.tsx"],"sourcesContent":["\"use client\";\r\nimport * as React from \"react\";\r\n\r\nexport interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {}\r\n\r\nexport const Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className = \"\", ...props }, ref) => {\r\n    return (\r\n      <input\r\n        ref={ref}\r\n        className={\r\n          \"w-full border rounded px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-emerald-200 focus:border-emerald-400 \" +\r\n          className\r\n        }\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\nInput.displayName = \"Input\";\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAKO,MAAM,sBAAQ,2KAAgB,MACnC,QAA+B;QAA9B,EAAE,YAAY,EAAE,EAAE,GAAG,OAAO;IAC3B,qBACE,6LAAC;QACC,KAAK;QACL,WACE,uHACA;QAED,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/gugu-gaga-/front_end/app/%28dashboard%29/dashboard/affiliate/register/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { API_BASE, getAccessToken, getAuthJSON } from \"@/utils/api\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useToast } from \"@/components/ui/toast\";\r\n\r\nexport default function AffiliateRegisterPage() {\r\n  const { show } = useToast();\r\n  const [me, setMe] = useState<{ id: string; tenant_id?: string } | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [full_name, setFullName] = useState(\"\");\r\n  const [username, setUsername] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [bank_account_name, setBankAccountName] = useState(\"\");\r\n  const [bank_account_number, setBankAccountNumber] = useState(\"\");\r\n  const [bank_name, setBankName] = useState(\"\");\r\n  const [country, setCountry] = useState(\"\");\r\n  const [city, setCity] = useState(\"\");\r\n  const [address, setAddress] = useState(\"\");\r\n\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [referralCode, setReferralCode] = useState<string | null>(null);\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n\r\n  useEffect(() => {\r\n    let active = true;\r\n    (async () => {\r\n      try {\r\n        const m = await getAuthJSON<{ id: string; tenant_id?: string }>(\"/api/v1/auth/me\");\r\n        if (!active) return;\r\n        setMe(m);\r\n      } catch (e: any) {\r\n        show({ variant: \"destructive\", title: \"Auth required\", description: \"Please login\" });\r\n      } finally {\r\n        if (active) setLoading(false);\r\n      }\r\n    })();\r\n    return () => { active = false };\r\n  }, [show]);\r\n\r\n  async function onSubmit(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    const errs: Record<string, string> = {};\r\n    if (!full_name.trim()) errs.full_name = \"Full name is required\";\r\n    if (!username.trim() || username.trim().length < 3) errs.username = \"Username must be at least 3 characters\";\r\n    if (!email.trim() || !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)) errs.email = \"Valid email is required\";\r\n    if (!bank_account_name.trim()) errs.bank_account_name = \"Bank account name is required\";\r\n    if (!bank_account_number.trim() || bank_account_number.replace(/\\D/g, '').length < 6) errs.bank_account_number = \"Enter a valid account number\";\r\n    if (!bank_name.trim()) errs.bank_name = \"Bank name is required\";\r\n    setErrors(errs);\r\n    if (Object.keys(errs).length > 0) {\r\n      show({ variant: \"destructive\", title: \"Fix form errors\", description: \"Please review highlighted fields\" });\r\n      return;\r\n    }\r\n    if (!me?.tenant_id || !me?.id) {\r\n      show({ variant: \"destructive\", title: \"Missing context\", description: \"Tenant/User missing\" });\r\n      return;\r\n    }\r\n    setSubmitting(true);\r\n    try {\r\n      const payload = {\r\n        full_name,\r\n        username,\r\n        email,\r\n        phone: phone || null,\r\n        bank_account_name,\r\n        bank_account_number,\r\n        bank_name,\r\n        country: country || null,\r\n        city: city || null,\r\n        address: address || null,\r\n      };\r\n      const token = getAccessToken();\r\n      const res = await fetch(`${API_BASE}/api/v1/affiliate/register`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n          \"X-Tenant-ID\": me.tenant_id as string,\r\n          \"X-User-ID\": me.id,\r\n        },\r\n        body: JSON.stringify(payload),\r\n      });\r\n      if (!res.ok) {\r\n        const text = await res.text().catch(() => \"\");\r\n        throw new Error(text || `Failed with ${res.status}`);\r\n      }\r\n      const data = (await res.json()) as { affiliate_id: string; referral_code: string };\r\n      setReferralCode(data.referral_code);\r\n      show({ variant: \"success\", title: \"Affiliate registered\", description: \"Referral code generated\" });\r\n    } catch (err: any) {\r\n      show({ variant: \"destructive\", title: \"Registration failed\", description: err.message || \"\" });\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  }\r\n\r\n  if (loading) return <div className=\"p-6 text-sm text-gray-600\">Loading...</div>;\r\n\r\n  const shareUrl = referralCode ? `${window.location.origin}/register?ref=${encodeURIComponent(referralCode)}` : \"\";\r\n\r\n  return (\r\n    <div className=\"max-w-2xl\">\r\n      <h1 className=\"text-xl font-semibold mb-1\">Affiliate Registration</h1>\r\n      <p className=\"text-sm text-gray-600 mb-4\">Earn commissions by referring new pharmacies. Fill in your payout details to get started.</p>\r\n\r\n      {referralCode ? (\r\n        <div className=\"border rounded bg-white p-4 space-y-2\">\r\n          <div className=\"p-3 bg-emerald-50 text-emerald-800 rounded text-sm\">\r\n            Verification email sent. Please check your inbox and click the link to verify your affiliate account.\r\n          </div>\r\n          <div className=\"font-medium\">Your referral code</div>\r\n          <div className=\"text-2xl font-mono\">{referralCode}</div>\r\n          <div className=\"text-sm text-gray-600\">Share this link:</div>\r\n          <div className=\"p-2 border rounded bg-gray-50 break-all text-sm\">{shareUrl}</div>\r\n        </div>\r\n      ) : (\r\n        <form onSubmit={onSubmit} className=\"space-y-4\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"text-sm\">Full Name</label>\r\n              <Input value={full_name} onChange={(e)=>setFullName(e.target.value)} required aria-invalid={!!errors.full_name} />\r\n              {errors.full_name && <div className=\"text-xs text-red-600 mt-1\">{errors.full_name}</div>}\r\n            </div>\r\n            <div>\r\n              <label className=\"text-sm\">Username</label>\r\n              <Input value={username} onChange={(e)=>setUsername(e.target.value)} required aria-invalid={!!errors.username} />\r\n              <div className=\"text-xs text-gray-500 mt-1\">Public handle for your affiliate profile</div>\r\n              {errors.username && <div className=\"text-xs text-red-600 mt-1\">{errors.username}</div>}\r\n            </div>\r\n            <div>\r\n              <label className=\"text-sm\">Email</label>\r\n              <Input type=\"email\" value={email} onChange={(e)=>setEmail(e.target.value)} required aria-invalid={!!errors.email} />\r\n              {errors.email && <div className=\"text-xs text-red-600 mt-1\">{errors.email}</div>}\r\n            </div>\r\n            <div>\r\n              <label className=\"text-sm\">Phone</label>\r\n              <Input value={phone} onChange={(e)=>setPhone(e.target.value)} placeholder=\"e.g. +2519...\" />\r\n              <div className=\"text-xs text-gray-500 mt-1\">Optional, used for payout queries</div>\r\n            </div>\r\n            <div>\r\n              <label className=\"text-sm\">Bank Account Name</label>\r\n              <Input value={bank_account_name} onChange={(e)=>setBankAccountName(e.target.value)} required aria-invalid={!!errors.bank_account_name} />\r\n              {errors.bank_account_name && <div className=\"text-xs text-red-600 mt-1\">{errors.bank_account_name}</div>}\r\n            </div>\r\n            <div>\r\n              <label className=\"text-sm\">Bank Account Number</label>\r\n              <Input value={bank_account_number} onChange={(e)=>setBankAccountNumber(e.target.value)} required aria-invalid={!!errors.bank_account_number} />\r\n              {errors.bank_account_number && <div className=\"text-xs text-red-600 mt-1\">{errors.bank_account_number}</div>}\r\n            </div>\r\n            <div>\r\n              <label className=\"text-sm\">Bank Name</label>\r\n              <Input value={bank_name} onChange={(e)=>setBankName(e.target.value)} required aria-invalid={!!errors.bank_name} />\r\n              {errors.bank_name && <div className=\"text-xs text-red-600 mt-1\">{errors.bank_name}</div>}\r\n            </div>\r\n            <div>\r\n              <label className=\"text-sm\">Country</label>\r\n              <Input value={country} onChange={(e)=>setCountry(e.target.value)} />\r\n            </div>\r\n            <div>\r\n              <label className=\"text-sm\">City</label>\r\n              <Input value={city} onChange={(e)=>setCity(e.target.value)} />\r\n            </div>\r\n            <div className=\"md:col-span-2\">\r\n              <label className=\"text-sm\">Address</label>\r\n              <Input value={address} onChange={(e)=>setAddress(e.target.value)} />\r\n              <div className=\"text-xs text-gray-500 mt-1\">Include branch details if applicable</div>\r\n            </div>\r\n          </div>\r\n          <Button type=\"submit\" disabled={submitting}>\r\n            {submitting ? \"Submitting...\" : \"Register as Affiliate\"}\r\n          </Button>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}