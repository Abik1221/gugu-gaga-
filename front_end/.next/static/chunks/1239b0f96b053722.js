(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27341,e=>{"use strict";e.s(["Tabs",()=>G,"TabsContent",()=>W,"TabsList",()=>Y,"TabsTrigger",()=>q],27341);var t=e.i(43476),a=e.i(71645),r=e.i(81140),s=e.i(30030),n=e.i(75830),i=e.i(20783),l=e.i(10772),o=e.i(48425),d=e.i(30207),c=e.i(69340),u=e.i(86318),m="rovingFocusGroup.onEntryFocus",x={bubbles:!1,cancelable:!0},b="RovingFocusGroup",[g,p,f]=(0,n.createCollection)(b),[v,h]=(0,s.createContextScope)(b,[f]),[j,y]=v(b),w=a.forwardRef((e,a)=>(0,t.jsx)(g.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,t.jsx)(g.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,t.jsx)(N,{...e,ref:a})})}));w.displayName=b;var N=a.forwardRef((e,s)=>{let{__scopeRovingFocusGroup:n,orientation:l,loop:g=!1,dir:f,currentTabStopId:v,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:y,onEntryFocus:w,preventScrollOnEntryFocus:N=!1,...k}=e,T=a.useRef(null),C=(0,i.useComposedRefs)(s,T),S=(0,u.useDirection)(f),[E,P]=(0,c.useControllableState)({prop:v,defaultProp:null!=h?h:null,onChange:y,caller:b}),[A,R]=a.useState(!1),F=(0,d.useCallbackRef)(w),I=p(n),D=a.useRef(!1),[L,H]=a.useState(0);return a.useEffect(()=>{let e=T.current;if(e)return e.addEventListener(m,F),()=>e.removeEventListener(m,F)},[F]),(0,t.jsx)(j,{scope:n,orientation:l,dir:S,loop:g,currentTabStopId:E,onItemFocus:a.useCallback(e=>P(e),[P]),onItemShiftTab:a.useCallback(()=>R(!0),[]),onFocusableItemAdd:a.useCallback(()=>H(e=>e+1),[]),onFocusableItemRemove:a.useCallback(()=>H(e=>e-1),[]),children:(0,t.jsx)(o.Primitive.div,{tabIndex:A||0===L?-1:0,"data-orientation":l,...k,ref:C,style:{outline:"none",...e.style},onMouseDown:(0,r.composeEventHandlers)(e.onMouseDown,()=>{D.current=!0}),onFocus:(0,r.composeEventHandlers)(e.onFocus,e=>{let t=!D.current;if(e.target===e.currentTarget&&t&&!A){let t=new CustomEvent(m,x);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=I().filter(e=>e.focusable);_([e.find(e=>e.active),e.find(e=>e.id===E),...e].filter(Boolean).map(e=>e.ref.current),N)}}D.current=!1}),onBlur:(0,r.composeEventHandlers)(e.onBlur,()=>R(!1))})})}),k="RovingFocusGroupItem",T=a.forwardRef((e,s)=>{let{__scopeRovingFocusGroup:n,focusable:i=!0,active:d=!1,tabStopId:c,children:u,...m}=e,x=(0,l.useId)(),b=c||x,f=y(k,n),v=f.currentTabStopId===b,h=p(n),{onFocusableItemAdd:j,onFocusableItemRemove:w,currentTabStopId:N}=f;return a.useEffect(()=>{if(i)return j(),()=>w()},[i,j,w]),(0,t.jsx)(g.ItemSlot,{scope:n,id:b,focusable:i,active:d,children:(0,t.jsx)(o.Primitive.span,{tabIndex:v?0:-1,"data-orientation":f.orientation,...m,ref:s,onMouseDown:(0,r.composeEventHandlers)(e.onMouseDown,e=>{i?f.onItemFocus(b):e.preventDefault()}),onFocus:(0,r.composeEventHandlers)(e.onFocus,()=>f.onItemFocus(b)),onKeyDown:(0,r.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void f.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,a){var r;let s=(r=e.key,"rtl"!==a?r:"ArrowLeft"===r?"ArrowRight":"ArrowRight"===r?"ArrowLeft":r);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(s))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(s)))return C[s]}(e,f.orientation,f.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let a=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)a.reverse();else if("prev"===t||"next"===t){"prev"===t&&a.reverse();let r=a.indexOf(e.currentTarget);a=f.loop?function(e,t){return e.map((a,r)=>e[(t+r)%e.length])}(a,r+1):a.slice(r+1)}setTimeout(()=>_(a))}}),children:"function"==typeof u?u({isCurrentTabStop:v,hasTabStop:null!=N}):u})})});T.displayName=k;var C={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=document.activeElement;for(let r of e)if(r===a||(r.focus({preventScroll:t}),document.activeElement!==a))return}var S=e.i(96626),E="Tabs",[P,A]=(0,s.createContextScope)(E,[h]),R=h(),[F,I]=P(E),D=a.forwardRef((e,a)=>{let{__scopeTabs:r,value:s,onValueChange:n,defaultValue:i,orientation:d="horizontal",dir:m,activationMode:x="automatic",...b}=e,g=(0,u.useDirection)(m),[p,f]=(0,c.useControllableState)({prop:s,onChange:n,defaultProp:null!=i?i:"",caller:E});return(0,t.jsx)(F,{scope:r,baseId:(0,l.useId)(),value:p,onValueChange:f,orientation:d,dir:g,activationMode:x,children:(0,t.jsx)(o.Primitive.div,{dir:g,"data-orientation":d,...b,ref:a})})});D.displayName=E;var L="TabsList",H=a.forwardRef((e,a)=>{let{__scopeTabs:r,loop:s=!0,...n}=e,i=I(L,r),l=R(r);return(0,t.jsx)(w,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:s,children:(0,t.jsx)(o.Primitive.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:a})})});H.displayName=L;var K="TabsTrigger",B=a.forwardRef((e,a)=>{let{__scopeTabs:s,value:n,disabled:i=!1,...l}=e,d=I(K,s),c=R(s),u=U(d.baseId,n),m=O(d.baseId,n),x=n===d.value;return(0,t.jsx)(T,{asChild:!0,...c,focusable:!i,active:x,children:(0,t.jsx)(o.Primitive.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":m,"data-state":x?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...l,ref:a,onMouseDown:(0,r.composeEventHandlers)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(n)}),onKeyDown:(0,r.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(n)}),onFocus:(0,r.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==d.activationMode;x||i||!e||d.onValueChange(n)})})})});B.displayName=K;var M="TabsContent",z=a.forwardRef((e,r)=>{let{__scopeTabs:s,value:n,forceMount:i,children:l,...d}=e,c=I(M,s),u=U(c.baseId,n),m=O(c.baseId,n),x=n===c.value,b=a.useRef(x);return a.useEffect(()=>{let e=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(S.Presence,{present:i||x,children:a=>{let{present:s}=a;return(0,t.jsx)(o.Primitive.div,{"data-state":x?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!s,id:m,tabIndex:0,...d,ref:r,style:{...e.style,animationDuration:b.current?"0s":void 0},children:s&&l})}})});function U(e,t){return"".concat(e,"-trigger-").concat(t)}function O(e,t){return"".concat(e,"-content-").concat(t)}z.displayName=M;var V=e.i(47163);function G(e){let{className:a,...r}=e;return(0,t.jsx)(D,{"data-slot":"tabs",className:(0,V.cn)("flex flex-col gap-2",a),...r})}function Y(e){let{className:a,...r}=e;return(0,t.jsx)(H,{"data-slot":"tabs-list",className:(0,V.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...r})}function q(e){let{className:a,...r}=e;return(0,t.jsx)(B,{"data-slot":"tabs-trigger",className:(0,V.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...r})}function W(e){let{className:a,...r}=e;return(0,t.jsx)(z,{"data-slot":"tabs-content",className:(0,V.cn)("flex-1 outline-none",a),...r})}},28951,e=>{"use strict";e.s(["default",()=>v],28951);var t=e.i(43476),a=e.i(71645),r=e.i(4427),s=e.i(70065),n=e.i(67881),i=e.i(71428),l=e.i(94179),o=e.i(27341),d=e.i(25913),c=e.i(47163);let u=(0,d.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function m(e){let{className:a,variant:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,c.cn)(u({variant:r}),a),...s})}function x(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"alert-title",className:(0,c.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",a),...r})}function b(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,c.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...r})}var g=e.i(6799);let p=[{key:"paid",title:"Active (Paid)",description:"Fully onboarded pharmacies with verified payments."},{key:"free_trial",title:"Free Trial",description:"Tenants still within their free-trial window.",tone:"info"},{key:"payment_pending",title:"Payment Under Review",description:"Submitted payment codes awaiting admin verification.",tone:"warning"},{key:"unpaid",title:"Awaiting Payment",description:"Approved KYC but no payment received yet.",tone:"warning"},{key:"blocked",title:"Blocked",description:"Access suspended due to missing or rejected payments.",tone:"danger"},{key:"onboarding",title:"Onboarding",description:"KYC still pending approval.",tone:"info"}];function f(e,t){if(!t)return null;let a=new Date(t);return Number.isNaN(a.getTime())?"".concat(e,": ").concat(t):"".concat(e,": ").concat(a.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"}))}function v(){let{show:e}=(0,g.useToast)(),[s,n]=(0,a.useState)(!0),[l,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(null),[f,v]=(0,a.useState)("paid");(0,a.useEffect)(()=>{let t=!0;return async function(){n(!0);try{let e=await r.AdminAPI.pharmacySummary();if(!t)return;u(e),d(null)}catch(r){if(!t)return;let a=(null==r?void 0:r.message)||"Failed to load pharmacy summary";d(a),e({variant:"destructive",title:"Error",description:a})}finally{t&&n(!1)}}(),()=>{t=!1}},[e]);let w=(0,a.useMemo)(()=>{let e=new Map;return p.forEach(t=>e.set(t.key,[])),null==c||c.items.forEach(t=>{let a=e.get(t.status)||[];a.push(t),e.set(t.status,a)}),e},[c]);return s?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(i.Skeleton,{className:"h-8 w-56"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Array.from({length:6}).map((e,a)=>(0,t.jsx)(i.Skeleton,{className:"h-32"},a))})]}):l?(0,t.jsxs)(m,{variant:"destructive",children:[(0,t.jsx)(x,{children:"Error"}),(0,t.jsx)(b,{children:l})]}):c?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,t.jsxs)("div",{className:"mx-auto max-w-7xl space-y-8",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Pharmacy Segments"}),(0,t.jsx)("p",{className:"mt-2 text-slate-600",children:"Track every tenant across onboarding, payment, and retention states. Use these segments to drive outreach and support."})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[(0,t.jsx)(h,{label:"Total Pharmacies",value:c.totals.total}),(0,t.jsx)(h,{label:"Active (Paid)",value:c.totals.paid,tone:"success"}),(0,t.jsx)(h,{label:"Free Trial",value:c.totals.free_trial,tone:"info"}),(0,t.jsx)(h,{label:"Payment Pending",value:c.totals.payment_pending,tone:"warning"}),(0,t.jsx)(h,{label:"Awaiting Payment",value:c.totals.unpaid,tone:"muted"}),(0,t.jsx)(h,{label:"Blocked",value:c.totals.blocked,tone:"danger"}),(0,t.jsx)(h,{label:"Onboarding",value:c.totals.onboarding,tone:"info"})]}),(0,t.jsx)("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:(0,t.jsxs)(o.Tabs,{value:f,onValueChange:e=>v(e),className:"p-6",children:[(0,t.jsx)(o.TabsList,{className:"mb-8 flex flex-wrap gap-3 bg-transparent p-0 h-auto",children:p.map(e=>{var a;let r=(null==(a=w.get(e.key))?void 0:a.length)||0,s=f===e.key;return(0,t.jsxs)(o.TabsTrigger,{value:e.key,className:"inline-flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all border-0 ".concat(s?"bg-emerald-600 text-white data-[state=active]:bg-emerald-600 data-[state=active]:text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"),children:[e.title,(0,t.jsx)("span",{className:"inline-flex items-center justify-center rounded-full px-2 py-0.5 text-xs font-medium ".concat(s?"bg-emerald-500 text-white":"bg-white text-slate-600"),children:r})]},e.key)})}),p.map(e=>{let a=w.get(e.key)||[];return(0,t.jsxs)(o.TabsContent,{value:e.key,className:"space-y-6",children:[(0,t.jsx)(j,{segment:e,count:a.length}),0===a.length?(0,t.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-12 text-center",children:[(0,t.jsx)("div",{className:"text-slate-400 mb-4",children:(0,t.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-slate-900 mb-1",children:"No pharmacies found"}),(0,t.jsx)("p",{className:"text-slate-500",children:"No pharmacies found in this segment."})]}):(0,t.jsx)("div",{className:"grid gap-4 lg:grid-cols-2 xl:grid-cols-3",children:a.map(e=>(0,t.jsx)(y,{item:e},e.tenant_id))})]},e.key)})]})})]})}):(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"No data available."})}function h(e){let{label:a,value:r,tone:n="default"}=e;return(0,t.jsxs)(s.Card,{className:"".concat({default:"border-slate-200 bg-white",success:"border-emerald-200 bg-emerald-50",warning:"border-amber-200 bg-amber-50",danger:"border-red-200 bg-red-50",info:"border-blue-200 bg-blue-50",muted:"border-slate-200 bg-slate-50"}[n]," shadow-sm"),children:[(0,t.jsx)(s.CardHeader,{className:"pb-2",children:(0,t.jsx)(s.CardTitle,{className:"text-sm font-medium text-slate-600",children:a})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)("div",{className:"text-3xl font-bold ".concat({default:"text-slate-900",success:"text-emerald-900",warning:"text-amber-900",danger:"text-red-900",info:"text-blue-900",muted:"text-slate-700"}[n]),children:r.toLocaleString()})})]})}function j(e){let{segment:a,count:r}=e,s="danger"===a.tone?"bg-red-100 text-red-700 border-red-200":"warning"===a.tone?"bg-amber-100 text-amber-700 border-amber-200":"info"===a.tone?"bg-blue-100 text-blue-700 border-blue-200":"bg-slate-100 text-slate-700 border-slate-200";return(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between border-b border-slate-200 pb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-slate-900 flex items-center gap-3",children:[a.title,(0,t.jsx)("span",{className:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-sm font-medium ".concat(s),children:r})]}),(0,t.jsx)("p",{className:"text-slate-600 mt-1",children:a.description})]}),(0,t.jsx)(n.Button,{variant:"outline",size:"sm",className:"rounded-lg border-slate-300 bg-white text-slate-700 hover:bg-slate-50",children:"Export Segment"})]})}function y(e){let{item:a}=e;return(0,t.jsxs)(s.Card,{className:"border-slate-200 bg-white shadow-sm hover:shadow-md transition-shadow",children:[(0,t.jsxs)(s.CardHeader,{className:"pb-3",children:[(0,t.jsx)(s.CardTitle,{className:"text-lg font-semibold text-slate-900",children:a.name||a.tenant_id}),(0,t.jsx)("p",{className:"text-sm text-slate-500 font-mono bg-slate-100 rounded px-2 py-1 inline-block",children:a.tenant_id})]}),(0,t.jsxs)(s.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-slate-900",children:a.branch_count}),(0,t.jsx)("div",{className:"text-sm text-slate-600",children:"Branches"})]}),(0,t.jsxs)("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-slate-900",children:a.user_count}),(0,t.jsx)("div",{className:"text-sm text-slate-600",children:"Users"})]})]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[f("Trial ends",a.trial_ends_at)&&(0,t.jsx)("div",{className:"text-slate-600",children:f("Trial ends",a.trial_ends_at)}),f("Last payment",a.last_payment_verified_at)&&(0,t.jsx)("div",{className:"text-emerald-700 bg-emerald-50 rounded px-2 py-1",children:f("Last payment",a.last_payment_verified_at)}),f("Payment submitted",a.pending_payment_submitted_at)&&(0,t.jsx)("div",{className:"text-amber-700 bg-amber-50 rounded px-2 py-1",children:f("Payment submitted",a.pending_payment_submitted_at)})]}),(0,t.jsx)("div",{children:(0,t.jsx)(l.Badge,{variant:"outline",className:"bg-slate-100 text-slate-700 border-slate-300 font-medium",children:a.status_label})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.Button,{size:"sm",className:"flex-1 bg-emerald-600 text-white hover:bg-emerald-700",children:"Open Details"}),(0,t.jsx)(n.Button,{size:"sm",variant:"outline",className:"flex-1 border-slate-300 text-slate-700 hover:bg-slate-50",children:"Message Owner"})]})]})]})}}]);