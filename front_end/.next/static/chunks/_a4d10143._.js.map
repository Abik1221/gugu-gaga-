{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/gugu-gaga-/front_end/utils/api.ts"],"sourcesContent":["export const API_BASE = process.env.NEXT_PUBLIC_API_BASE || \"http://localhost:8000/api/v1\";\r\nexport const TENANT_HEADER = process.env.NEXT_PUBLIC_TENANT_HEADER || \"X-Tenant-ID\";\r\n\r\nfunction buildHeaders(initHeaders?: HeadersInit, tenantId?: string): HeadersInit {\r\n  const headers: Record<string, string> = {\r\n    ...(initHeaders as Record<string, string>),\r\n  };\r\n  if (tenantId) headers[TENANT_HEADER] = tenantId;\r\n  return headers;\r\n}\r\n\r\nexport async function postForm<T = any>(path: string, data: Record<string, string>, tenantId?: string): Promise<T> {\r\n  const body = new URLSearchParams(data);\r\n  const res = await fetch(`${API_BASE}${path}`, {\r\n    method: \"POST\",\r\n    headers: buildHeaders({\r\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n    }, tenantId),\r\n    body,\r\n  });\r\n  if (!res.ok) {\r\n    try {\r\n      const data = await res.json();\r\n      const msg = data?.error || data?.detail || JSON.stringify(data);\r\n      throw new Error(msg || `Request failed with ${res.status}`);\r\n    } catch {\r\n      const text = await res.text().catch(() => \"\");\r\n      throw new Error(text || `Request failed with ${res.status}`);\r\n    }\r\n  }\r\n  return (await res.json()) as T;\r\n}\r\n\r\nexport async function postJSON<T = any>(path: string, body: any, tenantId?: string): Promise<T> {\r\n  const res = await fetch(`${API_BASE}${path}`, {\r\n    method: \"POST\",\r\n    headers: buildHeaders({ \"Content-Type\": \"application/json\" }, tenantId),\r\n    body: JSON.stringify(body),\r\n  });\r\n  if (!res.ok) {\r\n    try {\r\n      const data = await res.json();\r\n      const msg = data?.error || data?.detail || JSON.stringify(data);\r\n      throw new Error(msg || `Request failed with ${res.status}`);\r\n    } catch {\r\n      const text = await res.text().catch(() => \"\");\r\n      throw new Error(text || `Request failed with ${res.status}`);\r\n    }\r\n  }\r\n  return (await res.json()) as T;\r\n}\r\n\r\nexport async function postMultipart<T = any>(path: string, formData: FormData, tenantId?: string): Promise<T> {\r\n  const res = await fetch(`${API_BASE}${path}`, {\r\n    method: \"POST\",\r\n    headers: buildHeaders(undefined, tenantId),\r\n    body: formData,\r\n  });\r\n  if (!res.ok) {\r\n    try {\r\n      const data = await res.json();\r\n      const msg = data?.error || data?.detail || JSON.stringify(data);\r\n      throw new Error(msg || `Request failed with ${res.status}`);\r\n    } catch {\r\n      let message = `Request failed with ${res.status}`;\r\n      throw new Error(message);\r\n    }\r\n  }\r\n  return (await res.json()) as T;\r\n}\r\n\r\nexport function getAccessToken(): string | null {\r\n  if (typeof window === \"undefined\") return null;\r\n  return localStorage.getItem(\"access_token\");\r\n}\r\n\r\nfunction getRefreshToken(): string | null {\r\n  if (typeof window === \"undefined\") return null;\r\n  return localStorage.getItem(\"refresh_token\");\r\n}\r\n\r\nasync function refreshTokens(): Promise<boolean> {\r\n  const rt = getRefreshToken();\r\n  if (!rt) return false;\r\n  const url = `${API_BASE}/api/v1/auth/refresh?refresh_token=${encodeURIComponent(rt)}`;\r\n  const res = await fetch(url, { method: \"POST\" });\r\n  if (!res.ok) return false;\r\n  try {\r\n    const data = (await res.json()) as {\r\n      access_token: string;\r\n      refresh_token: string;\r\n      token_type: string;\r\n      expires_in: number;\r\n    };\r\n    if (typeof window !== \"undefined\") {\r\n      localStorage.setItem(\"access_token\", data.access_token);\r\n      localStorage.setItem(\"refresh_token\", data.refresh_token);\r\n    }\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nasync function authFetch(path: string, init?: RequestInit, retry = true, tenantId?: string): Promise<Response> {\r\n  const token = getAccessToken();\r\n  const headers: HeadersInit = buildHeaders(\r\n    {\r\n      ...(init?.headers || {}),\r\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n    },\r\n    tenantId,\r\n  );\r\n  const res = await fetch(`${API_BASE}${path}`, { ...(init || {}), headers });\r\n  if (res.status === 401 && retry) {\r\n    const ok = await refreshTokens();\r\n    if (ok) {\r\n      const newToken = getAccessToken();\r\n      const retryHeaders: HeadersInit = buildHeaders(\r\n        {\r\n          ...(init?.headers || {}),\r\n          ...(newToken ? { Authorization: `Bearer ${newToken}` } : {}),\r\n        },\r\n        tenantId,\r\n      );\r\n      return fetch(`${API_BASE}${path}`, { ...(init || {}), headers: retryHeaders });\r\n    }\r\n  }\r\n  return res;\r\n}\r\n\r\nexport async function getAuthJSON<T = any>(path: string, tenantId?: string): Promise<T> {\r\n  const res = await authFetch(path, undefined, true, tenantId);\r\n  if (!res.ok) {\r\n    try {\r\n      const data = await res.json();\r\n      const msg = data?.error || data?.detail || JSON.stringify(data);\r\n      throw new Error(msg || `Request failed with ${res.status}`);\r\n    } catch {\r\n      const text = await res.text().catch(() => \"\");\r\n      throw new Error(text || `Request failed with ${res.status}`);\r\n    }\r\n  }\r\n  return (await res.json()) as T;\r\n}\r\n\r\nexport async function postAuthJSON<T = any>(path: string, bodyData: any, tenantId?: string): Promise<T> {\r\n  const res = await authFetch(path, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(bodyData),\r\n  }, true, tenantId);\r\n  if (!res.ok) {\r\n    try {\r\n      const data = await res.json();\r\n      const msg = data?.error || data?.detail || JSON.stringify(data);\r\n      throw new Error(msg || `Request failed with ${res.status}`);\r\n    } catch {\r\n      const text = await res.text().catch(() => \"\");\r\n      throw new Error(text || `Request failed with ${res.status}`);\r\n    }\r\n  }\r\n  return (await res.json()) as T;\r\n}\r\n\r\n// Convenience wrappers for key flows\r\nexport const AuthAPI = {\r\n  registerAffiliate: (body: any) => postJSON(\"/auth/register/affiliate\", body),\r\n  registerPharmacy: (body: any) => postJSON(\"/auth/register/pharmacy\", body),\r\n  verifyRegistration: (email: string, code: string) =>\r\n    postForm(\"/auth/register/verify\", { email, code }),\r\n  login: (email: string, password: string, tenantId?: string) =>\r\n    postForm(\"/auth/login\", { username: email, password }, tenantId),\r\n  loginRequestCode: (email: string, password: string, tenantId?: string) =>\r\n    postForm(\"/auth/login/request-code\", { username: email, password }, tenantId),\r\n  loginVerify: (email: string, code: string, tenantId?: string) =>\r\n    postJSON(\"/auth/login/verify\", { email, code }, tenantId),\r\n  me: () => getAuthJSON(\"/auth/me\"),\r\n};\r\n\r\nexport const AffiliateAPI = {\r\n  getLinks: () => getAuthJSON(\"/affiliate/register-link\"),\r\n  createLink: () => getAuthJSON(\"/affiliate/register-link?create_new=true\"),\r\n  deactivate: (token: string) => postAuthJSON(`/affiliate/links/${encodeURIComponent(token)}/deactivate`, {}),\r\n  rotate: (token: string) => postAuthJSON(`/affiliate/links/${encodeURIComponent(token)}/rotate`, {}),\r\n  dashboard: () => getAuthJSON(\"/affiliate/dashboard\"),\r\n  payouts: (status?: string) => getAuthJSON(`/affiliate/payouts${status ? `?status_filter=${encodeURIComponent(status)}` : \"\"}`),\r\n  requestPayout: (month?: string, percent = 5) => postAuthJSON(\"/affiliate/payouts/request\", { month, percent }),\r\n  updateProfile: (body: any) => postAuthJSON(\"/affiliate/profile\", body),\r\n};\r\n\r\nexport const AdminAPI = {\r\n  pharmacies: (page = 1, pageSize = 20, q?: string) =>\r\n    getAuthJSON(`/admin/pharmacies?page=${page}&page_size=${pageSize}${q ? `&q=${encodeURIComponent(q)}` : \"\"}`),\r\n  affiliates: (page = 1, pageSize = 20, q?: string) =>\r\n    getAuthJSON(`/admin/affiliates?page=${page}&page_size=${pageSize}${q ? `&q=${encodeURIComponent(q)}` : \"\"}`),\r\n  approvePharmacy: (tenantId: string, applicationId: number) =>\r\n    postAuthJSON(`/admin/pharmacies/${applicationId}/approve`, {}, tenantId),\r\n  rejectPharmacy: (tenantId: string, applicationId: number) =>\r\n    postAuthJSON(`/admin/pharmacies/${applicationId}/reject`, {}, tenantId),\r\n  verifyPayment: (tenantId: string, code?: string | null) =>\r\n    postAuthJSON(`/admin/payments/verify`, { code: code || null }, tenantId),\r\n  rejectPayment: (tenantId: string, code?: string | null) =>\r\n    postAuthJSON(`/admin/payments/reject`, { code: code || null }, tenantId),\r\n  approveAffiliate: (userId: number) => postAuthJSON(`/admin/affiliates/${userId}/approve`, {}),\r\n  rejectAffiliate: (userId: number) => postAuthJSON(`/admin/affiliates/${userId}/reject`, {}),\r\n  listAffiliatePayouts: (status?: string) =>\r\n    getAuthJSON(`/admin/affiliate/payouts${status ? `?status=${encodeURIComponent(status)}` : \"\"}`),\r\n  markPayoutPaid: (payoutId: number) => postAuthJSON(`/admin/affiliate/payouts/${payoutId}/mark-paid`, {}),\r\n  approvePayout: (payoutId: number) => postAuthJSON(`/admin/affiliate/payouts/${payoutId}/approve`, {}),\r\n  usage: (days = 30) => getAuthJSON(`/admin/usage?days=${days}`),\r\n  audit: (params?: { tenant_id?: string; action?: string; limit?: number }) =>\r\n    getAuthJSON(\r\n      `/admin/audit${(() => {\r\n        const qs = new URLSearchParams();\r\n        if (params?.tenant_id) qs.set(\"tenant_id\", params.tenant_id);\r\n        if (params?.action) qs.set(\"action\", params.action);\r\n        if (params?.limit) qs.set(\"limit\", String(params.limit));\r\n        const s = qs.toString();\r\n        return s ? `?${s}` : \"\";\r\n      })()}`,\r\n    ),\r\n};\r\n\r\nexport const StaffAPI = {\r\n  createCashier: (tenantId: string, body: any) => postAuthJSON(\"/staff\", body, tenantId),\r\n  list: (tenantId: string) => getAuthJSON(\"/staff\", tenantId),\r\n  update: (tenantId: string, userId: number, body: { is_active?: boolean }) =>\r\n    authFetch(`/staff/${userId}`, { method: \"PATCH\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify(body) }, true, tenantId)\r\n      .then(async (res)=>{ if (!res.ok) { const t = await res.text(); throw new Error(t || `HTTP ${res.status}`); } return res.json(); }),\r\n  remove: (tenantId: string, userId: number) =>\r\n    authFetch(`/staff/${userId}`, { method: \"DELETE\" }, true, tenantId)\r\n      .then(async (res)=>{ if (!res.ok) { const t = await res.text(); throw new Error(t || `HTTP ${res.status}`); } return res.json(); }),\r\n};\r\n\r\nexport const UploadAPI = {\r\n  uploadKyc: async (file: File): Promise<{ path: string; size: number; filename: string }> => {\r\n    const fd = new FormData();\r\n    fd.append(\"file\", file);\r\n    return await postMultipart(`/uploads/kyc`, fd);\r\n  },\r\n};\r\n\r\nexport const PharmaciesAPI = {\r\n  list: (page = 1, pageSize = 20, q?: string) =>\r\n    getAuthJSON(`/pharmacies?page=${page}&page_size=${pageSize}${q ? `&q=${encodeURIComponent(q)}` : \"\"}`),\r\n  get: (id: number) => getAuthJSON(`/pharmacies/${id}`),\r\n  update: (id: number, body: { name?: string; address?: string }) =>\r\n    authFetch(`/pharmacies/${id}`, { method: \"PATCH\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify(body) })\r\n      .then(async (res)=>{ if (!res.ok) { const t = await res.text(); throw new Error(t || `HTTP ${res.status}`); } return res.json(); }),\r\n};\r\n\r\nexport const ChatAPI = {\r\n  listThreads: (tenantId: string) => getAuthJSON(`/chat/threads`, tenantId),\r\n  createThread: (tenantId: string, title: string) => postAuthJSON(`/chat/threads`, { title }, tenantId),\r\n  listMessages: (tenantId: string, threadId: number) => getAuthJSON(`/chat/threads/${threadId}/messages`, tenantId),\r\n  sendMessage: (tenantId: string, threadId: number, prompt: string) =>\r\n    postAuthJSON(`/chat/threads/${threadId}/messages`, { prompt }, tenantId),\r\n  usage: (tenantId: string, days = 30) => getAuthJSON(`/chat/usage?days=${days}`, tenantId),\r\n  sendStream: async (\r\n    tenantId: string,\r\n    threadId: number,\r\n    prompt: string,\r\n    onEvent: (evt: { event: string; data?: any }) => void,\r\n  ): Promise<void> => {\r\n    const res = await authFetch(`/chat/threads/${threadId}/messages/stream`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ prompt }),\r\n    }, true, tenantId);\r\n    if (!res.ok || !res.body) {\r\n      const t = await res.text().catch(()=>\"\");\r\n      throw new Error(t || `HTTP ${res.status}`);\r\n    }\r\n    const reader = res.body.getReader();\r\n    const decoder = new TextDecoder();\r\n    let buf = \"\";\r\n    while (true) {\r\n      const { done, value } = await reader.read();\r\n      if (done) break;\r\n      buf += decoder.decode(value, { stream: true });\r\n      let idx;\r\n      while ((idx = buf.indexOf(\"\\n\\n\")) !== -1) {\r\n        const chunk = buf.slice(0, idx).trim();\r\n        buf = buf.slice(idx + 2);\r\n        if (chunk.startsWith(\"data:\")) {\r\n          try {\r\n            const jsonStr = chunk.slice(5).trim();\r\n            const obj = JSON.parse(jsonStr);\r\n            onEvent(obj);\r\n          } catch {}\r\n        }\r\n      }\r\n    }\r\n  },\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 382, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/gugu-gaga-/front_end/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS;IAAG,IAAA,IAAA,OAAA,UAAA,QAAA,AAAG,SAAH,UAAA,OAAA,OAAA,GAAA,OAAA,MAAA;QAAG,OAAH,QAAA,SAAA,CAAA,KAAuB;;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 403, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/gugu-gaga-/front_end/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\r\n        outline:\r\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost:\r\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\r\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\r\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\r\n        icon: \"size-9\",\r\n        \"icon-sm\": \"size-8\",\r\n        \"icon-lg\": \"size-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,KASb;QATa,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF,GATa;IAUd,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS","debugId":null}},
    {"offset": {"line": 469, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/gugu-gaga-/front_end/app/%28dashboard%29/layout.tsx"],"sourcesContent":["// Dashboard layout (sidebar, nav)\r\n\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { API_BASE, getAccessToken, getAuthJSON } from \"@/utils/api\";\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\ntype Me = {\r\n  id: string;\r\n  email: string;\r\n  username: string;\r\n  role?: string;\r\n  tenant_id?: string;\r\n  roles?: { role: { name: string } }[];\r\n};\r\n\r\nexport default function DashboardLayout({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(true);\r\n  const [user, setUser] = useState<Me | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [subBanner, setSubBanner] = useState<{ inactive: boolean; in_trial: boolean; trial_days_left?: number } | null>(null);\r\n  const roleName = (user?.role || user?.roles?.[0]?.role?.name || \"\").toLowerCase();\r\n  const isAffiliate = roleName === \"affiliate\";\r\n\r\n  useEffect(() => {\r\n    let active = true;\r\n    async function check() {\r\n      try {\r\n        const me = await getAuthJSON<Me>(\"/auth/me\");\r\n        if (!active) return;\r\n        setUser(me);\r\n        // One-time referral track\r\n        try {\r\n          const ref = typeof window !== \"undefined\" ? localStorage.getItem(\"referral_code\") : null;\r\n          if (ref && me?.id) {\r\n            const token = getAccessToken();\r\n            await fetch(`${API_BASE}/affiliate/referrals/track`, {\r\n              method: \"POST\",\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n                ...(me?.tenant_id ? { \"X-Tenant-ID\": me.tenant_id } : {}),\r\n              },\r\n              body: JSON.stringify({ referral_code: ref, referred_user_id: me.id }),\r\n            });\r\n            localStorage.removeItem(\"referral_code\");\r\n          }\r\n        } catch {}\r\n      } catch (e: any) {\r\n        if (!active) return;\r\n        setError(\"Unauthorized\");\r\n        router.replace(\"/login\");\r\n      } finally {\r\n        if (active) setLoading(false);\r\n      }\r\n    }\r\n    // If no token, redirect immediately\r\n    if (typeof window !== \"undefined\" && !localStorage.getItem(\"access_token\")) {\r\n      setLoading(false);\r\n      router.replace(\"/login\");\r\n      return;\r\n    }\r\n    check();\r\n    // Fetch subscription status to show banner if inactive (non-blocking UX hint)\r\n    (async () => {\r\n      try {\r\n        if (isAffiliate) return;\r\n        const token = getAccessToken();\r\n        const tenant = typeof window !== \"undefined\" ? localStorage.getItem(\"tenant_id\") : null;\r\n        if (!token || !tenant) return;\r\n        const res = await fetch(`${API_BASE}/subscriptions/current?tenant_id=${encodeURIComponent(tenant)}`, { headers: { Authorization: `Bearer ${token}` } });\r\n        if (!res.ok) return;\r\n        const data = await res.json();\r\n        const inactive = !data?.in_trial && String(data?.status || \"\").toLowerCase() !== \"active\";\r\n        setSubBanner({ inactive, in_trial: !!data?.in_trial, trial_days_left: data?.trial_days_left });\r\n      } catch {}\r\n    })();\r\n    return () => {\r\n      active = false;\r\n    };\r\n  }, [router]);\r\n\r\n  function logout() {\r\n    if (typeof window !== \"undefined\") {\r\n      localStorage.removeItem(\"access_token\");\r\n      localStorage.removeItem(\"refresh_token\");\r\n    }\r\n    router.replace(isAffiliate ? \"/auth/affiliate-login\" : \"/login\");\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"animate-pulse text-gray-500\">Loading dashboard...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return null; // Redirected\r\n  }\r\n\r\n  return (\r\n    <Shell user={user} onLogout={logout}>\r\n      {subBanner?.inactive && (\r\n        <div className=\"mb-4 p-3 border rounded bg-amber-50 text-amber-800 text-sm\">\r\n          Subscription inactive. Please go to Billing to activate and restore full access.\r\n          <a href=\"/dashboard/settings\" className=\"ml-3 underline\">Go to Billing</a>\r\n        </div>\r\n      )}\r\n      {children}\r\n    </Shell>\r\n  );\r\n}\r\n\r\nfunction Shell({\r\n  user,\r\n  onLogout,\r\n  children,\r\n}: {\r\n  user: Me | null;\r\n  onLogout: () => void;\r\n  children: React.ReactNode;\r\n}) {\r\n  const pathname = usePathname();\r\n  const roleName = (user?.role || user?.roles?.[0]?.role?.name || \"\").toLowerCase();\r\n  const isOwnerOrManager = roleName === \"owner\" || roleName === \"manager\";\r\n  const isAffiliate = roleName === \"affiliate\";\r\n  const isAdmin = roleName === \"admin\";\r\n\r\n  const nav = isAffiliate\r\n    ? [{ href: \"/dashboard/affiliate\", label: \"Affiliate Dashboard\" }]\r\n    : isAdmin\r\n    ? [\r\n        { href: \"/dashboard/admin\", label: \"Admin Overview\" },\r\n        { href: \"/dashboard/admin/users\", label: \"Users\" },\r\n        { href: \"/dashboard/admin/pharmacies\", label: \"Pharmacies\" },\r\n        { href: \"/dashboard/admin/affiliates\", label: \"Affiliates\" },\r\n        { href: \"/dashboard/admin/payouts\", label: \"Payouts\" },\r\n        { href: \"/dashboard/admin/audit\", label: \"Audit Log\" },\r\n      ]\r\n    : [\r\n        { href: \"/dashboard\", label: \"Overview\" },\r\n        { href: \"/dashboard/inventory\", label: \"Inventory\" },\r\n        { href: \"/dashboard/pos\", label: \"POS\" },\r\n        { href: \"/dashboard/affiliate\", label: \"Affiliate\" },\r\n        ...(isOwnerOrManager ? [{ href: \"/dashboard/admin/payouts\", label: \"Payouts\" }] : []),\r\n        { href: \"/dashboard/settings\", label: \"Settings\" },\r\n        { href: \"/dashboard/about\", label: \"About\" },\r\n      ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen grid grid-cols-12\">\r\n      <aside className=\"col-span-12 md:col-span-2 border-r p-4 space-y-6 bg-white\">\r\n        <div className=\"space-y-1\">\r\n          <div className=\"text-lg font-semibold\">\r\n            {isAffiliate ? \"Affiliate Portal\" : isAdmin ? \"Admin Console\" : \"Zemen Dashboard\"}\r\n          </div>\r\n          <div className=\"text-xs text-gray-500\">\r\n            {isAffiliate ? \"Track referrals & payouts\" : isAdmin ? \"Manage platform data\" : \"Secure area\"}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"space-y-1 text-sm\">\r\n          {user ? (\r\n            <div>\r\n              <div className=\"font-medium\">{user.username}</div>\r\n              <div className=\"text-xs text-gray-500 truncate\">{user.email}</div>\r\n              {roleName && <div className=\"text-2xs uppercase text-gray-400\">{roleName}</div>}\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n\r\n        <nav className=\"space-y-1\">\r\n          {nav.map((item) => {\r\n            const active = pathname === item.href || pathname?.startsWith(item.href + \"/\");\r\n            return (\r\n              <Link\r\n                key={item.href}\r\n                href={item.href}\r\n                className={\r\n                  \"block rounded px-3 py-2 text-sm \" +\r\n                  (active\r\n                    ? \"bg-emerald-50 text-emerald-700 border border-emerald-200\"\r\n                    : \"hover:bg-gray-50 text-gray-700\")\r\n                }\r\n              >\r\n                {item.label}\r\n              </Link>\r\n            );\r\n          })}\r\n        </nav>\r\n\r\n        <div className=\"pt-4\">\r\n          <Button variant=\"outline\" onClick={onLogout} className=\"w-full text-red-600 border-red-200 hover:bg-red-50\">\r\n            Logout\r\n          </Button>\r\n        </div>\r\n      </aside>\r\n\r\n      <div className=\"col-span-12 md:col-span-10 flex flex-col min-h-screen bg-gray-50\">\r\n        <header className=\"border-b bg-white p-4 flex items-center justify-between\">\r\n          <div className=\"font-medium\">{nav.find(n => pathname?.startsWith(n.href))?.label || \"Overview\"}</div>\r\n          {!isAffiliate && !isAdmin && <div className=\"text-sm text-gray-500\">Tenant: {user?.tenant_id || \"N/A\"}</div>}\r\n        </header>\r\n        <main className=\"p-6 flex-1\">{children}</main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}